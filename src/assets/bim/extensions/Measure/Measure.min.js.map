{"version":3,"sources":["webpack://Autodesk.Extensions.[name]/webpack/bootstrap","webpack://Autodesk.Extensions.[name]/./node_modules/css-loader/lib/url/escape.js","webpack://Autodesk.Extensions.[name]/./node_modules/css-loader/lib/css-base.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/Measure.css?7049","webpack://Autodesk.Extensions.[name]/./extensions/Measure/Measure.css","webpack://Autodesk.Extensions.[name]/./extensions/Measure/res/icon-spinner-sm.svg","webpack://Autodesk.Extensions.[name]/./extensions/Measure/Calibration.css?c2b7","webpack://Autodesk.Extensions.[name]/./extensions/Measure/Calibration.css","webpack://Autodesk.Extensions.[name]/./node_modules/style-loader/lib/addStyles.js","webpack://Autodesk.Extensions.[name]/./node_modules/style-loader/lib/urls.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/MeasurementsManager.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/Indicator.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/PolygonCentroid.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/MeasureToolIndicator.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/MeasureTool.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/CalibrationToolIndicator.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/CalibrationPanels.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/CalibrationTool.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/MagnifyingGlass.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/MeasureToolbar.js","webpack://Autodesk.Extensions.[name]/./extensions/Measure/Measure.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","url","test","slice","replace","useSourceMap","list","toString","this","map","item","content","cssMapping","btoa","sourceMapping","sourceMap","unescape","encodeURIComponent","JSON","stringify","sourceURLs","sources","source","sourceRoot","concat","join","cssWithMappingToString","mediaQuery","alreadyImportedModules","length","id","push","options","transform","undefined","locals","escape","fn","memo","stylesInDom","isOldIE","window","document","all","atob","apply","arguments","getTarget","target","parent","querySelector","getElement","styleTarget","HTMLIFrameElement","contentDocument","head","e","singleton","singletonCounter","stylesInsertedAtTop","fixUrls","addStylesToDom","styles","domStyle","refs","j","parts","addStyle","listToStyles","newStyles","base","part","css","media","insertStyleElement","style","insertInto","Error","lastStyleElementInsertedAtTop","insertAt","nextSibling","insertBefore","appendChild","firstChild","before","removeStyleElement","parentNode","removeChild","idx","indexOf","splice","createStyleElement","createElement","attrs","type","nonce","getNonce","addAttrs","el","keys","forEach","setAttribute","obj","update","remove","result","default","styleIndex","applyToSingletonTag","URL","createObjectURL","revokeObjectURL","Blob","link","rel","createLinkElement","updateLink","href","applyToTag","newObj","DEBUG","newList","mayRemove","textStore","replaceText","index","replacement","filter","Boolean","styleSheet","cssText","cssNode","createTextNode","childNodes","autoFixUrls","convertToAbsoluteUrls","blob","oldSrc","location","baseUrl","protocol","host","currentDir","pathname","fullMatch","origUrl","newUrl","unquotedOrigUrl","trim","$1","MeasureCommon","Autodesk","Viewing","MeasurementsManager","viewer","init","restoredMeasurementData","proto","getCurrentMeasurement","currentMeasurement","getRestoredMeasurementData","selectMeasurementById","measurement","measurementsList","changeCurrentMeasurement","createMeasurement","measurementType","measurementsCounter","Measurement","createMeasurementFromData","measurementData","createIndicatorCb","preparePicksCb","Function","initPicks","picks","MeasurementTypes","MEASUREMENT_AREA","closedArea","isRestored","convertUnits","square","Private","sharedUnits","model","getUnitString","sharedCalibrationFactor","parseFloat","distanceXYZ","distance","distanceX","deltaX","distanceY","deltaY","distanceZ","deltaZ","area","angle","indicator","renderFromPoints","points","intersectPoints","pointData","intersection","getIntersectPoints","changeAllEndpointsEditableStyle","enableSelectionAreas","enableLabelsTouchEvents","activatePicks","pickData","pick","pickPoint","THREE","Vector3","x","y","z","modelId","impl","findModel","modelData","getData","add","globalOffset","clone","viewportId","viewportIndex2d","hasTopology","getPick","pointInfo","getGeometry","geomType","SnapType","SNAP_VERTEX","geomVertex","intersectPoint","dispatchEvent","Events","MEASUREMENT_CHANGED_EVENT","data","removeCurrentMeasurement","reset","destroy","av","Indicator","tool","setGlobalManager","globalManager","snapper","getSnapper","materialExtensionLine","materialExtensionFace","extensionLines","extensionFaces","grayOutPlane","materialPoint","materialLine","materialAngle","materialAngleOutline","materialGreyOutPlane","materialFace","angleArc","angleOutline","showMeasureResult","visibleLabels","overlayName","xAxis","autocam","getWorldRightVector","yAxis","getWorldUpVector","zAxis","getWorldFrontVector","getPolygonVisualCenter","polygon","Cell","h","inside","minDistSq","Infinity","k","ring","len","a","b","Math","min","getSegDistSq","sqrt","pointToPolygonDist","max","SQRT2","px","py","dx","dy","TinyQueue","compare","_down","_up","pop","top","peek","pos","current","halfLength","left","right","best","centroid","multiplyScalar","getCentroidOfPolygon","minX","minY","maxX","maxY","width","height","cellSize","cellQueue","bestCell","f","getCentroidCell","bboxCell","cell","GlobalManagerMixin","updateDistance","updateAngle","clear","updateLabelsPosition","endpoints","createEndpoint","position","showClick","renderRubberbandFromPoints","render","hasPick","renderPick","renderRubberband","changeEndpointOnEditStyle","endpointNumber","isEditing","handleResize","setNoTopology","setFetchingTopology","setTopologyAvailable","clientToCanvasCoords","event","rect","getCanvasBoundingClientRect","res","canvasX","center","canvasY","pointers","clientX","clientY","initLabelMobileGestures","label","pointNumber","magnifyingGlass","toolController","getTool","hammer","Hammer","Manager","recognizers","GestureRecognizers","drag","singletap","handlePointerEventMouse","inputClass","isIE11","PointerEventInput","TouchInput","onSingleTapBinded","onMouseDown","editEndpoint","onDragStartBinded","editByDrag","handlePressHold","handleGesture","onDragMoveBinded","onDragEndBinded","handleButtonUp","on","clearLabelMobileGestures","off","updateVisibleLabelsArray","isVisible","hideEndpoints","endpoint","hideLabel","showEndpoints","showLabel","safeToggle","changeEndpointEditableStyle","isEditable","changeAllEndpointsOnEditStyle","hideLabelsOutsideOfView","is2d","point","show","navigation","isPointVisible","classList","contains","toggle","pickNumber","getActivePointIndex","hideClick","renderEndpointGeometry","geometry","getSnapResultPosition","drawEdgeAsCylinder","geom","material","linewidth","cylinderGeometry","cylinder","edge","vertices","cylinderMesh","setCylinderScale","drawDashedLine","p1","p2","dashSize","gapSize","Geometry","line","subVectors","lineLength","lineDirection","normalize","currLength","addVectors","getNewCylinderGeometry","addMultipleOverlays","drawLineAsCylinder","addOverlay","CylinderGeometry","pointX","pointY","direction","orientation","Matrix4","lookAt","Object3D","up","multiply","set","Mesh","applyMatrix","lmv_line_width","scale","nearestPointInPointToSegment","getPosition","setScale","navapi","camera","getCamera","isPerspective","sub","getEyeVector","fov","getVerticalFov","tan","degToRad","getScreenViewport","alignLabelWithLine","offset","camUpVector","getCameraUpVector","cameraAngle","angleTo","PI","atan2","abs","isTouchDevice","endPoint","removeEventListener","isSafari","onMouseClickBinded","mousewheel","MEASUREMENT_DISTANCE","start","end","renderDistanceMeasurementFromPoints","MEASUREMENT_ANGLE","renderAngleMeasurementFromPoints","renderAreaMeasurementFromPoints","previewsPick","activePick","renderDistanceMeasurement","renderAngleMeasurement","renderAreaMeasurement","initMouseEvent","pointerType","addEventListener","MeasureToolIndicator","measureTool","lines","xyz","axis","createLineMaterial","className","iconText","segments","dashedLine","simple","angleLabel","areaLabel","labels","isLeaflet","topologyStatus","TOPOLOGY_NOT_AVAILABLE","tmpVector","surfaceColor","MeshBasicMaterial","color","parseInt","opacity","transparent","depthTest","depthWrite","side","DoubleSide","constructor","TOPOLOGY_FETCHING","_tipHeight","_tipWidth","isLeftIntersect","other","isRightIntersect","isMiddleIntersect","moveRight","currentLabel","currentRect","otherRect","moveDown","bottom","setValueMeasurementLabelText","strValue","div","textContent","setDeltaMeasurementLabelText","setVisibilityMeasurementLabelSpinner","display","MeasureTool","sharedMeasureConfig","_viewer","_names","_sharedMeasureConfig","Extensions","Measure","_active","_isDragging","_endpointMoved","_activePoint","_consumeSingleClick","_singleClickHandled","_downX","_downY","_isolateMeasure","_measurementsManager","_currentMeasurement","_onIndicatorCreatedCB","_snapper","_isPressing","_picksBackup","_cursorPosition","_closeAreaSnapRange","_preMeasureState","_measurementType","getActivePick","getMaxNumberOfPicks","countPicks","getPreviousPick","noPicksSet","allPicksSet","enableMeasurementsTouchEvents","isNoPicksSet","getPickData","clonePicks","picksData","parse","snapToFirstPick","currentPick","forceSnap","firstPick","firstPickPoint","firstPickPosition","project","currentPickPoint","currentPickPosition","distanceTo","onMouseMove","copyTo","showResult","hasResult","computeResult","getMeasurementType","types","CALIBRATION","enable","areAllPicksSet","register","deregister","deactivate","isActive","getNames","getName","getPriority","getCursor","getCurrentMeasurementRaw","getMeasurementsManager","startNewMeasurement","attachIndicator","changeMeasurementType","activate","isEditingEndpoint","pauseHighlight","clearSelection","getState","objectSet","activateTool","onMeasurementChangedBinded","onMeasurementChanged","CAMERA_CHANGE_EVENT","onCameraChange","SHOW_ALL_EVENT","onShowAllEvent","clearIsolate","clearCurrentMeasurement","deactivateTool","getUnits","units","setUnits","DISPLAY_UNITS_CHANGED","updateResults","getPrecision","precision","setPrecision","getDistanceXYZ","getDistanceAux","getDistanceX","getDistanceY","getDistanceZ","measurementDistance","calibrationFactor","formatValueWithUnits","getAngle","String","fromCharCode","getArea","setMeasurements","measurements","getMeasureType","measureData","Array","isArray","unitType","deselectAllMeasurements","getMeasurement","geomTypes","from","to","getMeasurementPoints","getMeasurementList","measurementList","clearPick","updateViewportId","setIsolateMeasure","isolateMeasurement","defaultModelId","isolationGroups","snapNode","isolationSet","modelInstance","ids","visibilityManager","aggregateIsolate","restoreState","undoEditEndpoint","setSimple","unfocusLabels","isComplete","measurementId","snapResult","getSnapResult","isValid","isMobileDevice","_handleMouseEvent","setPick","focusLabels","deleteCurrentMeasurement","deleteCurrentPick","count","setViewportId","viewport","correctPickPosition","active","passive","correctPerpendicularPicks","nextPick","valid","isSnapped","copyResults","container","getBoundingClientRect","inverseProject","lastPick","_doConsumeSingleClick","renderSucceeded","hasEqualPicks","measurementComplete","handleButtonDown","button","ctrlKey","metaKey","shiftKey","altKey","handleMouseMove","restoreMouseListeners","controller","enableMouseButtons","handleSingleClick","updateScale","clearOverlays","clearSnapped","handleDoubleClick","handleSingleTap","handleDoubleTap","handleKeyDown","keyCode","KeyCode","BACKSPACE","DELETE","currLabel","onSelectionAreaClickedBinded","onSelectionAreaClicked","createMeasurementLabel","onCameraChangeBinded","handleButtonUpBinded","addWindowEventListener","createSnapResultLabel","xy","visible","floor","clientHeight","clientWidth","p1Projected","p2Projected","invalidate","xyzDirection","itemDirection","cross","dot","needToStackLabels","labelsStacked","backupPositions","labelsOverlapDetection","stackLabels","staticLabel","labelsList","dynamicLabel","moved","staticRect","dynamicRect","causeStacking","topLabel","space","drawXYZLine","self","tmpVec","normal","drawLineSegment","tips","drawTip","redrawDashedLine","removeMultipleOverlays","p1Scale","isDashedLine","drawSurface","cset","CompGeom","ContourSet","addContour","triangulate","triangulationFailed","bufferGeometry","toPolygonMesh","face","drawSegmentAndPush","pickPositions","firstPoint","position1","position2","isEqualVectors","EPSILON","showAreaLabel","updateArea","clearAngleMeshes","removeOverlay","drawAngle","ep1","ep2","midPoint","MeshPhongMaterial","ambient","createCommonOverlay","radius","circleGeometry","CircleGeometry","arc","V","updateMatrixWorld","vA","vB","applyMatrix4","matrixWorld","v1","v2","v3","v4","ra","a13","a14","a23","a24","rotWorldMatrix","makeRotationAxis","matrix","rotation","setFromRotationMatrix","outlineGeometry","copy","round","dir","crossVectors","showAngleLabel","createDistanceLabel","setVisibilityMeasurementLabelText","_document","getDocument","axisIcon","innerText","updateLine","x1","y1","z1","x2","y2","z2","showAxis","getAlignedUpVector","isParallel","displayAxis","setTimeout","setWidth","getWidth","is3d","maxWidth","setLineVisible","pointerEvents","setLabelsZIndex","zIndex","tip","clearSelectionAreas","clearOverlay","selectionArea","overlayScenes","removeOverlayScene","removeWindowEventListener","clearXYZLine","segment","spinner","text","delta","label_icon","hitArea","createSelectionArea","updateSelectionArea","v","Vector2","_selectorAreaSize","transformOrigin","element","getElementById","CalibrationToolIndicator","calibrationTool","calibrationLabel","rubberbandDefaultMaterial","rubberbandSnappedMaterial","rubberbandTipMaterial","clearRubberband","updateLabelValue","i18n","translate","changeLabelClickableMode","clickable","showAddCalibrationLabel","onClick","showPanel","renderCalibrationLabel","mid","labelPosition","drawMeasurementLineTip","flip","tipMaterial","lineNormal","lineMaterial","isPerpendicular","ave","avp","avu","UI","DockingPanel","ViewerPanelMixin","_gDocument","getGlobal","CalibrationPanel","title","addFooter","parentContainer","resize","closer","setVisible","clearSize","heightAdjustment","marginTop","createScrollContainer","calibrationMenu","scrollContainer","table","tbody","row","insertRow","requestedSizeTextbox","autofocus","split","updateLabel","ESCAPE","requestedSize","cursorIndex","selectionStart","isSimple","unitList","selectedIndex","simpleInput","isPositiveNumber","isSimpleDecimal","calculatePrecision","getMaxPrecision","preventDefault","insertCell","caption","matches","unitNames","OptionDropDown","paddingLeft","paddingRight","setCalibration","requestedUnits","calibrate","match","isNaN","uninitialize","findUnits","selectedUnits","getCurrentUnits","setPanelValue","size","setSelectedIndex","parsedNumber","UnitParser","parsePositiveNumber","updatePanelPosition","labelOffset","cornerX","cornerY","rubberbandDirection","pow","canvas","CalibrationRequiredDialog","measureExt","dialogBox","calibrateNow","buttonsWrapper","cancel","calibrateNowButton","enableCalibrationTool","CalibrationTool","_measurement","_options","_maxPrecision","maxPrecision","_isCalibrated","_distance","_calibrationTaken","_selectedSize","_selectedUnits","_selectedP1","_selectedP2","_waitingForInput","_calibrationPanel","_hasUI","GuiViewer3D","addPanel","screenSizeChangedBinded","screenSizeChanged","removePanel","parsedRequestedSize","VIEWER_RESIZE_EVENT","hidePanel","clearAllPicks","setCalibrationFactor","getCalibrationFactor","isCalibrationValid","currentSize","defualtPrecision","requestedPrecision","getExtension","FINISHED_CALIBRATION","scaleFactor","calibrateByScale","requestedScale","CLOSE_CALIBRATION_PANEL_EVENT","_window","getWindow","focus","onKeyUp","OPEN_CALIBRATION_PANEL_EVENT","isCalibrated","CLEAR_CALIBRATION_SIZE_EVENT","clearMeasurement","repickEndpoint","hasPreviousPick","MagnifyingGlass","_magnifyingGlassCanvas","_imageData","_imageBuffer","_clientX","_clientY","_needsClear","updateMagnifyingGlassBinded","updateMagnifyingGlass","pixelRatio","devicePixelRatio","normlizedDiameter","_radius","diameter","getContext","createImageData","ceil","Uint8Array","buffer","ctx","gl","readPixels","RGBA","UNSIGNED_BYTE","putImageData","drawImage","setGlassPosition","clearMagnifyingGlass","requestUpdate","hasEventListener","RENDER_PRESENTED_EVENT","once","drawMagnifyingGlass","handleWheelInput","MeasureToolbar","measureExtension","buttonsList","toolbar","getToolbar","navigationBar","getControl","TOOLBAR","NAVTOOLSID","toolbarOptions","measureToolbar","ControlGroup","MEASURETOOLSID","addControl","measureSimpleDistanceBtn","Button","setToolTip","setIcon","State","ACTIVE","measureAngleBtn","measureAreaBtn","calibrationToolBtn","separator","deleteBtn","settingsBtn","settingsControlPanel","setButtonActive","setButtonInactive","root","initialIndex","getDisplayUnit","shift","toUnits","setupPrecision","logger","track","category","precisionList","isolate","OptionCheckbox","checked","updateSettingsPanel","setVisibility","disableUnitOption","measureDoneBtn","doneText","cancelLabel","btnContainer","iconEle","getElementsByClassName","exitMeasurementMode","closeToolbar","removeFromParent","enableMeasureTool","toggleVisible","viewerToolbarContainer","viewerContainerChildrenCount","children","MODELTOOLSID","measurementToolbarButton","setState","INACTIVE","deactivateAllButtons","activateButtonByType","dropdownElement","lastChild","precisions","elem","disabled","visibility","avem","AutodeskNamespace","DEFAULT_MEASUREMENT_TYPE","MeasureExtension","Extension","modes","_onModelLoaded","load","loadExtension","hasUI","escapeHotkeyId","measureToolOptions","onCloseCallback","snapperOptions","forceCalibrate","Snapping","Snapper","renderSnappedTopology","registerTool","calibration","onFinishedCalibration","activateInitiator","MODEL_ROOT_LOADED_EVENT","onModelRemoved","DISABLED","onModelAdded","getVisibleModels","MODEL_ADDED_EVENT","MODEL_REMOVED_EVENT","calibrationUnits","unload","destroyUI","deregisterTool","unloaded","setActive","getUnitOptions","getPrecisionOptions","isFractional","getDefaultUnit","openCalibrationRequiredDialog","initiator","CALIBRATION_REQUIRED_EVENT","FINISHED_CALIBRATION_FOR_DIMENSION_EVENT","getCalibration","activeStatus","success","enterMeasurementMode","console","warn","selectedTool","isPdf","checkAndFetchTopology","OPEN_TOOL_AFTER_CALIBRAION","UNITS_CALIBRATION_STARTS_EVENT","_measurementMode","MEASUREMENT_MODE_ENTER","navigationControls","measureControls","measureButtonId","getId","removeControl","centerToolBar","MEASUREMENT_MODE_LEAVE","onToolbarCreated","modelTools","state","hotkeys","keycodes","onRelease","getHotkeyManager","pushHotkeys","_checkedTopology","modelHasTopology","fetchTopology","then","topoData","err","log","popHotkeys","setFreeMeasureMode","allow","setSnapToPixel","theExtensionManager","registerExtension"],"mappings":"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","file":"Measure/Measure.min.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 544);\n","module.exports = function escape(url) {\n    if (typeof url !== 'string') {\n        return url\n    }\n    // If url is already wrapped in quotes, remove them\n    if (/^['\"].*['\"]$/.test(url)) {\n        url = url.slice(1, -1);\n    }\n    // Should url be wrapped?\n    // See https://drafts.csswg.org/css-values-3/#urls\n    if (/[\"'() \\t\\n]/.test(url)) {\n        return '\"' + url.replace(/\"/g, '\\\\\"').replace(/\\n/g, '\\\\n') + '\"'\n    }\n\n    return url\n}\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n","\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./Measure.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./Measure.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./Measure.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","var escape = require(\"../../node_modules/css-loader/lib/url/escape.js\");\nexports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".adsk-viewing-viewer .measure-length:hover.measure-length.enable-hover{box-shadow:0 0 16px 3px rgba(0,117,210,0.7);-webkit-box-shadow:0 0 16px 3px rgba(0,117,210,0.7);-moz-box-shadow:0 0 16px 3px rgba(0,117,210,0.7)}.adsk-viewing-viewer .measure-length{display:none;position:absolute;height:19px;left:0px;top:0px;padding:2px 0 2px 0;background-color:#009bff;box-shadow:0px 1px 3px 1px rgba(0,0,0,0.25);color:#f4f4f4;font-size:12px;text-align:center;line-height:1.2;white-space:nowrap;border-radius:8px;pointer-events:none;cursor:pointer;z-index:2;-webkit-tap-highlight-color:rgba(0,0,0,0)}.adsk-viewing-viewer .measure-length.visible{display:block}.adsk-viewing-viewer .measure-length.fetching-topology{background-color:rgba(34,34,34,0.8);box-shadow:0 0.5px 1.5px 0 rgba(0,0,0,0.3)}.adsk-viewing-viewer .measure-length-text{display:inline-block;margin:0 5px 0 5px;vertical-align:middle;font-size:16px;pointer-events:none}.adsk-viewing-viewer .measure-delta-text{margin:0 5px 0 5px;align-self:center;font-size:14px;overflow:hidden;white-space:nowrap;height:16px;line-height:16px;vertical-align:middle;pointer-events:none}.adsk-viewing-viewer .measure-length-button{display:inline-block;width:16px;height:16px;font-size:16px;float:right;color:#FFFFFF;opacity:0.7}.adsk-viewing-viewer .measure-length-button:hover{background-color:rgba(166,194,255,0.7);-webkit-transition:all 0.2s ease;-moz-transition:all 0.2s ease;-ms-transition:all 0.2s ease;-o-transition:all 0.2s ease;transition:all 0.2s ease}.adsk-viewing-viewer .measure-label:hover.measure-label.enable-hover,.adsk-viewing-viewer .measure-label.on-edit{box-shadow:0 0 4px 4px #0d69ca;-webkit-box-shadow:0 0 4px 4px #0d69ca;-moz-box-shadow:0 0 4px 4px #0d69ca}.adsk-viewing-viewer .measure-label.editable{pointer-events:all}.adsk-viewing-viewer .measure-label{display:none;position:absolute;width:7px;height:7px;cursor:move;pointer-events:none;border-radius:100px}.adsk-viewing-viewer .measure-label-hit-area{display:inline-block;position:absolute;width:44px;height:44px;left:-22px;top:-22px;border-radius:100px;z-index:2}.adsk-viewing-viewer .measure-label-icon{display:inline-block;position:absolute;width:7px;height:7px;left:-2px;top:-2px;background-color:#009bff;border-style:solid;border-width:2px;border-color:#FFFFFF;border-radius:100px;box-shadow:0 2px 5px 0 #182A3D;z-index:2}.adsk-viewing-viewer .measure-label.visible{display:block}.adsk-viewing-viewer .measure-label-text{display:inline-block;margin:0px 5px 0px 5px;vertical-align:middle}.adsk-viewing-viewer .measure-horizontal-divider{height:1px;border-top:1px solid rgba(200,200,200,0.8)}.adsk-viewing-viewer .measure-submenu-select{display:block;position:relative;width:calc(100% - 40px);padding:10px 20px 0px 20px;opacity:0.3}.adsk-viewing-viewer .option-drop-down:disabled{opacity:0.3}.adsk-viewing-viewer .measure-submenu-selectlabel{position:relative;display:inline-block;padding-right:20px;padding-bottom:4px}.adsk-viewing-viewer .measure-results{position:relative;display:block;padding:5px 0px  10px 30px}.adsk-viewing-viewer .measure-result-label{display:inline-block;padding-right:10px}.adsk-viewing-viewer .measure-result-number{display:inline-block}.adsk-viewing-viewer .measure-delta-collapse{position:absolute;right:20px;display:inline-block;background-color:rgba(255,255,255,0.12);margin:0px 4px 0px 4px;padding:0px 4px 0px 4px;cursor:pointer;text-align:center}.adsk-viewing-viewer .measure-delta-collapse:hover{background-color:rgba(166,194,255,0.7);-webkit-transition:all 0.2s ease;-moz-transition:all 0.2s ease;-ms-transition:all 0.2s ease;-o-transition:all 0.2s ease;transition:all 0.2s ease}.adsk-viewing-viewer .measure-selection-repick{position:absolute;right:20px;display:inline-block;background-color:rgba(255,255,255,0.12);margin:4px 4px 4px 4px;padding:4px 4px 4px 4px;cursor:pointer;text-align:center}.adsk-viewing-viewer .measure-selection-repick:hover{background-color:rgba(166,194,255,0.7);-webkit-transition:all 0.2s ease;-moz-transition:all 0.2s ease;-ms-transition:all 0.2s ease;-o-transition:all 0.2s ease;transition:all 0.2s ease}.adsk-viewing-viewer .measure-restart{margin:10px 20px 15px 20px;padding:6px 10px 6px 10px;width:calc(100% - 55px);cursor:pointer;text-align:center;border-style:solid;border-width:1px;border-color:rgba(255,255,255,0.2);border-radius:3px}.adsk-viewing-viewer .docking-panel:hover .measure-restart{background-color:rgba(255,255,255,0.12)}.adsk-viewing-viewer .docking-panel .measure-restart:hover{background-color:rgba(166,194,255,0.7);-webkit-transition:all 0.2s ease;-moz-transition:all 0.2s ease;-ms-transition:all 0.2s ease;-o-transition:all 0.2s ease;transition:all 0.2s ease}.adsk-viewing-viewer .measure-panel-title{padding-top:0px;padding-left:20px;margin-top:10px}.adsk-viewing-viewer .measure-panel-title:hover{cursor:pointer}.adsk-viewing-viewer .measure-panel-title.collapsed{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkEwMDhBMzY4QTYyODExRTM5REY0Q0MwMTM3MTVFOTMzIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkEwMDhBMzY5QTYyODExRTM5REY0Q0MwMTM3MTVFOTMzIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTAwOEEzNjZBNjI4MTFFMzlERjRDQzAxMzcxNUU5MzMiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTAwOEEzNjdBNjI4MTFFMzlERjRDQzAxMzcxNUU5MzMiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6WHWu4AAAAcElEQVR42mL8//8/AzmAiYFMgEtjGSFDcUmGAfEEIOYix6lWQLwUiGXJ8SNI00IgNiIncPiAeCoQ+5ITqsxQA+CAhQhN34C4AoiPkaLxGRAXAfEdUvx4DohjsGkCA1CSw4LrgZgVhxwYM9I9rQIEGACZNDs01yUXlAAAAABJRU5ErkJggg==);background-repeat:no-repeat}.adsk-viewing-viewer .measure-panel-title.expanded{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkE3QzFFQUQ1QTYyODExRTM5NzE2RjcyN0QxQjg0QTREIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkE3QzFFQUQ2QTYyODExRTM5NzE2RjcyN0QxQjg0QTREIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTdDMUVBRDNBNjI4MTFFMzk3MTZGNzI3RDFCODRBNEQiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTdDMUVBRDRBNjI4MTFFMzk3MTZGNzI3RDFCODRBNEQiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz6XuY60AAAARklEQVR42mL8//8/AzmAiYFMQBeNqSg8kB+JwKlAfAZZjIlIm9JJdSpWTYQ04tSETyNeTbg0EtSETSNRmkCAcegkOYAAAwDGjDZHvY373AAAAABJRU5ErkJggg==);background-repeat:no-repeat}.adsk-viewing-viewer .adsk-viewing-viewer .measure-table td{padding:10px 0px  10px 20px}.adsk-viewing-viewer .measure-selection-one-label{display:inline-block;margin:18px 18px 18px 18px;width:16px;height:16px;font-size:16px;float:left;padding:2px;background-color:#0033FF;border-radius:10px;opacity:0.6}.adsk-viewing-viewer .measure-selection-two-label{display:inline-block;margin:18px 18px 18px 18px;width:16px;height:16px;font-size:16px;float:left;padding:2px;background-color:#0033FF;border-radius:10px;opacity:0.6}.adsk-viewing-viewer .measure-repick{display:inline-block;cursor:default;margin:20px 20px 20px 20px;width:16px;height:16px;font-size:16px;float:right;opacity:0.5}.adsk-viewing-viewer .measure-repick:hover{opacity:1}.adsk-viewing-viewer .measure-selection-result{display:inline-block;margin:21px 0px 21px 0px}.adsk-viewing-viewer .measure-distance-icon{display:inline-block;margin:20px 2px 20px 2px;font-size:52px;color:#FF9900;float:left}.adsk-viewing-viewer .measure-angle-icon{display:inline-block;margin:20px 2px 20px 2px;font-size:52px;color:#FF9900;float:left}.adsk-viewing-viewer .adsk-viewing-viewer .measure-result{font-size:20px;color:#FF9900;display:inline-block;margin:38px 0px 38px 0px}.adsk-viewing-viewer .measure-initial{font-size:20px;display:inline-block;margin:38px 0px 38px 56px}.adsk-viewing-viewer .measure-settings-button{cursor:default;position:relative;top:20px;right:20px;width:16px;height:16px;font-size:18px;float:right;opacity:0.5}.adsk-viewing-viewer .measure-settings-button:hover{opacity:1}.adsk-viewing-viewer .measure-delta-button{position:relative;top:56px;right:4px;width:16px;height:16px;font-size:16px;float:right;opacity:0.5;-webkit-transform:rotate(-90deg);-moz-transform:rotate(-90deg);-ms-transform:rotate(-90deg);-o-transform:rotate(-90deg);transform:rotate(-90deg)}.adsk-viewing-viewer .measure-delta-button.rotated{-webkit-transform:rotate(90deg);-moz-transform:rotate(90deg);-ms-transform:rotate(90deg);-o-transform:rotate(90deg);transform:rotate(90deg)}.adsk-viewing-viewer .measure-delta-button:hover{opacity:1}.adsk-viewing-viewer .measure-delta-result{display:inline-block;margin:0px 0px 20px 0px;padding:0px 0px 0px 56px}.adsk-viewing-viewer .measure-label-axis{display:none;position:absolute;width:16px;height:16px;left:0px;top:0px;background-color:#f4f4f4;border-radius:8px;pointer-events:none}.adsk-viewing-viewer .measure-label-axis-icon.X{background-color:#EC4545}.adsk-viewing-viewer .measure-label-axis-icon.Y{background-color:#45C345}.adsk-viewing-viewer .measure-label-axis-icon.Z{background-color:#5757DA}.adsk-viewing-viewer .measure-label-axis-icon{width:20px;height:18px;color:#f4f4f4;border-radius:8px 0 0 8px;font-size:12px;padding-top:4px;line-height:15px;text-align:center}.adsk-viewing-viewer .measure-label-axis-delta.enableTransition{transition:opacity 0.1s linear}.adsk-viewing-viewer .measure-label-axis-delta{display:none;position:absolute;font-size:18px;left:0px;top:0px;background-color:#ffffff;pointer-events:none;opacity:0;border-radius:8px;box-shadow:0px 1px 3px 1px rgba(0,0,0,0.25)}.adsk-viewing-viewer .measure-label-axis.visible{display:block}.adsk-viewing-viewer .measure-label-axis-delta.visible{display:flex}.adsk-viewing-viewer .measure-label-axis-x{color:#EC4545}.adsk-viewing-viewer .measure-label-axis-y{color:#45C345}.adsk-viewing-viewer .measure-label-axis-z{color:#5757DA}.adsk-viewing-viewer .magnifying-glass.visible{display:block}.adsk-viewing-viewer .magnifying-glass{position:absolute;display:none;-moz-border-radius:100%;-webkit-border-radius:100%;border-radius:100%;background:transparent;box-shadow:2px 2px 4px rgba(0,0,0,0.5),inset 2px 2px 4px rgba(0,0,0,0.5);-webkit-box-shadow:2px 2px 4px rgba(0,0,0,0.5),inset 2px 2px 4px rgba(0,0,0,0.5);-moz-box-shadow:2px 2px 4px rgba(0,0,0,0.5),inset 2px 2px 4px rgba(0,0,0,0.5);z-index:4}.adsk-viewing-viewer .measure-fetching-topology{display:inline-block;width:10px;height:10px;background:url(\" + escape(require(\"./res/icon-spinner-sm.svg\")) + \");margin:3px 0px -2px 3px;animation:measure-topology-fetching-anim 1.4s infinite linear;-webkit-animation:measure-topology-fetching-anim 1.4s infinite linear}@keyframes measure-topology-fetching-anim{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@-webkit-keyframes measure-topology-fetching-anim{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.adsk-viewing-viewer .docking-panel.measure-settings-popup{display:flex;justify-content:center;flex-direction:column;bottom:120%;box-sizing:border-box;text-align:left;position:absolute;padding-top:15px;padding-bottom:15px}.adsk-viewing-viewer .adsk-toolbar-vertical .docking-panel.measure-settings-popup{right:120%;bottom:unset;height:max-content;width:max-content}.adsk-viewing-viewer .docking-panel.measure-settings-popup .adsk-lmv-tftable tr.switch-slider-row td{width:auto;padding-bottom:0px;padding-top:0px;vertical-align:inherit}.adsk-viewing-viewer .docking-panel.measure-settings-popup.hide{display:none}.adsk-viewing-viewer .measure-settings-popup tbody{top:15px}.adsk-toolbar .measure-toolbar-seperator{height:18px;width:1px;background-color:#999;float:left;margin:16px 5px}.adsk-toolbar.adsk-toolbar-vertical .measure-toolbar-seperator{height:1px;width:18px;margin:5px 16px}.adsk-viewing-viewer .measure-selection-area{display:block;position:absolute;cursor:pointer;z-index:1;-webkit-tap-highlight-color:rgba(0,0,0,0)}\\n\", \"\"]);\n\n// exports\n","module.exports = \"\\\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' width='10' height='10' viewBox='0 0 10 10'%3E %3Cdefs%3E %3ClinearGradient id='linear-gradient' y1='5' x2='10' y2='5' gradientUnits='userSpaceOnUse'%3E %3Cstop offset='0' stop-color='%23fff' stop-opacity='0'/%3E %3Cstop offset='1' stop-color='%23fff'/%3E %3C/linearGradient%3E %3C/defs%3E %3Ctitle%3EAsset 6%3C/title%3E %3Cg id='Layer_2' data-name='Layer 2'%3E %3Cg id='finals_24px'%3E %3Cpath d='M5,10A5,5,0,0,1,0,5,1.2,1.2,0,0,1,2.3,5,2.7,2.7,0,1,0,5,2.3,1.2,1.2,0,0,1,5,0,5,5,0,0,1,5,10Z' fill='url(%23linear-gradient)'/%3E %3C/g%3E %3C/g%3E %3C/svg%3E\\\"\"","\nvar content = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./Calibration.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./Calibration.css\", function() {\n\t\tvar newContent = require(\"!!../../node_modules/css-loader/index.js!../../node_modules/sass-loader/dist/cjs.js!./Calibration.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \"@font-face{font-family:'calibration-icon';src:url(\\\"data:application/octet-stream;base64,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\\\") format(\\\"woff\\\");font-weight:normal;font-style:normal}[class^=\\\"calibration-icon\\\"],[class*=\\\" calibration-icon\\\"]{font-family:'calibration-icon';font-style:normal;font-weight:normal;font-variant:normal;line-height:1;padding-top:2px;speak:none;text-transform:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.adsk-viewing-viewer .calibration-icon:before{content:'a'}.adsk-viewing-viewer .calibration-panel{left:calc(50% - 190px);top:calc(50% - 145px);width:300px;height:auto;z-index:4}.adsk-viewing-viewer .measure-settings-popup .option-drop-down,.adsk-viewing-viewer .calibration-panel .option-drop-down{width:100%;padding-right:0px;box-sizing:border-box}.adsk-viewing-viewer .measure-settings-popup .adsk-lmv-tftable tr td,.adsk-viewing-viewer .calibration-panel .adsk-lmv-tftable tr td{width:auto;padding:2px 15px 2px 0px}.adsk-viewing-viewer .calibration-panel .adsk-lmv-tftable tr td input{margin:0px;box-sizing:border-box;width:100%}.adsk-viewing-viewer .measure-settings-popup .switch{margin-left:25px}.adsk-viewing-viewer .measure-settings-popup .switch .slider{width:26px}.adsk-viewing-viewer .calibration-textbox::-webkit-inner-spin-button,.adsk-viewing-viewer .calibration-textbox::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.adsk-viewing-viewer .calibration-text{text-align:left;padding:6px 10px 6px 10px;margin:20px 20px 14px 20px;font-size:14px;-webkit-font-smoothing:antialiased}.adsk-viewing-viewer .calibration-button{margin-top:15px}.adsk-viewing-viewer .calibration-button-left{width:calc(50% - 15px);margin-right:5px !important;display:inline-block}.adsk-viewing-viewer .calibration-button-right{width:calc(50% - 15px);margin-left:5px !important;display:inline-block}.adsk-viewing-viewer .calibration-line{position:absolute;display:block;top:0;left:0;pointer-events:none;z-index:0}.adsk-viewing-viewer .calibration-label{display:none;position:absolute;pointer-events:none;text-align:'center';vertical-align:middle;cursor:default;padding:2px;color:#000000;background:#FFFFFF;border-radius:10px;-webkit-transform-origin:50%  53%}.adsk-viewing-viewer .calibration-label-text{display:inline-block;pointer-events:none;text-align:'center';vertical-align:middle;font-size:12px;cursor:default;padding:2px;color:#000000;background:#FFFFFF;border-bottom:1px dashed #000000;text-decoration:none;text-transform:uppercase;-webkit-font-smoothing:antialiased}.adsk-viewing-viewer .calibration-label-text:hover{color:#039be5;border-bottom:1px dashed #039be5}.adsk-viewing-viewer .calibration-label.visible{display:block}.adsk-viewing-viewer .calibration-endpoint:hover.calibration-endpoint.enable-hover,.adsk-viewing-viewer .calibration-endpoint.edit{background-color:#039be5}.adsk-viewing-viewer .calibration-endpoint:hover.calibration-endpoint.enable-hover>*,.adsk-viewing-viewer .calibration-endpoint.edit>*{color:#ffffff}.adsk-viewing-viewer .calibration-endpoint.editable{pointer-events:all}.adsk-viewing-viewer .calibration-endpoint{display:none;position:absolute;cursor:move;pointer-events:none;width:30px;height:30px;background-color:#ffffff;box-shadow:0 4px 8px 0 rgba(0,0,0,0.24),0 0 8px 0 rgba(0,0,0,0.12);-moz-border-radius:50px;-webkit-border-radius:50px;border-radius:50px;justify-content:center;align-items:center;text-align:center}.adsk-viewing-viewer .calibration-endpoint.visible{display:block}.adsk-viewing-viewer .calibration-endpoint-text{display:inline-block;font-size:14px;vertical-align:middle;cursor:default;margin:5px 5px 5px 5px;vertical-align:middle;text-align:center;color:#039be5;text-decoration:none;text-transform:uppercase;pointer-events:none}.adsk-viewing-viewer .calibration-buttons-wrapper{text-align:center}\\n\", \"\"]);\n\n// exports\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n\nvar stylesInDom = {};\n\nvar\tmemoize = function (fn) {\n\tvar memo;\n\n\treturn function () {\n\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\treturn memo;\n\t};\n};\n\nvar isOldIE = memoize(function () {\n\t// Test for IE <= 9 as proposed by Browserhacks\n\t// @see http://browserhacks.com/#hack-e71d8692f65334173fee715c222cb805\n\t// Tests for existence of standard globals is to allow style-loader\n\t// to operate correctly into non-standard environments\n\t// @see https://github.com/webpack-contrib/style-loader/issues/177\n\treturn window && document && document.all && !window.atob;\n});\n\nvar getTarget = function (target, parent) {\n  if (parent){\n    return parent.querySelector(target);\n  }\n  return document.querySelector(target);\n};\n\nvar getElement = (function (fn) {\n\tvar memo = {};\n\n\treturn function(target, parent) {\n                // If passing function in options, then use it for resolve \"head\" element.\n                // Useful for Shadow Root style i.e\n                // {\n                //   insertInto: function () { return document.querySelector(\"#foo\").shadowRoot }\n                // }\n                if (typeof target === 'function') {\n                        return target();\n                }\n                if (typeof memo[target] === \"undefined\") {\n\t\t\tvar styleTarget = getTarget.call(this, target, parent);\n\t\t\t// Special case to return head of iframe instead of iframe itself\n\t\t\tif (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n\t\t\t\ttry {\n\t\t\t\t\t// This will throw an exception if access to iframe is blocked\n\t\t\t\t\t// due to cross-origin restrictions\n\t\t\t\t\tstyleTarget = styleTarget.contentDocument.head;\n\t\t\t\t} catch(e) {\n\t\t\t\t\tstyleTarget = null;\n\t\t\t\t}\n\t\t\t}\n\t\t\tmemo[target] = styleTarget;\n\t\t}\n\t\treturn memo[target]\n\t};\n})();\n\nvar singleton = null;\nvar\tsingletonCounter = 0;\nvar\tstylesInsertedAtTop = [];\n\nvar\tfixUrls = require(\"./urls\");\n\nmodule.exports = function(list, options) {\n\tif (typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif (typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\n\toptions.attrs = typeof options.attrs === \"object\" ? options.attrs : {};\n\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (!options.singleton && typeof options.singleton !== \"boolean\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the <head> element\n        if (!options.insertInto) options.insertInto = \"head\";\n\n\t// By default, add <style> tags to the bottom of the target\n\tif (!options.insertAt) options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list, options);\n\n\taddStylesToDom(styles, options);\n\n\treturn function update (newList) {\n\t\tvar mayRemove = [];\n\n\t\tfor (var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList, options);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\n\t\tfor (var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor (var j = 0; j < domStyle.parts.length; j++) domStyle.parts[j]();\n\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n};\n\nfunction addStylesToDom (styles, options) {\n\tfor (var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles (list, options) {\n\tvar styles = [];\n\tvar newStyles = {};\n\n\tfor (var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = options.base ? item[0] + options.base : item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\n\t\tif(!newStyles[id]) styles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse newStyles[id].parts.push(part);\n\t}\n\n\treturn styles;\n}\n\nfunction insertStyleElement (options, style) {\n\tvar target = getElement(options.insertInto)\n\n\tif (!target) {\n\t\tthrow new Error(\"Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.\");\n\t}\n\n\tvar lastStyleElementInsertedAtTop = stylesInsertedAtTop[stylesInsertedAtTop.length - 1];\n\n\tif (options.insertAt === \"top\") {\n\t\tif (!lastStyleElementInsertedAtTop) {\n\t\t\ttarget.insertBefore(style, target.firstChild);\n\t\t} else if (lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\ttarget.insertBefore(style, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\ttarget.appendChild(style);\n\t\t}\n\t\tstylesInsertedAtTop.push(style);\n\t} else if (options.insertAt === \"bottom\") {\n\t\ttarget.appendChild(style);\n\t} else if (typeof options.insertAt === \"object\" && options.insertAt.before) {\n\t\tvar nextSibling = getElement(options.insertAt.before, target);\n\t\ttarget.insertBefore(style, nextSibling);\n\t} else {\n\t\tthrow new Error(\"[Style Loader]\\n\\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\\n Must be 'top', 'bottom', or Object.\\n (https://github.com/webpack-contrib/style-loader#insertat)\\n\");\n\t}\n}\n\nfunction removeStyleElement (style) {\n\tif (style.parentNode === null) return false;\n\tstyle.parentNode.removeChild(style);\n\n\tvar idx = stylesInsertedAtTop.indexOf(style);\n\tif(idx >= 0) {\n\t\tstylesInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement (options) {\n\tvar style = document.createElement(\"style\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\n\tif(options.attrs.nonce === undefined) {\n\t\tvar nonce = getNonce();\n\t\tif (nonce) {\n\t\t\toptions.attrs.nonce = nonce;\n\t\t}\n\t}\n\n\taddAttrs(style, options.attrs);\n\tinsertStyleElement(options, style);\n\n\treturn style;\n}\n\nfunction createLinkElement (options) {\n\tvar link = document.createElement(\"link\");\n\n\tif(options.attrs.type === undefined) {\n\t\toptions.attrs.type = \"text/css\";\n\t}\n\toptions.attrs.rel = \"stylesheet\";\n\n\taddAttrs(link, options.attrs);\n\tinsertStyleElement(options, link);\n\n\treturn link;\n}\n\nfunction addAttrs (el, attrs) {\n\tObject.keys(attrs).forEach(function (key) {\n\t\tel.setAttribute(key, attrs[key]);\n\t});\n}\n\nfunction getNonce() {\n\tif (typeof __webpack_nonce__ === 'undefined') {\n\t\treturn null;\n\t}\n\n\treturn __webpack_nonce__;\n}\n\nfunction addStyle (obj, options) {\n\tvar style, update, remove, result;\n\n\t// If a transform function was defined, run it on the css\n\tif (options.transform && obj.css) {\n\t    result = typeof options.transform === 'function'\n\t\t ? options.transform(obj.css) \n\t\t : options.transform.default(obj.css);\n\n\t    if (result) {\n\t    \t// If transform returns a value, use that instead of the original css.\n\t    \t// This allows running runtime transformations on the css.\n\t    \tobj.css = result;\n\t    } else {\n\t    \t// If the transform function returns a falsy value, don't add this css.\n\t    \t// This allows conditional loading of css\n\t    \treturn function() {\n\t    \t\t// noop\n\t    \t};\n\t    }\n\t}\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\n\t\tstyle = singleton || (singleton = createStyleElement(options));\n\n\t\tupdate = applyToSingletonTag.bind(null, style, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, style, styleIndex, true);\n\n\t} else if (\n\t\tobj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\"\n\t) {\n\t\tstyle = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, style, options);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\n\t\t\tif(style.href) URL.revokeObjectURL(style.href);\n\t\t};\n\t} else {\n\t\tstyle = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, style);\n\t\tremove = function () {\n\t\t\tremoveStyleElement(style);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle (newObj) {\n\t\tif (newObj) {\n\t\t\tif (\n\t\t\t\tnewObj.css === obj.css &&\n\t\t\t\tnewObj.media === obj.media &&\n\t\t\t\tnewObj.sourceMap === obj.sourceMap\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag (style, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (style.styleSheet) {\n\t\tstyle.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = style.childNodes;\n\n\t\tif (childNodes[index]) style.removeChild(childNodes[index]);\n\n\t\tif (childNodes.length) {\n\t\t\tstyle.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyle.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag (style, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyle.setAttribute(\"media\", media)\n\t}\n\n\tif(style.styleSheet) {\n\t\tstyle.styleSheet.cssText = css;\n\t} else {\n\t\twhile(style.firstChild) {\n\t\t\tstyle.removeChild(style.firstChild);\n\t\t}\n\n\t\tstyle.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink (link, options, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\t/*\n\t\tIf convertToAbsoluteUrls isn't defined, but sourcemaps are enabled\n\t\tand there is no publicPath defined then lets turn convertToAbsoluteUrls\n\t\ton by default.  Otherwise default to the convertToAbsoluteUrls option\n\t\tdirectly\n\t*/\n\tvar autoFixUrls = options.convertToAbsoluteUrls === undefined && sourceMap;\n\n\tif (options.convertToAbsoluteUrls || autoFixUrls) {\n\t\tcss = fixUrls(css);\n\t}\n\n\tif (sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = link.href;\n\n\tlink.href = URL.createObjectURL(blob);\n\n\tif(oldSrc) URL.revokeObjectURL(oldSrc);\n}\n","\n/**\n * When source maps are enabled, `style-loader` uses a link element with a data-uri to\n * embed the css on the page. This breaks all relative urls because now they are relative to a\n * bundle instead of the current page.\n *\n * One solution is to only use full urls, but that may be impossible.\n *\n * Instead, this function \"fixes\" the relative urls to be absolute according to the current page location.\n *\n * A rudimentary test suite is located at `test/fixUrls.js` and can be run via the `npm test` command.\n *\n */\n\nmodule.exports = function (css) {\n  // get current location\n  var location = typeof window !== \"undefined\" && window.location;\n\n  if (!location) {\n    throw new Error(\"fixUrls requires window.location\");\n  }\n\n\t// blank or null?\n\tif (!css || typeof css !== \"string\") {\n\t  return css;\n  }\n\n  var baseUrl = location.protocol + \"//\" + location.host;\n  var currentDir = baseUrl + location.pathname.replace(/\\/[^\\/]*$/, \"/\");\n\n\t// convert each url(...)\n\t/*\n\tThis regular expression is just a way to recursively match brackets within\n\ta string.\n\n\t /url\\s*\\(  = Match on the word \"url\" with any whitespace after it and then a parens\n\t   (  = Start a capturing group\n\t     (?:  = Start a non-capturing group\n\t         [^)(]  = Match anything that isn't a parentheses\n\t         |  = OR\n\t         \\(  = Match a start parentheses\n\t             (?:  = Start another non-capturing groups\n\t                 [^)(]+  = Match anything that isn't a parentheses\n\t                 |  = OR\n\t                 \\(  = Match a start parentheses\n\t                     [^)(]*  = Match anything that isn't a parentheses\n\t                 \\)  = Match a end parentheses\n\t             )  = End Group\n              *\\) = Match anything and then a close parens\n          )  = Close non-capturing group\n          *  = Match anything\n       )  = Close capturing group\n\t \\)  = Match a close parens\n\n\t /gi  = Get all matches, not the first.  Be case insensitive.\n\t */\n\tvar fixedCss = css.replace(/url\\s*\\(((?:[^)(]|\\((?:[^)(]+|\\([^)(]*\\))*\\))*)\\)/gi, function(fullMatch, origUrl) {\n\t\t// strip quotes (if they exist)\n\t\tvar unquotedOrigUrl = origUrl\n\t\t\t.trim()\n\t\t\t.replace(/^\"(.*)\"$/, function(o, $1){ return $1; })\n\t\t\t.replace(/^'(.*)'$/, function(o, $1){ return $1; });\n\n\t\t// already a full url? no change\n\t\tif (/^(#|data:|http:\\/\\/|https:\\/\\/|file:\\/\\/\\/|\\s*$)/i.test(unquotedOrigUrl)) {\n\t\t  return fullMatch;\n\t\t}\n\n\t\t// convert the url to a full url\n\t\tvar newUrl;\n\n\t\tif (unquotedOrigUrl.indexOf(\"//\") === 0) {\n\t\t  \t//TODO: should we add protocol?\n\t\t\tnewUrl = unquotedOrigUrl;\n\t\t} else if (unquotedOrigUrl.indexOf(\"/\") === 0) {\n\t\t\t// path should be relative to the base url\n\t\t\tnewUrl = baseUrl + unquotedOrigUrl; // already starts with '/'\n\t\t} else {\n\t\t\t// path should be relative to current directory\n\t\t\tnewUrl = currentDir + unquotedOrigUrl.replace(/^\\.\\//, \"\"); // Strip leading './'\n\t\t}\n\n\t\t// send back the fixed url(...)\n\t\treturn \"url(\" + JSON.stringify(newUrl) + \")\";\n\t});\n\n\t// send back the fixed css\n\treturn fixedCss;\n};\n","\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon; //These come from main lmv bundle.\n\n    // /** @constructor */\n    export function MeasurementsManager(viewer)\n    {   \n        this.viewer = viewer;\n        this.init();\n\n        this.restoredMeasurementData = [];\n    }\n\n    var proto = MeasurementsManager.prototype;\n\n    proto.getCurrentMeasurement = function() {\n        return this.currentMeasurement;\n    };\n\n    proto.getRestoredMeasurementData = function() {\n        return this.restoredMeasurementData.slice();\n    }\n\n    proto.selectMeasurementById = function(id) {\n        var measurement = this.measurementsList[id];\n        \n        if (measurement) {\n            this.changeCurrentMeasurement(measurement);\n            return this.currentMeasurement;    \n        }\n\n        return false;\n    };\n\n    proto.createMeasurement = function(measurementType) {\n        var id = this.measurementsCounter;\n        var measurement = new MeasureCommon.Measurement(measurementType, id);\n        this.measurementsList[id] = measurement;\n        this.measurementsCounter++;\n        this.changeCurrentMeasurement(measurement);\n        return this.currentMeasurement;\n    };\n\n    // Renders measurements from data.\n    proto.createMeasurementFromData = function(measurementData, measurementType, createIndicatorCb, preparePicksCb) {\n        this.createMeasurement(measurementType);\n        if (createIndicatorCb instanceof Function) {\n            createIndicatorCb(this.currentMeasurement);\n        }\n\n        this.initPicks(measurementData.picks);\n\n        if (preparePicksCb instanceof Function) {\n            preparePicksCb();\n        }\n\n        if (this.currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA) {\n            this.currentMeasurement.closedArea = true;\n        }\n\n        this.currentMeasurement.isRestored = true;\n\n        const convertUnits = (value, square) => {\n            return Autodesk.Viewing.Private.convertUnits(\n                measurementData.sharedUnits,\n                this.viewer.model.getUnitString(),\n                measurementData.sharedCalibrationFactor,\n                parseFloat(value),\n                square\n            );\n        };\n\n        this.currentMeasurement.distanceXYZ = convertUnits(measurementData.distance);\n        this.currentMeasurement.distanceX = convertUnits(measurementData.deltaX);\n        this.currentMeasurement.distanceY = convertUnits(measurementData.deltaY);\n        this.currentMeasurement.distanceZ = convertUnits(measurementData.deltaZ);\n\n        this.currentMeasurement.area = convertUnits(measurementData.area, 'square');\n        this.currentMeasurement.angle = parseFloat(measurementData.angle);\n\n        const getIntersectPoints = () => {\n            const points = this.restoredMeasurementData[this.currentMeasurement.id];\n            const keys = Object.keys(points);\n            const intersectPoints = [];\n            for (let i = 0; i < keys.length; i++) {\n                const key = keys[i];\n                const pointData = points[key];\n                intersectPoints[key] = pointData.intersection;\n            }\n            return intersectPoints;\n        };\n\n        // This will render the measurements\n        this.currentMeasurement.indicator.renderFromPoints(getIntersectPoints(), true);\n\n        this.currentMeasurement.indicator.changeAllEndpointsEditableStyle(true);\n        this.currentMeasurement.indicator.enableSelectionAreas(true);\n        this.currentMeasurement.indicator.enableLabelsTouchEvents(true);\n\n        this.activatePicks();\n    };\n\n    // Initializes picks from pick data\n    proto.initPicks = function(pickData) {\n        if (!pickData) return;\n        const points = [];\n\n        for (let i = 0; i < pickData.length; i++) {\n            const pick = pickData[i];\n            if (!pick) continue;\n            const key = i + 1;\n\n            let pickPoint = new THREE.Vector3(pick.intersection.x, pick.intersection.y, pick.intersection.z);\n            const model =\n                pick.hasOwnProperty('modelId') && pick.modelId\n                    ? this.viewer.impl.findModel(pick.modelId)\n                    : this.viewer.model;\n\n            if (model) {\n                const modelData = model.getData();\n                pickPoint =\n                    modelData && modelData.hasOwnProperty('globalOffset')\n                        ? pickPoint.add(modelData.globalOffset).clone()\n                        : pickPoint.clone();\n            }\n\n            points[key] = {\n                intersection: pickPoint,\n                viewportId: pick.viewportIndex2d,\n                hasTopology: pick.hasTopology,\n                modelId: pick.modelId\n            };\n            this.currentMeasurement.getPick(key);\n        }\n\n        this.restoredMeasurementData[this.currentMeasurement.id] = points;\n    };\n\n    // Stores information from the restored measurement pick data in the current measurement picks\n    proto.activatePicks = function() {\n        if (!this.currentMeasurement.picks) return;\n        const keys = Object.keys(this.currentMeasurement.picks);\n\n        const id = this.currentMeasurement.id;\n        for (let i = 0; i < keys.length; i++) {\n            const key = keys[i];\n\n            const pick = this.currentMeasurement.picks[key];\n            const restoredMeasurements = this.getRestoredMeasurementData();\n            const pointInfo = restoredMeasurements[id][key];\n            let p = pointInfo.intersection.clone();\n\n            if (!pick.getGeometry() && pointInfo.intersection) {\n                pick.geomType = MeasureCommon.SnapType.SNAP_VERTEX;\n                pick.geomVertex = p;\n                pick.intersectPoint = p;\n                pick.modelId = pointInfo.modelId;\n\n                // Set the isRestored flag if all of the picks are valid.\n                pick.viewportIndex2d = pointInfo.viewportId;\n            }\n        }\n    };\n\n    proto.changeCurrentMeasurement = function(measurement) {\n        this.currentMeasurement = measurement;\n        this.viewer.dispatchEvent({ type: MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, data: { type: measurement.measurementType, id: measurement.id }});\n    };\n\n    proto.removeCurrentMeasurement = function() { \n        // Remove current measurement from the list\n        if (Object.keys(this.measurementsList).length > 0) {\n            delete this.measurementsList[this.currentMeasurement.id];\n        }\n    };\n\n    proto.init = function() {\n        this.reset();\n    };\n\n    proto.destroy = function() {\n        this.reset();\n    };\n\n    proto.reset = function() {\n        this.currentMeasurement = null;\n        this.measurementsList = {};\n        this.measurementsCounter = 0;\n    };\n\n","\n    var av = Autodesk.Viewing;\n    var MeasureCommon = av.MeasureCommon;\n    \n    /**\n     * Base class for an indicator.\n     */\n\n    export var Indicator = function(viewer, measurement, tool)\n    {\n        this.viewer = viewer;\n        this.setGlobalManager(viewer.globalManager);\n        this.measurement = measurement;\n        this.tool = tool;\n        this.snapper = tool.getSnapper();\n        this.materialExtensionLine = null;\n        this.materialExtensionFace = null;\n        this.extensionLines = [];\n        this.extensionFaces = [];\n        this.grayOutPlane = [];\n        this.materialPoint = null;\n        this.materialLine = null;\n        this.materialAngle = null;\n        this.materialAngleOutline = null;\n        this.materialGreyOutPlane = null;\n        this.materialFace = null;\n        this.angleArc = null;\n        this.angleOutline = [];\n        this.showMeasureResult = false;\n        this.visibleLabels = [];\n        this.overlayName = 'measure-indicator-overlay-' + (measurement.id || '');\n        this.xAxis = this.viewer.autocam.getWorldRightVector();\n        this.yAxis = this.viewer.autocam.getWorldUpVector();\n        this.zAxis = this.viewer.autocam.getWorldFrontVector();\n    };\n\n\n\n    var proto = Indicator.prototype;\n    av.GlobalManagerMixin.call(proto);\n\n    proto.init = function() {\n        return false;\n    };\n\n    proto.updateDistance = function() {\n        return false;\n    };\n\n    proto.updateAngle = function() {\n        return false;\n    };\n\n    proto.clear = function() {\n        return false;\n    };\n\n    proto.updateLabelsPosition = function() {\n        return false;\n    };\n\n    proto.renderFromPoints = function(points, showMeasureResult) {\n        this.showMeasureResult = showMeasureResult;\n\n        this.clear();\n\n        for (var i = 1; i <= Object.keys(points).length; i++) {\n            const p = points[i];\n            if (!this.endpoints[i]) {\n                this.createEndpoint(i);\n            }\n    \n            this.endpoints[i].position = new THREE.Vector3(p.x, p.y, p.z);\n            this.showClick(i);\n        }\n            \n        this.renderRubberbandFromPoints(points);\n        \n        this.updateLabelsPosition();\n    };\n\n    // Renders the measurement and the labels.\n    proto.render = function(picks, showMeasureResult) {\n\n        this.showMeasureResult = showMeasureResult;\n\n        this.clear();\n\n        for (var i = 1; i <= Object.keys(picks).length; i++) {\n            if (this.measurement.hasPick(i)) {\n                this.renderPick(i);\n            }\n        }\n            \n        this.renderRubberband(picks);\n        \n        this.updateLabelsPosition();\n    };\n\n    proto.changeEndpointOnEditStyle = function(endpointNumber, isEditing) {\n        return false;\n    };\n\n    proto.handleResize = function() {\n        return false;\n    };\n\n    proto.setNoTopology = function() {\n        return false;\n    };\n\n    proto.setFetchingTopology = function() {\n        return false;\n    };\n\n    proto.setTopologyAvailable = function() {\n        return false;\n    };\n\n    proto.clientToCanvasCoords = function(event) {\n        var rect = this.viewer.impl.getCanvasBoundingClientRect();\n        var res = {};\n        if( event.hasOwnProperty(\"center\") )\n        {\n            event.canvasX = res.x = event.center.x - rect.left;\n            event.canvasY = res.y = event.center.y - rect.top;\n        }\n        else\n        {\n            event.canvasX = res.x = event.pointers[0].clientX - rect.left;\n            event.canvasY = res.y = event.pointers[0].clientY - rect.top;\n        }\n\n        return res;\n    };\n\n    proto.initLabelMobileGestures = function(label, pointNumber) {\n        var magnifyingGlass = this.viewer.toolController.getTool(\"magnifyingGlass\");\n\n        this.hammer = new av.Hammer.Manager(label, {\n                recognizers: [\n                    av.GestureRecognizers.drag,\n                    av.GestureRecognizers.singletap\n                ],\n                handlePointerEventMouse: false,\n                inputClass: av.isIE11 ? av.Hammer.PointerEventInput : av.Hammer.TouchInput\n            });\n\n        this.onSingleTapBinded = function(event) { \n                                    var pos = this.clientToCanvasCoords(event);\n                                    this.snapper.onMouseDown(pos);\n                                    this.tool.editEndpoint(event, pointNumber, this.measurement.id); \n                                }.bind(this);\n\n        this.onDragStartBinded = function(event) {\n                                    var pos = this.clientToCanvasCoords(event);\n                                    this.snapper.onMouseDown(pos);\n                                    this.tool.editEndpoint(event, pointNumber, this.measurement.id);\n                                    this.tool.editByDrag = true;\n\n                                    // Activate Magnifying Glass and tool by faking press event.\n                                    event.type = \"press\";\n                                    magnifyingGlass.handlePressHold(event);\n                                    this.tool.handlePressHold(event);\n                                    event.type = \"dragstart\";\n                                    magnifyingGlass.handleGesture(event);\n                                    this.tool.handleGesture(event);\n                                }.bind(this);\n\n        this.onDragMoveBinded = function(event){ \n                                    var pos = this.clientToCanvasCoords(event);\n                                    this.snapper.onMouseDown(pos);\n\n                                    magnifyingGlass.handleGesture(event);\n                                    this.tool.handleGesture(event);\n                                }.bind(this);\n\n        this.onDragEndBinded = function(event){ \n                                    var pos = this.clientToCanvasCoords(event);\n                                    this.snapper.onMouseDown(pos);\n                                    \n                                    // Deactivate Magnifying Glass and tool by faking pressup event.\n                                    magnifyingGlass.handleGesture(event);\n                                    this.tool.handleGesture(event);\n                                    event.type = \"pressup\";\n                                    magnifyingGlass.handlePressHold(event);\n                                    this.tool.handlePressHold(event);\n\n                                    this.tool.handleButtonUp(event);\n                                }.bind(this);\n\n        this.hammer.on(\"singletap\", this.onSingleTapBinded);\n        this.hammer.on(\"dragstart\", this.onDragStartBinded);\n        this.hammer.on(\"dragmove\", this.onDragMoveBinded);\n        this.hammer.on(\"dragend\", this.onDragEndBinded);\n    };\n\n    proto.clearLabelMobileGestures = function() {\n        if (this.hammer) {\n            this.hammer.off(\"singletap\", this.onSingleTapBinded);\n            this.hammer.off(\"dragstart\", this.onDragStartBinded);\n            this.hammer.off(\"dragmove\", this.onDragMoveBinded);\n            this.hammer.off(\"dragend\", this.onDragEndBinded);\n            this.hammer = null;\n        }\n    };\n\n    proto.updateVisibleLabelsArray = function(label, isVisible) {\n        if (isVisible) {\n            if (!(this.visibleLabels.indexOf(label) > -1)) {\n                this.visibleLabels.push(label);        \n            }\n        } else {\n            // remove from array\n            var index = this.visibleLabels.indexOf(label);\n            if (index > -1) {\n                this.visibleLabels.splice(index, 1);\n            }\n        }\n    };\n\n    proto.hideEndpoints = function() {\n        for (var name in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(name)) {\n                var endpoint = this.endpoints[name];\n                if (endpoint.label) {\n                    this.hideLabel(endpoint.label);\n                }\n            }\n        }\n    };\n\n    proto.showEndpoints = function() {\n        for (var name in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(name)) {\n                var endpoint = this.endpoints[name];\n                if (this.measurement.hasPick(name) && endpoint.label) {\n                    this.showLabel(endpoint.label);\n                }\n            }\n        }\n    };\n\n    proto.hideLabel = function(label) {\n        if (label) {\n            MeasureCommon.safeToggle(label, 'visible', false);\n            this.updateVisibleLabelsArray(label, false);      \n        }\n    };\n\n    proto.showLabel = function(label) {\n        if (label) {\n            MeasureCommon.safeToggle(label, 'visible', true);\n            this.updateVisibleLabelsArray(label, true);\n        }\n    };\n\n    proto.changeEndpointOnEditStyle = function(endpointNumber, isEditing) {\n        if (this.endpoints[endpointNumber] && this.endpoints[endpointNumber].label) {\n            MeasureCommon.safeToggle(this.endpoints[endpointNumber].label, 'on-edit', isEditing);\n        }\n    };\n\n    proto.changeEndpointEditableStyle = function(endpointNumber, isEditable) {\n        if (this.endpoints[endpointNumber] && this.endpoints[endpointNumber].label) {\n            MeasureCommon.safeToggle(this.endpoints[endpointNumber].label, 'editable', isEditable);\n        }\n    };\n\n    proto.changeAllEndpointsEditableStyle = function(isEditable) {\n        for (var name in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(name)) {\n                this.changeEndpointEditableStyle(name, isEditable);    \n            }\n        }\n    };\n\n    proto.changeAllEndpointsOnEditStyle = function(isEditing) {\n        for (var name in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(name)) {\n                this.changeEndpointOnEditStyle(name, isEditing);\n            }\n        }\n    };\n\n    proto.hideLabelsOutsideOfView = function() {\n        // For each label, check if it's inside the camera viewport.\n        if (this.viewer.model && !this.viewer.model.is2d()) {\n            this.visibleLabels.forEach(function(label) {\n\n                // Ignore labels if position is not computed yet. This may temporarily happen, because label positions are not\n                // always immediately assigned. (see MeasureToolIndicator.js)\n                // Note that we must not set them to invisible here, because this may cause a hen-and-egg-problem: \n                // Some code sections in MeasureToolIndicator.updatePositions() don't set the label position for invisible labels.\n                if (!label.point) {\n                    return;\n                }\n\n                var show = this.viewer.navigation.isPointVisible(label.point);\n\n                if ((label.classList.contains('visible') && !show) || (!label.classList.contains('visible') && show)) {\n                    label.classList.toggle('visible', show);    \n                } \n\n            }.bind(this));\n        }\n    };\n\n    proto.showClick = function(pickNumber) {\n        if (this.tool.getActivePointIndex() !== pickNumber) {\n            this.showLabel(this.endpoints[pickNumber].label);\n        }\n    };\n\n    proto.hideClick = function(pickNumber) {\n\n        if (this.endpoints[pickNumber]) {\n            this.hideLabel(this.endpoints[pickNumber].label);    \n        }\n    };\n\n    proto.renderPick = function(pickNumber) {\n        if (!this.endpoints[pickNumber]) {\n            this.createEndpoint(pickNumber);\n        }\n\n        this.renderEndpointGeometry(pickNumber);\n        this.showClick(pickNumber);\n    };\n\n    proto.renderEndpointGeometry = function(pickNumber) {\n        var geometry = MeasureCommon.getSnapResultPosition(this.measurement.getPick(pickNumber), this.viewer);\n        \n        if (geometry !== null) {\n            this.endpoints[pickNumber].position = geometry.clone();\n        }\n    };\n\n\n    // This is a workaround to deal with the limitation on linewidth on Windows due to the ANGLE library\n    proto.drawEdgeAsCylinder = function(geom, material, linewidth, type, cylinderGeometry) {\n\n        // The array for all cylinders\n        var edge = [];\n        var cylinder;\n\n        if (type == 1) { // LinePieces\n            for (var i = 0; i < geom.vertices.length; i += 2) {\n                cylinder = this.cylinderMesh(geom.vertices[i], geom.vertices[i + 1], material, linewidth, cylinderGeometry);\n                this.setCylinderScale(cylinder, geom.vertices[i], geom.vertices[i + 1]);\n                edge.push(cylinder);\n            }\n        }\n        else { // LineStrip\n            for (var i = 0; i < geom.vertices.length - 1; i++) {\n                cylinder = this.cylinderMesh(geom.vertices[i], geom.vertices[i + 1], material, linewidth, cylinderGeometry);\n                this.setCylinderScale(cylinder, geom.vertices[i], geom.vertices[i + 1]);\n                edge.push(cylinder);\n            }\n        }\n\n\n        return edge;\n    };\n\n    proto.drawDashedLine = function(p1, p2, dashSize, gapSize, material, width, overlayName) {\n\n        var geometry = new THREE.Geometry();\n        var line = new THREE.Vector3().subVectors(p2, p1);\n        var lineLength = line.length() - gapSize;\n        var lineDirection = line.normalize();\n        \n        var i = 0;\n        var pos = p1.clone();\n        var currLength = 0;\n\n        while (currLength < lineLength) {\n            var isPointVisible = this.viewer.navigation.isPointVisible(pos);\n            \n            if (isPointVisible) {\n                geometry.vertices[i] = pos.clone();\n                i++;\n            }\n            \n            pos.addVectors(pos, lineDirection.clone().multiplyScalar(dashSize));\n            \n            if (isPointVisible) {\n                geometry.vertices[i] = pos.clone();\n                i++;\n            }\n            \n            pos.addVectors(pos, lineDirection.clone().multiplyScalar(gapSize));\n\n            currLength += dashSize + gapSize;\n        }\n        \n        line = this.drawEdgeAsCylinder(geometry, material, width, 1, this.getNewCylinderGeometry());\n        this.viewer.impl.addMultipleOverlays(overlayName, line);\n\n        return line;\n    };\n\n    // This is a workaround to deal with the limitation on linewidth on Windows due to the ANGLE library\n    proto.drawLineAsCylinder = function(geom, material, linewidth, overlayName) {\n\n        var line;\n\n        if (geom.vertices.length == 2) {\n            line = this.cylinderMesh(geom.vertices[0], geom.vertices[1], material, linewidth, this.getNewCylinderGeometry());\n            this.setCylinderScale(line, geom.vertices[0], geom.vertices[1]);\n            this.viewer.impl.addOverlay(overlayName, line);\n        }\n\n        return line;\n    };\n\n    proto.getNewCylinderGeometry = function() {\n        return new THREE.CylinderGeometry(0.1, 0.1, 1, 8, 1, true);\n    };\n\n\n    proto.cylinderMesh = function(pointX, pointY, material, linewidth, cylinderGeometry) {\n\n        var direction = new THREE.Vector3().subVectors(pointY, pointX);\n        var orientation = new THREE.Matrix4();\n        orientation.lookAt(pointX, pointY, new THREE.Object3D().up);\n        orientation.multiply(new THREE.Matrix4().set(linewidth, 0, 0, 0,\n            0, 0, linewidth, 0,\n            0, -direction.length(), 0, 0,\n            0, 0, 0, 1));\n\n        var edge = new THREE.Mesh(cylinderGeometry, material);\n        edge.applyMatrix(orientation);\n        edge.lmv_line_width = linewidth;\n        edge.position.x = (pointY.x + pointX.x) / 2;\n        edge.position.y = (pointY.y + pointX.y) / 2;\n        edge.position.z = (pointY.z + pointX.z) / 2;\n\n        return edge;\n    };\n\n    // Set scale for cylinder\n    proto.setCylinderScale = function(cylinderMesh, p1, p2) {\n        var scale;\n\n        if (p1 && p2) {\n            var point = MeasureCommon.nearestPointInPointToSegment(this.viewer.navigation.getPosition(), p1, p2);\n            scale = this.setScale(point);    \n        } else {\n            scale = this.setScale(cylinderMesh.position);\n        }\n\n        if (cylinderMesh.hasOwnProperty(\"lmv_line_width\"))\n            scale *= cylinderMesh.lmv_line_width;\n        cylinderMesh.scale.x = scale;\n        cylinderMesh.scale.z = scale;\n    };\n\n\n    // Set scale for vertex and extension dashed line\n    proto.setScale = function(point) {\n\n        var pixelSize = 5;\n\n        var navapi = this.viewer.navigation;\n        var camera = navapi.getCamera();\n        var position = navapi.getPosition();\n\n        var p = point.clone();\n\n        var distance = camera.isPerspective ? p.sub(position).length()\n            : navapi.getEyeVector().length();\n\n        var fov = navapi.getVerticalFov();\n        var worldHeight = 2.0 * distance * Math.tan(THREE.Math.degToRad(fov * 0.5));\n\n        var viewport = navapi.getScreenViewport();\n        var scale = pixelSize * worldHeight / viewport.height;\n\n        return scale;\n    };\n\n    proto.alignLabelWithLine = function(label, p1, p2, offset, viewer){\n        var camUpVector = viewer.navigation.getCameraUpVector();\n        var worldUpVec = new THREE.Vector3(0,1,0);\n        var cameraAngle = worldUpVec.angleTo(camUpVector) * 180 / Math.PI;\n\n        cameraAngle = camUpVector.x >= 0 ? cameraAngle : -cameraAngle;\n        \n        var angle = null;\n\n        var deltaX = p1.x - p2.x;\n        var deltaY = p1.y - p2.y;\n\n        if (p1.x < p2.x) {\n            angle =  Math.atan2(-deltaY , -deltaX) * 180 / Math.PI;    \n        } \n        else {\n            angle =  Math.atan2(deltaY , deltaX) * 180 / Math.PI;    \n        }\n\n        angle = -(angle + cameraAngle);\n\n        if (Math.abs(angle) > 90){\n            angle = angle + 180;\n        }\n\n        label.style.transform = 'rotate('+ angle +'deg) translate(0px, ' + offset + 'px)';\n    };\n\n    proto.destroy = function() {\n        this.materialPoint = null;\n        this.materialFace = null;\n        this.materialLine = null;\n        this.materialAngle = null;\n\n        if (av.isTouchDevice()) {\n            this.clearLabelMobileGestures();    \n        }\n\n        for (var name in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(name)) {\n                var endPoint = this.endpoints[name];\n\n                if (endPoint.label) {\n                    endPoint.label.removeEventListener(av.isSafari() ? 'mousedown' : 'pointerdown', this.onMouseClickBinded);\n                    endPoint.label.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\n                    endPoint.label.parentNode.removeChild(endPoint.label);\n                    endPoint.label = null;\n                }\n            }\n        }\n\n        this.visibleLabels = [];\n    };\n\n    proto.renderRubberbandFromPoints = function(points) {\n        switch (this.measurement.measurementType) {\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE:\n                var start = points[1];\n                var end = points[2];\n                \n                if (start && end) {\n                    this.renderDistanceMeasurementFromPoints(start, end);\n                }\n                break;\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE:\n                this.renderAngleMeasurementFromPoints(points);\n                break;\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_AREA:\n                this.renderAreaMeasurementFromPoints(points);\n                break;\n        }\n\n    }\n\n    proto.renderRubberband = function(picks) {\n\n        switch (this.measurement.measurementType) {\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE:\n                var previewsPick = picks[1];\n                var activePick = picks[2];\n                var start = MeasureCommon.getSnapResultPosition(previewsPick, this.viewer);\n                var end = MeasureCommon.getSnapResultPosition(activePick, this.viewer);\n                \n                if (start && end) {\n                    this.renderDistanceMeasurement(start, end);\n                }\n                break;\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE:\n                this.renderAngleMeasurement(picks);\n                break;\n\n            case MeasureCommon.MeasurementTypes.MEASUREMENT_AREA:\n                this.renderAreaMeasurement(picks);\n                break;\n        }\n    };\n\n    proto.initMouseEvent = function(label, pointNumber) {\n        \n        var isSafari = av.isSafari();\n        this.onMouseClickBinded = function(event) { \n            if(isSafari || event.pointerType === 'mouse'){\n                event.canvasX = event.clientX;\n                event.canvasY = event.clientY;\n                this.tool.editEndpoint(event, pointNumber, this.measurement.id); \n            }\n        }.bind(this);\n        label.addEventListener(isSafari ? 'mousedown' : 'pointerdown', this.onMouseClickBinded);         \n    };\n","    // Centroid of a polygon is the average of its points.\n    export function getCentroidOfPolygon(points) {\n        var centroid = new THREE.Vector3();\n        var n = points.length;\n\n        for (var i = 0; i < n; i++) {\n            centroid.add(points[i]);\n        }\n\n        centroid.multiplyScalar(1 / n);\n        return centroid;\n    }\n\n    // Algorithm based on https://github.com/mapbox/polylabel\n    export function getPolygonVisualCenter(polygon) {\n        function compareMax(a, b) {\n            return b.max - a.max;\n        }\n\n        function Cell(x, y, h, polygon) {\n            this.x = x; // cell center x\n            this.y = y; // cell center y\n            this.h = h; // half the cell size\n            this.d = pointToPolygonDist(x, y, polygon); // distance from cell center to polygon\n            this.max = this.d + this.h * Math.SQRT2; // max distance to polygon within a cell\n        }\n\n        // signed distance from point to polygon outline (negative if point is outside)\n        function pointToPolygonDist(x, y, polygon) {\n            var inside = false;\n            var minDistSq = Infinity;\n\n            for (var k = 0; k < polygon.length; k++) {\n                var ring = polygon[k];\n\n                for (var i = 0, len = ring.length, j = len - 1; i < len; j = i++) {\n                    var a = ring[i];\n                    var b = ring[j];\n\n                    if ((a.y > y !== b.y > y) &&\n                        (x < (b.x - a.x) * (y - a.y) / (b.y - a.y) + a.x)) inside = !inside;\n\n                    minDistSq = Math.min(minDistSq, getSegDistSq(x, y, a, b));\n                }\n            }\n\n            return (inside ? 1 : -1) * Math.sqrt(minDistSq);\n        }\n\n        // get polygon centroid\n        function getCentroidCell(polygon) {\n            var area = 0;\n            var x = 0;\n            var y = 0;\n            var points = polygon[0];\n\n            for (var i = 0, len = points.length, j = len - 1; i < len; j = i++) {\n                var a = points[i];\n                var b = points[j];\n                var f = a.x * b.y - b.x * a.y;\n                x += (a.x + b.x) * f;\n                y += (a.y + b.y) * f;\n                area += f * 3;\n            }\n            if (area === 0) return new Cell(points[0].x, points[0].y, 0, polygon);\n            return new Cell(x / area, y / area, 0, polygon);\n        }\n\n        // get squared distance from a point to a segment\n        function getSegDistSq(px, py, a, b) {\n\n            var x = a.x;\n            var y = a.y;\n            var dx = b.x - x;\n            var dy = b.y - y;\n\n            if (dx !== 0 || dy !== 0) {\n\n                var t = ((px - x) * dx + (py - y) * dy) / (dx * dx + dy * dy);\n\n                if (t > 1) {\n                    x = b.x;\n                    y = b.y;\n\n                } else if (t > 0) {\n                    x += dx * t;\n                    y += dy * t;\n                }\n            }\n\n            dx = px - x;\n            dy = py - y;\n\n            return dx * dx + dy * dy;\n        }\n\n        function TinyQueue(data, compare) {\n\n            function defaultCompare(a, b) {\n                return a < b ? -1 : a > b ? 1 : 0;\n            }\n\n            if (!(this instanceof TinyQueue)) return new TinyQueue(data, compare);\n\n            this.data = data || [];\n            this.length = this.data.length;\n            this.compare = compare || defaultCompare;\n\n            if (this.length > 0) {\n                for (var i = (this.length >> 1); i >= 0; i--) this._down(i);\n            }\n        }\n\n        TinyQueue.prototype = {\n\n            push: function (item) {\n                this.data.push(item);\n                this.length++;\n                this._up(this.length - 1);\n            },\n\n            pop: function () {\n                if (this.length === 0) return undefined;\n\n                var top = this.data[0];\n                this.length--;\n\n                if (this.length > 0) {\n                    this.data[0] = this.data[this.length];\n                    this._down(0);\n                }\n                this.data.pop();\n\n                return top;\n            },\n\n            peek: function () {\n                return this.data[0];\n            },\n\n            _up: function (pos) {\n                var data = this.data;\n                var compare = this.compare;\n                var item = data[pos];\n\n                while (pos > 0) {\n                    var parent = (pos - 1) >> 1;\n                    var current = data[parent];\n                    if (compare(item, current) >= 0) break;\n                    data[pos] = current;\n                    pos = parent;\n                }\n\n                data[pos] = item;\n            },\n\n            _down: function (pos) {\n                var data = this.data;\n                var compare = this.compare;\n                var halfLength = this.length >> 1;\n                var item = data[pos];\n\n                while (pos < halfLength) {\n                    var left = (pos << 1) + 1;\n                    var right = left + 1;\n                    var best = data[left];\n\n                    if (right < this.length && compare(data[right], best) < 0) {\n                        left = right;\n                        best = data[right];\n                    }\n                    if (compare(best, item) >= 0) break;\n\n                    data[pos] = best;\n                    pos = left;\n                }\n\n                data[pos] = item;\n            }\n        };\n\n        if (polygon.length === 3) {\n            return getCentroidOfPolygon(polygon);\n        }\n\n        var precision = 0.01;\n        polygon = [polygon];\n\n        // find the bounding box of the outer ring\n        var minX, minY, maxX, maxY;\n        for (var i = 0; i < polygon[0].length; i++) {\n            var p = polygon[0][i];\n            if (!i || p.x < minX) minX = p.x;\n            if (!i || p.y < minY) minY = p.y;\n            if (!i || p.x > maxX) maxX = p.x;\n            if (!i || p.y > maxY) maxY = p.y;\n        }\n\n        var width = maxX - minX;\n        var height = maxY - minY;\n        var cellSize = Math.min(width, height);\n        var h = cellSize / 2;\n\n        // a priority queue of cells in order of their \"potential\" (max distance to polygon)\n        var cellQueue = new TinyQueue(null, compareMax);\n\n        if (cellSize === 0) return [minX, minY];\n\n        // cover polygon with initial cells\n        for (var x = minX; x < maxX; x += cellSize) {\n            for (var y = minY; y < maxY; y += cellSize) {\n                cellQueue.push(new Cell(x + h, y + h, h, polygon));\n            }\n        }\n\n        // take centroid as the first best guess\n        var bestCell = getCentroidCell(polygon);\n\n        // special case for rectangular polygons\n        var bboxCell = new Cell(minX + width / 2, minY + height / 2, 0, polygon);\n        if (bboxCell.d > bestCell.d) bestCell = bboxCell;\n\n        while (cellQueue.length) {\n            // pick the most promising cell from the queue\n            var cell = cellQueue.pop();\n\n            // update the best cell if we found a better one\n            if (cell.d > bestCell.d) {\n                bestCell = cell;\n            }\n\n            // do not drill down further if there's no chance of a better solution\n            if (cell.max - bestCell.d <= precision) continue;\n\n            // split the cell into four cells\n            h = cell.h / 2;\n            cellQueue.push(new Cell(cell.x - h, cell.y - h, h, polygon));\n            cellQueue.push(new Cell(cell.x + h, cell.y - h, h, polygon));\n            cellQueue.push(new Cell(cell.x - h, cell.y + h, h, polygon));\n            cellQueue.push(new Cell(cell.x + h, cell.y + h, h, polygon));\n        }\n\n        return {x:bestCell.x, y:bestCell.y};\n    };\n","import { Indicator } from './Indicator'\nimport { getPolygonVisualCenter } from \"./PolygonCentroid\";\n\n    var av = Autodesk.Viewing;\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\n\n\n    // /** @constructor */\n    export function MeasureToolIndicator( viewer, measurement, measureTool )\n    {\n        Indicator.call(this, viewer, measurement, measureTool);\n        this.measureTool = measureTool;\n        this.endpoints = [];\n        this.lines = { \n            xyz: {axis: false, material: createLineMaterial('005BCE'), className: 'adsk-icon-axis-delta' + '-xyz measure-label-axis-delta' + ' measure-label-axis-xyz'},\n            x:   {axis: true,  material: createLineMaterial('F12C2C'), className: 'adsk-icon-axis-delta' + '-x measure-label-axis-delta' + ' measure-label-axis-x', iconText: 'X'},\n            y:   {axis: true,  material: createLineMaterial('0BB80B'), className: 'adsk-icon-axis-delta' + '-y measure-label-axis-delta' + ' measure-label-axis-y', iconText: 'Y'},\n            z:   {axis: true,  material: createLineMaterial('2C2CF1'), className: 'adsk-icon-axis-delta' + '-z measure-label-axis-delta' + ' measure-label-axis-z', iconText: 'Z'}\n        };\n        this.segments = [];\n        this.dashedLine = {};\n        this.simple = false;\n        this.angleLabel = {};\n        this.areaLabel = {};\n        this.labels = [];\n        this.isLeaflet = false;\n        this.topologyStatus = TOPOLOGY_NOT_AVAILABLE;\n        this.tmpVector = new THREE.Vector3();\n        this.surfaceColor = new THREE.MeshBasicMaterial({\n            color: parseInt('005BCE', 16),\n            opacity: 0.15,\n            transparent: true,\n            depthTest: false,\n            depthWrite: false,\n            side: THREE.DoubleSide\n        });   \n    }\n\n    MeasureToolIndicator.prototype = Object.create(Indicator.prototype);\n    MeasureToolIndicator.prototype.constructor = MeasureToolIndicator;\n    var proto = MeasureToolIndicator.prototype;\n\n    function createLineMaterial(color) {\n        return new THREE.MeshBasicMaterial({\n            color: parseInt(color, 16),\n            depthTest: false,\n            depthWrite: false,\n            side: THREE.DoubleSide\n        });   \n    }\n\n    var _labelsSpace = 4;\n    var _angleLabelOffset = 5;\n    var TOPOLOGY_NOT_AVAILABLE = 0;\n    var TOPOLOGY_FETCHING = 1; \n    var TOPOLOGY_AVAILABLE = 2;\n    var _selectorAreaSize = 15;\n\n    var _tipHeight = 2;\n    var _tipWidth = 3;\n    var _segmentWidth = 4;\n    var _dashedSegmentWidth = 3;\n    var _axisLineWidth = 2;\n    var _dashSize = 2;\n    var _gapSize = 1;\n\n    var _angleArcWidth = 2;\n\n    function isVisible(label) {\n        return label.classList.contains('visible');\n    }\n\n    proto.init = function() {\n        this.isLeaflet = this.viewer.model.getData().isLeaflet;\n        // Create HTML Labels\n        var currLabel;\n\n        this.onSelectionAreaClickedBinded = this.onSelectionAreaClicked.bind(this);\n\n        // Line\n        if (!this.lines.xyz.label) {\n            currLabel = this.lines.xyz.label = this.createMeasurementLabel(); // Measurement result\n            currLabel.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            currLabel.addEventListener('click', this.onSelectionAreaClickedBinded);\n            this.viewer.container.appendChild(currLabel);\n        }\n        switch (this.topologyStatus) {\n            case TOPOLOGY_FETCHING:\n                this.setFetchingTopology();\n                break;\n            case TOPOLOGY_AVAILABLE:\n                this.setTopologyAvailable();\n                break;\n            case TOPOLOGY_NOT_AVAILABLE:\n                this.setNoTopology();\n                break;\n        }\n\n        this.showMeasureResult = false;\n\n        this.onCameraChangeBinded = this.onCameraChange.bind(this);\n        this.viewer.addEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\n\n        this.handleButtonUpBinded = this.measureTool.handleButtonUp.bind(this.measureTool);\n        this.addWindowEventListener('mouseup', this.handleButtonUpBinded);\n    };\n\n    proto.createEndpoint = function(index) {\n        this.endpoints[index] = {};\n        var currLabel = this.endpoints[index].label = this.createSnapResultLabel(index);\n        this.viewer.container.appendChild(currLabel);    \n    };\n\n    proto.updateLabelsPosition = function() {\n\n        var point,\n            xy,\n            label,\n            key;\n\n\n        for (key in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(key)) {\n                    label = this.endpoints[key].label;\n                    point = this.endpoints[key].position;\n\n                if (label && point && isVisible(label)) {\n                    xy = MeasureCommon.project(point, this.viewer);\n\n                    xy.x = xy.x - label.getBoundingClientRect().width / 2;\n                    xy.y = xy.y - label.getBoundingClientRect().height / 2;\n                    \n                    label.style.top  = xy.y + 'px';\n                    label.style.left = xy.x + 'px';\n                    label.point = point;\n                    this.labels.push(label);\n                }\n            }\n        }\n\n        for (var name in this.lines) {\n            if (this.lines.hasOwnProperty(name)) {\n                var item = this.lines[name];\n                    label = item.label;\n\n                if (label && item.p1 && item.p2 && isVisible(label)) {\n                    \n                    item.line.visible = item.visible;\n\n                    point = { x: (item.p1.x + item.p2.x)/2, y: (item.p1.y + item.p2.y)/2, z: (item.p1.z + item.p2.z)/2 };\n                    \n                    xy = MeasureCommon.project(point, this.viewer);\n                    label.style.top  = xy.y - Math.floor(label.clientHeight / 2) + 'px';\n                    label.style.left = xy.x - Math.floor(label.clientWidth / 2) + 'px';\n\n                    if (this.viewer.model && this.viewer.model.is2d()) {\n                        var offset = item === this.lines.xyz ? 0 : label.clientHeight;\n\n                        var p1Projected = MeasureCommon.project(item.p1, this.viewer);\n                        var p2Projected = MeasureCommon.project(item.p2, this.viewer);\n\n                        if (label.clientWidth >= p1Projected.distanceTo(p2Projected) - this.endpoints[1].label.clientWidth) {\n                            if (item === this.lines.xyz) {\n                                offset = label.clientHeight;\n                            } else {\n                                // Hide all axis labels and quit the loop\n                            \n                                this.lines.x.line.visible = false;\n                                this.lines.y.line.visible = false;\n\n                                this.viewer.impl.invalidate(false, false, /*overlayDirty=*/true);\n\n                                for (name in this.lines) {\n                                    if (this.lines.hasOwnProperty(name)) {\n                                        if (this.lines[name] !== this.lines.xyz) {\n                                            var currLabel = this.lines[name].label;\n                                            if (currLabel) {\n                                                currLabel.style.opacity = 0;\n                                            }\n                                        }\n                                    }\n                                }\n\n                                break;\n                                \n                            }\n                        }\n\n                        if (item !== this.lines.xyz) {\n                            var xyzDirection = new THREE.Vector3();\n                            var itemDirection = new THREE.Vector3();\n                            xyzDirection.subVectors(this.lines.xyz.p1, this.lines.xyz.p2).normalize();\n                            itemDirection.subVectors(item.p1, item.p2).normalize();\n                            var normal = xyzDirection.cross(this.viewer.navigation.getEyeVector()).normalize();\n                            var angle = normal.dot(itemDirection);\n                            \n                            if (angle < 0) {\n                                offset = -offset;\n                            }\n                        }\n\n                        this.alignLabelWithLine(label, item.p1, item.p2, offset, this.viewer);\n                    }\n\n                    label.style.opacity = 1;\n                    label.point = point;\n                    this.labels.push(label);\n                }\n            }\n        }\n\n        if (this.angleLabel) {\n\n            label = this.angleLabel.label;\n\n            if (label && this.angleLabel.p1 && this.angleLabel.p2 && isVisible(label)) {\n                point = { x: (this.angleLabel.p1.x + this.angleLabel.p2.x)/2, y: (this.angleLabel.p1.y + this.angleLabel.p2.y)/2, z: (this.angleLabel.p1.z + this.angleLabel.p2.z)/2 };\n                xy = MeasureCommon.project(point, this.viewer, _angleLabelOffset);\n                label.style.top = xy.y - Math.floor(label.clientHeight / 2) + 'px';\n                label.style.left = xy.x - Math.floor(label.clientWidth / 2) + 'px';\n                label.point = point;\n                this.labels.push(label);\n            }\n        }\n\n        if (this.areaLabel) {\n\n            label = this.areaLabel.label;\n\n            if (label && this.areaLabel.p1 && this.areaLabel.p2 && isVisible(label)) {\n                point = { x: (this.areaLabel.p1.x + this.areaLabel.p2.x)/2, y: (this.areaLabel.p1.y + this.areaLabel.p2.y)/2, z: (this.areaLabel.p1.z + this.areaLabel.p2.z)/2 };\n                xy = MeasureCommon.project(point, this.viewer);\n                label.style.top  = xy.y - Math.floor(label.clientHeight / 2) + 'px';\n                label.style.left = xy.x - Math.floor(label.clientWidth / 2) + 'px';\n                label.point = point;\n                this.labels.push(label);\n            }\n        }\n\n        if (this.viewer.model && !this.viewer.model.is2d()) {\n    \n            var needToStackLabels = false;\n            this.labelsStacked = false;\n            var currentLabel, i;\n\n            // Backup lable's positions in case of the need of stacking them later\n            var backupPositions = [];\n            for (i = 0; i < this.labels.length; i++) {\n                backupPositions.push({left: this.labels[i].style.left, top:this.labels[i].style.top});\n            }\n\n            // Detect and move in case of overlapping.\n            for (i = 0; i < this.labels.length && !needToStackLabels; i++) {\n                currentLabel = this.labels[i];\n                needToStackLabels = this.labelsOverlapDetection(currentLabel, this.labels);\n            }\n\n            // If we found out that the labels need to be stacked, restore their positions from the backup first, and then start again.\n            if (needToStackLabels) {\n\n                for (i = 0; i < this.labels.length; i++) {\n                    this.labels[i].style.left = backupPositions[i].left;\n                    this.labels[i].style.top = backupPositions[i].top;\n                }\n\n                this.stackLabels(this.labels);\n\n                for (i = 0; i < this.labels.length; i++) {\n                    currentLabel = this.labels[i];\n                    this.labelsOverlapDetection(currentLabel, this.labels);\n                }\n            } \n        }\n\n        this.labels = [];\n        \n    };\n\n    function isLeftIntersect(current, other) {\n        return current.right >= other.left && current.right <= other.right;\n    }\n\n    function isRightIntersect(current, other) {\n        return current.left >= other.left && current.left <= other.right;\n    }\n\n    function isMiddleIntersect(current, other) {\n        return current.left <= other.left && current.right >= other.right;\n    }\n\n    function isVerticalIntersect(current, other) {\n        return current.top < other.bottom && current.bottom > other.top;\n    }\n\n    function moveLeft(currentLabel, currentRect, otherRect) {\n        currentLabel.style.left = parseInt(currentLabel.style.left, 10) - (currentRect.right - otherRect.left) + 'px';\n    }\n\n    function moveRight(currentLabel, currentRect, otherRect) {\n        currentLabel.style.left = parseInt(currentLabel.style.left, 10) + (otherRect.right - currentRect.left) + 'px';\n    }\n\n    function moveDown(currentLabel, currentRect, otherRect) {\n        currentLabel.style.top = parseInt(currentLabel.style.top, 10) + (otherRect.bottom - currentRect.top) + 'px';\n    }\n\n\n    proto.labelsOverlapDetection = function(staticLabel, labelsList) {\n\n        var needToStackLabels = false;\n\n        for (var i = 0; i < labelsList.length ; i++) {\n\n            var dynamicLabel = labelsList[i];\n            var moved = false;\n\n            if (staticLabel !== dynamicLabel) {\n                var staticRect = staticLabel.getBoundingClientRect();\n                var dynamicRect = dynamicLabel.getBoundingClientRect();\n\n                if (isVerticalIntersect(dynamicRect, staticRect)) {\n\n                    if (isLeftIntersect(dynamicRect, staticRect)) {\n                        moveLeft(dynamicLabel, dynamicRect, staticRect);\n                        moved = true;\n                    }\n                    else if (isRightIntersect(dynamicRect, staticRect)) {\n                        moveRight(dynamicLabel, dynamicRect, staticRect);\n                        moved = true;\n                    }\n                    else if (isMiddleIntersect(dynamicRect, staticRect)) {\n                        moveDown(dynamicLabel, dynamicRect, staticRect);\n                        moved = true;\n                    }\n\n                    if (moved) {\n                        var newList = labelsList.slice(0);\n                        newList.splice(newList.indexOf(staticLabel), 1);\n                        this.labelsOverlapDetection(dynamicLabel, newList);    \n                        \n                        if (dynamicLabel.causeStacking && staticLabel.causeStacking) {\n                            needToStackLabels = true;\n                        }\n\n                        // We don't want that after the labels have been stacked, only one of them will move alone.\n                        if (dynamicLabel.causeStacking && this.labelsStacked) {\n                            this.stackLabels(this.labels);\n                        }\n                    }\n                }\n            }\n        }\n\n        return needToStackLabels;\n    };\n\n    proto.stackLabels = function(labels) { \n        var topLabel = this.lines.xyz.label;\n\n        for (var i = 1; i < labels.length; i++) {\n            if (labels[i].causeStacking) {\n                labels[i].style.left = topLabel.style.left;\n            \n                var rect = labels[i-1].getBoundingClientRect();\n                var space = (labels[i-1] == topLabel) ? _labelsSpace : 0;\n                var top = (labels[i] === topLabel) ? topLabel.style.top : labels[i-1].style.top;\n                labels[i].style.top = parseInt(top, 10) + rect.height + space + 'px';\n            }\n            labels[i].style.transform = '';\n        }\n\n        this.labelsStacked = true;\n    };\n\n    proto.drawXYZLine = function(item) {\n        var self = this;\n\n        var p1 = item.p1;\n        var p2 = item.p2;\n\n        if (!p1 || !p2)\n            return;\n\n        var tmpVec = new THREE.Vector3();\n        var geometry = item.geometry = new THREE.Geometry();\n        var direction = new THREE.Vector3().subVectors(p2, p1).normalize();\n        var normal = direction.clone().cross(self.viewer.navigation.getEyeVector()).normalize();\n        var point = MeasureCommon.nearestPointInPointToSegment(self.viewer.navigation.getPosition(), p1, p2);\n        var scale = self.setScale(point);\n\n        item.line = this.drawLineSegment(p1, p2, _segmentWidth, item.material);\n        item.visible = true;\n\n        this.segments.push(item);\n        \n        function drawTip(p) {\n            geometry.vertices = [];\n\n            // Edge\n            tmpVec.addVectors(p, normal.clone().multiplyScalar(_tipHeight * scale));\n            geometry.vertices[0] = tmpVec.clone();\n            tmpVec.subVectors(p, normal.clone().multiplyScalar(_tipHeight * scale));\n            geometry.vertices[1] = tmpVec.clone();\n            var line = self.drawLineAsCylinder(geometry, item.material, _tipWidth, self.overlayName);\n            self.setCylinderScale(line, p1 ,p2);\n            line.visible = true;\n            item.tips.push(line);\n        }\n\n        if (self.showMeasureResult) {\n            item.tips = [];\n\n            drawTip(p1);\n            drawTip(p2);    \n        }        \n    };\n\n    proto.redrawDashedLine = function() {\n        if (!this.dashedLine.p1 || !this.dashedLine.p2)\n            return;\n\n        this.viewer.impl.removeMultipleOverlays(this.overlayName, this.dashedLine.line);\n        \n        var p1Scale = this.setScale(this.dashedLine.p2);\n        var dashSize = _dashSize * p1Scale;\n        var gapSize = _gapSize * p1Scale;\n        this.dashedLine.line = this.drawDashedLine(this.dashedLine.p2, this.dashedLine.p1, dashSize, gapSize, this.lines.xyz.material, _dashedSegmentWidth, this.overlayName);\n\n        return this.dashedLine.line;\n    }; \n\n    proto.drawLineSegment = function(p1, p2, width, material, isDashedLine) {\n        var line;\n\n        if (isDashedLine) {\n            this.dashedLine.p1 = p1;\n            this.dashedLine.p2 = p2;\n            line = this.redrawDashedLine();\n        } else {\n            var geometry = new THREE.Geometry();\n            geometry.vertices.push(p1);\n            geometry.vertices.push(p2);\n            line = this.drawLineAsCylinder(geometry, material, width, this.overlayName);\n            this.setCylinderScale(line, p1, p2);\n        }\n\n        line.visible = true;\n\n        return line;\n    };\n\n    proto.drawSurface = function(points) {\n\n        const cg = Autodesk.Viewing.Extensions.CompGeom;\n\n        let cset = new cg.ContourSet();\n\n        cset.addContour(points);\n\n        cset.triangulate();\n\n        if (cset.triangulationFailed)\n            return false;\n\n        let bufferGeometry = cset.toPolygonMesh();\n\n        var face = new THREE.Mesh(bufferGeometry, this.surfaceColor);\n\n        this.viewer.impl.addOverlay(this.overlayName, face);\n\n        return true;\n    };\n\n    proto.drawSegmentAndPush = function(p1, p2, isDashedLine) {\n        if (!p1 || !p2) {\n            return;\n        }\n\n         var line = this.drawLineSegment(p1, p2, _segmentWidth, this.lines.xyz.material, isDashedLine);\n            \n        if (!isDashedLine) {\n            var item = { line: line, p1: p1, p2: p2 };\n            this.segments.push(item);    \n        }\n    };\n\n\n    proto.renderAreaMeasurementFromPoints = function(pickPositions) {\n        let p1, p2;\n        let firstPoint;\n\n        const points = [];\n\n        const keys = Object.keys(pickPositions);\n\n        for (var i = 0; i < keys.length - 1; i++) {\n            const key = parseFloat(keys[i]);\n            const position1 = pickPositions[key];\n            const position2 = pickPositions[key+1];\n\n            if (i === 0) {\n                firstPoint = new THREE.Vector3(position1.x, position1.y, position1.z);\n            }\n\n            p1 = new THREE.Vector3(position1.x, position1.y, position1.z);\n            p2 = new THREE.Vector3(position2.x, position2.y, position2.z);\n\n            this.drawSegmentAndPush(p1, p2);\n            points.push(p1);\n        }\n\n        if (keys.length > 2) {\n            // Draw last line\n            this.drawSegmentAndPush(firstPoint, p2, !this.measurement.closedArea);\n            \n            if(!MeasureCommon.isEqualVectors(firstPoint,p2,MeasureCommon.EPSILON)){\n                points.push(p2);\n            }\n            \n            if (this.measurement.area !== 0) {\n                //Draw surface will return false if it failed to triangulate the polygon (e.g. it has self-intersections)\n                if (this.drawSurface(points)) {\n                    this.showAreaLabel(getPolygonVisualCenter(points));\n                    this.updateArea();\n                }\n            }\n        }        \n    };\n\n    proto.renderAreaMeasurement = function(picks) {\n\n        var count = this.measurement.countPicks();\n        var p1, p2;\n\n        var points = [];\n        \n        for (var i = 1; i < count; i++) {\n            p1 = MeasureCommon.getSnapResultPosition(picks[i], this.viewer);\n            p2 = MeasureCommon.getSnapResultPosition(picks[i + 1], this.viewer);\n\n            this.drawSegmentAndPush(p1, p2);\n            points.push(p1);\n        }\n\n        if (count > 2) {\n            // Draw last line\n            p1 = MeasureCommon.getSnapResultPosition(picks[1], this.viewer);\n            this.drawSegmentAndPush(p1, p2, !this.measurement.closedArea);\n            \n            if(!MeasureCommon.isEqualVectors(p1,p2,MeasureCommon.EPSILON)){\n                points.push(p2);\n            }\n            \n            if (this.measurement.area !== 0) {\n                //Draw surface will return false if it failed to triangulate the polygon (e.g. it has self-intersections)\n                if (this.drawSurface(points)) {\n                    this.showAreaLabel(getPolygonVisualCenter(points));\n                    this.updateArea();\n                }\n            }\n        }        \n    };\n\n    proto.clearAngleMeshes = function() {\n        if (this.angleArc) {\n            this.viewer.impl.removeOverlay(this.overlayName, this.angleArc);\n            this.angleArc = null;\n        }\n        if (this.angleOutline.length > 0) {\n            this.viewer.impl.removeMultipleOverlays(this.overlayName, this.angleOutline);\n            this.angleOutline.length = 0;\n        }\n    };\n\n    proto.drawAngle = function(p, ep1, ep2, n, angle, midPoint) {\n\n        var smallNum = 0.001;\n\n        if (!this.materialAngle) {\n\n            this.materialAngle = new THREE.MeshPhongMaterial({\n                    color: 0x999999,\n                    ambient: 0x999999,\n                    opacity: 0.5,\n                    transparent: true,\n                    depthTest: false,\n                    depthWrite: false,\n                    side: THREE.DoubleSide\n                }\n            );\n\n            this.materialAngleOutline = new THREE.MeshBasicMaterial({\n                color: 0xFF9900,\n                depthTest: false,\n                depthWrite: false\n            });\n\n        }\n\n        MeasureCommon.createCommonOverlay(this.viewer, this.overlayName);\n        this.clearAngleMeshes();\n\n        // draw arc of angle\n        var radius = Math.min(p.distanceTo(ep1), p.distanceTo(ep2)) / 4;\n        var segments = 100;\n        //angle = angle * Math.PI / 180;\n\n        var circleGeometry = new THREE.CircleGeometry(radius, segments, 0, angle * Math.PI / 180);\n        var arc = new THREE.Mesh(circleGeometry, this.surfaceColor);\n\n        var center = arc.geometry.vertices[0].clone();\n        arc.geometry.vertices.push(center);\n\n\n        // Translate and rotate the arc to the plane where it should lie in\n        arc.position.set(p.x, p.y, p.z);\n        var V = arc.position.clone();\n        V.add(n);\n        arc.lookAt(V);\n        arc.updateMatrixWorld();\n\n\n        // Rotate the arc in the plane to the right place\n        var vA = arc.geometry.vertices[1].clone();\n        var vB = arc.geometry.vertices[arc.geometry.vertices.length - 2].clone();\n        vA.applyMatrix4(arc.matrixWorld);\n        vB.applyMatrix4(arc.matrixWorld);\n\n        var v1 = new THREE.Vector3();\n        var v2 = new THREE.Vector3();\n        var v3 = new THREE.Vector3();\n        var v4 = new THREE.Vector3();\n        v1.subVectors(vA, p);\n        v2.subVectors(vB, p);\n        v3.subVectors(ep1, p);\n        v4.subVectors(ep2, p);\n\n        var a13 = v1.angleTo(v3);\n        var a14 = v1.angleTo(v4);\n        var a23 = v2.angleTo(v3);\n        var a24 = v2.angleTo(v4);\n\n        //console.log(a13 * 180 / Math.PI + \" \" + a14 * 180 / Math.PI + \" \" + a23 * 180 / Math.PI + \" \" + a24 * 180 / Math.PI);\n\n        var ra;\n        // The arc is in the right place\n        if (((a13 <= smallNum && a13 >= -smallNum) || (a14 <= smallNum && a14 >= -smallNum))\n            && ((a23 <= smallNum && a23 >= -smallNum) || (a24 <= smallNum && a24 >= -smallNum))) {\n\n            ra =0;\n        }\n        // The arc needs to be rotated 180 degree to the right place\n        else if (((a13 <= Math.PI + smallNum && a13 >= Math.PI - smallNum) || (a14 <= Math.PI + smallNum && a14 >= Math.PI - smallNum))\n            && ((a23 <= Math.PI + smallNum && a23 >= Math.PI - smallNum) || (a24 <= Math.PI + smallNum && a24 >= Math.PI - smallNum))) {\n\n            ra = Math.PI;\n        }\n        // The arc needs to be rotated a13 radian\n        else if ((a13 <= a23 + smallNum && a13 >= a23 - smallNum) || (a13 <= a24 + smallNum && a13 >= a24 - smallNum)) {\n\n            ra = a13;\n        }\n        // The arc needs to be rotated a14 radian\n        else {\n\n            ra = a14;\n        }\n\n        var rotWorldMatrix = new THREE.Matrix4();\n        rotWorldMatrix.makeRotationAxis(n, ra);\n        //arc.matrix.multiply(rotWorldMatrix);\n        rotWorldMatrix.multiply(arc.matrix);\n        arc.matrix = rotWorldMatrix;\n        arc.rotation.setFromRotationMatrix(arc.matrix);\n\n        // Check if rotate to the wrong direction, if so, rotate back twice of the degree\n        arc.updateMatrixWorld();\n        vA = arc.geometry.vertices[1].clone();\n        vB = arc.geometry.vertices[arc.geometry.vertices.length - 2].clone();\n        vA.applyMatrix4(arc.matrixWorld);\n        vB.applyMatrix4(arc.matrixWorld);\n\n        v1.subVectors(vA, p);\n        v2.subVectors(vB, p);\n\n        a13 = v1.angleTo(v3);\n        a14 = v1.angleTo(v4);\n        a23 = v2.angleTo(v3);\n        a24 = v2.angleTo(v4);\n\n        //console.log(a13 * 180 / Math.PI + \" \" + a14 * 180 / Math.PI + \" \" + a23 * 180 / Math.PI + \" \" + a24 * 180 / Math.PI);\n\n        if (a13 >= smallNum && a14 >= smallNum) {\n\n            rotWorldMatrix = new THREE.Matrix4();\n            rotWorldMatrix.makeRotationAxis(n, - ra * 2);\n            //arc.matrix.multiply(rotWorldMatrix);\n            rotWorldMatrix.multiply(arc.matrix);\n            arc.matrix = rotWorldMatrix;\n            arc.rotation.setFromRotationMatrix(arc.matrix);\n        }\n\n        // draw outline of the arc\n        var outlineGeometry = new THREE.CircleGeometry(radius, segments, 0, angle * Math.PI / 180);\n        outlineGeometry.vertices.splice(0, 1);\n        arc.updateMatrixWorld();\n        outlineGeometry.applyMatrix(arc.matrixWorld);\n        this.angleOutline = this.drawEdgeAsCylinder(outlineGeometry, this.lines.xyz.material, _angleArcWidth, 0, this.getNewCylinderGeometry());\n\n        this.angleArc = arc;\n        this.viewer.impl.addOverlay(this.overlayName, this.angleArc);\n        this.viewer.impl.addMultipleOverlays(this.overlayName, this.angleOutline);\n\n        // This is used for angle label's position\n        midPoint.copy(arc.geometry.vertices[Math.round(arc.geometry.vertices.length / 2) - 1]);\n        midPoint.applyMatrix4(arc.matrixWorld);\n        var dir = new THREE.Vector3();\n        dir.subVectors(midPoint, p).normalize();\n        dir.multiplyScalar(radius / 2);\n        midPoint.add(dir);\n    };\n\n    proto.renderAngleMeasurementFromPoints = function(pickPositions) {\n        var p1, p2;\n\n        var points = [];\n        \n        const keys = Object.keys(pickPositions);\n        for (var i = 0; i < keys.length - 1; i++) {\n            const key = parseFloat(keys[i]);\n            const position1 = pickPositions[key];\n            const position2 = pickPositions[key+1];\n\n            p1 = new THREE.Vector3(position1.x, position1.y, position1.z);\n            p2 = new THREE.Vector3(position2.x, position2.y, position2.z);\n\n\n            this.drawSegmentAndPush(p1, p2);\n\n            if (p1) {\n                points.push(p1);    \n            }\n        }\n\n        if (p2) {\n            points.push(p2);\n        }\n        \n        if (points.length === 3 && this.measurement.angle) {\n            var n = new THREE.Vector3();\n            var v1 = new THREE.Vector3();\n            var v2 = new THREE.Vector3();\n            v1.subVectors(points[0], points[1]);\n            v2.subVectors(points[1], points[2]);\n            n.crossVectors(v1, v2);\n            n.normalize();\n\n            var midPoint = new THREE.Vector3();\n            this.drawAngle(points[1], points[0], points[2], n, this.measurement.angle, midPoint);\n            this.showAngleLabel(midPoint);\n            this.updateAngle();\n        }        \n    };\n\n    proto.renderAngleMeasurement = function(picks) {\n\n        var count = this.measurement.countPicks();\n        var p1, p2;\n\n        var points = [];\n        \n        for (var i = 1; i < count; i++) {\n            p1 = MeasureCommon.getSnapResultPosition(picks[i], this.viewer);\n            p2 = MeasureCommon.getSnapResultPosition(picks[i + 1], this.viewer);\n\n            this.drawSegmentAndPush(p1, p2);\n\n            if (p1) {\n                points.push(p1);    \n            }\n        }\n\n        if (p2) {\n            points.push(p2);\n        }\n        \n        if (points.length === 3 && this.measurement.angle) {\n            var n = new THREE.Vector3();\n            var v1 = new THREE.Vector3();\n            var v2 = new THREE.Vector3();\n            v1.subVectors(points[0], points[1]);\n            v2.subVectors(points[1], points[2]);\n            n.crossVectors(v1, v2);\n            n.normalize();\n\n            var midPoint = new THREE.Vector3();\n            this.drawAngle(points[1], points[0], points[2], n, this.measurement.angle, midPoint);\n            this.showAngleLabel(midPoint);\n            this.updateAngle();\n        }        \n    };\n\n    proto.createDistanceLabel = function(item) {\n        var label = item.label = this.createMeasurementLabel();\n        \n        setVisibilityMeasurementLabelText(label, item === this.lines.xyz);\n\n        const _document = this.getDocument();\n        // Override main label when displaying only an axis label (X, Y or Z)\n        if (item.axis) {\n            label.className = item.className;\n            var axisIcon = _document.createElement('div');\n            axisIcon.className = 'measure-label-axis-icon ' + item.iconText;\n            axisIcon.innerText = item.iconText;\n            label.insertBefore(axisIcon, label.firstChild);\n\n            if (!av.isMobileDevice()) {\n                MeasureCommon.safeToggle(label, 'enableTransition', true);\n            }\n        }\n\n        this.viewer.container.appendChild(label);\n\n        return label;\n    };\n\n    proto.updateLine = function(item, x1, y1, z1, x2, y2, z2, showAxis) {\n        var line = item.line,\n            label = item.label,\n            p1 = new THREE.Vector3(x1, y1, z1),\n            p2 = new THREE.Vector3(x2, y2, z2);\n\n        // Swap points if needed to have consistent axis directions.\n        var tmpVec;\n        if (item === this.lines.x && p2.x > p1.x) {\n            tmpVec = p1.clone();\n            p1 = p2.clone();\n            p2 = tmpVec.clone();\n        } \n        else if (item === this.lines.y && p2.y > p1.y) {\n            tmpVec = p1.clone();\n            p1 = p2.clone();\n            p2 = tmpVec.clone();\n        } \n        else if (item === this.lines.z && p2.z > p1.z) {\n            tmpVec = p1.clone();\n            p1 = p2.clone();\n            p2 = tmpVec.clone();\n        }\n\n        item.line = null;            \n\n        if (!label) {\n            label = this.createDistanceLabel(item);\n        }\n        else {\n            this.hideLabel(label);\n        }\n        \n        if (((this.isLeaflet && item !== this.lines.z) || (p1.distanceTo(p2) >= MeasureCommon.EPSILON)) && showAxis) {\n\n            item.p1 = p1;\n            item.p2 = p2;\n\n            if (item === this.lines.xyz) {\n                this.drawXYZLine(item);\n                this.showLabel(label);\n                this.updateDistance();\n            }\n            else {\n                line = item.line = this.drawLineSegment(p1, p2, _axisLineWidth, item.material);\n                var show = !this.simple && this.showMeasureResult;\n\n                line.visible = show;\n                item.visible = show;\n\n                if (show) {\n                    this.showLabel(label);\n                }\n                else {\n                    this.hideLabel(label);\n                }\n            }\n        }\n    }\n\n    // Draw distance measurement\n    proto.renderDistanceMeasurementFromPoints = function(p1, p2) {\n\n        this.updateLine(this.lines.xyz, p1.x, p1.y, p1.z, p2.x, p2.y, p2.z, true);\n\n        var up = this.viewer.navigation.getAlignedUpVector(),\n            x = Math.abs(up.x),\n            y = Math.abs(up.y),\n            z = Math.abs(up.z);\n\n        var showAxis = false;\n\n        if (z > x && z > y) { // z up\n            this.updateLine(this.lines.x, p1.x, p1.y, p1.z, p2.x, p1.y, p1.z, showAxis);\n            this.updateLine(this.lines.y, p2.x, p1.y, p1.z, p2.x, p2.y, p1.z, showAxis);\n            this.updateLine(this.lines.z, p2.x, p2.y, p1.z, p2.x, p2.y, p2.z, showAxis);\n\n        } else if (y > x && y > z) { // y up\n            this.updateLine(this.lines.x, p1.x, p1.y, p1.z, p2.x, p1.y, p1.z, showAxis);\n            this.updateLine(this.lines.z, p2.x, p1.y, p1.z, p2.x, p1.y, p2.z, showAxis);\n            this.updateLine(this.lines.y, p2.x, p1.y, p2.z, p2.x, p2.y, p2.z, showAxis);\n\n        } else { // x up - do we ever see this?\n            this.updateLine(this.lines.y, p1.x, p1.y, p1.z, p1.x, p2.y, p1.z, showAxis);\n            this.updateLine(this.lines.z, p1.x, p2.y, p1.z, p1.x, p2.y, p2.z, showAxis);\n            this.updateLine(this.lines.x, p1.x, p2.y, p2.z, p2.x, p2.y, p2.z, showAxis);\n        }\n\n    };\n\n    // Draw distance measurement\n    proto.renderDistanceMeasurement = function(p1, p2)\n    {\n        var self = this;\n\n        // If the line aligns with one of axis, then don't show axis\n        function displayAxis(p1, p2) {\n            self.tmpVector.subVectors(p1, p2);\n            self.tmpVector.normalize();\n\n            return !MeasureCommon.isParallel(self.tmpVector, self.xAxis) && !MeasureCommon.isParallel(self.tmpVector, self.yAxis) && !MeasureCommon.isParallel(self.tmpVector, self.zAxis);\n        }\n\n        this.updateLine(this.lines.xyz, p1.x, p1.y, p1.z, p2.x, p2.y, p2.z, true);\n\n        var up = this.viewer.navigation.getAlignedUpVector(),\n            x = Math.abs(up.x),\n            y = Math.abs(up.y),\n            z = Math.abs(up.z);\n\n        var showAxis = displayAxis(p1, p2);\n\n        if (z > x && z > y) { // z up\n            this.updateLine(this.lines.x, p1.x, p1.y, p1.z, p2.x, p1.y, p1.z, showAxis);\n            this.updateLine(this.lines.y, p2.x, p1.y, p1.z, p2.x, p2.y, p1.z, showAxis);\n            this.updateLine(this.lines.z, p2.x, p2.y, p1.z, p2.x, p2.y, p2.z, showAxis);\n\n        } else if (y > x && y > z) { // y up\n            this.updateLine(this.lines.x, p1.x, p1.y, p1.z, p2.x, p1.y, p1.z, showAxis);\n            this.updateLine(this.lines.z, p2.x, p1.y, p1.z, p2.x, p1.y, p2.z, showAxis);\n            this.updateLine(this.lines.y, p2.x, p1.y, p2.z, p2.x, p2.y, p2.z, showAxis);\n\n        } else { // x up - do we ever see this?\n            this.updateLine(this.lines.y, p1.x, p1.y, p1.z, p1.x, p2.y, p1.z, showAxis);\n            this.updateLine(this.lines.z, p1.x, p2.y, p1.z, p1.x, p2.y, p2.z, showAxis);\n            this.updateLine(this.lines.x, p1.x, p2.y, p2.z, p2.x, p2.y, p2.z, showAxis);\n        }\n\n    };\n\n    proto.updateResults = function() {\n        this.updateDistance();\n        this.updateAngle();\n        this.updateArea();\n        \n        setTimeout(function(){\n            // This can get called after the viewer is unloaded\n            if (this.viewer.impl)\n                this.updateLabelsPosition();\n        }.bind(this), 0);\n    };\n\n    // Update distance measurement label\n    proto.updateDistance = function() {\n\n        function setWidth(label, value) {\n            if (!label) return;\n            label.style.width = value;\n        }\n\n        function getWidth(label) {\n            return label ? label.clientWidth : 0;\n        }\n\n        Object.keys(this.lines).forEach(function(name) {\n            setWidth(this.lines[name].label, '');\n        }.bind(this));\n        \n        setDeltaMeasurementLabelText(this.lines.x.label, \"~ \" + this.measureTool.getDistanceX(this.measurement));\n        setDeltaMeasurementLabelText(this.lines.y.label, \"~ \" + this.measureTool.getDistanceY(this.measurement));\n        setDeltaMeasurementLabelText(this.lines.z.label, \"~ \" + this.measureTool.getDistanceZ(this.measurement));\n        setValueMeasurementLabelText(this.lines.xyz.label, \"~ \" + this.measureTool.getDistanceXYZ(this.measurement));\n\n        if (this.viewer.model && this.viewer.model.is3d()) {\n            setTimeout(function(){\n                var maxWidth = Math.max(getWidth(this.lines.x.label), getWidth(this.lines.y.label), getWidth(this.lines.z.label), getWidth(this.lines.xyz.label));                \n                Object.keys(this.lines).forEach(function(name) {\n                    setWidth(this.lines[name].label, maxWidth + 'px');\n                }.bind(this));\n            }.bind(this), 0);\n        }\n    };\n\n    // Update angle measurement label\n    proto.updateAngle = function() {\n        setValueMeasurementLabelText(this.angleLabel.label, \"~ \" + this.measureTool.getAngle(this.measurement));\n    };\n\n    // Update area measurement label\n    proto.updateArea = function() {\n        setValueMeasurementLabelText(this.areaLabel.label, \"~ \" + this.measureTool.getArea(this.measurement));\n    };\n\n    // Set if collapse or expand the xyz delta distance\n    proto.setSimple = function(simple) {\n        if (this.simple != simple) {\n            this.simple = simple;\n\n            var isVisible = !simple;\n            this.setLineVisible(this.lines.x, isVisible);\n            this.setLineVisible(this.lines.y, isVisible);\n            this.setLineVisible(this.lines.z, isVisible);\n\n            this.updateLabelsPosition();\n\n            this.viewer.impl.invalidate(false, false, /*overlayDirty=*/true);\n        }\n    };\n\n    proto.setLineVisible = function(item, isVisible) {\n        if (item.line) {\n            item.line.visible = isVisible;\n            item.visible = isVisible;\n\n            if (item.label) {\n                if (isVisible) {\n                    this.showLabel(item.label);\n                }\n                else {\n                    this.hideLabel(item.label);\n                    item.label.style.opacity = 0;\n                }\n            }\n        }\n    };\n\n    proto.enableLabelsTouchEvents = function(enable) {\n        var value = enable ? 'all' : 'none';\n\n        if (this.lines.xyz.label) {\n            this.lines.xyz.label.style.pointerEvents = value;   \n        }\n\n        if (this.angleLabel.label) {\n            this.angleLabel.label.style.pointerEvents = value;   \n        }\n\n        if (this.areaLabel.label) {\n            this.areaLabel.label.style.pointerEvents = value;\n        }\n    };\n\n    proto.setLabelsZIndex = function(zIndex) {\n        for (var name in this.lines) {\n            if (this.lines.hasOwnProperty(name)) {\n                var item = this.lines[name];\n                if (item.label) {\n                    item.label.style.zIndex = zIndex;\n                }\n            }\n        }\n\n        if (this.angleLabel && this.angleLabel.label) {\n            this.angleLabel.label.style.zIndex = zIndex;    \n        }\n\n        if (this.areaLabel && this.areaLabel.label) {\n            this.areaLabel.label.style.zIndex = zIndex;    \n        }\n\n        for (name in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(name)) {\n                var endpoint = this.endpoints[name];\n                if (endpoint.label) {\n                    endpoint.label.style.zIndex = zIndex - 1;\n                }\n            }\n        }\n    };\n\n    proto.focusLabels = function() {\n        this.setLabelsZIndex(3);\n    };\n\n    proto.unfocusLabels = function() {\n        this.setLabelsZIndex(2);\n    };\n\n    proto.clear = function() {\n        var name;\n\n        for (name in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(name)) {\n                var endpoint = this.endpoints[name];\n                if (endpoint.label) {\n                    this.hideLabel(endpoint.label);\n                }\n            }\n        }\n\n        for (name in this.lines) {\n            if (this.lines.hasOwnProperty(name)) {\n                var item = this.lines[name];\n                if (item.line) {\n                    item.line.visible = false;\n                    item.visible = false;\n\n                    item.tips && item.tips.forEach(function(tip) {\n                        tip.visible = false;\n                    });\n                }\n                if (item.label) {\n                    this.hideLabel(item.label);\n                    item.label.style.opacity = 0;\n                    item.label.style.zIndex = 2;\n                }\n            }\n        }\n\n        if (this.angleLabel && this.angleLabel.label) {\n            this.hideLabel(this.angleLabel.label);\n        }\n\n        if (this.areaLabel && this.areaLabel.label) {\n            this.hideLabel(this.areaLabel.label);\n        }\n        \n        this.clearSelectionAreas();\n\n        this.segments = [];\n        this.dashedLine = {};\n\n        this.viewer.impl.clearOverlay(this.overlayName);\n        MeasureCommon.createCommonOverlay(this.viewer, this.overlayName);\n    };\n\n    proto.hideClick = function(pickNumber) {\n\n        Indicator.prototype.hideClick.call(this, pickNumber);\n\n        for (var name in this.lines) {\n            if (this.lines.hasOwnProperty(name)) {\n                var item = this.lines[name];\n                if (item.line) {\n                    item.line.visible = false;\n                    item.visible = false;\n\n                    item.tips && item.tips.forEach(function(tip) {\n                        tip.visible = false;\n                    });\n                }\n                if (item.label) {\n                    this.hideLabel(item.label);\n                    item.label.style.opacity = 0;\n                }\n            }\n        }\n\n        if (this.angleLabel && this.angleLabel.label) {\n            this.hideLabel(this.angleLabel.label);\n        }\n\n        if (this.areaLabel && this.areaLabel.label) {\n            this.hideLabel(this.areaLabel.label);\n        }\n\n        this.enableSelectionAreas(item.selectionArea, false);\n    };\n\n    proto.destroy = function() {\n        var name;\n\n        Indicator.prototype.destroy.call(this);\n\n        for (name in this.lines) {\n            if (this.lines.hasOwnProperty(name)) {\n                var item = this.lines[name];\n                if (item.line) {\n                    this.viewer.impl.clearOverlay(self.overlayName);\n                    item.material = item.line = item.geometry = null;\n                }\n\n                if (item.label) {\n                    if (name === 'xyz') {\n                        item.label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n                        item.label.removeEventListener('click', this.onSelectionAreaClickedBinded);    \n                    }\n\n                    item.label.parentNode.removeChild(item.label);\n                    item.label = null;\n                }\n                item.material = item.line = item.geometry = item.label = item.p1 = item.p2 = null;\n            }\n        }\n\n        this.clearAngleMeshes();\n        \n        if (this.angleLabel && this.angleLabel.label) {\n            this.angleLabel.label.parentNode.removeChild(this.angleLabel.label);\n            this.angleLabel.label.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            this.angleLabel.label.removeEventListener('click', this.onSelectionAreaClickedBinded);\n             this.angleLabel.label = this.angleLabel.p1 = this.angleLabel.p2 = null;\n        }\n\n        \n\n        if (this.areaLabel && this.areaLabel.label) {\n            this.areaLabel.label.parentNode.removeChild(this.areaLabel.label);\n            this.areaLabel.label.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            this.areaLabel.label.removeEventListener('click', this.onSelectionAreaClickedBinded);\n            this.areaLabel.label = this.areaLabel.p1 = this.areaLabel.p2 = null;\n        }\n        \n        \n\n        if (this.viewer.impl.overlayScenes[this.overlayName]){\n            this.viewer.impl.removeOverlayScene(this.overlayName);\n        }\n\n        this.viewer.removeEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\n        this.removeWindowEventListener('mouseup', this.handleButtonUpBinded);\n    };\n\n    proto.clearXYZLine = function() {\n        this.viewer.impl.removeOverlay(this.overlayName, this.lines.xyz.line);\n\n        this.lines.xyz.tips && this.lines.xyz.tips.forEach(function(tip) {\n            this.viewer.impl.removeOverlay(this.overlayName, tip);\n        }.bind(this));\n    };\n\n    // Update scale for vertex, edge, line and extension dash line\n    proto.updateScale = function() {\n        var name;\n\n        this.angleOutline.forEach(cylinderMesh => this.setCylinderScale(cylinderMesh));\n\n        for (name in this.lines) {\n            if (this.lines.hasOwnProperty(name)) {\n                var item = this.lines[name];\n                if (item.line && item !== this.lines.xyz) {\n                    this.setCylinderScale(item.line, item.p1, item.p2);\n                }\n            }\n        }\n        \n        for (name in this.segments) {\n            if (this.segments.hasOwnProperty(name)) {\n                var segment = this.segments[name];\n                if (segment.line) {\n                    this.setCylinderScale(segment.line, segment.p1, segment.p2);\n                } \n            }\n        }\n        \n        if (this.measurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE) {\n            if (this.measurement.isComplete()) {\n                this.clearXYZLine();\n                this.drawXYZLine(this.lines.xyz);\n            }\n        }\n    };\n\n    proto.setNoTopology = function(){\n        this.topologyStatus = TOPOLOGY_NOT_AVAILABLE;\n        if (this.lines.xyz.label) {\n            setVisibilityMeasurementLabelSpinner(this.lines.xyz.label, false, this.topologyStatus);\n            this.lines.xyz.label.classList.remove('fetching-topology');\n        }\n    };\n    proto.setFetchingTopology = function() {\n        this.topologyStatus = TOPOLOGY_FETCHING;\n        if (this.lines.xyz.label) {\n            setVisibilityMeasurementLabelSpinner(this.lines.xyz.label, true, this.topologyStatus);\n                this.lines.xyz.label.classList.add('fetching-topology');\n        }\n    };\n    proto.setTopologyAvailable = function() {\n        this.topologyStatus = TOPOLOGY_AVAILABLE;\n        if (this.lines.xyz.label) {\n            setVisibilityMeasurementLabelSpinner(this.lines.xyz.label, false, this.topologyStatus);\n            this.lines.xyz.label.classList.remove('fetching-topology');\n        }\n    };\n\n    proto.createMeasurementLabel = function() {\n      \n        const _document = this.getDocument();\n\n        var label = _document.createElement('div');\n        label.className = 'measure-length';\n        \n        var spinner = _document.createElement('div');\n        spinner.className = 'measure-fetching-topology';\n        spinner.style.display = 'none';\n        label.appendChild(spinner);\n\n        var text = _document.createElement('div');\n        text.className = 'measure-length-text';\n        label.appendChild(text);    \n\n        var delta = _document.createElement('div');\n        delta.className = 'measure-delta-text';\n        label.appendChild(delta);\n\n        label.causeStacking = true;\n        \n        if (!av.isMobileDevice()) {\n            MeasureCommon.safeToggle(label, 'enable-hover', true);\n        }\n\n        return label;\n    };\n\n    // Receives an object created with createMeasurementLabel()\n    function setVisibilityMeasurementLabelText(label, isVisible) {\n        var div = label.querySelector('.measure-length-text');\n        div && (div.style.display = isVisible ? '' : 'none');\n    }\n\n    // Receives an object created with createMeasurementLabel()\n    function setValueMeasurementLabelText(label, strValue) {\n        if (!label) return;\n        var div = label.querySelector('.measure-length-text');\n        div && (div.textContent = strValue);\n    }\n\n    // Receives an object created with createMeasurementLabel()\n    function setDeltaMeasurementLabelText(label, strValue) {\n        if (!label) return;\n        var div = label.querySelector('.measure-delta-text');\n        div && (div.textContent = strValue);\n    }\n\n    // Receives an object created with createMeasurementLabel()\n    function setVisibilityMeasurementLabelSpinner(label, isVisible, topologyStatus) {\n        if (!label) return;\n        var div = label.querySelector('.measure-fetching-topology');\n        div && (div.style.display = \n            (isVisible && topologyStatus === TOPOLOGY_FETCHING) ? 'inline-block' : 'none');\n    }\n\n    /**\n     * Helper function that creates the label used for (1) and (2),\n     * which are the 2 mouse clicks for the measurement.\n     */\n    proto.createSnapResultLabel = function(pointNumber) {\n        const _document = this.getDocument();\n\n        var label = _document.createElement('div');\n        label.className = 'measure-label';\n\n        var label_icon = _document.createElement('div');\n        label_icon.className = 'measure-label-icon';\n        label.appendChild(label_icon);\n\n        if (av.isTouchDevice()) {\n            this.initLabelMobileGestures(label, pointNumber, this.measureTool);\n            var hitArea = _document.createElement('div');\n            hitArea.className = 'measure-label-hit-area';\n            label.appendChild(hitArea);                      \n        } \n         \n        if (!av.isMobileDevice()) {\n            this.initMouseEvent(label, pointNumber);\n\n            label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            MeasureCommon.safeToggle(label, 'enable-hover', true);  \n        }\n        \n \n        label.causeStacking = false;\n        \n        return label;\n    };\n\n    proto.showAngleLabel = function(midPoint) {\n\n            var label = this.angleLabel.label;\n\n            if (!label) {\n                label = this.angleLabel.label = this.createMeasurementLabel();\n                this.viewer.container.appendChild(label);\n                label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n                label.addEventListener('click', this.onSelectionAreaClickedBinded);\n            }\n\n            this.updateAngle();\n            this.showLabel(label);\n\n            this.angleLabel.p1 = midPoint.clone();\n            this.angleLabel.p2 = midPoint.clone();\n\n    };\n\n    proto.showAreaLabel = function(midPoint) {\n\n            var label = this.areaLabel.label;\n\n            if (!label) {\n                label = this.areaLabel.label = this.createMeasurementLabel();\n                this.viewer.container.appendChild(label);\n                label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n                label.addEventListener('click', this.onSelectionAreaClickedBinded);\n            }\n\n            this.updateArea();\n            this.showLabel(label);\n\n            this.areaLabel.p1 = midPoint;\n            this.areaLabel.p2 = midPoint;\n\n    };\n\n    proto.onSelectionAreaClicked = function() {\n        this.measureTool.selectMeasurementById(this.measurement.id);\n    };\n\n    proto.createSelectionArea = function() {\n        const _document = this.getDocument();\n        var selectionArea = _document.createElement('div');\n        selectionArea.id = 'measurement-selection-area-' + this.measurement.id;\n        this.viewer.container.appendChild(selectionArea);\n        selectionArea.className = 'measure-selection-area';\n        selectionArea.style.display = 'none';\n        selectionArea.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n        selectionArea.addEventListener('click', this.onSelectionAreaClickedBinded);\n        return selectionArea;\n    };\n\n    proto.updateSelectionArea = function() {\n\n        this.segments.forEach(function(item) \n        {\n            if (item.p1 && item.p2) {\n                var p1 = MeasureCommon.project(item.p1, this.viewer);\n                var p2 = MeasureCommon.project(item.p2, this.viewer);\n\n                if (!item.selectionArea) {\n                    item.selectionArea = this.createSelectionArea();\n                }\n\n                var selectionArea = item.selectionArea;\n\n                var v = new THREE.Vector2();\n\n                selectionArea.style.top = (p1.y - (_selectorAreaSize / 2)) + 'px';\n                selectionArea.style.left = p1.x  + 'px';\n                selectionArea.style.width = v.subVectors(p1, p2).length() + 'px';\n                selectionArea.style.height = _selectorAreaSize + 'px';\n\n                var angle = null;\n                var deltaX = p1.x - p2.x;\n                var deltaY = p1.y - p2.y;\n\n                angle =  Math.atan2(-deltaY , -deltaX) * 180 / Math.PI;    \n\n                selectionArea.style.transform = 'rotate('+ angle +'deg)';\n                selectionArea.style.transformOrigin = '0px ' + (_selectorAreaSize / 2) + 'px';\n            }\n        }.bind(this));\n\n        if (this.measureTool.areAllPicksSet()) {\n            this.enableSelectionAreas(true);    \n        }\n    };\n\n    proto.clearSelectionAreas = function() {\n        const _document = this.getDocument();\n        this.segments.forEach(function(item) \n        {  \n            if (item.selectionArea) {\n                item.selectionArea.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\n                item.selectionArea.removeEventListener('click', this.onSelectionAreaClickedBinded);\n                var element = _document.getElementById('measurement-selection-area-' + this.measurement.id);\n                if (element) {\n                    element.parentNode.removeChild(element);\n                }\n                item.selectionArea = null;\n            }\n        }.bind(this));\n    };\n\n    proto.enableSelectionAreas = function(enable) {\n        this.segments.forEach(function(item) \n        {   \n            if (item.selectionArea) {\n                if (enable) {\n                    item.selectionArea.style.display = 'block';\n                } \n                else {\n                    item.selectionArea.style.display = 'none';\n                }\n            }\n        }.bind(this));\n    };\n\n    proto.render = function(picks, showMeasureResult) {\n        Indicator.prototype.render.call(this, picks, showMeasureResult);\n\n        this.updateSelectionArea();\n    };\n\n    proto.renderFromPoints = function(points, showMeasureResult) {\n        Indicator.prototype.renderFromPoints.call(this, points, showMeasureResult);\n\n        this.updateSelectionArea();\n    }\n\n    proto.onCameraChange = function() {\n        this.redrawDashedLine();\n        this.updateSelectionArea();\n        this.hideLabelsOutsideOfView();\n        this.updateLabelsPosition();\n    };\n\n    proto.handleResize = function() {\n        this.redrawDashedLine();\n        this.updateSelectionArea();\n        this.updateLabelsPosition();\n    };\n\n","import { MeasurementsManager } from './MeasurementsManager'\nimport { MeasureToolIndicator } from './MeasureToolIndicator'\n\nconst av = Autodesk.Viewing;\n\n//\n// /** @constructor */\n//\n//\nexport function MeasureTool( viewer, options, sharedMeasureConfig, snapper )\n{\n    var _viewer  = viewer;\n    var _options = options || {};\n    var _names  = [\"measure\"];\n    var _priority = 50;\n\n    this.setGlobalManager(viewer.globalManager);\n\n    // Shared State with CalibrationTool and Indicator\n    var _sharedMeasureConfig = sharedMeasureConfig;\n\n    var av = Autodesk.Viewing;\n    var avem = Autodesk.Viewing.Extensions.Measure;\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\n    \n    // Not shared with Indicator.js\n    var _active = false;\n    var _isDragging = false;\n    var _endpointMoved = false;\n    var _activePoint = 0;\n    var _consumeSingleClick = false;\n    var _singleClickHandled = false;\n    var _downX = null;\n    var _downY = null;\n    var _isolateMeasure = false;\n\n    var _measurementsManager = new MeasurementsManager(_viewer);\n    var _currentMeasurement = null;\n    var _onIndicatorCreatedCB = null;\n    \n    var _cursor = \"url(data:image/png;base64,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), auto\";\n\n    // Snapper\n    var _snapper = snapper;\n    \n    var _isPressing = false;\n\n    var _picksBackup = [];\n    var _cursorPosition = null;\n\n    var _closeAreaSnapRange = 25;\n    var _preMeasureState = null;\n\n    var _measurementType = MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE;\n\n    function getActivePick()\n    {   \n        if(!_currentMeasurement)\n            return null;\n\n        var index;\n\n        if (_activePoint === 0) {\n            return null;\n        } else if (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1) {\n            index = _currentMeasurement.countPicks();\n        } else {\n               index = _activePoint;\n        }\n\n        return _currentMeasurement.getPick(index);\n    }\n\n    function getPreviousPick()\n    {\n        if(!_currentMeasurement)\n            return null;\n\n        var index;\n\n        if (_activePoint === 0) {\n            return null;\n        } else if (_activePoint === 1) {\n            index = _currentMeasurement.countPicks();\n        } else if (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1) {\n            index = _currentMeasurement.countPicks() - 1;\n        } else {\n            index = _activePoint - 1;\n        }\n        \n        return _currentMeasurement.getPick(index);\n    }\n\n    function hasPreviousPick()\n    {\n        if(!_currentMeasurement)\n            return false;\n\n        var index;\n\n        if (_activePoint === 0) {\n            return false;\n        } else if (_activePoint === 1) {\n            index = _currentMeasurement.countPicks();\n        } else if (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1) {\n            index = _currentMeasurement.countPicks() - 1;\n        } else {\n            index = _activePoint - 1;\n        }\n        \n        return _currentMeasurement.hasPick(index);\n    }\n\n    function noPicksSet() {\n        _activePoint = 0;\n    }\n\n    function allPicksSet() {\n        _activePoint = _currentMeasurement.countPicks() + 1;\n        enableMeasurementsTouchEvents(true);\n        _currentMeasurement.indicator.enableSelectionAreas(true);\n    }\n\n    function isNoPicksSet() {\n        return _activePoint === 0 || !_currentMeasurement;\n    }\n\n    this.areAllPicksSet = function() {\n        return _currentMeasurement && (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1);\n    };\n\n    this.register = function()\n    {\n\n    };\n\n    this.deregister = function()\n    {\n        this.deactivate();\n    };\n\n    this.isActive = function()\n    {\n        return _active;\n    };\n\n    this.getNames = function()\n    {\n        return _names;\n    };\n\n    this.getName = function()\n    {\n        return _names[0];\n    };\n\n    this.getPriority = function()\n    {\n        return _priority;\n    };\n\n    this.getCursor = function() {\n        return _isDragging ? null : _cursor;\n    };\n\n    this.getCurrentMeasurementRaw = function() {\n        return _currentMeasurement;\n    };\n\n    this.getActivePointIndex = function() {\n        return _activePoint;\n    };\n\n    this.getMeasurementsManager = function() {\n        return _measurementsManager;\n    }\n\n\n    this.startNewMeasurement = function() {\n        _currentMeasurement = _measurementsManager.createMeasurement(_measurementType);\n        _currentMeasurement.attachIndicator(_viewer, this, MeasureToolIndicator);\n\n        if (_onIndicatorCreatedCB instanceof Function) {\n            _onIndicatorCreatedCB();\n            _onIndicatorCreatedCB = null;\n        }\n\n        enableMeasurementsTouchEvents(false);\n    };\n\n    this.changeMeasurementType = function(type) {\n        _measurementType = type;\n    };\n\n    this.activate = function()\n    {\n        _active = true;\n        _measurementsManager.init();\n\n        noPicksSet();\n        _isDragging = false;\n        this.isEditingEndpoint = false;\n        this.editByDrag = false;\n\n        _viewer.impl.pauseHighlight(true);\n\n        _viewer.clearSelection();\n        _preMeasureState = _viewer.getState({objectSet: true});\n        \n        _viewer.toolController.activateTool(\"snapper\");\n        _viewer.toolController.activateTool(\"magnifyingGlass\");\n \n       this.onMeasurementChangedBinded = this.onMeasurementChanged.bind(this);\n       _viewer.addEventListener(MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, this.onMeasurementChangedBinded);\n       _viewer.addEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChange);\n       _viewer.addEventListener(av.SHOW_ALL_EVENT, this.onShowAllEvent);\n    };\n\n    this.deactivate = function()\n    {\n        if (!_active)\n            return;\n\n        _active = false;\n        \n        this.clearIsolate(); // restore initial isolation\n        _preMeasureState = null;\n\n        while (Object.keys(_measurementsManager.measurementsList).length > 0) {\n            _currentMeasurement = _measurementsManager.measurementsList[Object.keys(_measurementsManager.measurementsList)[0]];\n            _measurementsManager.changeCurrentMeasurement(_currentMeasurement);\n            this.clearCurrentMeasurement();\n            _currentMeasurement = null;\n        }\n\n        if(_snapper && _snapper.isActive()) {\n            _viewer.toolController.deactivateTool(\"snapper\");\n        }\n\n        _viewer.toolController.deactivateTool(\"magnifyingGlass\");\n\n        _viewer.impl.pauseHighlight(false);\n\n        _measurementsManager.destroy();\n        _viewer.removeEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChange);\n        _viewer.removeEventListener(MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, this.onMeasurementChangedBinded);\n        _viewer.removeEventListener(av.SHOW_ALL_EVENT, this.onShowAllEvent);\n    };\n\n    this.update = function()\n    {\n        return false;\n    };\n\n    this.getUnits = function() {\n        return _sharedMeasureConfig.units;\n    };\n\n    this.setUnits = function( units )\n    {\n        if (_sharedMeasureConfig.units !== units ) {\n            _sharedMeasureConfig.units = units;\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.DISPLAY_UNITS_CHANGED, units: units});\n\n            for (var key in _measurementsManager.measurementsList) {\n                if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\n                    // Update UI\n                    var measurement = _measurementsManager.measurementsList[key];\n                    if (measurement.indicator) {\n                        measurement.indicator.updateResults();\n                    }\n                }\n            }\n        }\n    };\n\n    this.getPrecision = function() {\n        return _sharedMeasureConfig.precision;\n    };\n\n    this.setPrecision = function( precision ) {\n\n        if (_sharedMeasureConfig.precision !== precision ) {\n            _sharedMeasureConfig.precision = precision;\n\n            for (var key in _measurementsManager.measurementsList) {\n                if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\n                    // Update UI\n                    var measurement = _measurementsManager.measurementsList[key];\n                    if (measurement.indicator) {\n                        measurement.indicator.updateResults();\n                    }\n                }\n            }\n        }\n    };\n\n    /**\n     * Prepare the measurement snap result information into a serializable object.\n     * @param {*} measurement \n     */\n    function getPickData(measurement) {\n        measurement = measurement || _currentMeasurement;\n        const picks = measurement.clonePicks();\n        const picksData = [];\n        for (let i = 0; i < picks.length; i++) {\n            const pick = picks[i];\n\n            let pickPoint = MeasureCommon.getSnapResultPosition(pick, _viewer);\n            const model = pick.hasOwnProperty('modelId') && pick.modelId ? _viewer.impl.findModel(pick.modelId) : _viewer.model;\n            if (model) {\n                const modelData = model.getData();\n                pickPoint = modelData && modelData.hasOwnProperty('globalOffset') ? pickPoint.clone().sub(modelData.globalOffset) : pickPoint.clone();\n            }\n\n            const pickData = {\n                intersection: JSON.parse(JSON.stringify(pickPoint)),\n                modelId: pick.modelId,\n                viewportIndex2d: pick.viewportIndex2d\n            };\n            picksData.push(pickData);\n        }\n\n        return picksData;\n    };\n\n    this.getDistanceXYZ = function(measurement) {\n        if (!measurement) {\n            measurement = _currentMeasurement;\n        }\n        return this.getDistanceAux(measurement.distanceXYZ);\n    };\n    this.getDistanceX = function(measurement) {\n        if (!measurement) {\n            measurement = _currentMeasurement;\n        }\n        return this.getDistanceAux(measurement.distanceX);\n    };\n    this.getDistanceY = function(measurement) {\n        if (!measurement) {\n            measurement = _currentMeasurement;\n        }\n        return this.getDistanceAux(measurement.distanceY);\n    };\n    this.getDistanceZ = function(measurement) {\n        if (!measurement) {\n            measurement = _currentMeasurement;\n        }\n        return this.getDistanceAux(measurement.distanceZ);\n    };\n\n    /**\n     * @private\n     */\n    this.getDistanceAux = function (measurementDistance) {\n\n        if (_viewer.model) {\n            var d = Autodesk.Viewing.Private.convertUnits(_viewer.model.getUnitString(), _sharedMeasureConfig.units, _sharedMeasureConfig.calibrationFactor, measurementDistance || 0);\n            return Autodesk.Viewing.Private.formatValueWithUnits(d, _sharedMeasureConfig.units, 3, _sharedMeasureConfig.precision);\n        }\n    };\n\n    this.getAngle = function(measurement) {\n\n        if (!measurement) {\n            measurement = _currentMeasurement;\n        }\n        var angle = measurement.angle;\n        return Autodesk.Viewing.Private.formatValueWithUnits(angle, String.fromCharCode(0xb0), 3, _sharedMeasureConfig.precision);\n    };\n\n    this.getArea = function(measurement) { \n\n        if (_viewer.model) {\n\n            if (!measurement) {\n                measurement = _currentMeasurement;\n            }\n\n            var area = Autodesk.Viewing.Private.convertUnits(viewer.model.getUnitString(), _sharedMeasureConfig.units, _sharedMeasureConfig.calibrationFactor, measurement.area, 'square');\n\n            if (_sharedMeasureConfig.units) {\n                return Autodesk.Viewing.Private.formatValueWithUnits(area, _sharedMeasureConfig.units+'^2', 3, _sharedMeasureConfig.precision);\n            }\n            else {\n                return Autodesk.Viewing.Private.formatValueWithUnits(area, null, 3, _sharedMeasureConfig.precision);\n            }\n        }\n    };\n\n    function snapToFirstPick(currentPick, forceSnap) {\n        if (_currentMeasurement.hasPick(1) && _activePoint > 3 && !_currentMeasurement.closedArea) {\n            var firstPick = _currentMeasurement.getPick(1);\n            var firstPickPoint = MeasureCommon.getSnapResultPosition(firstPick, _viewer);\n            var firstPickPosition = MeasureCommon.project(firstPickPoint, viewer);\n            var currentPickPoint = MeasureCommon.getSnapResultPosition(currentPick, _viewer);\n            var currentPickPosition = MeasureCommon.project(currentPickPoint, viewer);\n            \n            if (forceSnap || currentPickPosition.distanceTo(firstPickPosition) < _closeAreaSnapRange) {\n                _snapper.onMouseMove(firstPickPosition);\n                firstPick.copyTo(currentPick);\n            }\n        }\n    }\n\n    function render(showResult) {\n\n        var hasResult = _currentMeasurement.computeResult(_currentMeasurement.picks, _viewer, _snapper);\n        _currentMeasurement.indicator.render(_currentMeasurement.picks, _consumeSingleClick || !!showResult);\n\n        return hasResult;\n    }\n\n    /**\n     * Sets existing measurements. Pass in \n     */\n    this.setMeasurements = function(measurements) {\n        measurements = !Array.isArray(measurements) ? [measurements] : measurements;\n        function getMeasureType(measureData) {\n            let measurementType;\n            switch (measureData.type) {\n                case 'Distance':\n                    measurementType = MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE;\n                    break;\n                case 'Angle':\n                    measurementType = MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE;\n                    break;\n                case 'Area':\n                    measurementType = MeasureCommon.MeasurementTypes.MEASUREMENT_AREA;\n                    break;\n                default:\n                    return;\n            }\n            return measurementType;\n        }\n\n        // Restore the supplied measurements.\n        for (let i = 0; i < measurements.length; i++) {\n            const measureData = measurements[i];\n\n            const unitType = measureData.unitType;\n            const precision = measureData.precision;\n            const measurementType = getMeasureType(measureData);\n            if (!measurementType) continue;\n\n            this.setUnits(unitType);\n            this.setPrecision(precision);\n\n            const attachIndicatorCb = (measurement) => {\n                _currentMeasurement = measurement; // _currentMeasurement needs to be set for the onMeasurementChanged to work\n                measurement.attachIndicator(_viewer, this, MeasureToolIndicator);\n\n                if (_onIndicatorCreatedCB instanceof Function) {\n                    _onIndicatorCreatedCB();\n                    _onIndicatorCreatedCB = null;\n                }\n\n                enableMeasurementsTouchEvents(false);\n            };\n\n            const initPicksCb = () => {\n                const restoredMeasurements = _measurementsManager.getRestoredMeasurementData();\n                const points = restoredMeasurements[_currentMeasurement.id];\n                _activePoint = points.length;\n            };\n\n            measureData.sharedUnits = _sharedMeasureConfig.units;\n            measureData.sharedCalibrationFactor = _sharedMeasureConfig.calibrationFactor;\n\n            _measurementsManager.createMeasurementFromData(\n                measureData,\n                measurementType,\n                attachIndicatorCb,\n                initPicksCb\n            );\n        }\n\n        this.deselectAllMeasurements();\n    };\n\n    function getMeasurementType(measurement) {\n        measurement = measurement || _currentMeasurement;\n        const types = MeasureCommon.MeasurementTypes;\n        const type = measurement.measurementType;\n        switch (type) {\n            case types.MEASUREMENT_DISTANCE:\n                return 'Distance';\n            case types.MEASUREMENT_ANGLE:\n                return 'Angle';\n            case types.MEASUREMENT_AREA:\n                return 'Area';\n            case types.CALIBRATION:\n                return 'Calibration';\n            default:\n                return;\n        }\n    }\n\n    /**\n     * TODO: We need to flesh out the return value here.\n     *\n     * @param unitType\n     * @param precision\n     * @returns {Object}\n     */\n    this.getMeasurement = function(unitType, precision) {\n\n        _sharedMeasureConfig.units = unitType || _sharedMeasureConfig.units;\n        _sharedMeasureConfig.precision = precision || _sharedMeasureConfig.precision;\n\n        var geomTypes = ['Vertex', 'Edge', 'Face', 'Circular Arc', 'Curved Edge', 'Curved Face'];\n        var picks = getPickData();\n        var type = getMeasurementType();\n        var measurement = {\n            from: geomTypes[_currentMeasurement.getGeometry(1).type],\n            to: geomTypes[_currentMeasurement.getGeometry(2).type],\n            distance: this.getDistanceXYZ(),\n            deltaX: this.getDistanceX(),\n            deltaY: this.getDistanceY(),\n            deltaZ: this.getDistanceZ(),\n            angle: this.getAngle(),\n            area: this.getArea(),\n            unitType: _sharedMeasureConfig.units,\n            precision: _sharedMeasureConfig.precision,\n            picks,\n            type\n        };\n\n        return measurement;\n    };\n\n    /**\n     * @returns {SnapResult[]} list of points for the selected measurement.\n     */\n    this.getMeasurementPoints = function() {\n\n        return _currentMeasurement.clonePicks();\n    };\n\n    /**\n     * @param unitType\n     * @param precision\n     * @returns {Array.<Object>}\n     */\n\n    this.getMeasurementList = function(unitType, precision) {\n        var list = [];\n        var measurement = null;\n        // TODO: These need to match the measurement SnapTypes\n        var geomTypes = ['Vertex', 'Edge', 'Face', 'Circular Arc', 'Curved Edge', 'Curved Face'];\n        var measurementList = Object.keys(_measurementsManager.measurementsList);\n\n        for(let i = 0; i < measurementList.length; i++) {\n            measurement = _measurementsManager.measurementsList[measurementList[i]];\n            var picks = getPickData(measurement);\n            var type = getMeasurementType(measurement);\n            var result = {\n              from: geomTypes[measurement.getGeometry(1).type],\n              to: geomTypes[measurement.getGeometry(2).type],\n              distance: this.getDistanceXYZ(measurement),\n              deltaX: this.getDistanceX(measurement),\n              deltaY: this.getDistanceY(measurement),\n              deltaZ: this.getDistanceZ(measurement),\n              angle: this.getAngle(measurement),\n              area: this.getArea(measurement),\n              unitType: unitType || _sharedMeasureConfig.units,\n              precision: precision || _sharedMeasureConfig.precision,\n              picks,\n              type\n            }\n            list.push(result);\n        }\n        return list;\n    };\n\n    this.clearCurrentMeasurement = function() {\n        if (_currentMeasurement) {\n            noPicksSet();\n\n            for (var key in _currentMeasurement.picks) {\n                if (_currentMeasurement.picks.hasOwnProperty(key)) {\n                    this.clearPick(key);    \n                }\n            }\n            \n            this.updateViewportId(true);\n\n            if (_isolateMeasure) {\n                this.clearIsolate();    \n            }\n\n            _currentMeasurement.indicator.clear();\n            _currentMeasurement.indicator.destroy();\n            _currentMeasurement = _measurementsManager.removeCurrentMeasurement();\n            _currentMeasurement = null;\n        }\n\n        enableMeasurementsTouchEvents(true);\n    };\n\n    this.clearPick = function(pickNumber) {\n        if (_currentMeasurement && _currentMeasurement.hasPick(pickNumber)) {\n            _currentMeasurement.clearPick(pickNumber);\n            _currentMeasurement.indicator.hideClick(pickNumber);\n        }\n    };\n\n    this.setIsolateMeasure = function(enable) {\n        _isolateMeasure = enable;\n    };\n\n    this.isolateMeasurement = function () {\n\n        if (!_active || !_isolateMeasure) {\n            return;\n        }\n\n        var defaultModelId = _viewer.model.id;\n        var isolationGroups = {};\n\n        for (var key in _measurementsManager.measurementsList) {\n            if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\n\n                var measurement = _measurementsManager.measurementsList[key];\n                for (var key in measurement.picks) {\n                    if (measurement.picks.hasOwnProperty(key)) {\n                        var pick = measurement.getPick(key);\n\n                        var modelId = pick.modelId || defaultModelId;\n                        if (!Array.isArray(isolationGroups[modelId])) {\n                            isolationGroups[modelId] = [];\n                        }\n                        if (isolationGroups[modelId].indexOf(pick.snapNode) == -1) {\n                            isolationGroups[modelId].push(pick.snapNode);\n                        }\n                    }\n                }\n\n            }\n        }\n    \n\n        // convert to expected format\n        var isolationSet = [];\n        for (var modelId in isolationGroups) {\n            if (isolationGroups.hasOwnProperty(modelId)) {\n\n                var modelInstance = _viewer.impl.findModel(parseInt(modelId));\n                isolationSet.push({\n                    model: modelInstance,\n                    ids: isolationGroups[modelId]\n                });\n            }\n        }\n\n        if (isolationSet.length) {\n            _viewer.impl.visibilityManager.aggregateIsolate(isolationSet);\n        }\n    };\n\n    // It actually restores the isolation state to the one just before\n    // the measure tool was enabled...\n    this.clearIsolate = function() {\n        if (_preMeasureState) {\n            _viewer.restoreState(_preMeasureState, undefined, true);\n        }\n    };\n\n    this.onShowAllEvent = function (event) {\n        _preMeasureState = null;\n    };\n\n    this.deselectAllMeasurements = function() {\n        if (_currentMeasurement && !this.areAllPicksSet()) {\n            if (this.isEditingEndpoint) {\n                this.undoEditEndpoint();\n            }\n            else {\n                this.clearCurrentMeasurement();\n            }\n        }\n\n        for (var key in _measurementsManager.measurementsList) {\n            if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\n                var measurement = _measurementsManager.measurementsList[key];\n                if (measurement.indicator) {\n                    measurement.indicator.setSimple(true);        \n                    measurement.indicator.hideEndpoints();\n                    measurement.indicator.unfocusLabels();\n                }\n            }\n        }\n\n        _currentMeasurement = null;\n    };\n\n    this.onMeasurementChanged = function() {\n        \n        this.deselectAllMeasurements();\n\n        _currentMeasurement = _measurementsManager.getCurrentMeasurement();\n        \n        if (_currentMeasurement.isComplete()) {\n            _currentMeasurement.indicator.setSimple(false);        \n            allPicksSet();\n            render(true); \n            this.updateResults();\n        }\n    };\n\n    this.selectMeasurementById = function(measurementId) {\n        if (!_currentMeasurement) {\n            _currentMeasurement = _measurementsManager.selectMeasurementById(measurementId);\n        }\n\n        if (_currentMeasurement.id !== measurementId) {\n            if (!this.areAllPicksSet()) {\n                if (this.isEditingEndpoint) {\n                    this.undoEditEndpoint();\n                }\n                else {\n                    this.clearCurrentMeasurement();\n                }\n            }\n            \n            _currentMeasurement = _measurementsManager.selectMeasurementById(measurementId);\n        }\n    };\n\n    function enableMeasurementsTouchEvents(enable) {\n        for (var key in _measurementsManager.measurementsList) {\n            if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\n                var measurement = _measurementsManager.measurementsList[key];\n                measurement.indicator.changeAllEndpointsEditableStyle(enable);   \n                measurement.indicator.enableSelectionAreas(enable);\n                measurement.indicator.enableLabelsTouchEvents(enable);\n            }\n        }\n    }\n\n    this.editEndpoint = function(event, endpointNumber, measurementId) {\n        if (_currentMeasurement.id === measurementId && _activePoint === endpointNumber) {\n            _currentMeasurement.indicator.changeEndpointOnEditStyle(endpointNumber, false);\n            this.undoEditEndpoint();\n            return;\n        }\n\n        this.selectMeasurementById(measurementId);\n\n        _activePoint = endpointNumber;\n        this.isEditingEndpoint = true;\n\n        _currentMeasurement.indicator.changeEndpointOnEditStyle(endpointNumber, true);\n        enableMeasurementsTouchEvents(false);\n\n        for (var key in _currentMeasurement.picks) {\n            if (_currentMeasurement.picks.hasOwnProperty(key)) {\n                _picksBackup[key] = _currentMeasurement.getPick(key).clone();\n            }\n        }\n\n        this.updateViewportId();\n\n        if (_isolateMeasure) {\n            this.clearIsolate();    \n        }\n\n        if (_currentMeasurement.isRestored) {\n            // populate the existing picks with the new snap result from the snapper\n            _snapper.onMouseMove({x: event.canvasX, y: event.canvasY});\n            const snapResult = _snapper.getSnapResult().clone();\n            const pick = _currentMeasurement.getPick(_activePoint);\n            snapResult.copyTo(pick);\n\n            // Keep track of the pick that was updated.\n            pick.isValid = true;\n\n            // Set isRestored flag back to false if all of the picks have been validated\n            _currentMeasurement.isRestored = !function() {\n                const picks = _currentMeasurement.picks;\n                for (var key in picks) {\n                    if (picks.hasOwnProperty(key)) {\n                        const pick = picks[key];\n                        if (!pick.isValid) {\n                            return false;\n                        }\n                    }\n                }\n                return true;\n            }();\n        }\n\n        if(!av.isMobileDevice()) {\n            this._handleMouseEvent(event);\n        }\n    };\n\n    function canCloseArea() {\n        return _currentMeasurement.countPicks() > 3;\n    }\n\n    this.undoEditEndpoint = function() {\n        _currentMeasurement.indicator.clear();\n\n        for (var key in _currentMeasurement.picks) {\n            if (_currentMeasurement.picks.hasOwnProperty(key)) {\n                _currentMeasurement.setPick(key, _picksBackup[key].clone());\n            }\n        }\n        \n        _currentMeasurement.indicator.changeEndpointOnEditStyle(_activePoint, false);\n        \n        this.isEditingEndpoint = false;\n        this.updateViewportId(true);\n        allPicksSet();\n        render(true);\n    };\n\n    this.updateResults = function() {\n\n        _currentMeasurement.indicator.updateResults();\n        _currentMeasurement.indicator.showEndpoints();\n        _currentMeasurement.indicator.focusLabels();\n\n        if (_currentMeasurement.isComplete()) {\n            this.isolateMeasurement();\n        }\n    };\n\n    this.deleteCurrentMeasurement = function() {\n        this.clearCurrentMeasurement();\n        this.isEditingEndpoint = false;\n        this.editByDrag = false;\n        _isDragging = false;\n        this.isolateMeasurement();\n    };\n\n    this.deleteCurrentPick = function() {\n\n        var pick = getActivePick();\n        var id = pick.id;\n\n        while (_currentMeasurement.hasPick(id + 1)) {\n            _currentMeasurement.setPick(id, _currentMeasurement.getPick(id + 1));\n            id++;\n        }\n\n        delete _currentMeasurement.picks[id];\n        \n        \n        \n        var count = _currentMeasurement.countPicks();\n        \n        _activePoint--;\n        \n        if (_activePoint <= 0) {\n            _activePoint = count;\n        }\n\n        if (this.isEditingEndpoint) {\n            if (count == 2) {\n                this.deleteCurrentMeasurement();\n                return;\n            }\n\n            _currentMeasurement.indicator.changeAllEndpointsOnEditStyle(false);\n            this.isEditingEndpoint = false;\n            this.updateViewportId(true);\n            allPicksSet();\n            render();\n        } else {\n            this._handleMouseEvent();    \n        }\n    };\n\n    this.updateViewportId = function(clear) {\n        if (_viewer.model && _viewer.model.is2d()) {\n            if (clear || isNoPicksSet()) {\n                _viewer.impl.updateViewportId(0);\n                _snapper.setViewportId(null);\n            }\n            else if (!_isPressing) {\n                var viewport = getPreviousPick().viewportIndex2d || getActivePick().viewportIndex2d;\n                \n                // Pass viewport Id to LineShader to make all other geometries with different viewport transparent\n                _viewer.impl.updateViewportId(viewport);\n                if (_snapper)\n                    _snapper.setViewportId(viewport);  \n            \n            }\n        }\n    };\n\n    this.setNoTopology = function() {\n        if (_currentMeasurement && _currentMeasurement.indicator) {\n            _currentMeasurement.indicator.setNoTopology();\n        }\n        else {\n            _onIndicatorCreatedCB = function() { _currentMeasurement.indicator.setNoTopology(); };\n        }\n    };\n    this.setFetchingTopology = function() {\n        if (_currentMeasurement && _currentMeasurement.indicator) {\n            _currentMeasurement.indicator.setFetchingTopology();\n        }\n        else {\n            _onIndicatorCreatedCB = function() { _currentMeasurement.indicator.setFetchingTopology(); };\n        }\n    };\n    this.setTopologyAvailable = function() {\n        if (_currentMeasurement && _currentMeasurement.indicator) {\n            _currentMeasurement.indicator.setTopologyAvailable();\n        }\n        else {\n            _onIndicatorCreatedCB = function() { _currentMeasurement.indicator.setTopologyAvailable(); };\n        }\n    };\n\n    this.getSnapper = function() {\n        return _snapper;\n    };\n\n    this.correctPickPosition = function() {\n        \n        var active = getActivePick();\n        \n        if (active && !active.getGeometry() && _cursorPosition) {\n            active.geomType = MeasureCommon.SnapType.SNAP_VERTEX;\n            active.geomVertex = _cursorPosition;\n            active.intersectPoint = _cursorPosition;\n        }\n\n        if (hasPreviousPick()) {\n            var passive = getPreviousPick();\n            var corrected = MeasureCommon.correctPerpendicularPicks(passive, active, viewer, _snapper);\n            if (!corrected) {\n\n                // get next pick in case of closed loop measurement.\n                var id = (active.id + 1) % (_currentMeasurement.countPicks() + 1);\n                \n                if (id === 0)\n                    id = 1;\n\n                if (id !== active.id && _currentMeasurement.hasPick(id)) {\n                    var nextPick = _currentMeasurement.getPick(id);   \n                    MeasureCommon.correctPerpendicularPicks(nextPick, active, viewer, _snapper);\n                }\n            }\n            \n            if (_currentMeasurement.measurementType == MeasureCommon.MeasurementTypes.MEASUREMENT_AREA) {\n                snapToFirstPick(active);    \n            }\n        }\n    };\n\n    this._handleMouseEvent = function (event) {\n\n        var valid = false;\n\n        if (_snapper.isSnapped()) {\n            \n            // User picked a new point after two points where already set (or none) - Start a new measurement.\n            if (this.areAllPicksSet() || isNoPicksSet()) {\n                this.startNewMeasurement();\n\n                _activePoint = 1;\n            }\n\n            _snapper.copyResults(getActivePick());\n\n            valid = true;\n\n        } \n        else { \n            // In order to draw rubber-band, set the cursor position, so the indicator will use it as active point.\n            if (event && _viewer.model && _viewer.model.is2d()) {\n                var viewport = _viewer.container.getBoundingClientRect();\n                var x = event.canvasX || event.clientX - viewport.left;\n                var y = event.canvasY || event.clientY - viewport.top;\n\n                if (x && y) {\n                    _cursorPosition = MeasureCommon.inverseProject({ x:x, y:y }, _viewer);\n                }\n            }\n\n            // In case a measurement is set, and the user clicks on a blank spot - don't do nothing.\n            if (_consumeSingleClick && _currentMeasurement && !this.isEditingEndpoint) {\n                if (_activePoint === _currentMeasurement.getMaxNumberOfPicks() + 1) {\n                    return true;\n                }\n            }\n\n            var lastPick = getActivePick();\n            if (lastPick) {\n                lastPick.clear();\n            }\n        }\n\n        if (_currentMeasurement) {\n            this.correctPickPosition();\n            \n            if (_consumeSingleClick) {\n                this._doConsumeSingleClick();\n            }\n\n            if (!isNoPicksSet()) {\n                var renderSucceeded = render();\n                \n                // If it's the first pick, we don't expect the render of the rubberband to be succeeded.\n                // So enter here only if it's not the first pick.\n                if (_currentMeasurement.hasPick(2)) {\n                    valid &= renderSucceeded;\n                }\n            }\n        }\n\n        // If valid is false, the last pick is not revelant, and will clear it in case of a click.\n        return valid;\n    };\n\n    this._doConsumeSingleClick = function() {\n        // In case the measurement is a closed loop, eliminate the last pick.\n        if (_currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && !_currentMeasurement.closedArea) {\n            var length = _currentMeasurement.countPicks();\n            var firstPick = _currentMeasurement.getPick(1);\n            var lastPick = _currentMeasurement.getPick(length);\n\n            if (length >= 3 && _currentMeasurement.hasEqualPicks(firstPick, lastPick)) {\n                lastPick.clear();\n                delete _currentMeasurement.picks[length];\n                _currentMeasurement.closedArea = true;\n            }\n        }\n\n        this.updateResults();\n\n        var measurementComplete = _currentMeasurement.isComplete();\n        this.updateViewportId(measurementComplete);\n    };\n\n\n    this.handleButtonDown = function (event, button) {\n        if (av.isMobileDevice()) \n            return false;\n\n        _isDragging = true;\n        if (button === 0 && !event.ctrlKey && !event.metaKey && !event.shiftKey && !event.altKey) {\n            _consumeSingleClick = true;\n            _downX = event.canvasX;\n            _downY = event.canvasY;\n        }\n        return false;\n    };\n\n    this.handleMouseMove = function (event) {\n\n        if (av.isMobileDevice())\n            return false;\n\n        if (event.canvasX !== _downX || event.canvasY !== _downY) {\n            _consumeSingleClick = false;    \n        } \n\n        _endpointMoved = this.isEditingEndpoint;\n\n        if (!isNoPicksSet() && !this.areAllPicksSet()) {\n            this.clearPick(_activePoint);\n            this._handleMouseEvent(event);\n        }\n\n        _snapper.indicator.render();\n\n        return false;\n    };\n\n    this.restoreMouseListeners = function () {\n\n        // When a press event has happend, the default behavior of firefly.js is to disable other mouse events,\n        // So they won't be triggered as well.\n        // The solution is to enable them after the end of the pressing.\n\n        _viewer.toolController.getTool(\"gestures\").controller.enableMouseButtons(true);\n    };\n\n    this.handlePressHold = function (event) {\n        _consumeSingleClick = false;\n\n        if (av.isTouchDevice()) {\n            switch( event.type )\n            {\n                case \"press\":\n                    _isPressing = true;\n\n                    if (this.areAllPicksSet() || isNoPicksSet()) {\n                        this.startNewMeasurement();\n\n                        if (_isolateMeasure) { \n                            this.clearIsolate();\n                        }\n\n                        _activePoint = 1;\n                    }\n\n                    this._handleMouseEvent(event);\n                    _snapper.indicator.render();\n\n                    return true;\n\n                case \"pressup\":\n                    _consumeSingleClick = true;\n                    this.restoreMouseListeners();\n                    _singleClickHandled = !_singleClickHandled;\n                    this.handleSingleClick(event);\n                    _isPressing = false;\n                    return true;\n            }\n        }\n        return false;\n\n    };\n\n\n\n    this.handleGesture = function( event )\n    {   \n        if (av.isTouchDevice()){\n            \n            _consumeSingleClick = false;\n        \n            if (_isPressing) {\n                \n                this.clearPick(_activePoint);\n\n                switch( event.type )\n                {\n                    case \"dragstart\":\n                        this._handleMouseEvent(event);\n                        _snapper.indicator.render();\n\n                        return true;\n\n                    case \"dragmove\":\n                        this._handleMouseEvent(event);\n                        _snapper.indicator.render();\n\n                        return true;\n\n                    case \"dragend\":\n                        _isPressing = false;\n                        _consumeSingleClick = true;\n\n                        if (!this.editByDrag) {\n                            _singleClickHandled = !_singleClickHandled;\n                            this.handleSingleClick(event);    \n                        }\n\n                        this.editByDrag = false;\n                        this.restoreMouseListeners();\n                        return true;\n\n                    case \"pinchstart\":\n                        this._handleMouseEvent(event);\n                        _snapper.indicator.render();\n\n                        break;\n\n                    case \"pinchmove\":\n                        this._handleMouseEvent(event);\n                        _snapper.indicator.render();\n\n                        break;\n\n                    case \"pinchend\":\n                        _consumeSingleClick = true;\n                        _singleClickHandled = !_singleClickHandled;\n                        this.handleSingleClick(event);\n                        this.restoreMouseListeners();\n                        return true;\n                }\n            }\n\n            if (event.type.indexOf('pinch') !== -1) {\n                for (var key in _measurementsManager.measurementsList) {\n                    if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\n                        var measurement = _measurementsManager.measurementsList[key];\n                        measurement.indicator.updateScale();    \n                    }\n                }\n            }\n        }\n\n        return false;\n    };\n\n    this.handleButtonUp = function (event, button) {\n        _isDragging = false;\n        _downX = null;\n        _downY = null;\n        \n        if (_endpointMoved) {\n            _consumeSingleClick = true;\n            _singleClickHandled = !_singleClickHandled;\n            this.handleSingleClick(event);\n            _endpointMoved = false;\n        }\n\n        return false;\n    };\n\n    this.handleSingleClick = function (event, button) {\n        if (_consumeSingleClick) {\n\n            _snapper.indicator.clearOverlays();\n\n            if (_currentMeasurement) {\n                _currentMeasurement.indicator.changeEndpointOnEditStyle(_activePoint, false);    \n            }\n\n            if (this._handleMouseEvent(event)) {\n                this.updateResults();\n                _activePoint++;\n            }\n            else {\n                if (this.isEditingEndpoint) {\n                    this.undoEditEndpoint();\n                }\n                else {\n                    if (_currentMeasurement && _currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && canCloseArea()) {\n                        snapToFirstPick(getActivePick(), true);\n                        this._handleMouseEvent();\n                    } else {\n                        this.clearCurrentMeasurement();    \n                    }\n                }\n            }\n\n            if (_currentMeasurement && _currentMeasurement.isComplete()) {\n                allPicksSet();\n            }\n\n            _consumeSingleClick = false;\n            _singleClickHandled = !_singleClickHandled;\n            this.isEditingEndpoint = false;\n\n            _snapper.clearSnapped();\n        }\n        return true;\n    };\n\n    this.handleDoubleClick = function(event) {\n        return true;\n    };\n\n    this.onCameraChange = function () {\n        for (var key in _measurementsManager.measurementsList) {\n            if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\n                var measurement = _measurementsManager.measurementsList[key];\n                measurement.indicator.updateScale();\n            }\n        }\n\n        _snapper.indicator.onCameraChange();\n    };\n\n    this.handleSingleTap = function (event) {\n        if (!_singleClickHandled) {\n            _consumeSingleClick = true;\n            _snapper.onMouseDown({x: event.canvasX, y:event.canvasY});\n            this.handleSingleClick(event);\n        }\n        _singleClickHandled = !_singleClickHandled;\n\n        return true;\n    };\n\n    this.handleDoubleTap = function(event) {\n        if (_currentMeasurement && _currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && _currentMeasurement.countPicks() > 2) {\n            // fake single click over the first handle, to close the area.\n            var firstPick = _currentMeasurement.getPick(1);\n            var firstPickPoint = MeasureCommon.getSnapResultPosition(firstPick, _viewer);\n            var firstPickPosition = MeasureCommon.project(firstPickPoint, viewer);\n            event.canvasX = firstPickPosition.x;\n            event.canvasY = firstPickPosition.y;\n            _consumeSingleClick = true;\n            _snapper.onMouseDown(firstPickPosition);\n            this.handleSingleClick(event);\n            _singleClickHandled = !_singleClickHandled;\n        }\n\n        return true;\n    };\n\n    this.handleResize = function() {\n        for (var key in _measurementsManager.measurementsList) {\n            if (_measurementsManager.measurementsList.hasOwnProperty(key)) {\n                var measurement = _measurementsManager.measurementsList[key];\n                if (measurement.indicator) {\n                    measurement.indicator.handleResize();\n                }\n            }\n        }\n    };\n\n    this.handleKeyDown = function(event, keyCode) {\n        switch (keyCode) {\n            case Autodesk.Viewing.KeyCode.BACKSPACE:\n            case Autodesk.Viewing.KeyCode.DELETE:\n            if (_currentMeasurement && _currentMeasurement.measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && !this.areAllPicksSet()) {\n                if (_currentMeasurement.countPicks() > 2 ) {\n                    this.deleteCurrentPick();\n                } else {\n                    this.deleteCurrentMeasurement();    \n                }\n            } else {\n                this.deleteCurrentMeasurement();\n            }\n\n            return true;\n        }\n\n        return false;\n    };\n};\n\nav.GlobalManagerMixin.call(MeasureTool.prototype);\n\n","import { Indicator } from './Indicator'\n\n    var av = Autodesk.Viewing;\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\n\n    // /** @constructor */\n    export function CalibrationToolIndicator(viewer, measurement, calibrationTool)\n    {\n        Indicator.call(this, viewer, measurement, calibrationTool);\n        this.calibrationTool = calibrationTool;\n        this.calibrationLabel = null;\n        this.endpoints = null;\n        this.tmpVector = new THREE.Vector3();\n        this.p1 = null;\n        this.p2 = null;\n\n        this.rubberbandDefaultMaterial = new THREE.MeshBasicMaterial({\n            color: 0xe8b22c,\n            opacity: 1,\n            transparent: false,\n            depthTest: false,\n            depthWrite: false,\n            side: THREE.DoubleSide\n        });\n\n        this.rubberbandSnappedMaterial = new THREE.MeshBasicMaterial({\n            color: 0x005BCE,\n            opacity: 1,\n            transparent: false,\n            depthTest: false,\n            depthWrite: false,\n            side: THREE.DoubleSide\n        });\n\n        this.rubberbandTipMaterial = new THREE.MeshBasicMaterial({\n            color: 0x000000,\n            opacity: 1,\n            transparent: false,\n            depthTest: false,\n            depthWrite: false,\n            side: THREE.DoubleSide\n        });\n\n    }\n\n    CalibrationToolIndicator.prototype = Object.create(Indicator.prototype);\n    CalibrationToolIndicator.prototype.constructor = CalibrationToolIndicator;\n    var proto = CalibrationToolIndicator.prototype;\n    \n    var kEndpointOffset = 15;\n    \n    var kCrossWidth = 1.5;\n    var kTipXWidth = 2;\n    var kLineWidth = 3;\n\n    var kTipXLength = 3;\n    var kCrossLength = 5;\n\n    var kDashSize = 2;\n    var kGapSize = 1;\n\n    proto.createEndpoint = function(name) {\n        this.endpoints[name] = {};\n        this.endpoints[name].position = null;\n\n        const _document = this.getDocument();\n        var label = this.endpoints[name].label = _document.createElement('div');\n        label.className = 'calibration-endpoint';\n\n        this.viewer.container.appendChild(label);\n\n        var text = _document.createElement('div');\n        text.className = 'calibration-endpoint-text';\n        text.textContent = name.toString();\n        label.appendChild(text);\n        \n        if (av.isTouchDevice()) {\n            this.initLabelMobileGestures(label, name, this.calibrationTool);\n        }\n        // Disable hover for mobile devices\n        if(!av.isMobileDevice()) {\n            MeasureCommon.safeToggle(label, 'enable-hover', true);\n\n            this.initMouseEvent(label, name);\n    \n            label.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            \n        }   \n    };\n\n    proto.init = function() {\n\n        MeasureCommon.createCommonOverlay(this.viewer, this.overlayName);\n        \n        if (!this.calibrationLabel) {\n            const _document = this.getDocument();\n            this.calibrationLabel = _document.createElement('div');\n            this.calibrationLabel.className = 'calibration-label';\n            this.hideLabel(this.calibrationLabel);\n            this.viewer.container.appendChild(this.calibrationLabel);\n            this.calibrationLabel.addEventListener('mousewheel', this.viewer.toolController.mousewheel);\n\n            var text = _document.createElement('div');\n            text.className = 'calibration-label-text';\n            this.calibrationLabel.appendChild(text);\n        }\n\n        this.endpoints = [];\n\n        this.handleButtonUpBinded = this.calibrationTool.handleButtonUp.bind(this.calibrationTool);\n        this.addWindowEventListener('mouseup', this.handleButtonUpBinded);\n\n        this.onCameraChangeBinded = this.onCameraChange.bind(this);\n        this.viewer.addEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\n    };\n\n    proto.destroy = function() {\n        this.clear();\n\n        Indicator.prototype.destroy.call(this);\n\n        if (this.calibrationLabel) {\n            this.calibrationLabel.removeEventListener('mousewheel', this.viewer.toolController.mousewheel);\n            this.viewer.container.removeChild(this.calibrationLabel);\n            this.calibrationLabel = null;\n        }\n\n        \n        this.viewer.impl.clearOverlay(this.overlayName);\n        this.viewer.impl.removeOverlayScene(this.overlayName);\n        \n        this.removeWindowEventListener('mouseup', this.handleButtonUpBinded);\n        this.viewer.removeEventListener(av.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\n    };\n\n    proto.clearRubberband = function() {\n        this.viewer.impl.clearOverlay(this.overlayName);\n    };\n\n    proto.clear = function() {\n\n        this.clearRubberband();\n        \n        this.hideLabel(this.calibrationLabel);\n        \n        for (var name in this.endpoints) {\n            if (this.endpoints.hasOwnProperty(name)) {\n                this.hideClick(name);\n                this.endpoints[name].position = null;\n            }\n        }\n    };\n\n    proto.updateLabelValue = function(text) {\n        if (!text || text === \"\") {\n            this.calibrationLabel.childNodes[0].textContent = null;\n            this.hideLabel(this.calibrationLabel);\n        }\n        else {\n            this.calibrationLabel.childNodes[0].setAttribute(\"data-i18n\", text);\n            this.calibrationLabel.childNodes[0].textContent = av.i18n.translate(text);\n            this.showLabel(this.calibrationLabel);\n            this.calibrationTool.render();\n        }\n    };\n\n    proto.changeLabelClickableMode = function(clickable) {\n        if (clickable) {\n            this.calibrationLabel.childNodes[0].style.pointerEvents='all';\n        }\n        else {\n            this.calibrationLabel.childNodes[0].style.pointerEvents='none';\n        }\n    };\n\n    proto.showAddCalibrationLabel = function() {\n        var self = this;\n        this.updateLabelValue(\"Add Calibration\");\n        this.changeLabelClickableMode(true);\n        this.calibrationTool.render();\n        \n        this.calibrationLabel.addEventListener(\"click\", function onClick() {\n            self.calibrationLabel.childNodes[0].style.pointerEvents = 'none';\n            self.calibrationTool.render();\n            self.updateLabelValue(null);\n            self.calibrationTool.showPanel();\n            self.calibrationLabel.removeEventListener(\"click\", onClick);\n        });    \n    };\n\n    proto.updateLabelsPosition = function() {\n        for (var i = 1; i <= Object.keys(this.endpoints).length; i++) {\n            if (this.endpoints[i].position) {\n                var label = this.endpoints[i].label;\n                var pos = MeasureCommon.project(this.endpoints[i].position, this.viewer, kEndpointOffset);\n                label.style.left = (pos.x - parseInt(label.clientWidth) / 2) + 'px';\n                label.style.top = (pos.y - parseInt(label.clientHeight) / 2) + 'px';\n                label.point = this.endpoints[i].position;\n\n                // Detect and move in case of overlapping.\n                this.labelsOverlapDetection(this.endpoints[i].label, this.endpoints);\n            }\n        }\n\n        this.hideLabelsOutsideOfView();\n    };\n\n    function isLeftIntersect(current, other) {\n        return current.right >= other.left && current.right <= other.right;\n    }\n\n    function isRightIntersect(current, other) {\n        return current.left >= other.left && current.left <= other.right;\n    }\n\n    function isMiddleIntersect(current, other) {\n        return current.left <= other.left && current.right >= other.right;\n    }\n\n    function isVerticalIntersect(current, other) {\n        return current.top < other.bottom && current.bottom > other.top;\n    }\n\n    function moveLeft(currentLabel, currentRect, otherRect) {\n        currentLabel.style.left = parseInt(currentLabel.style.left, 10) - (currentRect.right - otherRect.left) + 'px';\n    }\n\n    function moveRight(currentLabel, currentRect, otherRect) {\n        currentLabel.style.left = parseInt(currentLabel.style.left, 10) + (otherRect.right - currentRect.left) + 'px';\n    }\n\n    function moveDown(currentLabel, currentRect, otherRect) {\n        currentLabel.style.top = parseInt(currentLabel.style.top, 10) + (otherRect.bottom - currentRect.top) + 'px';\n    }\n\n\n    proto.labelsOverlapDetection = function(staticLabel, labelsList) {\n\n        for (var i = 1; i <= Object.keys(labelsList).length ; i++) {\n\n            var dynamicLabel = labelsList[i].label;\n\n            if (staticLabel !== dynamicLabel) {\n                var staticRect = staticLabel.getBoundingClientRect();\n                var dynamicRect = dynamicLabel.getBoundingClientRect();\n\n                if (isVerticalIntersect(dynamicRect, staticRect)) {\n\n                    if (isLeftIntersect(dynamicRect, staticRect)) {\n                        moveLeft(dynamicLabel, dynamicRect, staticRect);\n                    }\n                    else if (isRightIntersect(dynamicRect, staticRect)) {\n                        moveRight(dynamicLabel, dynamicRect, staticRect);\n                    }\n                    else if (isMiddleIntersect(dynamicRect, staticRect)) {\n                        moveDown(dynamicLabel, dynamicRect, staticRect);\n                    }\n                }\n            }\n        }\n    };\n\n    proto.renderCalibrationLabel = function() {\n\n        if (this.showMeasureResult && this.calibrationLabel && this.p1 && this.p2) {\n            \n            var point = { x: (this.p1.x + this.p2.x)/2, y: (this.p1.y + this.p2.y)/2, z: (this.p1.z + this.p2.z)/2 };\n            var mid = MeasureCommon.project(point, this.viewer);\n\n            this.labelPosition = new THREE.Vector2(mid.x, mid.y);\n\n            if (this.calibrationLabel.childNodes[0].textContent) {\n                this.showLabel(this.calibrationLabel);\n            }\n\n            this.calibrationLabel.style.top  = this.labelPosition.y - Math.floor(this.calibrationLabel.clientHeight / 2) + 'px';\n            this.calibrationLabel.style.left = this.labelPosition.x - Math.floor(this.calibrationLabel.clientWidth / 2) + 'px' ;\n            this.calibrationLabel.point = point;\n\n            if (this.viewer.model.is2d()) {\n                this.alignLabelWithLine(this.calibrationLabel, this.p1, this.p2, this.calibrationLabel.clientHeight, this.viewer);\n            }\n        }\n    };\n\n    proto.drawMeasurementLineTip = function(point, direction, normal, flip) {\n\n        var tmpVec = new THREE.Vector3();\n        var geometry = new THREE.Geometry();\n        var p1Scale = this.setScale(point);\n\n        flip = flip ? -1 : 1;\n\n        var tipMaterial = (this.snapper.isSnapped() && !this.showMeasureResult) ? this.rubberbandSnappedMaterial : this.rubberbandTipMaterial;\n\n        // black tip\n        tmpVec.addVectors(point, normal.clone().multiplyScalar(kCrossLength * p1Scale));\n        geometry.vertices[0] = tmpVec.clone();\n        tmpVec.subVectors(point, normal.clone().multiplyScalar(kCrossLength * p1Scale));\n        geometry.vertices[1] = tmpVec.clone();\n        this.drawLineAsCylinder(geometry, tipMaterial, kCrossWidth, this.overlayName);\n\n        geometry.vertices[0] = point;\n        tmpVec.subVectors(point, direction.clone().multiplyScalar(kCrossLength * p1Scale * flip));\n        geometry.vertices[1] = tmpVec.clone();\n        this.drawLineAsCylinder(geometry, tipMaterial, kCrossWidth, this.overlayName);\n\n        // yellow tip\n        tmpVec.addVectors(point, normal.clone().multiplyScalar(kTipXLength * p1Scale));\n        geometry.vertices[0] = tmpVec.clone();\n        tmpVec.subVectors(point, normal.clone().multiplyScalar(kTipXLength * p1Scale));\n        geometry.vertices[1] = tmpVec.clone();\n        this.drawLineAsCylinder(geometry, this.rubberbandDefaultMaterial, kTipXWidth, this.overlayName);\n\n        tmpVec.addVectors(point, normal.clone().multiplyScalar(kTipXLength * p1Scale));\n        tmpVec.addVectors(tmpVec, direction.clone().multiplyScalar(kTipXLength * p1Scale));\n        geometry.vertices[0] = tmpVec.clone();\n        tmpVec.subVectors(point, normal.clone().multiplyScalar(kTipXLength * p1Scale));\n        tmpVec.subVectors(tmpVec, direction.clone().multiplyScalar(kTipXLength * p1Scale));\n        geometry.vertices[1] = tmpVec.clone();\n        this.drawLineAsCylinder(geometry, this.rubberbandDefaultMaterial, kTipXWidth, this.overlayName);\n    };\n\n    proto.renderDistanceMeasurement = function(p1, p2) {\n\n        this.viewer.impl.clearOverlay(this.overlayName);\n\n        if (!p1 || !p2)\n            return;\n\n        var geometry = new THREE.Geometry();\n        var lineDirection = new THREE.Vector3().subVectors(p2, p1).normalize();\n        var lineNormal = lineDirection.clone().cross(this.viewer.navigation.getEyeVector()).normalize();\n        var p1Scale = this.setScale(p1);\n        \n        var dashSize = kDashSize * p1Scale;\n        var gapSize = kGapSize * p1Scale;\n\n        // Main line\n        \n        var lineMaterial = ((Math.abs(p1.x - p2.x) <= 0.1 || Math.abs(p1.y - p2.y) <= 0.1 \n                            || this.snapper.getSnapResult().isPerpendicular) && !this.showMeasureResult) \n                            ? this.rubberbandSnappedMaterial : this.rubberbandDefaultMaterial;\n\n        if (this.showMeasureResult) {\n            // Single solid line.\n            geometry.vertices[0] = p1;\n            geometry.vertices[1] = p2;\n            this.drawLineAsCylinder(geometry, lineMaterial, kLineWidth, this.overlayName);\n        }\n        else {\n            this.drawDashedLine(p1, p2, dashSize, gapSize, lineMaterial, kLineWidth, this.overlayName); \n        }\n        \n        this.drawMeasurementLineTip(p1, lineDirection, lineNormal, false);\n        \n        if (this.showMeasureResult) {\n            this.drawMeasurementLineTip(p2, lineDirection, lineNormal, true);\n        }\n\n        this.p1 = p1;\n        this.p2 = p2;\n\n        this.renderCalibrationLabel();\n    };\n\n    proto.onCameraChange = function() {\n        if (this.measurement.isComplete()) {\n            this.renderDistanceMeasurement(this.p1, this.p2);\n        }   \n        this.updateLabelsPosition();         \n    };\n\n","\n\n    \"use strict\";\n\n    var av = Autodesk.Viewing,\n        ave = Autodesk.Viewing.Extensions,\n        avp = Autodesk.Viewing.Private,\n        avu = Autodesk.Viewing.UI,\n        MeasureCommon = Autodesk.Viewing.MeasureCommon;\n\n    // This strange code is there because we \n    // don't want DockingPanel, which is used as a base class later\n    // to be undefined during headless mode.\n    // Simply deriving from undefined will cause an exception (from babel env preset) \n    // even if the class is never instantiated\n    const DockingPanel = (avu && avu.DockingPanel) || class {};\n    // et ViewerPanelMixin to a no-op in headless mode\n    const ViewerPanelMixin = (ave && ave.ViewerPanelMixin) || function () {};\n\n    const _gWindow = av.getGlobal();\n    const _gDocument = _gWindow.document;\n\n    //\n    // /** @constructor */\n    //\n    //\n    export var CalibrationPanel = function(calibrationTool, viewer, id, title, options)\n    {\n        var self = this;\n\n        options = options || {};\n        options.addFooter = false;\n\n        DockingPanel.call(this, viewer.container, id, title, options);\n\n        this.viewer = viewer;\n        this.calibrationTool = calibrationTool;\n        this.parentContainer = viewer.container;\n        this.container.style.left = '0px';\n        this.container.style.top = '0px';\n        this.container.style.resize = 'none';\n\n        this.container.classList.add('calibration-panel');\n\n        this.setGlobalManager && this.setGlobalManager(viewer.globalManager);\n\n        this.addEventListener( this.closer, \"click\", function(e) {\n            self.setVisible(false);\n            self.calibrationTool.clearSize();\n            self.calibrationTool.showAddCalibrationLabel();\n        });\n\n        if (!options.heightAdjustment)\n            options.heightAdjustment = 40;\n        if (!options.marginTop)\n            options.marginTop = 0;\n        options.left = false;\n\n        this.createScrollContainer(options);\n\n        const _document = (this.getDocument && this.getDocument()) || _gDocument;\n\n        this.calibrationMenu = _document.createElement(\"div\");\n\n        this.scrollContainer.appendChild( this.calibrationMenu );\n\n        // Table\n        this.table = _document.createElement(\"table\");\n        this.table.className = \"adsk-lmv-tftable calibration-table\";\n        this.tbody = _document.createElement(\"tbody\");\n        this.table.appendChild(this.tbody);\n        this.calibrationMenu.appendChild(this.table);\n\n        // Define Size Row\n        this.row = this.tbody.insertRow(0);\n        this.requestedSizeTextbox = _document.createElement('input');\n        this.requestedSizeTextbox.className = 'docking-panel-textbox';\n        this.requestedSizeTextbox.type = 'text';\n        this.requestedSizeTextbox.autofocus= 'true';\n\n        this.addEventListener(this.requestedSizeTextbox, \"keyup\", function(e) {\n            var value = self.requestedSizeTextbox.value;\n            if (value !== \"\" && value.split(\".\")[0] === \"\") {\n                self.requestedSizeTextbox.value = \"0\" + value;\n            }\n            self.updateLabel();\n        });\n\n\n        this.addEventListener(this.requestedSizeTextbox, \"keypress\", function(e) {\n            var key = e.key || String.fromCharCode(e.keyCode);\n            // Handling backspace and arrows for firefox\n            if (key == \"Backspace\" || key == \"ArrowLeft\" || key == \"ArrowRight\"){\n                return;\n            }\n\n            // Escape (For IE11)\n            if (e.keyCode == av.KeyCode.ESCAPE) {\n                self.setVisible(false);\n                self.calibrationTool.clearSize();\n                self.calibrationTool.showAddCalibrationLabel();\n                return;\n            }\n\n            var requestedSize = self.requestedSizeTextbox.value;\n            var cursorIndex = self.requestedSizeTextbox.selectionStart;\n            requestedSize = [requestedSize.slice(0, cursorIndex), key, requestedSize.slice(cursorIndex)].join('');\n            \n            if (requestedSize == \".\") {\n                return;\n            }\n\n            var isSimple = self.units[self.unitList.selectedIndex].simpleInput;\n        \n            if (!isPositiveNumber(requestedSize) || (isSimple && (!isSimpleDecimal(requestedSize) || Autodesk.Viewing.Private.calculatePrecision(requestedSize) > self.calibrationTool.getMaxPrecision()))) {\n                    e.preventDefault();\n            }\n        });\n\n        var caption = \"Define Size\";\n        var cell = this.row.insertCell(0);\n        this.caption = _document.createElement(\"div\");\n        this.caption.setAttribute(\"data-i18n\", caption);\n        this.caption.textContent = av.i18n.translate(caption);\n        cell.appendChild(this.caption);\n\n        cell = this.row.insertCell(1);\n        cell.appendChild(this.requestedSizeTextbox);\n\n        // Unit Type Row\n        this.units = [\n            { name: 'Feet and fractional inches', units: 'ft-and-fractional-in', matches: ['ft-and-fractional-in'], simpleInput: false },\n            { name: 'Feet and decimal inches', units: 'ft-and-decimal-in', matches: ['ft-and-decimal-in'], simpleInput: false },\n            { name: 'Meters', units: 'm', matches: ['m'], simpleInput: true },\n            { name: 'Centimeters', units: 'cm', matches: ['cm'], simpleInput: true },\n            { name: 'Millimeters', units: 'mm', matches: ['mm'], simpleInput: true }\n        ];\n\n        var unitNames = [];\n        for (var i = 0; i < this.units.length; ++i) {\n            unitNames.push(this.units[i].name);\n        }\n        this.unitList = new avp.OptionDropDown(\"Unit type\", this.tbody, unitNames, 0, null, { paddingLeft: 0, paddingRight: 15 });\n        this.unitList.setGlobalManager(this.globalManager);\n        this.addEventListener(this.unitList, \"change\", function(e) {\n            self.updateLabel();\n        });\n\n        // Set Calibration button\n        var setCalibration = _document.createElement('div');\n        setCalibration.classList.add('docking-panel-primary-button');\n        setCalibration.classList.add('calibration-button');\n\n        setCalibration.setAttribute(\"data-i18n\", \"Set Calibration\");\n        setCalibration.textContent = av.i18n.translate(\"Set Calibration\");\n\n        setCalibration.addEventListener('click', function () {\n            var index = self.unitList.selectedIndex;\n            var requestedUnits = self.units[index].units;\n            self.calibrationTool.calibrate(requestedUnits, self.requestedSizeTextbox.value);\n        }, false);\n\n        this.calibrationMenu.appendChild(setCalibration);\n        \n\n    }; // end constructor\n\n    var isPositiveNumber = function (n) {\n        // The first character of the string has to be a digit.\n        return n.match(/^(\\d+)/);\n    };\n\n    var isSimpleDecimal = function (n) {\n        // Add \"0\" to the end of the string, to check if there are trailing spaces.\n        n += '0';\n        return !isNaN(parseFloat(n)) && !isNaN(+n) && parseFloat(n) >= 0;\n    };\n\n    CalibrationPanel.prototype = Object.create(DockingPanel.prototype);\n    ViewerPanelMixin.call(CalibrationPanel.prototype);\n\n\n    CalibrationPanel.prototype.uninitialize = function uninitialize() {\n        this.viewer = null;\n        DockingPanel.prototype.uninitialize.call(this);\n    };\n\n    CalibrationPanel.prototype.findUnits = function findUnits() {\n        var i,\n            j,\n            selectedUnits = this.calibrationTool.getCurrentUnits();\n        for (i = 0; i < this.units.length; ++i) {\n            var matches = this.units[i].matches;\n            if (matches) {\n                for (j = 0; j < matches.length; ++j) {\n                    if (matches[j] === selectedUnits) {\n                        return i;\n                    }\n                }\n            }\n        }\n        return 0;\n    };\n\n    CalibrationPanel.prototype.setPanelValue = function(size) {\n        this.unitList.setSelectedIndex(this.findUnits());\n        this.requestedSizeTextbox.value = size;\n    };\n\n    CalibrationPanel.prototype.updateLabel = function() {\n        var index = this.unitList.selectedIndex;\n        var requestedUnits = this.units[index].units;\n        var size = this.requestedSizeTextbox.value;\n        var parsedNumber = Autodesk.Viewing.Private.UnitParser.parsePositiveNumber(size, requestedUnits);\n        var text = Autodesk.Viewing.Private.formatValueWithUnits(parsedNumber, requestedUnits, 3, Autodesk.Viewing.Private.calculatePrecision(size));\n\n        if (size === \"\") {\n            this.calibrationTool.updateLabelValue(null);\n        } else if (!isNaN(parsedNumber)) {\n            this.calibrationTool.updateLabelValue(text);\n        }\n    };\n\n    CalibrationPanel.prototype.updatePanelPosition = function (labelPosition, p1, p2, labelOffset) {\n\n        var width = parseInt(this.container.getBoundingClientRect().width);\n        var height = parseInt(this.container.getBoundingClientRect().height);\n\n        var cornerX;\n        var cornerY;\n\n        if (!labelPosition || !p1 || !p2) {\n            cornerX = Math.floor((this.viewer.canvas.clientWidth - width) / 2);\n            cornerY = Math.floor((this.viewer.canvas.clientHeight - height) / 2);\n        }\n        else {\n            p1 = MeasureCommon.project(p1, this.viewer);\n            p2 = MeasureCommon.project(p2, this.viewer);\n            var rubberbandDirection = new THREE.Vector2().copy(p1).sub(p2).normalize();\n\n            var normal;\n            if (p1.x < p2.x) {\n                normal = new THREE.Vector2(rubberbandDirection.y, -rubberbandDirection.x);\n            } else {\n                normal = new THREE.Vector2(-rubberbandDirection.y, rubberbandDirection.x);\n            }\n\n            var offset = labelOffset + Math.sqrt(Math.pow(width, 2) + Math.pow(height, 2)) / 2;\n\n            normal = normal.multiplyScalar(offset);\n            var pos =  labelPosition.sub(normal);\n\n            cornerX = pos.x - Math.floor(width / 2);\n            cornerY = pos.y - Math.floor(height / 2);\n\n            // if panel exceeds screen bounds, just put the panel in the center of the screen.\n            if ((cornerX < 0) || (cornerX + width > this.viewer.canvas.clientWidth) || (cornerY < 0) || (cornerY + height > this.viewer.canvas.clientHeight)) {\n                cornerX = Math.floor((this.viewer.canvas.clientWidth - width) / 2);\n                cornerY = Math.floor((this.viewer.canvas.clientHeight - height) / 2);\n            }\n        }\n\n        this.container.style.left = cornerX + 'px';\n        this.container.style.top  = cornerY + 'px';\n    };\n\n    //\n    // /** @constructor */\n    //\n    //\n    export var CalibrationRequiredDialog = function(measureExt, viewer, id, title, options)\n    {\n        var self = this;\n\n        options = options || {};\n        options.addFooter = false;\n\n        DockingPanel.call(this, viewer.container, id, title, options);\n\n        this.viewer = viewer;\n        this.measureExt = measureExt;\n        this.parentContainer = viewer.container;\n        this.container.classList.add('calibration-panel');\n        this.container.style.width = \"380px\";\n        this.container.style.height = \"190px\";\n        \n        this.setGlobalManager && this.setGlobalManager(viewer.globalManager);\n\n        if (!options.heightAdjustment)\n            options.heightAdjustment = 70;\n        if (!options.marginTop)\n            options.marginTop = 0;\n        options.left = false;\n\n        const _document = (this.getDocument && this.getDocument()) || _gDocument;\n\n        this.createScrollContainer(options);\n        this.dialogBox = _document.createElement(\"div\");\n        this.scrollContainer.appendChild( this.dialogBox );\n\n        // text\n        var calibrateNow = _document.createElement('div');\n        calibrateNow.className = 'calibration-text';\n        var text = \"Calibration Message\";\n        calibrateNow.setAttribute(\"data-i18n\", text);\n        calibrateNow.textContent = av.i18n.translate(text);\n        this.dialogBox.appendChild(calibrateNow);\n\n        var buttonsWrapper = _document.createElement('div');\n        buttonsWrapper.className = 'calibration-buttons-wrapper';\n        this.dialogBox.appendChild(buttonsWrapper);\n        \n        // Cancel button\n        var cancel = _document.createElement('div');\n        cancel.classList.add('docking-panel-secondary-button');\n        cancel.classList.add('calibration-button-left');\n        cancel.setAttribute(\"data-i18n\", \"Cancel\");\n        cancel.textContent = av.i18n.translate(\"Cancel\");\n        cancel.addEventListener('click', function () {\n            self.setVisible(false);\n        }, false);\n        buttonsWrapper.appendChild(cancel);\n\n        // Calibrate-Now button\n        var calibrateNowButton = _document.createElement('div');\n        calibrateNowButton.classList.add('docking-panel-primary-button');\n        calibrateNowButton.classList.add('calibration-button-right');\n        calibrateNowButton.setAttribute(\"data-i18n\", \"Calibrate Now\");\n        calibrateNowButton.textContent = av.i18n.translate(\"Calibrate Now\");\n        calibrateNowButton.addEventListener('click', function () {\n            self.measureExt.enableCalibrationTool(true);\n            self.setVisible(false);\n        }, false);\n        buttonsWrapper.appendChild(calibrateNowButton);\n        \n\n    }; // end constructor\n\n    CalibrationRequiredDialog.prototype = Object.create(DockingPanel.prototype);\n    ViewerPanelMixin.call(CalibrationRequiredDialog.prototype);\n\n\n    CalibrationRequiredDialog.prototype.uninitialize = function uninitialize() {\n        this.viewer = null;\n        DockingPanel.prototype.uninitialize.call(this);\n    };\n","import { CalibrationToolIndicator } from './CalibrationToolIndicator'\nimport { CalibrationPanel } from './CalibrationPanels'\n\nconst av = Autodesk.Viewing;\n\n//\n// /** @constructor */\n//\n//\nexport var CalibrationTool = function( viewer, options, sharedMeasureConfig, snapper)\n{   \n    var av = Autodesk.Viewing;\n    var avem = Autodesk.Viewing.Extensions.Measure;\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\n\n    var _names  = [\"calibration\"];\n    var _priority = 50;\n    var _viewer  = viewer;\n    var _measurement = new MeasureCommon.Measurement(MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE);\n    var _options = options || {};\n\n    this.setGlobalManager(viewer.globalManager);\n\n    // Shared State with MeasureTool and Indicator\n    var _sharedMeasureConfig = sharedMeasureConfig;\n\n    var _maxPrecision = options.maxPrecision || 5;\n    var _isCalibrated = (sharedMeasureConfig.calibrationFactor != null); // True when the user set the calibration, or used a Previous calibration factor.\n    \n    var _snapper = snapper;\n\n    var _active = false;\n    var _isDragging = false;\n    var _isPressing = false;\n\n    var _distance = null; // The length of the current measurement.\n    var _calibrationTaken = false; // True when the user selected two valid points and set the calibration.\n    var _selectedSize = null;\n    var _selectedUnits = null;\n    var _selectedP1 = null;\n    var _selectedP2 = null;\n    var _waitingForInput = false; // True when the user selected two valid points.\n    var _picksBackup = [];\n    var _cursorPosition = null;\n\n    var _activePoint = 0;\n    \n    var _endpointMoved = false;\n\n    var _consumeSingleClick = false;\n    var _singleClickHandled = false;\n    var _downX = null;\n    var _downY = null;\n\n    // GUI.\n    var _calibrationPanel = null;\n    var _cursor = \"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABYAAAAYCAYAAAD+vg1LAAAAAXNSR0IArs4c6QAAAwZJREFUSA2tVEtLW0EUvjGJefoqSY0x0WBSiY+oNWiUINkU6ioLaaAlG1eudNVFoT+grgopiCkEIbUK1o0lusmurRSEWmmKG6MNtNhNosWqyU2CZPpN8cr15nFD7YHDzHnON2fOGYZhmHkw4XEW+wD4xkT4lMvl6CE0+Y2ohh+dz+cZn89HVS/5+n/d/wVMkXq9Xor2v5SBgsmymQwZHx+vOqlKpXKDXWI3eU6Tg+kqSjSh3W4/s9lsvzUajaNcAK3xY7Dyci3nd6WXSCS60dHRvMfjSRcKBfWV4SYbrVarB8p0PB5nY7HYmdVq/aDX67WlckpKKcvpOjs7X09OTvoPDw8z2Wy2Bu+imJqa+npycnJXGHOt3YRGoSyVSvvMZrNkYWFBs7GxkaoBAXFJcDJhcCW5rq5ur62trQ/EOhyOBhDT2Nj4qVKMqA31ve1yub7Rfufo/PycDA4OxpuamhqECaouhVqtfuD3+1tqa2uZQCCQDoVCWTwknVQDDvIKE1clI1ja09Ozg0cjx8fHpL+/P+50OhMU8f7+Punt7f2I5NdqXRXi9fV1z9jYWCuIWV5eziSTyWAqlXq1urqaw6AwOMiCG4lOYtEturu732xubhK0FQHSvfr6+lsog4HWPIPvIBqNErRiqCiwkkKpVFowZd8xZSQYDLImk+kJ52+xWJ4tLS3hU8yTkZGRBD2Ms4mu6Nun4XA4f3p6SoaGhuJ0+rgg/Bsmt9udYFmWzM3NZdDT05ztWsE5JV0R1AqUCfTt0fb2tjESiRRmZmaOUOcI3w9DY5mdnb03PDzMoDQ/MZFRzM20lO/E38vl8vt46UdAq0WNJWixlEwmu8B1bXioOxwjpgXJ0hMTE1og1qysrDghf+HnKtoD7c7u7i5ZXFzMGY3GF7iFuRR3dHTMr62tXWxtbZH29vZ3RYmECozu54ODAzpdP2hphHZOVigUVjChvgMDA+85fdm1q6vrrU6n+4WR9Zd1ujQ0Nzc/NBgMScSExXwZ2j5oL5Wo46UD/ZvxUemo+AdW1zJzUYr16wAAAABJRU5ErkJggg==), auto\";\n    var _hasUI = Autodesk.Viewing.GuiViewer3D && viewer instanceof Autodesk.Viewing.GuiViewer3D;\n\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\n\n    function getActivePick()\n    {\n        switch (_activePoint) {\n            case 0:\n                return null;\n            case 1:\n            case 2:\n                return _measurement.getPick(_activePoint);\n            case 3:\n                return _measurement.getPick(_measurement.countPicks());\n        }\n    }\n\n    function getPreviousPick()\n    {\n        switch (_activePoint) {\n            case 0:\n                return null;\n            case 1:\n                return _measurement.getPick(_measurement.countPicks());\n            case 2:\n            case 3:\n                return _measurement.getPick(1);\n        }\n    }\n\n    function hasPreviousPick()\n    {\n        switch (_activePoint) {\n            case 0:\n                return false;\n            case 1:\n                return _measurement.hasPick(_measurement.countPicks());\n            case 2:\n            case 3:\n                return _measurement.hasPick(1);\n        }\n    }\n\n    function noPicksSet() {\n        _activePoint = 0;\n    }\n\n    function allPicksSet() {\n        _activePoint = 3;\n        _measurement.indicator.changeAllEndpointsEditableStyle(true);\n    }\n\n    function isNoPicksSet() {\n        return _activePoint === 0;\n    }\n\n    function areAllPicksSet() {\n        return _activePoint === 3;   \n    }\n\n    this.register = function()\n    {\n        if (_hasUI && !_calibrationPanel) {\n            _calibrationPanel = new CalibrationPanel( this, _viewer, \"calibration-panel\", \"Calibration\", _options );\n            _viewer.addPanel(_calibrationPanel);\n        }\n\n        this.onCameraChangeBinded = this.onCameraChange.bind(this);\n        this.screenSizeChangedBinded = this.screenSizeChanged.bind(this);\n    };\n\n    this.deregister = function()\n    {   \n        this.deactivate();\n        \n        if (_calibrationPanel) {\n            _viewer.removePanel( _calibrationPanel );\n            _calibrationPanel.uninitialize();\n            _calibrationPanel = null;\n        }\n    };\n\n    this.isActive = function()\n    {\n        return _active;\n    };\n\n    this.getNames = function()\n    {\n        return _names;\n    };\n\n    this.getName = function()\n    {\n        return _names[0];\n    };\n\n    this.getPriority = function()\n    {\n        return _priority;\n    };\n\n    this.getCursor = function() {\n        return _isDragging ? null : _cursor;\n    };\n\n    this.activate = function()\n    {\n        _active = true;\n        _isDragging = false;\n        this.isEditingEndpoint = false;\n        this.editByDrag = false;\n        noPicksSet();\n\n        _viewer.toolController.activateTool(_snapper.getName());\n        _viewer.toolController.activateTool(\"magnifyingGlass\");\n\n\n        if (!_measurement.indicator) {\n            _measurement.attachIndicator(_viewer, this, CalibrationToolIndicator);\n        }\n\n        _measurement.indicator.clear();\n\n        if (_calibrationTaken && _selectedP1 && _selectedP2) {\n            _measurement.setPick(1, _selectedP1.clone());\n            _measurement.setPick(2, _selectedP2.clone());\n\n            allPicksSet();\n\n            var parsedRequestedSize = Autodesk.Viewing.Private.UnitParser.parsePositiveNumber(_selectedSize, _selectedUnits);\n            _measurement.indicator.updateLabelValue(Autodesk.Viewing.Private.formatValueWithUnits(parsedRequestedSize, _selectedUnits, 3, _sharedMeasureConfig.precision));\n            _distance = _measurement.distanceXYZ;\n            _measurement.indicator.changeLabelClickableMode(false);\n            _waitingForInput = true;\n            var valid = this.render();\n            _measurement.indicator.changeAllEndpointsEditableStyle(true);\n\n            if (valid) {\n                if (_calibrationPanel) {\n                    _calibrationPanel.setPanelValue(_selectedSize);\n                }\n                \n                this.showPanel();\n            }\n        }\n\n        _viewer.addEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\n        _viewer.addEventListener(Autodesk.Viewing.VIEWER_RESIZE_EVENT, this.screenSizeChangedBinded);\n    };\n\n    this.deactivate = function()\n    {   \n        if (!_active)\n            return;\n\n        _active = false;\n\n        this.hidePanel();\n        this.updateViewportId(true);\n        _waitingForInput = false;\n        _measurement.clearAllPicks();\n\n        if(_snapper && _snapper.isActive()) {\n            _viewer.toolController.deactivateTool(_snapper.getName());\n        }\n\n        _viewer.toolController.deactivateTool(\"magnifyingGlass\");\n\n        if (_measurement.indicator) {\n            _measurement.indicator.clear();\n            _measurement.indicator.destroy();\n            _measurement.indicator = null;\n        }\n\n        _viewer.removeEventListener(Autodesk.Viewing.CAMERA_CHANGE_EVENT, this.onCameraChangeBinded);\n        _viewer.removeEventListener(Autodesk.Viewing.VIEWER_RESIZE_EVENT, this.screenSizeChangedBinded);\n    };\n\n    this.getActivePointIndex = function() {\n        return _activePoint;\n    };\n\n    this.setCalibrationFactor = function ( calibrationFactor ) {\n        _sharedMeasureConfig.calibrationFactor = calibrationFactor;\n    };\n\n    this.getCalibrationFactor = function () {\n        return _sharedMeasureConfig.calibrationFactor;\n    };\n\n    this.updateLabelValue = function (value) {\n        _measurement.indicator.updateLabelValue(value);\n    };\n\n    this.isCalibrationValid = function(requestedUnits, requestedSize) { \n        var parsedRequestedSize = Autodesk.Viewing.Private.UnitParser.parsePositiveNumber(requestedSize, requestedUnits); \n        return !isNaN(parsedRequestedSize); \n    };\n\n    this.calibrate = function(requestedUnits, requestedSize)\n    {\n\n        var calibrationFactor = null;\n        \n        var parsedRequestedSize = Autodesk.Viewing.Private.UnitParser.parsePositiveNumber(requestedSize, requestedUnits);\n\n        if (!isNaN(parsedRequestedSize)) {\n            var currentSize = Autodesk.Viewing.Private.convertUnits(_viewer.model.getUnitString(), requestedUnits, 1, _distance);\n            if (currentSize !== 0 && !isNaN(currentSize)) {\n                calibrationFactor = parsedRequestedSize / currentSize;\n                _sharedMeasureConfig.calibrationFactor = calibrationFactor;\n                _sharedMeasureConfig.units = requestedUnits;\n                var defualtPrecision = _viewer.model.is2d() ? 3 : 1;\n                var requestedPrecision = Autodesk.Viewing.Private.calculatePrecision(requestedSize);\n                _sharedMeasureConfig.precision = Math.max((_sharedMeasureConfig.precision ? _sharedMeasureConfig.precision : defualtPrecision), requestedPrecision);\n                _selectedSize = requestedSize;\n                _selectedUnits = requestedUnits;\n                _isCalibrated = true;\n                _calibrationTaken = true;\n                _selectedP1 = _measurement.getPick(1).clone();\n                _selectedP2 = _measurement.getPick(2).clone();\n            }\n        }\n        \n        if (calibrationFactor) {\n            _viewer.getExtension('Autodesk.Measure').enableCalibrationTool(false);\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.FINISHED_CALIBRATION , units: requestedUnits , scaleFactor: calibrationFactor, size: requestedSize});\n        }\n    };\n\n    this.calibrateByScale = function(requestedUnits, requestedScale) {\n        _sharedMeasureConfig.calibrationFactor = requestedScale;\n        \n        if (_sharedMeasureConfig.units !== requestedUnits ) {\n            _sharedMeasureConfig.units = requestedUnits;\n            _selectedUnits = requestedUnits;\n        }\n\n        _isCalibrated = true;\n    };\n\n    this.getCurrentUnits = function () {\n        return _sharedMeasureConfig.units;\n    };\n\n    this.hidePanel = function() {\n        if (_calibrationPanel) {\n            _calibrationPanel.setVisible(false);\n        }\n        else {\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.CLOSE_CALIBRATION_PANEL_EVENT });\n        }\n    };\n\n    this.showPanel = function() {\n\n        var self = this;\n        const _window = this.getWindow();\n\n        if (_calibrationPanel) {\n            _window.setTimeout(function () { _calibrationPanel.requestedSizeTextbox.focus();}, 0);\n            _calibrationPanel.setVisible(true);\n            _calibrationPanel.updatePanelPosition(_measurement.indicator.labelPosition, _measurement.indicator.p1, _measurement.indicator.p2, _measurement.indicator.calibrationLabel.clientHeight);\n            self.addWindowEventListener(\"keyup\", function onKeyUp(e){\n                var key = e.key || String.fromCharCode(e.keyCode);\n                if (key == \"Escape\" && self.isActive()) {\n                    self.hidePanel();\n                    self.clearSize();\n                    self.showAddCalibrationLabel();\n                    \n                    self.removeWindowEventListener(\"keyup\", onKeyUp);\n                }\n            });\n        }\n        else {\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.OPEN_CALIBRATION_PANEL_EVENT, data: {size: _selectedSize, units: _selectedUnits } });\n        }\n    };\n\n    this.showAddCalibrationLabel = function() {\n        _measurement.indicator.showAddCalibrationLabel();\n    };\n\n    this.isCalibrated = function() {\n        return _isCalibrated;\n    };\n\n    this.clearSize = function () {\n        _measurement.indicator.updateLabelValue(null);\n\n        if (_calibrationPanel) {\n            _calibrationPanel.requestedSizeTextbox.value = \"\";   \n        }\n        else {\n            _viewer.dispatchEvent({ type: MeasureCommon.Events.CLEAR_CALIBRATION_SIZE_EVENT });\n        }\n    };\n\n    this.getMaxPrecision = function() {\n        return _maxPrecision;\n    };\n    \n    this.clearMeasurement = function() {\n\n        noPicksSet();\n\n        this.clearPick(1);\n        this.clearPick(2);\n\n        _measurement.indicator.clear();\n        \n        this.updateViewportId(true);\n        this.hidePanel();\n\n        _waitingForInput = false;\n    };\n\n    this.clearPick = function(pickNumber) {\n        if (_measurement.hasPick(pickNumber)) {\n            _measurement.clearPick(pickNumber);\n            _measurement.indicator.hideClick(pickNumber);\n        }\n    };\n\n    this.repickEndpoint = function(pickNumber) {\n        this.clearPick(pickNumber);\n        this.editEndpoint(null, pickNumber);\n    };\n\n    this.getSnapper = function() {\n        return _snapper;\n    };\n\n    this._handleMouseEvent = function (event) {\n\n        var valid = false;\n\n        if (_snapper.isSnapped()) {\n\n            // User picked a new point after two points where already set (or none) - Start a new measurement.\n            if (areAllPicksSet() || isNoPicksSet()) {\n                this.clearMeasurement();\n                _activePoint = 1;\n            }\n            \n            _snapper.copyResults(getActivePick());\n\n            valid = true;\n\n        } \n        else { \n            // In order to draw rubber-band, set the cursor position, so the indicator will use it as active point.\n            if (event && _viewer.model.is2d()) {\n                var viewport = _viewer.container.getBoundingClientRect();\n                var x = event.canvasX || event.clientX - viewport.left;\n                var y = event.canvasY || event.clientY - viewport.top;\n\n                if (x && y) {\n                    _cursorPosition = MeasureCommon.inverseProject({ x:x, y:y }, _viewer);\n                }\n            }\n\n            // In case a measurement is set, and the user clicks on a blank spot - don't do nothing.\n            if (_consumeSingleClick && _measurement && !this.isEditingEndpoint) {\n                if (_activePoint === _measurement.getMaxNumberOfPicks() + 1) {\n                    return true;\n                }\n            }\n\n            var lastPick = getActivePick();\n            if (lastPick) {\n                lastPick.clear();\n            }\n        }\n\n        this.correctPickPosition();\n\n        if (_consumeSingleClick) {\n            this._doConsumeSingleClick(valid);\n        }\n        \n        if (!isNoPicksSet()) {\n            var renderSucceeded = this.render();\n\n            // If it's the first pick, we don't expect the render of the rubberband to be succeeded.\n            // So enter here only if it's not the first pick.\n            if (_measurement.hasPick(2)) {\n                valid &= renderSucceeded;\n            }\n        }\n\n        if (_consumeSingleClick) {\n            if (_measurement.isComplete() && valid) {\n                _distance = _measurement.distanceXYZ;\n                this.clearSize();\n                this.showPanel();\n                _waitingForInput = true;\n            }\n            else {\n                this.hidePanel();\n                _measurement.indicator.updateLabelValue(null);\n                _waitingForInput = false;\n            }\n        }\n\n        // If valid is false, the last pick is not revelant, and will clear it in case of a click.\n        return valid;\n    };\n\n    this.updateViewportId = function(clear) {\n        if (_viewer.model && _viewer.model.is2d()) {\n            if (clear || isNoPicksSet()) {\n                viewer.impl.updateViewportId(0);\n                _snapper.setViewportId(null);\n            }\n            else if (!_isPressing) {\n                var viewport = getPreviousPick().viewportIndex2d || getActivePick().viewportIndex2d;\n                \n                // Pass viewport Id to LineShader to make all other geometries with different viewport transparent\n                viewer.impl.updateViewportId(viewport);\n                if (_snapper)\n                    _snapper.setViewportId(viewport);  \n            \n            }\n        }\n    };\n\n    this._doConsumeSingleClick = function(valid) {\n\n        this.updateViewportId(_measurement.isComplete());\n\n        _measurement.indicator.clear();\n    };\n\n\n    this.handleButtonDown = function (event, button) {\n        if (av.isMobileDevice()) \n            return false;\n\n        _isDragging = true;\n        if (button === 0 && !event.ctrlKey && !event.metaKey && !event.shiftKey && !event.altKey) {\n            _consumeSingleClick = true;\n            _downX = event.canvasX;\n            _downY = event.canvasY;\n        }\n        return false;\n    };\n\n    this.handleMouseMove = function (event) {\n        if (av.isMobileDevice())\n            return false;\n\n        if (event.canvasX !== _downX || event.canvasY !== _downY) {\n            _consumeSingleClick = false;    \n        }\n\n        _endpointMoved = this.isEditingEndpoint;    \n\n        if (!isNoPicksSet() && !areAllPicksSet()) {\n            this.clearPick(_activePoint);\n            this._handleMouseEvent(event);\n        }\n\n        _snapper.indicator.render();\n        \n        return false;\n    };\n\n    this.restoreMouseListeners = function () {\n\n        // When a press event has happend, the default behavior of firefly.js is to disable other mouse events,\n        // So they won't be triggered as well.\n        // The solution is to enable them after the end of the pressing.\n\n        _viewer.toolController.getTool(\"gestures\").controller.enableMouseButtons(true);\n    };\n\n    this.handlePressHold = function (event) {\n        _consumeSingleClick = false;\n\n        if (av.isTouchDevice()) {\n            switch( event.type )\n            {\n                case \"press\":\n                    _isPressing = true;\n                    if (areAllPicksSet()) {\n                        this.clearMeasurement();\n                    } else {\n                        this.clearPick(_activePoint);\n                    }\n                    this._handleMouseEvent(event);\n                    _snapper.indicator.render();\n\n                    return true;\n\n                case \"pressup\":\n                    _consumeSingleClick = true;\n                    this.restoreMouseListeners();\n                    _singleClickHandled = !_singleClickHandled;\n                    this.handleSingleClick(event);\n                    _isPressing = false;\n                    return true;\n            }\n        }\n        return false;\n\n    };\n\n    this.correctPickPosition = function() {\n        \n        var active = getActivePick();\n            \n        if (active && !active.getGeometry() && _cursorPosition) {\n            active.geomType = MeasureCommon.SnapType.SNAP_VERTEX;\n            active.geomVertex = _cursorPosition;\n            active.intersectPoint = _cursorPosition;\n        }\n\n        if (hasPreviousPick()) {\n            var passive = getPreviousPick();\n            MeasureCommon.correctPerpendicularPicks(passive, active, viewer, _snapper);\n        }\n    };\n\n    this.render = function() {\n\n        var hasResult = _measurement.computeResult(_measurement.picks, _viewer, _snapper);\n        _measurement.indicator.render(_measurement.picks, _consumeSingleClick || _waitingForInput);\n\n        return hasResult;\n    };\n\n    this.editEndpoint = function(event, endpointNumber) {\n        if (_activePoint === endpointNumber) {\n            _measurement.indicator.changeEndpointOnEditStyle(endpointNumber, false);\n            this.undoEditEndpoint();\n            return;\n        }\n\n        _activePoint = endpointNumber;\n        this.isEditingEndpoint = true;\n\n        _measurement.indicator.changeEndpointOnEditStyle(endpointNumber, true);\n        _measurement.indicator.changeAllEndpointsEditableStyle(false);\n\n        for (var key in _measurement.picks) {\n            if (_measurement.picks.hasOwnProperty(key)) {\n                _picksBackup[key] = _measurement.getPick(key).clone();\n            }\n        }\n\n        this.updateViewportId();\n\n        this.hidePanel();\n        _measurement.indicator.updateLabelValue(null);\n        _waitingForInput = false;\n\n        if(!av.isMobileDevice()) {\n            this._handleMouseEvent(event);\n        }\n    };\n\n    this.undoEditEndpoint = function() {\n        _measurement.indicator.clear();\n\n        for (var key in _measurement.picks) {\n            if (_measurement.picks.hasOwnProperty(key)) {\n                _measurement.setPick(key, _picksBackup[key].clone());\n            }\n        }\n        \n        this.updateViewportId(true);\n        this.isEditingEndpoint = false;\n        _waitingForInput = true;\n\n        allPicksSet();\n        var valid = this.render();\n        \n        if (valid) {\n            this.showPanel();\n        }\n    };\n\n    this.handleGesture = function(event)\n    {   \n        if (av.isTouchDevice()){\n            \n            _consumeSingleClick = false;\n        \n            if (_isPressing) {\n                \n                this.clearPick(_activePoint);\n\n                switch( event.type )\n                {\n                    case \"dragstart\":\n                        this._handleMouseEvent(event);\n                        _snapper.indicator.render();\n\n                        return true;\n\n                    case \"dragmove\":\n                        this._handleMouseEvent(event);\n                        _snapper.indicator.render();\n\n                        return true;\n\n                    case \"dragend\":\n                        _isPressing = false;\n                        _consumeSingleClick = true;\n\n                        if (!this.editByDrag) {\n                            _singleClickHandled = !_singleClickHandled;\n                            this.handleSingleClick(event);    \n                        }\n\n                        this.editByDrag = false;\n                        this.restoreMouseListeners();\n                        return true;\n\n                    case \"pinchend\":\n                        _consumeSingleClick = true;\n                        _singleClickHandled = !_singleClickHandled;\n                        this.handleSingleClick(event);\n                        this.restoreMouseListeners();\n                        return true;\n                }\n            }\n        }\n\n        return false;\n    };\n\n    this.handleButtonUp = function (event) {\n        _isDragging = false;\n        _downX = null;\n        _downY = null;\n        \n        if (_endpointMoved) {\n            _consumeSingleClick = true;\n            _singleClickHandled = !_singleClickHandled;\n            this.handleSingleClick(event);\n            _endpointMoved = false;\n        }\n\n        return false;\n    };\n\n    this.handleSingleClick = function (event) {\n        if (_consumeSingleClick) {\n            \n            _snapper.indicator.clearOverlays();\n\n            _measurement.indicator.changeEndpointOnEditStyle(_activePoint, false);\n\n            if (this._handleMouseEvent(event)) {\n                _measurement.indicator.showEndpoints();\n                _measurement.indicator.updateLabelsPosition();\n                _activePoint++;\n            }\n            else {\n                if (this.isEditingEndpoint) {\n                    this.undoEditEndpoint();\n                }\n                else {\n                    this.clearMeasurement();\n                }\n            }\n\n            if (_measurement.isComplete()) {\n                allPicksSet();\n            }\n\n            _consumeSingleClick = false;\n            _singleClickHandled = !_singleClickHandled;\n            this.isEditingEndpoint = false;\n\n            _snapper.clearSnapped();\n        }\n        return true;\n    };\n\n    this.handleDoubleClick = function() {\n        return true;\n    };\n\n    this.handleSingleTap = function (event) {\n        if (!_singleClickHandled) {\n            _consumeSingleClick = true;\n            _snapper.onMouseDown({x: event.canvasX, y:event.canvasY});\n            this.handleSingleClick(event);\n        }\n        _singleClickHandled = !_singleClickHandled;\n\n        return true;\n    };\n\n    this.handleDoubleTap = function() {\n        return true;\n    };\n\n    this.handleResize = function() {\n        if (_measurement.indicator) {\n            _measurement.indicator.handleResize();\n        }\n    };\n\n    this.onCameraChange = function() {\n        if (_snapper.indicator) {\n            _snapper.indicator.onCameraChange();\n        }\n    };\n\n    this.screenSizeChanged = function(event) {\n        this.onCameraChange();\n    };\n};\n\nav.GlobalManagerMixin.call(CalibrationTool.prototype);","\nconst av = Autodesk.Viewing;\n\nexport var MagnifyingGlass = function(viewer) {\n\n    var _viewer = viewer;\n    var _active = false;\n    var _names = [\"magnifyingGlass\"];\n    var _priority = 70;\n    var _isPressing = false;\n    var _radius = 60;\n    var _zoom = 2;\n    var _offset = 15;\n    var _magnifyingGlassCanvas = null;\n    var _imageData = null;\n    var _imageBuffer = null;\n    var _clientX = null;\n    var _clientY = null;\n    var _needsClear = false;\n    var av = Autodesk.Viewing;\n    \n    this.setGlobalManager(viewer.globalManager);\n\n    this.isActive = function() {\n\n        return _active;\n    };\n\n    this.activate = function() {\n\n        _active = true;\n        this.updateMagnifyingGlassBinded = this.updateMagnifyingGlass.bind(this);\n    };\n\n    this.updateMagnifyingGlass = function() {\n        const _window = this.getWindow();\n        const _document = this.getDocument();\n        if (_needsClear) {\n            _magnifyingGlassCanvas && _magnifyingGlassCanvas.classList.remove('visible');\n            _needsClear = false;\n        }\n        else {\n            var pixelRatio = _window.devicePixelRatio;\n            var diameter = 2 * _radius;\n            var normlizedDiameter = diameter * pixelRatio;\n            var x = pixelRatio * (_clientX - (_radius  / _zoom));\n            var y = pixelRatio * (_clientY - (_radius  / _zoom));\n            \n            if (!_magnifyingGlassCanvas) {\n                _magnifyingGlassCanvas = _document.createElement(\"canvas\");\n                _magnifyingGlassCanvas.className = 'magnifying-glass';\n                _magnifyingGlassCanvas.width = normlizedDiameter;\n                _magnifyingGlassCanvas.height = normlizedDiameter;\n                _magnifyingGlassCanvas.style.width = diameter + 'px';\n                _magnifyingGlassCanvas.style.height = diameter + 'px';\n\n                // Swap canvas\n                _magnifyingGlassCanvas.getContext(\"2d\").translate(0, normlizedDiameter);\n                _magnifyingGlassCanvas.getContext(\"2d\").scale(1,-1);\n\n                _viewer.container.appendChild(_magnifyingGlassCanvas);\n                _imageData = _magnifyingGlassCanvas.getContext(\"2d\").createImageData(Math.ceil(normlizedDiameter / _zoom), Math.ceil(normlizedDiameter / _zoom));\n                _imageBuffer = new Uint8Array(_imageData.data.buffer);\n            }\n\n            var ctx = _magnifyingGlassCanvas.getContext(\"2d\");\n            \n            // Read the pixels from the frame buffer\n            var gl = _viewer.canvas.getContext(\"webgl2\") || _viewer.canvas.getContext(\"webgl\") || _viewer.canvas.getContext(\"experimental-webgl\");         \n            gl.readPixels(x, _viewer.canvas.height - y - _imageData.height, _imageData.width, _imageData.height, gl.RGBA, gl.UNSIGNED_BYTE, _imageBuffer);\n            // Put the pixel into the magnifying context.\n            ctx.putImageData(_imageData, 0, 0);\n            // Scale the image\n            ctx.drawImage(_magnifyingGlassCanvas, 0, 0, _imageData.width, _imageData.height, 0, 0, normlizedDiameter, normlizedDiameter);\n            this.setGlassPosition(_magnifyingGlassCanvas, _clientX, _clientY, diameter, _offset); \n\n            _magnifyingGlassCanvas.classList.toggle('visible', true);\n        }\n    };\n\n    this.deactivate = function() {\n        this.clearMagnifyingGlass();\n        _active = false;\n    };\n\n    this.getNames = function() {\n\n        return _names;\n    };\n\n    this.getName = function() {\n\n        return _names[0];\n    };\n\n    this.getPriority = function() {\n        return _priority;\n    };\n\n    this.setGlassPosition = function(canvas, x, y, diameter, offset) {\n            \n        // check the left border of canvas\n        canvas.style.left = (x - diameter/2) + 'px';\n\n        // check the top border of canvas\n        if (y - diameter - offset > 0) {\n            canvas.style.top  = (y - diameter - offset) + 'px';    \n        }\n        else {\n            canvas.style.top = (y + offset) + 'px';    \n        }\n    };\n\n    this.requestUpdate = function() {\n        if(!_viewer.hasEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT, this.updateMagnifyingGlassBinded)) {\n           _viewer.addEventListener(Autodesk.Viewing.RENDER_PRESENTED_EVENT, this.updateMagnifyingGlassBinded, { once: true });\n        }\n    };\n\n    this.drawMagnifyingGlass = function(clientX, clientY) {\n        _clientX = clientX;\n        _clientY = clientY;\n        _viewer.impl.invalidate(false, false, true);\n        this.requestUpdate();\n    };\n\n    this.clearMagnifyingGlass = function () {\n        _needsClear = true;\n        this.requestUpdate();\n    };\n\n    this.handlePressHold = function (event) {\n\n        if (av.isTouchDevice()) {\n            switch( event.type )\n            {\n                case \"press\":\n                    _isPressing = true;\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\n                    break;\n\n                case \"pressup\":\n                    this.clearMagnifyingGlass();\n                    _isPressing = false;\n                    break;\n            }\n        }\n        return false;\n\n    };\n\n    this.handleGesture = function(event) {\n\n        if (_isPressing && av.isTouchDevice()) {\n            switch( event.type )\n            {\n                case \"dragstart\":\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\n                    break;\n\n                case \"dragmove\":\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\n                    break;\n\n                case \"dragend\":\n                    this.clearMagnifyingGlass();\n                    _isPressing = false;\n                    break;\n\n                case \"pinchstart\":\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\n                    break;\n\n                case \"pinchmove\":\n                    this.drawMagnifyingGlass(event.canvasX, event.canvasY);\n                    break;\n\n                case \"pinchend\":\n                    this.clearMagnifyingGlass();\n                    break;\n            }\n        }\n\n        return false;\n    };\n\n    this.handleMouseMove = function (event) {\n        return false;\n    };\n\n    this.handleWheelInput = function (delta) {\n        return false;\n    };\n\n    this.handleButtonUp = function (event, button) {\n        return false;\n    };\n\n};\n\nav.GlobalManagerMixin.call(MagnifyingGlass.prototype);\n","\n    var av = Autodesk.Viewing;\n    var avu = Autodesk.Viewing.UI;\n    var avp = Autodesk.Viewing.Private;\n    var MeasureCommon = Autodesk.Viewing.MeasureCommon;\n\n    // /** @constructor */\n    export function MeasureToolbar(measureExtension)\n    {\n        this.measureExtension = measureExtension;\n        this.measureTool = this.measureExtension.measureTool;\n        this.viewer = this.measureExtension.viewer;\n        this.setGlobalManager(this.viewer.globalManager);\n        this.visible = false;\n        this.buttonsList = [];\n    }\n\n    var proto = MeasureToolbar.prototype;\n    av.GlobalManagerMixin.call(MeasureToolbar.prototype);\n\n    proto.init = function() {\n        var self = this;\n\n        const _document = this.getDocument();\n\n        // Add Measure tool toolbar to main toolbar\n        var toolbar = this.viewer.getToolbar();\n        var navigationBar = toolbar.getControl(Autodesk.Viewing.TOOLBAR.NAVTOOLSID);\n        var toolbarOptions = {};\n        toolbarOptions.index = toolbar.indexOf(navigationBar) + 1;\n        this.measureToolbar = new avu.ControlGroup(Autodesk.Viewing.TOOLBAR.MEASURETOOLSID);\n        this.measureToolbar.setGlobalManager(this.globalManager);\n        toolbar.addControl(this.measureToolbar, toolbarOptions);\n    \n\n        // Create a button for the measure simple distance.\n        this.measureSimpleDistanceBtn = new avu.Button(\"toolbar-measureTool-simple-distance\");\n        this.measureSimpleDistanceBtn.setGlobalManager(this.globalManager);\n        this.measureSimpleDistanceBtn.setToolTip(\"Distance\");\n        this.measureSimpleDistanceBtn.setIcon(\"adsk-icon-measure-distance-new\");\n        this.measureSimpleDistanceBtn.onClick = function() {\n            var enable = self.measureSimpleDistanceBtn.getState() !== avu.Button.State.ACTIVE;\n            if (enable) {\n                self.measureExtension.activate('distance');\n            } else {\n                self.measureTool.deselectAllMeasurements();\n            }\n        };\n\n        this.measureToolbar.addControl(this.measureSimpleDistanceBtn);\n        this.buttonsList[MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE] = this.measureSimpleDistanceBtn;\n\n\n        // Create a button for the measure Angle.\n        this.measureAngleBtn = new avu.Button(\"toolbar-measureTool-angle\");\n        this.measureAngleBtn.setGlobalManager(this.globalManager);\n        this.measureAngleBtn.setToolTip(\"Angle\");\n        this.measureAngleBtn.setIcon(\"adsk-icon-measure-angle-new\");\n        this.measureAngleBtn.onClick = function () {\n            var enable = self.measureAngleBtn.getState() !== avu.Button.State.ACTIVE;\n            if (enable) {\n                self.measureExtension.activate('angle');\n            } else {\n                self.measureTool.deselectAllMeasurements();\n            }\n        };\n        this.measureToolbar.addControl(this.measureAngleBtn);\n        this.buttonsList[MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE] = this.measureAngleBtn;\n\n        if (this.viewer.model && this.viewer.model.is2d()) {\n            // Create a button for the measure distance.\n            this.measureAreaBtn = new avu.Button(\"toolbar-measureTool-area\");\n            this.measureAreaBtn.setGlobalManager(this.globalManager);\n            this.measureAreaBtn.setToolTip(\"Area\");\n            this.measureAreaBtn.setIcon(\"adsk-icon-measure-area-new\");\n            this.measureAreaBtn.onClick = function() {\n                var enable = self.measureAreaBtn.getState() !== avu.Button.State.ACTIVE;\n                if (enable) {\n                    self.measureExtension.activate('area');\n                } else {\n                    self.measureTool.deselectAllMeasurements();\n                }\n            };\n\n            this.measureToolbar.addControl(this.measureAreaBtn);\n            this.buttonsList[MeasureCommon.MeasurementTypes.MEASUREMENT_AREA] = this.measureAreaBtn;\n        }\n\n        // Create a button for the Calibration tool.\n        this.calibrationToolBtn = new avu.Button( \"toolbar-calibrationTool\");\n        this.calibrationToolBtn.setGlobalManager(this.globalManager);\n        this.calibrationToolBtn.setToolTip(\"Calibrate\");\n        this.calibrationToolBtn.setIcon(\"adsk-icon-measure-calibration\");\n        this.calibrationToolBtn.onClick = function(e) {\n            var enable = self.calibrationToolBtn.getState() !== avu.Button.State.ACTIVE;\n            if(enable) {\n                self.measureExtension.activate('calibrate');\n            } else  {\n                self.measureExtension.enableCalibrationTool(false);\n            }\n        };\n\n        this.measureToolbar.addControl(this.calibrationToolBtn);\n        this.buttonsList[MeasureCommon.MeasurementTypes.CALIBRATION] = this.calibrationToolBtn;\n\n        var separator = _document.createElement('div');\n        separator.className = 'measure-toolbar-seperator';\n\n        this.measureToolbar.container.appendChild(separator);\n        \n\n        // Create a button for the Trash.\n        this.deleteBtn = new avu.Button( \"toolbar-delete\");\n        this.deleteBtn.setGlobalManager(this.globalManager);\n        this.deleteBtn.setToolTip(\"Delete measurement\");\n        this.deleteBtn.setIcon(\"adsk-icon-measure-trash\");\n        this.deleteBtn.onClick = function() {\n            self.measureExtension.deleteCurrentMeasurement();\n        };\n\n        this.measureToolbar.addControl(this.deleteBtn);\n\n        // Create a button for the Settings panel.\n        this.settingsBtn = new avu.Button( \"toolbar-settings\");\n        this.settingsBtn.setGlobalManager(this.globalManager);\n        this.settingsBtn.setToolTip(\"Measure settings\");\n        this.settingsBtn.setIcon(\"adsk-icon-measure-settings\");\n\n        this.settingsControlPanel = _document.createElement('div');\n        this.settingsControlPanel.classList.add('docking-panel');\n        this.settingsControlPanel.classList.add('docking-panel-container-solid-color-b');\n        this.settingsControlPanel.classList.add('measure-settings-popup');\n        this.settingsControlPanel.classList.add('hide');\n\n        this.settingsBtn.onClick = function (event) {\n            if (this.settingsControlPanel.classList.contains('hide')) {\n                this.settingsControlPanel.classList.remove('hide');\n                this.setButtonActive(this.settingsBtn);\n            }\n            else {\n                this.settingsControlPanel.classList.add('hide');\n                this.setButtonInactive(this.settingsBtn);\n            }\n        }.bind(this);\n\n        this.measureToolbar.container.appendChild(this.settingsControlPanel);\n        this.settingsControlPanel.root = this.settingsBtn;\n        this.measureToolbar.addControl(this.settingsBtn);\n\n\n        // Settings Panel\n        this.table = _document.createElement(\"table\");\n        this.table.classList.add(\"adsk-lmv-tftable\");\n        this.table.classList.add(\"calibration-table\");\n\n        this.tbody = _document.createElement(\"tbody\");\n        this.table.appendChild(this.tbody);\n        this.settingsControlPanel.appendChild(this.table);\n\n        this.units = [\n            { name: 'Unknown', units: '', matches: [''] },                                      // localized in OptionDropDown() call below\n            { name: 'Decimal feet', units: 'decimal-ft', matches: ['ft', 'decimal-ft'] },             // localized in OptionDropDown() call below\n            { name: 'Feet and fractional inches', units: 'ft-and-fractional-in', matches: ['ft-and-fractional-in'] },         // localized in OptionDropDown() call below\n            { name: 'Feet and decimal inches', units: 'ft-and-decimal-in', matches: ['ft-and-decimal-in'] }, // localized in OptionDropDown() call below\n            { name: 'Decimal inches', units: 'decimal-in', matches: ['in', 'decimal-in'] },           // localized in OptionDropDown() call below\n            { name: 'Fractional inches', units: 'fractional-in', matches: ['fractional-in'] },  // localized in OptionDropDown() call below\n            { name: 'Meters', units: 'm', matches: ['m'] },                                     // localized in OptionDropDown() call below\n            { name: 'Centimeters', units: 'cm', matches: ['cm'] },                              // localized in OptionDropDown() call below\n            { name: 'Millimeters', units: 'mm', matches: ['mm'] },                              // localized in OptionDropDown() call below\n            { name: 'Meters and centimeters', units: 'm-and-cm', matches: ['m-and-cm'] },        // localized in OptionDropDown() call below\n            { name: 'Points', units: 'pt', matches: ['pt'] }                                    // localized in OptionDropDown() call below\n        ];\n\n        var initialIndex = this.findUnits(),\n            unitNames = [];\n        \n        // It is not possible to hide elements in Safari.\n        if (av.isSafari() && this.viewer.model.getDisplayUnit()){\n            // We will remove the 'Unknown' unit from the units array.\n            this.units.shift();\n        }\n        \n        for (var i = 0; i < this.units.length; ++i) {\n            unitNames.push(this.units[i].name);\n        }\n\n        this.unitList = new avp.OptionDropDown(\"Unit type\", this.tbody, unitNames, initialIndex, null, { paddingLeft: 0, paddingRight: 15 });\n        this.unitList.setGlobalManager(this.globalManager);\n        this.unitList.addEventListener(\"change\", function(e) {\n            var index = self.unitList.selectedIndex;\n            var toUnits = self.units[index].units;\n            self.measureTool.setUnits(toUnits);\n            self.setupPrecision();\n            avp.logger.track({ category: 'pref_changed', name: 'measure/units', value: toUnits });\n        });\n\n        this.precisionList = new avp.OptionDropDown(\"Precision\", this.tbody, [], -1, null, { paddingLeft: 0, paddingRight: 15 });\n        this.precisionList.setGlobalManager(this.globalManager);\n        this.precisionList.addEventListener(\"change\", function(e) {\n            var index = self.precisionList.selectedIndex;\n            self.measureTool.setPrecision(index);\n            avp.logger.track({ category: 'pref_changed', name: 'measure/precision', value: index });\n        });\n\n        this.isolate = new avp.OptionCheckbox(\"Isolate measurement\", this.tbody, false);\n        this.isolate.setGlobalManager(this.globalManager);\n        this.isolate.addEventListener(\"change\", function(e) {\n            var enable = self.isolate.checked;\n            self.measureTool.setIsolateMeasure(enable);\n            if (enable) {\n                self.measureTool.isolateMeasurement();\n            }\n            else {\n                self.measureTool.clearIsolate();\n            }\n            avp.logger.track({ category: 'pref_changed', name: 'measure/isolate', value: enable });\n        });\n\n        this.setupPrecision();\n\n        this.updateSettingsPanel();\n\n        if (this.viewer.model && this.viewer.model.is2d()) {\n            this.isolate.setVisibility(false);\n        }\n\n        if (!this.measureExtension.sharedMeasureConfig.units) {\n            this.disableUnitOption();\n        }\n        // Only disable option if the browser is not Safari\n        else if (!Autodesk.Viewing.isSafari()){\n            this.disableUnitOption(0);  // disable \"Unknown\" option when the model has units\n        }\n\n\n        // Create a button for 'Done'.\n        this.measureDoneBtn = new avu.Button(\"toolbar-measureTool-done\");\n        this.measureDoneBtn.setGlobalManager(this.globalManager);\n        var doneText = Autodesk.Viewing.i18n.translate('Done');\n        this.measureDoneBtn.setToolTip(doneText);\n        var cancelLabel = _document.createElement('label');\n        cancelLabel.textContent = doneText;\n        var btnContainer = this.measureDoneBtn.container;\n        btnContainer.appendChild(cancelLabel);\n        btnContainer.classList.add('adsk-label-button');\n        var iconEle = btnContainer.getElementsByClassName('adsk-button-icon');\n        iconEle && iconEle[0] && (iconEle[0].style.display = 'none');\n\n        this.measureDoneBtn.onClick = function() {\n            this.measureExtension.exitMeasurementMode();\n        }.bind(this);\n        this.measureToolbar.addControl(this.measureDoneBtn);\n\n        // this.settingsControlPanel.style.width = this.measureToolbar.container.getBoundingClientRect().width + 'px';\n        this.measureToolbar.setVisible(false);\n\n    };\n\n    proto.destroy = function() {\n\n        // If toolbar was open, close it first. Otherwise, we leave ModelTools toolbar in a broken state.\n        if (this.visible) {\n            this.closeToolbar();\n        }\n\n        if (this.measureToolbar) {\n            this.measureToolbar.removeFromParent();\n            this.measureToolbar = null;\n        }\n    };\n\n    proto.closeToolbar = function() {\n\n        this.measureExtension.enableMeasureTool(false);\n        this.measureExtension.enableCalibrationTool(false);\n        this.toggleVisible();\n\n        var toolbar = this.viewer.getToolbar();\n        var viewerToolbarContainer = toolbar.container;\n        var viewerContainerChildrenCount = viewerToolbarContainer.children.length;\n        \n        for(var i = 0; i < viewerContainerChildrenCount; ++i) {\n            viewerToolbarContainer.children[i].style.display = \"\";\n        }\n\n        var modelTools = toolbar.getControl(av.TOOLBAR.MODELTOOLSID);\n        modelTools.addControl(this.measureExtension.measurementToolbarButton, {index: this.measureExtension.measurementToolbarButton.index });\n    };\n\n    proto.toggleVisible = function() {\n        this.visible = !this.visible;\n        this.measureToolbar.setVisible(this.visible);\n        if (!this.visible) {\n            this.settingsControlPanel.classList.add('hide');\n            this.setButtonInactive(this.settingsBtn);\n        }\n    };\n\n    proto.setButtonActive = function(button) {\n        button.setState(avu.Button.State.ACTIVE);\n    };\n\n    proto.setButtonInactive = function(button) {\n        button.setState(avu.Button.State.INACTIVE);\n    };\n\n    proto.deactivateAllButtons = function() {\n        for (var key in this.buttonsList) {\n            if (this.buttonsList.hasOwnProperty(key)) {\n                var button = this.buttonsList[key];\n                this.setButtonInactive(button);   \n            }\n        }\n    };\n\n    proto.activateButtonByType = function(measurementType) {\n        this.setButtonActive(this.buttonsList[measurementType]);\n    };            \n\n    proto.setupPrecision = function() {\n        const _document = this.getDocument();\n        while (this.precisionList.dropdownElement.lastChild) {\n            this.precisionList.dropdownElement.removeChild(this.precisionList.dropdownElement.lastChild);\n        }\n\n        var selectedUnits = this.measureTool.getUnits(),\n            precisions;\n\n        if (selectedUnits === 'ft-and-fractional-in' || selectedUnits === 'fractional-in') {\n            precisions = ['1', '1/2', '1/4', '1/8', '1/16', '1/32', '1/64'];\n        } else {\n            precisions = ['0', '0.1', '0.01', '0.001', '0.0001', '0.00001'];\n        }\n\n        for (var i = 0; i < precisions.length; ++i) {\n            var elem = _document.createElement('option');\n            elem.value = i;\n            elem.textContent = precisions[i];\n            this.precisionList.dropdownElement.appendChild(elem);\n        }\n\n        var selectedIndex = this.measureTool.getPrecision();\n        if (precisions.length <= selectedIndex) {\n            selectedIndex = precisions.length - 1;\n            this.measureTool.setPrecision(selectedIndex);\n        }\n        this.precisionList.dropdownElement.selectedIndex = selectedIndex;\n    };\n\n    proto.findUnits = function() {\n        var i,\n            j,\n            selectedUnits = this.measureTool.getUnits();\n        for (i = 0; i < this.units.length; ++i) {\n            var matches = this.units[i].matches;\n            if (matches) {\n                for (j = 0; j < matches.length; ++j) {\n                    if (matches[j] === selectedUnits) {\n                        return i;\n                    }\n                }\n            }\n        }\n        return 0;\n    };\n\n    proto.disableUnitOption = function( index ) {\n        if (index != null) {\n            this.unitList.dropdownElement.children[index].style.display = \"none\";\n            if (av.isIE11) {\n                // IE11 can't hide <option> elements...\n                this.unitList.dropdownElement.children[index].disabled = true;\n                this.unitList.dropdownElement.children[index].style.visibility = \"hidden\";\n            }\n        } else {  // disable all options\n            this.unitList.dropdownElement.disabled = true;\n        }\n    };\n\n    proto.updateSettingsPanel = function() {\n        this.unitList.dropdownElement.selectedIndex = this.findUnits();\n        this.precisionList.dropdownElement.selectedIndex = this.measureTool.getPrecision();\n        this.setupPrecision();\n    };\n\n\n","import { MeasureTool } from './MeasureTool'\nimport { CalibrationTool } from './CalibrationTool'\nimport { MagnifyingGlass } from './MagnifyingGlass'\nimport { CalibrationRequiredDialog } from './CalibrationPanels'\nimport { MeasureToolbar } from './MeasureToolbar'\n\n\nimport CSS_1 from './Measure.css'       // IMPORTANT!!\nimport CSS_2 from './Calibration.css'   // IMPORTANT!!\n\n'use strict';\n\nvar avem = AutodeskNamespace('Autodesk.Viewing.Extensions.Measure'),\n    av = Autodesk.Viewing,\n    avp = Autodesk.Viewing.Private,\n    avu = av.UI;\nvar MeasureCommon = Autodesk.Viewing.MeasureCommon; // Comes form main viewer bundle.\n\nvar NONE = 0;\nvar MEASURE_TOOL = 1;\nvar CALIBRATION_TOOL = 2;\n\nvar DEFAULT_MEASUREMENT_TYPE = MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE;\n\n/**\n * Provides UI controls to perform distance and angle measurements for 2D and 3D models.\n * \n * The extension id is: `Autodesk.Measure`\n * \n * @example\n *   viewer.loadExtension('Autodesk.Measure')\n *  \n * @memberof Autodesk.Viewing.Extensions\n * @alias Autodesk.Viewing.Extensions.MeasureExtension\n * @see {@link Autodesk.Viewing.Extension} for common inherited methods.\n * @constructor\n*/\nexport var MeasureExtension = function(viewer, options) {\n    Autodesk.Viewing.Extension.call(this, viewer, options);\n    this.modes = ['distance','angle','area','calibrate'];\n    this.name = 'measure';\n    this._onModelLoaded = this._onModelLoaded.bind(this);\n};\n\nMeasureExtension.prototype = Object.create(Autodesk.Viewing.Extension.prototype);\nMeasureExtension.prototype.constructor = MeasureExtension;\n\n\n/**\n * Load the measure extension.\n * @returns {boolean} True if measure extension is loaded successfully.\n * \n * @alias Autodesk.Viewing.Extensions.MeasureExtension#load\n*/\nMeasureExtension.prototype.load = async function() {\n\n    await this.viewer.loadExtension('Autodesk.Snapping');\n\n    var self   = this;\n    var viewer = this.viewer;\n    this.hasUI = Autodesk.Viewing.GuiViewer3D && viewer instanceof Autodesk.Viewing.GuiViewer3D;\n\n    this.escapeHotkeyId = 'Autodesk.Measure.Hotkeys.Escape';\n\n    // Register the Measure tool\n    if (!viewer.toolController){\n        return false;\n    }\n\n    this.options = this.options || {};\n    var measureToolOptions = {};\n\n    measureToolOptions.onCloseCallback = function() {\n        self.enableMeasureTool(false);\n    };\n\n    // Shared State with measureTool & calibrationTool.\n    // Gets populated when a model is received.\n    this.sharedMeasureConfig = { \n        units: null,\n        precision: null,\n        calibrationFactor: null\n    };\n\n\tmeasureToolOptions.snapperOptions = this.options.snapperOptions;\n\n    this.forceCalibrate = this.options.forceCalibrate;\n\n    this.snapper = new Autodesk.Viewing.Extensions.Snapping.Snapper(viewer, {\n        renderSnappedTopology: true\n    });\n    viewer.toolController.registerTool(this.snapper);\n\n    this.measureTool = new MeasureTool(viewer, measureToolOptions, this.sharedMeasureConfig, this.snapper);\n    viewer.toolController.registerTool(this.measureTool);\n\n    this.calibrationTool = new CalibrationTool(viewer, this.options, this.sharedMeasureConfig, this.snapper);\n    viewer.toolController.registerTool(this.calibrationTool);\n\n    this.magnifyingGlass = new MagnifyingGlass(viewer);\n    viewer.toolController.registerTool(this.magnifyingGlass);\n\n    this.calibration = {};\n    this.onFinishedCalibration = function(event) {\n        if (self.measureToolbar) {\n            self.measureToolbar.updateSettingsPanel();\n        }\n\n        self.activateInitiator && self.activateInitiator();\n\n        // Set the calibration values\n        self.calibration.units = event.units;\n        self.calibration.scaleFactor = event.scaleFactor;\n        self.calibration.size = event.size;\n        self.calibration.precision = self.sharedMeasureConfig.precision;\n    };\n\n    viewer.addEventListener('finished-calibration', this.onFinishedCalibration);\n\n    this.onMeasurementChanged = function(event) {\n        var type = event.data.type;\n        self.changeMeasurementType(type);\n    };\n\n    viewer.addEventListener(MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, this.onMeasurementChanged);\n\n    if (viewer.model) {\n        this._onModelLoaded({ model: viewer.model });\n    } else {\n        viewer.addEventListener(av.MODEL_ROOT_LOADED_EVENT, this._onModelLoaded, { once: true });\n    }\n\n    // If there is no model anymore, interrupt any ongoing interaction.\n    // We need at least one model to derive things like is2d() and model units.\n    this.onModelRemoved = function() {\n        // If UI was not created yet or destroyed, we don't have to disable anything\n        if (!self.measurementToolbarButton) {\n            return;\n        }\n                \n        if (!self.viewer.model) {\n            self.measurementToolbarButton.setState(Autodesk.Viewing.UI.Button.State.DISABLED);\n            self.exitMeasurementMode();\n        }\n    };\n    this.onModelAdded = function() {\n\n        // If UI was not created yet or destroyed, the button will be enabled in next createUI() call\n        if (!self.measurementToolbarButton) {\n            return;\n        }\n\n        // On first model-add, re-enable measure toolbar again\n        var modelCount = self.viewer.getVisibleModels().length;\n        if (modelCount === 1 && self.measurementToolbarButton) {\n            self.measurementToolbarButton.setState(Autodesk.Viewing.UI.Button.State.INACTIVE);\n        }\n    };\n    viewer.addEventListener(av.MODEL_ADDED_EVENT, this.onModelAdded);\n    viewer.addEventListener(av.MODEL_REMOVED_EVENT, this.onModelRemoved);\n};\n\nMeasureExtension.prototype._onModelLoaded = function(event) {\n    var model = event.model;\n    this.sharedMeasureConfig.units = this.options.calibrationUnits || model.getDisplayUnit();\n    this.sharedMeasureConfig.precision = model.is2d() ? 3 : 1;\n\n    if (this.options.calibrationUnits && !isNaN(this.options.calibrationFactor)) {\n        this.calibrationTool.calibrateByScale(this.options.calibrationUnits, this.options.calibrationFactor);\n    }\n}\n\n/**\n * Unload the measure extension.\n * @returns {boolean} True if measure extension is unloaded successfully.\n * \n * @alias Autodesk.Viewing.Extensions.MeasureExtension#unload\n*/\nMeasureExtension.prototype.unload = function () {\n    var viewer = this.viewer;\n\n    // Remove the ui from the viewer.\n    this.destroyUI();\n\n    viewer.removeEventListener('finished-calibration', this.onFinishedCalibration);\n    viewer.removeEventListener(MeasureCommon.Events.MEASUREMENT_CHANGED_EVENT, this.onMeasurementChanged);\n    viewer.removeEventListener(av.MODEL_ADDED_EVENT, this.onModelAdded);\n    viewer.removeEventListener(av.MODEL_REMOVED_EVENT, this.onModelRemoved);\n    viewer.removeEventListener(av.MODEL_ROOT_LOADED_EVENT, this._onModelLoaded);\n\n    viewer.toolController.deregisterTool(this.snapper);\n    this.snapper = null;\n\n    viewer.toolController.deregisterTool(this.measureTool);\n    this.measureTool = null;\n\n    viewer.toolController.deregisterTool(this.calibrationTool);\n    this.calibrationTool = null;\n\n    viewer.toolController.deregisterTool(this.magnifyingGlass);\n    this.magnifyingGlass = null;\n\n    this.unloaded = true;\n    return true;\n};\n\n/**\n * Enable/disable the measure tool.\n * It does not update the toolbar UI.\n * \n * @param {boolean} active - True to activate, false to deactivate.\n * @returns {boolean} True if a change in activeness occurred.\n */\nMeasureExtension.prototype.setActive = function(active) {\n    return this.enableMeasureTool(active);\n};\n\n/**\n * Toggles activeness of the measure tool.\n * It does not update the toolbar UI.\n * \n * @return {boolean} Whether the tool is active.\n */\nMeasureExtension.prototype.toggle = function() {\n    if (this.isActive()) {\n        this.enableMeasureTool(false);\n    } else {\n        this.enableMeasureTool(true);\n    }\n    return this.isActive();\n};\n\n/**\n * Get the current measurement in the measure tool.\n * @param {string} [unitType] - Either: \"decimal-ft\", \"ft\", \"ft-and-decimal-in\", \"decimal-in\", \"fractional-in\", \"m\", \"cm\", \"mm\" or \"m-and-cm\".\n * @param {number} [precision] - precision index (0: 0, 1: 0.1, 2: 0.01, 3: 0.001, 4: 0.0001, 5: 0.00001).\n * When units type is \"ft\", \"in\" or \"fractional-in\", then the precisions are 0: 1, 1: 1/2, 2: 1/4, 3: 1/8, 4: 1/16, 5: 1/32, 6: 1/64.\n * @returns {object|null} Object with properties of the current measurement, or null.\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#getMeasurement\n */\nMeasureExtension.prototype.getMeasurement = function(unitType, precision) {\n    var measurement = null;\n    if (this.measureTool.isActive()) {\n        measurement = this.measureTool.getMeasurement(unitType, precision);\n    }\n    return measurement;\n};\n\n/**\n * Get a list of all the measurements that are currently on the screen.\n * @param {string} [unitType] - Either: \"decimal-ft\", \"ft\", \"ft-and-decimal-in\", \"decimal-in\", \"fractional-in\", \"m\", \"cm\", \"mm\" or \"m-and-cm\".\n * @param {number} [precision] - precision index (0: 0, 1: 0.1, 2: 0.01, 3: 0.001, 4: 0.0001, 5: 0.00001).\n * When units type is \"ft\", \"in\" or \"fractional-in\", then the precisions are 0: 1, 1: 1/2, 2: 1/4, 3: 1/8, 4: 1/16, 5: 1/32, 6: 1/64.\n * @returns {Array.<Object>} An array of measurement objects with properties of the measurement.\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#getMeasurementList\n */\n\nMeasureExtension.prototype.getMeasurementList = function(unitType, precision) {\n  var measurementList = [];\n  if(this.measureTool.isActive()) {\n      measurementList = this.measureTool.getMeasurementList(unitType, precision);\n  }\n  return measurementList;\n}\n\n/**\n * Restores existing measurements. The `measurements` object should be generated by either the {@link Autodesk.Viewing.Extensions.MeasureExtension#getMeasurementList|getMeasurementList} or the {@link Autodesk.Viewing.Extensions.MeasureExtension#getMeasurement|getMeasurement} methods.\n * @param {Object[]|Object} measurements - An array of measurement objects\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#setMeasurements\n */\nMeasureExtension.prototype.setMeasurements = function(measurements) {\n    if (this.measureTool.isActive()) {\n        this.measureTool.setMeasurements(measurements);\n    }\n};\n\n\n/**\n * Get all available units in measure tool.\n * @returns {object[]} Array of all available units.\n*/\nMeasureExtension.prototype.getUnitOptions = function() {\n    var units = [\n        { name: 'Unknown', type: '' },\n        { name: 'Decimal feet', type: 'decimal-ft' },\n        { name: 'Feet and fractional inches', type: 'ft' },\n        { name: 'Feet and decimal inches', type: 'ft-and-decimal-in' },\n        { name: 'Decimal inches', type: 'decimal-in' },\n        { name: 'Fractional inches', type: 'fractional-in' },\n        { name: 'Meters', type: 'm' },\n        { name: 'Centimeters', type: 'cm' },\n        { name: 'Millimeters', type: 'mm' },\n        { name: 'Meters and centimeters', type: 'm-and-cm' },\n        { name: 'Points', type: 'pt' }\n    ];\n\n    return units;\n};\n\n/**\n * Get all available precisions in measure tool.\n * @param {boolean} isFractional - Set true to get fractional precisions.\n * @return {string[]} List of all available precisions.\n*/\nMeasureExtension.prototype.getPrecisionOptions = function(isFractional) {\n\n    var precisions;\n\n    if (isFractional)\n        precisions = ['1', '1/2', '1/4', '1/8', '1/16', '1/32', '1/64'];\n    else\n        precisions = ['0', '0.1', '0.01', '0.001', '0.0001', '0.00001'];\n\n    return precisions;\n};\n\n/**\n * Get the default measure unit in measure tool.\n * @returns {string} The default measure unit.\n*/\nMeasureExtension.prototype.getDefaultUnit = function() {\n    var unit = this.viewer.model.getDisplayUnit();\n\n    return unit;\n};\n\nMeasureExtension.prototype.openCalibrationRequiredDialog = function (initiator) {\n    if (this.hasUI) {\n        if (!this.CalibrationRequiredDialog) {\n            this.CalibrationRequiredDialog = new CalibrationRequiredDialog(this, this.viewer, \"calibration-required\", \"Calibration Required\", this.options );\n        }\n\n        this.CalibrationRequiredDialog.setVisible(true);\n    }\n    else {\n        this.viewer.dispatchEvent({ type: MeasureCommon.Events.CALIBRATION_REQUIRED_EVENT });\n    }\n\n    if (initiator === 'measure') {\n        this.activateInitiator = function() {\n            this.enableMeasureTool(true, DEFAULT_MEASUREMENT_TYPE);\n            this.activateInitiator = null;\n        };\n    } else if (initiator === 'dimension') {\n        this.activateInitiator = function() {\n            this.viewer.dispatchEvent({ type: MeasureCommon.Events.FINISHED_CALIBRATION_FOR_DIMENSION_EVENT });\n            this.activateInitiator = null;\n        };\n    }\n};\n\n/**\n * Get the calibration size, unit type and the calibration Factor of the model\n * @returns {Object}\n */\nMeasureExtension.prototype.getCalibration = function() {\n    return this.calibration;\n};\n\n\n/**\n * @param mode Measurement Mode\n * @returns {boolean}\n */\n\n /**\n  * Activates the tool and UI to start measuring.\n  * \n  * @param {string} [mode] - Either 'distance', 'angle', 'area' (2D only) or 'calibrate'. Default is 'distance'.\n * \n * @alias Autodesk.Viewing.Extensions.MeasureExtension#activate\n  */\nMeasureExtension.prototype.activate = function (mode) {\n    if (this.activeStatus && this.mode === mode) {\n        return true;\n    }\n    this.enterMeasurementMode();\n\n    var success;\n\n    switch (mode) {\n        default:\n            mode = 'distance';\n        case 'distance':\n            success = this.enableMeasureTool(true, MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE);\n            break;\n        case 'angle':\n            success = this.enableMeasureTool(true, MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE);\n            break;\n        case 'area':\n            if(!this.viewer.model.is2d()) {\n                console.warn('Area mode is applicable on 2D models only');\n            } else {\n                success = this.enableMeasureTool(true, MeasureCommon.MeasurementTypes.MEASUREMENT_AREA);\n            }\n            break;\n        case 'calibrate':\n            success = this.enableCalibrationTool(true);\n            break;\n    }\n\n    this.mode = success ? mode : '';\n    this.activeStatus = true;\n    return true;\n};\n\n/**\n * Deactivates measuring tool and UI.\n * \n * @returns {boolean}\n * \n * @alias Autodesk.Viewing.Extensions.MeasureExtension#deactivate\n */\nMeasureExtension.prototype.deactivate = function () {\n    if(this.activeStatus) {\n        this.exitMeasurementMode();\n        this.enableMeasureTool(false);\n        this.activeStatus = false;\n    }\n    return true;\n};\n\n/**\n * Enable/disable the measure tool.\n * @param {boolean} enable - True to enable, false to disable.\n * @returns {boolean} True if the tool state was changed.\n * @private\n */\nMeasureExtension.prototype.enableMeasureTool = function(enable, measurementType) {\n    if (measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_AREA && this.viewer.model && !this.viewer.model.is2d()) {\n        return false;\n    }\n\n    var toolController = this.viewer.toolController,\n        isActive = (this.selectedTool === MEASURE_TOOL);\n\n    if (!this.viewer.model || (!enable && isActive)) {\n        if (this.measureTool.isActive()) {\n            toolController.deactivateTool(\"measure\");\n\n            if (this.measureToolbar) {\n                this.measureToolbar.deactivateAllButtons();\n            }\n\n            // No tool is active anymore. Only do this if measureTool was really the active one before.\n            // If not, changing selectedTool would produce an inconsistent state, e.g., CalibrationTool \n            // may still be active, but enableCalibrationTool(false) would not properly close it.\n            this.selectedTool = NONE;\n        }\n\n        return true;\n    }\n\n    this.forceCalibrate |= this.viewer.model.getData().isLeaflet || this.viewer.model.getData().isPdf;\n\n    if (!measurementType) {\n        measurementType = DEFAULT_MEASUREMENT_TYPE;\n    }\n\n    if (enable && !isActive) {\n        // Fetch topology when opening Measure tool for the first time.\n        this.checkAndFetchTopology(toolController.getTool('measure'));\n\n        if (!this.forceCalibrate || (this.forceCalibrate && this.calibrationTool.isCalibrated()) || measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE) {\n            if (this.calibrationTool.isActive()) {\n                toolController.deactivateTool(\"calibration\");\n            }\n            \n            if (this.measureToolbar) {\n                this.measureToolbar.updateSettingsPanel();\n            }\n\n            toolController.activateTool(\"measure\");\n\n            this.selectedTool = MEASURE_TOOL;\n\n            \n\n            this.changeMeasurementType(measurementType);\n            return true;\n        }\n        else {\n            this.viewer.addEventListener(avem.OPEN_TOOL_AFTER_CALIBRAION, function(){\n                this.enableMeasureTool(true);                \n            }.bind(this), {once: true});\n            \n            this.openCalibrationRequiredDialog('measure');\n            return false;\n        }\n\n    } else if (enable && isActive) {\n        if (!this.forceCalibrate || (this.forceCalibrate && this.calibrationTool.isCalibrated()) || measurementType === MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE) {\n            this.changeMeasurementType(measurementType);\n            return true;\n        }\n        else {\n            this.openCalibrationRequiredDialog('measure');\n            return false;\n        }\n    }\n\n    return false;\n};\n\nMeasureExtension.prototype.changeMeasurementType = function(measurementType) {\n    this.measureTool.changeMeasurementType(measurementType);\n    if (this.measureToolbar) {\n        this.measureToolbar.deactivateAllButtons();\n        this.measureToolbar.activateButtonByType(measurementType);\n    }\n\n    switch (measurementType) {\n        case MeasureCommon.MeasurementTypes.MEASUREMENT_DISTANCE:\n            this.mode = 'distance';\n            break;\n        case MeasureCommon.MeasurementTypes.MEASUREMENT_ANGLE:\n            this.mode = 'angle'\n            break;\n        case MeasureCommon.MeasurementTypes.MEASUREMENT_AREA:\n            this.mode = 'area';\n            break;\n        default:\n            this.mode = '';\n    }\n};\n\n/**\n * When enabled, the Viewer will only render model parts that are included in\n * measurements.\n *\n * @param {boolean} enable - true to render only nodes being measured.\n * \n * @alias Autodesk.Viewing.Extensions.MeasureExtension#setIsolateMeasure\n */\nMeasureExtension.prototype.setIsolateMeasure = function(enable) {\n    this.measureTool.setIsolateMeasure(enable);\n    if (enable) {\n        this.measureTool.isolateMeasurement();\n    } else {\n        this.measureTool.clearIsolate();\n    }\n}\n\n/**\n * Enable/disable the measure tool.\n * @param {boolean} enable - True to enable, false to disable.\n * @returns {boolean} True if the tool state was changed.\n * @private\n */\nMeasureExtension.prototype.enableCalibrationTool = function(enable) {\n    var toolController = this.viewer.toolController,\n        isActive = (this.selectedTool == CALIBRATION_TOOL);\n\n    if (enable && !isActive) {\n        if (this.measureTool.isActive()) {\n            toolController.deactivateTool(\"measure\");\n        }\n        \n        toolController.activateTool(\"calibration\");\n        this.viewer.dispatchEvent({ type: MeasureCommon.Events.UNITS_CALIBRATION_STARTS_EVENT });\n        \n        if (this.measureToolbar) {\n            this.measureToolbar.deactivateAllButtons();\n            this.measureToolbar.activateButtonByType(MeasureCommon.MeasurementTypes.CALIBRATION);\n        }\n\n        this.selectedTool = CALIBRATION_TOOL;\n        return true;\n\n    } else if (!enable && isActive) {\n        if (this.calibrationTool.isActive()) {\n            this.mode = '';\n            toolController.deactivateTool(\"calibration\");\n            if (this.measureToolbar) {\n                this.measureToolbar.deactivateAllButtons();\n            }\n        }\n\n        this.selectedTool = NONE;\n        return true;\n    }\n    return false;\n};\n\n/**\n * @private\n */\nMeasureExtension.prototype.enterMeasurementMode = function() {\n\n    if (this._measurementMode) return;\n    this._measurementMode = true;\n\n    this.viewer.dispatchEvent({type: MeasureCommon.Events.MEASUREMENT_MODE_ENTER});\n\n    if (!this.viewer.getToolbar) {\n        return; // Adds support for Viewer3D instance\n    }\n\n    var toolbar = this.viewer.getToolbar();    \n    var viewerToolbarContainer = toolbar.container;\n    var viewerContainerChildrenCount = viewerToolbarContainer.children.length;\n    for(var i = 0; i < viewerContainerChildrenCount; ++i) {\n        viewerToolbarContainer.children[i].style.display = \"none\";\n    }\n\n    this.navigationControls = toolbar.getControl(Autodesk.Viewing.TOOLBAR.NAVTOOLSID);\n    this.navigationControls.setVisible(true);\n    this.navigationControls.container.style.display = '';\n\n    this.measureControls = toolbar.getControl(Autodesk.Viewing.TOOLBAR.MEASURETOOLSID);\n    this.measureControls.setVisible(true);\n    this.measureControls.container.style.display = '';\n    \n    var measureButtonId = this.measurementToolbarButton.getId();\n    this.measurementToolbarButton.index = this.measurementToolbarButton.parent.indexOf(measureButtonId);\n    this.measurementToolbarButton.parent.removeControl(measureButtonId);\n\n    this.measureToolbar.toggleVisible();\n\n    if (this.viewer.centerToolBar) {\n        this.viewer.centerToolBar();\n    }\n\n    this.enableMeasureTool(true, DEFAULT_MEASUREMENT_TYPE);\n};\n\n/**\n * @private\n */\nMeasureExtension.prototype.exitMeasurementMode = function() {\n    if (!this._measurementMode) return;\n\n    this.viewer.dispatchEvent({type: MeasureCommon.Events.MEASUREMENT_MODE_LEAVE});\n\n    this.measureToolbar && this.measureToolbar.closeToolbar();\n    if (this.CalibrationRequiredDialog && this.CalibrationRequiredDialog.isVisible()) {\n        this.CalibrationRequiredDialog.setVisible(false);\n    }\n    this._measurementMode = false;\n};\n\n/**\n * Create measure button in toolbar.\n * @private\n*/\nMeasureExtension.prototype.onToolbarCreated = function(toolbar)\n{\n    if (this.measureToolbar) {\n        return;\n    }\n\n    var self   = this;\n    var viewer = this.viewer;\n\n    // Add Measure button to toolbar\n    var modelTools = toolbar.getControl(av.TOOLBAR.MODELTOOLSID);\n    this.measurementToolbarButton = new avu.Button('toolbar-measurementSubmenuTool');\n    this.measurementToolbarButton.setToolTip('Measure');\n    this.measurementToolbarButton.setIcon(\"adsk-icon-measure\");\n    modelTools.measurementToolbarButton = this.measurementToolbarButton;\n    modelTools.addControl(this.measurementToolbarButton, {index:0});\n\n    // Set button enabled if and only if there is >=1 visible model. Otherwise, it will remain disabled until next model-add event.\n    var state = this.viewer.model ? Autodesk.Viewing.UI.Button.State.INACTIVE : Autodesk.Viewing.UI.Button.State.DISABLED;\n    this.measurementToolbarButton.setState(state);\n\n    this.measureToolbar = new MeasureToolbar(this);\n    this.measureToolbar.init();\n\n    this.measurementToolbarButton.onClick = this.activate.bind(this);\n\n    // Escape hotkey to exit tool.\n    //\n    var hotkeys = [{\n        keycodes: [\n            Autodesk.Viewing.KeyCode.ESCAPE\n        ],\n        onRelease: function () {\n            if (self._measurementMode) {\n                self.exitMeasurementMode();\n                return true;\n            }\n        }\n    }];\n    viewer.getHotkeyManager().pushHotkeys(this.escapeHotkeyId, hotkeys);\n};\n\n\n/**\n * @private\n */\nMeasureExtension.prototype.checkAndFetchTopology = function(tool) {\n\n    if (this._checkedTopology) {\n        return;\n    }\n\n    this._checkedTopology = true;\n    if (!this.viewer.model.is3d()) {\n        tool && tool.setNoTopology();\n        return;\n    }\n\n    if (this.viewer.modelHasTopology()){\n        tool && tool.setTopologyAvailable();\n        return;\n    }\n\n    // Fetch topology from backend.\n    tool && tool.setFetchingTopology();\n    this.viewer.model.fetchTopology()\n    .then(function(topoData){\n        tool && tool.setTopologyAvailable();\n    })\n    .catch(function(err){\n        avp.logger.log(err); // No topology\n        tool && tool.setNoTopology();\n    });\n};\n\n/**\n * Destroy measure button in toolbar.\n * @private\n*/\nMeasureExtension.prototype.destroyUI = function()\n{\n    var viewer = this.viewer;\n\n    if (this.measureToolbar) {\n         this.measureToolbar.destroy();\n         this.measureToolbar = null;\n    }\n\n    if (this.measurementToolbarButton) {\n        this.measurementToolbarButton.removeFromParent();\n        this.measurementToolbarButton = null;\n    }\n\n    viewer.getHotkeyManager().popHotkeys(this.escapeHotkeyId);\n};\n\nMeasureExtension.prototype.setUnits = function(units) {\n    this.measureTool.setUnits(units);\n};\n\nMeasureExtension.prototype.getUnits = function() {\n    return this.measureTool.getUnits();\n};\n\nMeasureExtension.prototype.setPrecision = function(precision) {\n    this.measureTool.setPrecision(precision);\n};\n\nMeasureExtension.prototype.getPrecision = function() {\n    return this.measureTool.getPrecision();\n};\n\nMeasureExtension.prototype.calibrate = function(requestedUnits, requestedSize) {\n    this.calibrationTool.calibrate(requestedUnits, requestedSize);\n};\n\nMeasureExtension.prototype.calibrateByScale = function(requestedUnits, requestedScale) {\n    this.calibrationTool.calibrateByScale(requestedUnits, requestedScale);\n};\n\nMeasureExtension.prototype.isCalibrationValid = function(requestedUnits, requestedSize) { \n    return this.calibrationTool.isCalibrationValid(requestedUnits, requestedSize); \n};\n\nMeasureExtension.prototype.getCalibrationFactor = function() {\n    return this.calibrationTool.getCalibrationFactor();\n};\n\nMeasureExtension.prototype.showAddCalibrationLabel = function() {\n    this.calibrationTool.showAddCalibrationLabel();\n};\n\n/**\n * Deletes the selected measurement.\n * \n * @alias Autodesk.Viewing.Extensions.MeasureExtension#deleteCurrentMeasurement\n */\nMeasureExtension.prototype.deleteCurrentMeasurement = function() {\n    this.measureTool.deleteCurrentMeasurement();\n};\n\nMeasureExtension.prototype.selectMeasurementById = function(id) {\n    this.measureTool.selectMeasurementById(id);\n};\n\n/**\n * Enable measuring on non snapped locations.\n * @alias Autodesk.Viewing.Extensions.MeasureExtension#setFreeMeasureMode\n * @param {Boolean} allow - true to allow measuring on non snapped locations, otherwise false;\n */\nMeasureExtension.prototype.setFreeMeasureMode = function(allow) {\n    this.snapper.setSnapToPixel(allow);\n};\n\nav.theExtensionManager.registerExtension('Autodesk.Measure', MeasureExtension);\n\n\n"],"sourceRoot":""}