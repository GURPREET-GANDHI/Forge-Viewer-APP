/*!
 * LMV v7.11.0
 * 
 * Copyright 2020 Autodesk, Inc.
 * All rights reserved.
 * 
 * This computer source code and related instructions and comments are the
 * unpublished confidential and proprietary information of Autodesk, Inc.
 * and are protected under Federal copyright and state trade secret law.
 * They may not be disclosed to, copied or used by any third party without
 * the prior written consent of Autodesk, Inc.
 * 
 * Autodesk Forge Viewer Usage Limitations:
 * 
 * The Autodesk Forge viewer can only be used to view files generated by
 * Autodesk Forge services. The Autodesk Forge Viewer JavaScript must be
 * delivered from an Autodesk hosted URL.
 */
Autodesk.Extensions.MemoryLimited=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=543)}({100:function(t,e,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},101:function(t,e,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},12:function(t,e,n){"use strict";var i="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var i in n)r(n,i)&&(t[i]=n[i])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var s={arraySet:function(t,e,n,i,r){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+i),r);else for(var s=0;s<i;s++)t[r+s]=e[n+s]},flattenChunks:function(t){var e,n,i,r,s,a;for(i=0,e=0,n=t.length;e<n;e++)i+=t[e].length;for(a=new Uint8Array(i),r=0,e=0,n=t.length;e<n;e++)s=t[e],a.set(s,r),r+=s.length;return a}},a={arraySet:function(t,e,n,i,r){for(var s=0;s<i;s++)t[r+s]=e[n+s]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,s)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(i)},24:function(t,e,n){"use strict";var i=window.URL||window.webkitURL;t.exports=function(t,e){try{try{var n;try{(n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder)).append(t),n=n.getBlob()}catch(e){n=new Blob([t])}return new Worker(i.createObjectURL(n))}catch(e){return new Worker("data:application/javascript,"+encodeURIComponent(t))}}catch(t){if(!e)throw Error("Inline worker is not supported");return new Worker(e)}}},249:function(t,e){t.exports="\n#include<instancing_decl_vert>\nvarying vec4 finalColor;\nuniform vec3 color;\nuniform float opacity;\nvoid main() {\n    gl_Position = projectionMatrix * (viewMatrix * vec4(getInstancePos(position), 1.0));\n    finalColor = vec4(color, opacity);\n}\n"},250:function(t,e){t.exports="precision lowp float;\nvarying vec4 finalColor;\nvoid main() {\n    gl_FragColor = finalColor;\n}\n"},251:function(t,e,n){"use strict";t.exports.FRAGMENTS_LOADED_EVENT="fragmentLoaded"},3:function(t,e){t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n=function(t,e){var n=t[1]||"",i=t[3];if(!i)return n;if(e&&"function"==typeof btoa){var r=(a=i,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),s=i.sources.map((function(t){return"/*# sourceURL="+i.sourceRoot+t+" */"}));return[n].concat(s).concat([r]).join("\n")}var a;return[n].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+n+"}":n})).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},r=0;r<this.length;r++){var s=this[r][0];"number"==typeof s&&(i[s]=!0)}for(r=0;r<t.length;r++){var a=t[r];"number"==typeof a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},367:function(t,e,n){t.exports=function(){return n(24)('/*!\n * LMV v7.11.0\n * \n * Copyright 2020 Autodesk, Inc.\n * All rights reserved.\n * \n * This computer source code and related instructions and comments are the\n * unpublished confidential and proprietary information of Autodesk, Inc.\n * and are protected under Federal copyright and state trade secret law.\n * They may not be disclosed to, copied or used by any third party without\n * the prior written consent of Autodesk, Inc.\n * \n * Autodesk Forge Viewer Usage Limitations:\n * \n * The Autodesk Forge viewer can only be used to view files generated by\n * Autodesk Forge services. The Autodesk Forge Viewer JavaScript must be\n * delivered from an Autodesk hosted URL.\n */!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=35)}([function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r,i,s,a,o=function(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0};o.prototype={constructor:o,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyMatrix3:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r+i[12],this.y=i[1]*e+i[5]*n+i[9]*r+i[13],this.z=i[2]*e+i[6]*n+i[10]*r+i[14],this},applyProjection:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements,s=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*s,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*s,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*s,this},applyQuaternion:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,s=t.y,a=t.z,o=t.w,h=o*e+s*r-a*n,u=o*n+a*e-i*r,c=o*r+i*n-s*e,l=-i*e-s*n-a*r;return this.x=h*o+l*-i+u*-a-c*-s,this.y=u*o+l*-s+c*-i-h*-a,this.z=c*o+l*-a+h*-s-u*-i,this},transformDirection:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize(),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){if(0!==t){var e=1/t;this.x*=e,this.y*=e,this.z*=e}else this.x=0,this.y=0,this.z=0;return this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this.z>t.z&&(this.z=t.z),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this.z<t.z&&(this.z=t.z),this},clamp:function(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this.z<t.z?this.z=t.z:this.z>e.z&&(this.z=e.z),this},clampScalar:function(t,e){return void 0===s&&(s=new o,a=new o),s.set(t,t,t),a.set(e,e,e),this.clamp(s,a)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScalar(t/e),this},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t),this},cross:function(t,e){if(void 0!==e)return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e);var n=this.x,r=this.y,i=this.z;return this.x=r*t.z-i*t.y,this.y=i*t.x-n*t.z,this.z=n*t.y-r*t.x,this},crossVectors:function(t,e){var n=t.x,r=t.y,i=t.z,s=e.x,a=e.y,o=e.z;return this.x=r*o-i*a,this.y=i*s-n*o,this.z=n*a-r*s,this},projectOnVector:function(t){return void 0===r&&(r=new o),r.copy(t).normalize(),i=this.dot(r),this.copy(r).multiplyScalar(i)},projectOnPlane:function(){var t;return function(e){return void 0===t&&(t=new o),t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t;return function(e){return void 0===t&&(t=new o),this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r},setEulerFromRotationMatrix:function(t,e){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(t,e){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},setFromMatrixPosition:function(t){return this.x=t.elements[12],this.y=t.elements[13],this.z=t.elements[14],this},setFromMatrixScale:function(t){var e=this.set(t.elements[0],t.elements[1],t.elements[2]).length(),n=this.set(t.elements[4],t.elements[5],t.elements[6]).length(),r=this.set(t.elements[8],t.elements[9],t.elements[10]).length();return this.x=e,this.y=n,this.z=r,this},setFromMatrixColumn:function(t,e){var n=4*t,r=e.elements;return this.x=r[n],this.y=r[n+1],this.z=r[n+2],this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromAttribute:function(t,e,n){return void 0===n&&(n=0),e=e*t.itemSize+n,this.x=t.array[e],this.y=t.array[e+1],this.z=t.array[e+2],this}}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r=function(t){this.elements=t?new Float64Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]):new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])};r.prototype={constructor:r,set:function(t,e,n,r,i,s,a,o,h,u,c,l,f,d,m,p){var y=this.elements;return y[0]=t,y[4]=e,y[8]=n,y[12]=r,y[1]=i,y[5]=s,y[9]=a,y[13]=o,y[2]=h,y[6]=u,y[10]=c,y[14]=l,y[3]=f,y[7]=d,y[11]=m,y[15]=p,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(t){return this.elements.set(t.elements),this},makeRotationFromQuaternion:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z,s=t.w,a=n+n,o=r+r,h=i+i,u=n*a,c=n*o,l=n*h,f=r*o,d=r*h,m=i*h,p=s*a,y=s*o,v=s*h;return e[0]=1-(f+m),e[4]=c-v,e[8]=l+y,e[1]=c+v,e[5]=1-(u+m),e[9]=d-p,e[2]=l-y,e[6]=d+p,e[10]=1-(u+f),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},multiply:function(t){return this.multiplyMatrices(this,t)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,s=n[0],a=n[4],o=n[8],h=n[12],u=n[1],c=n[5],l=n[9],f=n[13],d=n[2],m=n[6],p=n[10],y=n[14],v=n[3],g=n[7],x=n[11],_=n[15],b=r[0],w=r[4],k=r[8],z=r[12],E=r[1],S=r[5],M=r[9],A=r[13],I=r[2],T=r[6],C=r[10],O=r[14],R=r[3],P=r[7],F=r[11],U=r[15];return i[0]=s*b+a*E+o*I+h*R,i[4]=s*w+a*S+o*T+h*P,i[8]=s*k+a*M+o*C+h*F,i[12]=s*z+a*A+o*O+h*U,i[1]=u*b+c*E+l*I+f*R,i[5]=u*w+c*S+l*T+f*P,i[9]=u*k+c*M+l*C+f*F,i[13]=u*z+c*A+l*O+f*U,i[2]=d*b+m*E+p*I+y*R,i[6]=d*w+m*S+p*T+y*P,i[10]=d*k+m*M+p*C+y*F,i[14]=d*z+m*A+p*O+y*U,i[3]=v*b+g*E+x*I+_*R,i[7]=v*w+g*S+x*T+_*P,i[11]=v*k+g*M+x*C+_*F,i[15]=v*z+g*A+x*O+_*U,this},multiplyToArray:function(t,e,n){var r=this.elements;return this.multiplyMatrices(t,e),n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],s=t[1],a=t[5],o=t[9],h=t[13],u=t[2],c=t[6],l=t[10],f=t[14];return t[3]*(+i*o*c-r*h*c-i*a*l+n*h*l+r*a*f-n*o*f)+t[7]*(+e*o*f-e*h*l+i*s*l-r*s*f+r*h*u-i*o*u)+t[11]*(+e*h*c-e*a*f-i*s*c+n*s*f+i*a*u-n*h*u)+t[15]*(-r*a*u-e*o*c+e*a*l+r*s*c-n*s*l+n*o*u)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},flattenToArrayOffset:function(t,e){var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t},setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var n=this.elements,r=t.elements,i=r[0],s=r[4],a=r[8],o=r[12],h=r[1],u=r[5],c=r[9],l=r[13],f=r[2],d=r[6],m=r[10],p=r[14],y=r[3],v=r[7],g=r[11],x=r[15];n[0]=c*p*v-l*m*v+l*d*g-u*p*g-c*d*x+u*m*x,n[4]=o*m*v-a*p*v-o*d*g+s*p*g+a*d*x-s*m*x,n[8]=a*l*v-o*c*v+o*u*g-s*l*g-a*u*x+s*c*x,n[12]=o*c*d-a*l*d-o*u*m+s*l*m+a*u*p-s*c*p,n[1]=l*m*y-c*p*y-l*f*g+h*p*g+c*f*x-h*m*x,n[5]=a*p*y-o*m*y+o*f*g-i*p*g-a*f*x+i*m*x,n[9]=o*c*y-a*l*y-o*h*g+i*l*g+a*h*x-i*c*x,n[13]=a*l*f-o*c*f+o*h*m-i*l*m-a*h*p+i*c*p,n[2]=u*p*y-l*d*y+l*f*v-h*p*v-u*f*x+h*d*x,n[6]=o*d*y-s*p*y-o*f*v+i*p*v+s*f*x-i*d*x,n[10]=s*l*y-o*u*y+o*h*v-i*l*v-s*h*x+i*u*x,n[14]=o*u*f-s*l*f-o*h*d+i*l*d+s*h*p-i*u*p,n[3]=c*d*y-u*m*y-c*f*v+h*m*v+u*f*g-h*d*g,n[7]=s*m*y-a*d*y+a*f*v-i*m*v-s*f*g+i*d*g,n[11]=a*u*y-s*c*y-a*h*v+i*c*v+s*h*g-i*u*g,n[15]=s*c*f-a*u*f+a*h*d-i*c*d-s*h*m+i*u*m;var _=i*n[0]+h*n[4]+f*n[8]+y*n[12];if(0==_){var b="Matrix4.getInverse(): can\'t invert matrix, determinant is 0";if(e)throw new Error(b);return console.warn(b),this.identity(),this}return this.multiplyScalar(1/_),this},scale:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=1-n,s=t.x,a=t.y,o=t.z,h=i*s,u=i*a;return this.set(h*s+n,h*a-r*o,h*o+r*a,0,h*a+r*o,u*a+n,u*o-r*s,0,h*o-r*a,u*o+r*s,i*o*o+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},compose:function(t,e,n){return this.makeRotationFromQuaternion(e),this.scale(n),this.setPosition(t),this},transformPoint:function(t){var e=t.x,n=t.y,r=t.z,i=this.elements;return t.x=i[0]*e+i[4]*n+i[8]*r+i[12],t.y=i[1]*e+i[5]*n+i[9]*r+i[13],t.z=i[2]*e+i[6]*n+i[10]*r+i[14],t},transformDirection:function(t){var e=t.x,n=t.y,r=t.z,i=this.elements;t.x=i[0]*e+i[4]*n+i[8]*r,t.y=i[1]*e+i[5]*n+i[9]*r,t.z=i[2]*e+i[6]*n+i[10]*r;var s=Math.sqrt(t.x*t.x+t.y*t.y+t.z*t.z);if(s>0){var a=1/s;t.x*=a,t.y*=a,t.z*=a}return t},fromArray:function(t){return this.elements.set(t),this},toArray:function(){var t=this.elements;return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]},clone:function(){return new r(this.elements instanceof Float64Array).fromArray(this.elements)}}},function(t,e,n){"use strict";(function(t){function r(){return"undefined"!=typeof window&&null!==window?window:"undefined"!=typeof self&&null!==self?self:t}n.d(e,"a",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"d",(function(){return u})),n.d(e,"b",(function(){return d}));var i=r(),s=i&&i.document,a="undefined"!=typeof navigator,o=function(){return!a},h=a&&!!navigator.userAgent.match(/Edge|Trident\\/7\\./);function u(){return"undefined"!=typeof window&&("ontouchstart"in window||navigator.maxTouchPoints>0)}"undefined"!=typeof window&&h&&function(){function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var n=s.createEvent("CustomEvent");return n.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}t.prototype=i.CustomEvent.prototype,i.CustomEvent=t}(),ArrayBuffer.prototype.slice||(ArrayBuffer.prototype.slice=function(t,e){if(!e||e>this.byteLength?e=this.byteLength:e<0&&(e=this.byteLength+e)<0&&(e=0),t<0&&(t=this.byteLength+t)<0&&(t=0),e<=t)return new ArrayBuffer;for(var n=e-t,r=new Uint8Array(this,t,n),i=new Uint8Array(n),s=0;s<n;s++)i[s]=r[s];return i.buffer}),Math.log2=Math.log2||function(t){return Math.log(t)/Math.LN2},"undefined"!=typeof window&&(i.BlobBuilder=i.BlobBuilder||i.WebKitBlobBuilder||i.MozBlobBuilder||i.MSBlobBuilder);var c=a&&(/ip(ad|hone|od)/.test(navigator.userAgent.toLowerCase())||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1);function l(){return c}var f=a&&-1!==navigator.userAgent.toLowerCase().indexOf("android");function d(){return!!a&&(l()||f)}!function(){var t=r();t.performance||(t.performance=Date)}(),Number.isInteger=Number.isInteger||function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t},String.prototype.repeat=String.prototype.repeat||function(t){if(t<1)return"";for(var e="",n=this.valueOf();t>1;)1&t&&(e+=n),t>>=1,n+=n;return e+n},Array.prototype.fill||Object.defineProperty(Array.prototype,"fill",{enumerable:!1,value:function(t,e,n){e=void 0===e?0:e,n=void 0===n?this.length:n;for(var r=e;r<n;++r)this[r]=t}}),Int32Array.prototype.lastIndexOf=Int32Array.prototype.lastIndexOf||function(t,e){return Array.prototype.lastIndexOf.call(this,t,e)},Array.prototype.find||Object.defineProperty(Array.prototype,"find",{enumerable:!1,value:function(t,e){for(var n=this.length,r=0;r<n;++r){var i=this[r];if(t.call(e,i,r,this))return i}}}),"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),r=1;r<arguments.length;r++){var i=arguments[r];if(null!=i)for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])}return n},writable:!0,configurable:!0}),"undefined"==typeof window||!h&&!l()||HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,n){var r=this;setTimeout((function(){for(var i=atob(r.toDataURL(e,n).split(",")[1]),s=i.length,a=new Uint8Array(s),o=0;o<s;o++)a[o]=i.charCodeAt(o);t(new Blob([a],{type:e||"image/png"}))}))}}),Uint8Array.prototype.slice||(Uint8Array.prototype.slice=function(t,e){if(e=void 0!==e?e:this.length,"[object Array]"===Object.prototype.toString.call(this))return _slice.call(this,t,e);var n,r,i=[],s=this.length,a=t||0;a=a>=0?a:Math.max(0,s+a);var o="number"==typeof e?Math.min(e,s):s;if(e<0&&(o=s+e),(r=o-a)>0)if(i=new Array(r),this.charAt)for(n=0;n<r;n++)i[n]=this.charAt(a+n);else for(n=0;n<r;n++)i[n]=this[a+n];return i})}).call(this,n(21))},function(t,e,n){(function(t){function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var n,r,i,s,a,o,h,u,c,l,f,d,m,p,y,v,g={REVISION:"71"};"object"===e(t)&&(t.exports=g),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),g.log=function(){console.log.apply(console,arguments)},g.warn=function(){console.warn.apply(console,arguments)},g.error=function(){console.error.apply(console,arguments)},g.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},g.CullFaceNone=0,g.CullFaceBack=1,g.CullFaceFront=2,g.CullFaceFrontBack=3,g.FrontFaceDirectionCW=0,g.FrontFaceDirectionCCW=1,g.BasicShadowMap=0,g.PCFShadowMap=1,g.PCFSoftShadowMap=2,g.FrontSide=0,g.BackSide=1,g.DoubleSide=2,g.NoShading=0,g.FlatShading=1,g.SmoothShading=2,g.NoColors=0,g.FaceColors=1,g.VertexColors=2,g.NoBlending=0,g.NormalBlending=1,g.AdditiveBlending=2,g.SubtractiveBlending=3,g.MultiplyBlending=4,g.CustomBlending=5,g.AddEquation=100,g.SubtractEquation=101,g.ReverseSubtractEquation=102,g.MinEquation=103,g.MaxEquation=104,g.ZeroFactor=200,g.OneFactor=201,g.SrcColorFactor=202,g.OneMinusSrcColorFactor=203,g.SrcAlphaFactor=204,g.OneMinusSrcAlphaFactor=205,g.DstAlphaFactor=206,g.OneMinusDstAlphaFactor=207,g.DstColorFactor=208,g.OneMinusDstColorFactor=209,g.SrcAlphaSaturateFactor=210,g.MultiplyOperation=0,g.MixOperation=1,g.AddOperation=2,g.UVMapping=300,g.CubeReflectionMapping=301,g.CubeRefractionMapping=302,g.EquirectangularReflectionMapping=303,g.EquirectangularRefractionMapping=304,g.SphericalReflectionMapping=305,g.RepeatWrapping=1e3,g.ClampToEdgeWrapping=1001,g.MirroredRepeatWrapping=1002,g.NearestFilter=1003,g.NearestMipMapNearestFilter=1004,g.NearestMipMapLinearFilter=1005,g.LinearFilter=1006,g.LinearMipMapNearestFilter=1007,g.LinearMipMapLinearFilter=1008,g.UnsignedByteType=1009,g.ByteType=1010,g.ShortType=1011,g.UnsignedShortType=1012,g.IntType=1013,g.UnsignedIntType=1014,g.FloatType=1015,g.HalfFloatType=1025,g.UnsignedShort4444Type=1016,g.UnsignedShort5551Type=1017,g.UnsignedShort565Type=1018,g.AlphaFormat=1019,g.RGBFormat=1020,g.RGBAFormat=1021,g.LuminanceFormat=1022,g.LuminanceAlphaFormat=1023,g.RGBEFormat=g.RGBAFormat,g.RGB_S3TC_DXT1_Format=2001,g.RGBA_S3TC_DXT1_Format=2002,g.RGBA_S3TC_DXT3_Format=2003,g.RGBA_S3TC_DXT5_Format=2004,g.RGB_PVRTC_4BPPV1_Format=2100,g.RGB_PVRTC_2BPPV1_Format=2101,g.RGBA_PVRTC_4BPPV1_Format=2102,g.RGBA_PVRTC_2BPPV1_Format=2103,g.Projector=function(){g.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(t,e){g.warn("THREE.Projector: .projectVector() is now vector.project()."),t.project(e)},this.unprojectVector=function(t,e){g.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),t.unproject(e)},this.pickingRay=function(t,e){g.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},g.CanvasRenderer=function(){g.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElement("canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},g.Quaternion=function(t,e,n,r){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==r?r:1},g.Quaternion.prototype={constructor:g.Quaternion,_x:0,_y:0,_z:0,_w:0,get x(){return this._x},set x(t){this._x=t,this.onChangeCallback()},get y(){return this._y},set y(t){this._y=t,this.onChangeCallback()},get z(){return this._z},set z(t){this._z=t,this.onChangeCallback()},get w(){return this._w},set w(t){this._w=t,this.onChangeCallback()},set:function(t,e,n,r){return this._x=t,this._y=e,this._z=n,this._w=r,this.onChangeCallback(),this},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(t instanceof g.Euler==!1)throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var n=Math.cos(t._x/2),r=Math.cos(t._y/2),i=Math.cos(t._z/2),s=Math.sin(t._x/2),a=Math.sin(t._y/2),o=Math.sin(t._z/2);return"XYZ"===t.order?(this._x=s*r*i+n*a*o,this._y=n*a*i-s*r*o,this._z=n*r*o+s*a*i,this._w=n*r*i-s*a*o):"YXZ"===t.order?(this._x=s*r*i+n*a*o,this._y=n*a*i-s*r*o,this._z=n*r*o-s*a*i,this._w=n*r*i+s*a*o):"ZXY"===t.order?(this._x=s*r*i-n*a*o,this._y=n*a*i+s*r*o,this._z=n*r*o+s*a*i,this._w=n*r*i-s*a*o):"ZYX"===t.order?(this._x=s*r*i-n*a*o,this._y=n*a*i+s*r*o,this._z=n*r*o-s*a*i,this._w=n*r*i+s*a*o):"YZX"===t.order?(this._x=s*r*i+n*a*o,this._y=n*a*i+s*r*o,this._z=n*r*o-s*a*i,this._w=n*r*i-s*a*o):"XZY"===t.order&&(this._x=s*r*i-n*a*o,this._y=n*a*i-s*r*o,this._z=n*r*o+s*a*i,this._w=n*r*i+s*a*o),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,r=Math.sin(n);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,r=n[0],i=n[4],s=n[8],a=n[1],o=n[5],h=n[9],u=n[2],c=n[6],l=n[10],f=r+o+l;return f>0?(e=.5/Math.sqrt(f+1),this._w=.25/e,this._x=(c-h)*e,this._y=(s-u)*e,this._z=(a-i)*e):r>o&&r>l?(e=2*Math.sqrt(1+r-o-l),this._w=(c-h)/e,this._x=.25*e,this._y=(i+a)/e,this._z=(s+u)/e):o>l?(e=2*Math.sqrt(1+o-r-l),this._w=(s-u)/e,this._x=(i+a)/e,this._y=.25*e,this._z=(h+c)/e):(e=2*Math.sqrt(1+l-r-o),this._w=(a-i)/e,this._x=(s+u)/e,this._y=(h+c)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(t,e){return void 0===n&&(n=new g.Vector3),(r=t.dot(e)+1)<1e-6?(r=0,Math.abs(t.x)>Math.abs(t.z)?n.set(-t.y,t.x,0):n.set(0,-t.z,t.y)):n.crossVectors(t,e),this._x=n.x,this._y=n.y,this._z=n.z,this._w=r,this.normalize(),this},inverse:function(){return this.conjugate().normalize(),this},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(g.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},multiplyQuaternions:function(t,e){var n=t._x,r=t._y,i=t._z,s=t._w,a=e._x,o=e._y,h=e._z,u=e._w;return this._x=n*u+s*a+r*h-i*o,this._y=r*u+s*o+i*a-n*h,this._z=i*u+s*h+n*o-r*a,this._w=s*u-n*a-r*o-i*h,this.onChangeCallback(),this},multiplyVector3:function(t){return g.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,r=this._y,i=this._z,s=this._w,a=s*t._w+n*t._x+r*t._y+i*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=s,this._x=n,this._y=r,this._z=i,this;var o=Math.acos(a),h=Math.sqrt(1-a*a);if(Math.abs(h)<.001)return this._w=.5*(s+this._w),this._x=.5*(n+this._x),this._y=.5*(r+this._y),this._z=.5*(i+this._z),this;var u=Math.sin((1-e)*o)/h,c=Math.sin(e*o)/h;return this._w=s*u+this._w*c,this._x=n*u+this._x*c,this._y=r*u+this._y*c,this._z=i*u+this._z*c,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){},clone:function(){return new g.Quaternion(this._x,this._y,this._z,this._w)}},g.Quaternion.slerp=function(t,e,n,r){return n.copy(t).slerp(e,r)},g.Vector2=function(t,e){this.x=t||0,this.y=e||0},g.Vector2.prototype={constructor:g.Vector2,set:function(t,e){return this.x=t,this.y=e,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(g.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},sub:function(t,e){return void 0!==e?(g.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){if(0!==t){var e=1/t;this.x*=e,this.y*=e}else this.x=0,this.y=0;return this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this},clamp:function(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this},clampScalar:function(t,e){return void 0===i&&(i=new g.Vector2,s=new g.Vector2),i.set(t,t),s.set(e,e),this.clamp(i,s)},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},setLength:function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScalar(t/e),this},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t),this},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromAttribute:function(t,e,n){return void 0===n&&(n=0),e=e*t.itemSize+n,this.x=t.array[e],this.y=t.array[e+1],this},clone:function(){return new g.Vector2(this.x,this.y)}},g.Vector3=function(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0},g.Vector3.prototype={constructor:g.Vector3,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(g.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},sub:function(t,e){return void 0!==e?(g.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(g.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(t){return t instanceof g.Euler==0&&g.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order."),void 0===o&&(o=new g.Quaternion),this.applyQuaternion(o.setFromEuler(t)),this},applyAxisAngle:function(){var t;return function(e,n){return void 0===t&&(t=new g.Quaternion),this.applyQuaternion(t.setFromAxisAngle(e,n)),this}}(),applyMatrix3:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6]*r,this.y=i[1]*e+i[4]*n+i[7]*r,this.z=i[2]*e+i[5]*n+i[8]*r,this},applyMatrix4:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r+i[12],this.y=i[1]*e+i[5]*n+i[9]*r+i[13],this.z=i[2]*e+i[6]*n+i[10]*r+i[14],this},applyProjection:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements,s=1/(i[3]*e+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*e+i[4]*n+i[8]*r+i[12])*s,this.y=(i[1]*e+i[5]*n+i[9]*r+i[13])*s,this.z=(i[2]*e+i[6]*n+i[10]*r+i[14])*s,this},applyQuaternion:function(t){var e=this.x,n=this.y,r=this.z,i=t.x,s=t.y,a=t.z,o=t.w,h=o*e+s*r-a*n,u=o*n+a*e-i*r,c=o*r+i*n-s*e,l=-i*e-s*n-a*r;return this.x=h*o+l*-i+u*-a-c*-s,this.y=u*o+l*-s+c*-i-h*-a,this.z=c*o+l*-a+h*-s-u*-i,this},project:function(t){return void 0===a&&(a=new g.Matrix4),a.multiplyMatrices(t.projectionMatrix,a.getInverse(t.matrixWorld)),this.applyProjection(a)},unproject:function(){var t;return function(e){return void 0===t&&(t=new g.Matrix4),t.multiplyMatrices(e.matrixWorld,t.getInverse(e.projectionMatrix)),this.applyProjection(t)}}(),transformDirection:function(t){var e=this.x,n=this.y,r=this.z,i=t.elements;return this.x=i[0]*e+i[4]*n+i[8]*r,this.y=i[1]*e+i[5]*n+i[9]*r,this.z=i[2]*e+i[6]*n+i[10]*r,this.normalize(),this},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){if(0!==t){var e=1/t;this.x*=e,this.y*=e,this.z*=e}else this.x=0,this.y=0,this.z=0;return this},min:function(t){return this.x>t.x&&(this.x=t.x),this.y>t.y&&(this.y=t.y),this.z>t.z&&(this.z=t.z),this},max:function(t){return this.x<t.x&&(this.x=t.x),this.y<t.y&&(this.y=t.y),this.z<t.z&&(this.z=t.z),this},clamp:function(t,e){return this.x<t.x?this.x=t.x:this.x>e.x&&(this.x=e.x),this.y<t.y?this.y=t.y:this.y>e.y&&(this.y=e.y),this.z<t.z?this.z=t.z:this.z>e.z&&(this.z=e.z),this},clampScalar:function(){var t,e;return function(n,r){return void 0===t&&(t=new g.Vector3,e=new g.Vector3),t.set(n,n,n),e.set(r,r,r),this.clamp(t,e)}}(),floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(t){var e=this.length();return 0!==e&&t!==e&&this.multiplyScalar(t/e),this},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t),this},cross:function(t,e){if(void 0!==e)return g.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e);var n=this.x,r=this.y,i=this.z;return this.x=r*t.z-i*t.y,this.y=i*t.x-n*t.z,this.z=n*t.y-r*t.x,this},crossVectors:function(t,e){var n=t.x,r=t.y,i=t.z,s=e.x,a=e.y,o=e.z;return this.x=r*o-i*a,this.y=i*s-n*o,this.z=n*a-r*s,this},projectOnVector:function(){var t,e;return function(n){return void 0===t&&(t=new g.Vector3),t.copy(n).normalize(),e=this.dot(t),this.copy(t).multiplyScalar(e)}}(),projectOnPlane:function(){var t;return function(e){return void 0===t&&(t=new g.Vector3),t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t;return function(e){return void 0===t&&(t=new g.Vector3),this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/(this.length()*t.length());return Math.acos(g.Math.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r},setEulerFromRotationMatrix:function(t,e){g.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(t,e){g.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return g.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return g.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return g.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},setFromMatrixPosition:function(t){return this.x=t.elements[12],this.y=t.elements[13],this.z=t.elements[14],this},setFromMatrixScale:function(t){var e=this.set(t.elements[0],t.elements[1],t.elements[2]).length(),n=this.set(t.elements[4],t.elements[5],t.elements[6]).length(),r=this.set(t.elements[8],t.elements[9],t.elements[10]).length();return this.x=e,this.y=n,this.z=r,this},setFromMatrixColumn:function(t,e){var n=4*t,r=e.elements;return this.x=r[n],this.y=r[n+1],this.z=r[n+2],this},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromAttribute:function(t,e,n){return void 0===n&&(n=0),e=e*t.itemSize+n,this.x=t.array[e],this.y=t.array[e+1],this.z=t.array[e+2],this},clone:function(){return new g.Vector3(this.x,this.y,this.z)}},g.Box2=function(t,e){this.min=void 0!==t?t:new g.Vector2(1/0,1/0),this.max=void 0!==e?e:new g.Vector2(-1/0,-1/0)},g.Box2.prototype={constructor:g.Box2,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new g.Vector2;return function(e,n){var r=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}}(),copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},center:function(t){return(t||new g.Vector2).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(t){return(t||new g.Vector2).subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return(e||new g.Vector2).set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},isIntersectionBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return(e||new g.Vector2).copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new g.Vector2;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)},clone:function(){return(new g.Box2).copy(this)}},g.Box3=function(t,e){this.min=void 0!==t?t:new g.Vector3(1/0,1/0,1/0),this.max=void 0!==e?e:new g.Vector3(-1/0,-1/0,-1/0)},g.Box3.prototype={constructor:g.Box3,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new g.Vector3;return function(e,n){var r=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(r),this.max.copy(e).add(r),this}}(),setFromObject:function(){var t=new g.Vector3;return function(e){var n=this;return e.updateMatrixWorld(!0),this.makeEmpty(),e.traverse((function(e){var r=e.geometry;if(void 0!==r)if(r instanceof g.Geometry)for(var i=r.vertices,s=0,a=i.length;s<a;s++)t.copy(i[s]),t.applyMatrix4(e.matrixWorld),n.expandByPoint(t);else if(r instanceof g.BufferGeometry&&void 0!==r.attributes.position){var o=r.attributes.position.array;for(s=0,a=o.length;s<a;s+=3)t.set(o[s],o[s+1],o[s+2]),t.applyMatrix4(e.matrixWorld),n.expandByPoint(t)}})),this}}(),copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(t){return(t||new g.Vector3).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(t){return(t||new g.Vector3).subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return(e||new g.Vector3).set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},clampPoint:function(t,e){return(e||new g.Vector3).copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new g.Vector3;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),getBoundingSphere:function(){var t=new g.Vector3;return function(e){var n=e||new g.Sphere;return n.center=this.center(),n.radius=.5*this.size(t).length(),n}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:(h=[new g.Vector3,new g.Vector3,new g.Vector3,new g.Vector3,new g.Vector3,new g.Vector3,new g.Vector3,new g.Vector3],function(t){return h[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),h[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),h[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),h[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),h[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),h[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),h[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),h[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.makeEmpty(),this.setFromPoints(h),this}),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)},clone:function(){return(new g.Box3).copy(this)}},g.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]),arguments.length>0&&g.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")},g.Matrix3.prototype={constructor:g.Matrix3,set:function(t,e,n,r,i,s,a,o,h){var u=this.elements;return u[0]=t,u[3]=e,u[6]=n,u[1]=r,u[4]=i,u[7]=s,u[2]=a,u[5]=o,u[8]=h,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},copy:function(t){var e=t.elements;return this.set(e[0],e[3],e[6],e[1],e[4],e[7],e[2],e[5],e[8]),this},multiplyVector3:function(t){return g.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(t){return g.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)},applyToVector3Array:function(){var t=new g.Vector3;return function(e,n,r){void 0===n&&(n=0),void 0===r&&(r=e.length);for(var i=0,s=n;i<r;i+=3,s+=3)t.x=e[s],t.y=e[s+1],t.z=e[s+2],t.applyMatrix3(this),e[s]=t.x,e[s+1]=t.y,e[s+2]=t.z;return e}}(),multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],r=t[2],i=t[3],s=t[4],a=t[5],o=t[6],h=t[7],u=t[8];return e*s*u-e*a*h-n*i*u+n*a*o+r*i*h-r*s*o},getInverse:function(t,e){var n=t.elements,r=this.elements;r[0]=n[10]*n[5]-n[6]*n[9],r[1]=-n[10]*n[1]+n[2]*n[9],r[2]=n[6]*n[1]-n[2]*n[5],r[3]=-n[10]*n[4]+n[6]*n[8],r[4]=n[10]*n[0]-n[2]*n[8],r[5]=-n[6]*n[0]+n[2]*n[4],r[6]=n[9]*n[4]-n[5]*n[8],r[7]=-n[9]*n[0]+n[1]*n[8],r[8]=n[5]*n[0]-n[1]*n[4];var i=n[0]*r[0]+n[1]*r[3]+n[2]*r[6];if(0===i){var s="Matrix3.getInverse(): can\'t invert matrix, determinant is 0";if(e)throw new Error(s);return g.warn(s),this.identity(),this}return this.multiplyScalar(1/i),this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},flattenToArrayOffset:function(t,e){var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t},getNormalMatrix:function(t){return this.getInverse(t).transpose(),this},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},fromArray:function(t){return this.elements.set(t),this},toArray:function(){var t=this.elements;return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]]},clone:function(){return(new g.Matrix3).fromArray(this.elements)}},g.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),arguments.length>0&&g.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")},g.Matrix4.prototype={constructor:g.Matrix4,set:function(t,e,n,r,i,s,a,o,h,u,c,l,f,d,m,p){var y=this.elements;return y[0]=t,y[4]=e,y[8]=n,y[12]=r,y[1]=i,y[5]=s,y[9]=a,y[13]=o,y[2]=h,y[6]=u,y[10]=c,y[14]=l,y[3]=f,y[7]=d,y[11]=m,y[15]=p,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},copy:function(t){return this.elements.set(t.elements),this},extractPosition:function(t){return g.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){var r=this.elements;return t.set(r[0],r[1],r[2]),e.set(r[4],r[5],r[6]),n.set(r[8],r[9],r[10]),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(){var t=new g.Vector3;return function(e){var n=this.elements,r=e.elements,i=1/t.set(r[0],r[1],r[2]).length(),s=1/t.set(r[4],r[5],r[6]).length(),a=1/t.set(r[8],r[9],r[10]).length();return n[0]=r[0]*i,n[1]=r[1]*i,n[2]=r[2]*i,n[4]=r[4]*s,n[5]=r[5]*s,n[6]=r[6]*s,n[8]=r[8]*a,n[9]=r[9]*a,n[10]=r[10]*a,this}}(),makeRotationFromEuler:function(t){t instanceof g.Euler==!1&&g.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,r=t.y,i=t.z,s=Math.cos(n),a=Math.sin(n),o=Math.cos(r),h=Math.sin(r),u=Math.cos(i),c=Math.sin(i);if("XYZ"===t.order){var l=s*u,f=s*c,d=a*u,m=a*c;e[0]=o*u,e[4]=-o*c,e[8]=h,e[1]=f+d*h,e[5]=l-m*h,e[9]=-a*o,e[2]=m-l*h,e[6]=d+f*h,e[10]=s*o}else if("YXZ"===t.order){var p=o*u,y=o*c,v=h*u,x=h*c;e[0]=p+x*a,e[4]=v*a-y,e[8]=s*h,e[1]=s*c,e[5]=s*u,e[9]=-a,e[2]=y*a-v,e[6]=x+p*a,e[10]=s*o}else if("ZXY"===t.order){p=o*u,y=o*c,v=h*u,x=h*c;e[0]=p-x*a,e[4]=-s*c,e[8]=v+y*a,e[1]=y+v*a,e[5]=s*u,e[9]=x-p*a,e[2]=-s*h,e[6]=a,e[10]=s*o}else if("ZYX"===t.order){l=s*u,f=s*c,d=a*u,m=a*c;e[0]=o*u,e[4]=d*h-f,e[8]=l*h+m,e[1]=o*c,e[5]=m*h+l,e[9]=f*h-d,e[2]=-h,e[6]=a*o,e[10]=s*o}else if("YZX"===t.order){var _=s*o,b=s*h,w=a*o,k=a*h;e[0]=o*u,e[4]=k-_*c,e[8]=w*c+b,e[1]=c,e[5]=s*u,e[9]=-a*u,e[2]=-h*u,e[6]=b*c+w,e[10]=_-k*c}else if("XZY"===t.order){_=s*o,b=s*h,w=a*o,k=a*h;e[0]=o*u,e[4]=-c,e[8]=h*u,e[1]=_*c+k,e[5]=s*u,e[9]=b*c-w,e[2]=w*c-b,e[6]=a*u,e[10]=k*c+_}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},setRotationFromQuaternion:function(t){return g.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},makeRotationFromQuaternion:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z,s=t.w,a=n+n,o=r+r,h=i+i,u=n*a,c=n*o,l=n*h,f=r*o,d=r*h,m=i*h,p=s*a,y=s*o,v=s*h;return e[0]=1-(f+m),e[4]=c-v,e[8]=l+y,e[1]=c+v,e[5]=1-(u+m),e[9]=d-p,e[2]=l-y,e[6]=d+p,e[10]=1-(u+f),e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},lookAt:(u=new g.Vector3,c=new g.Vector3,l=new g.Vector3,function(t,e,n){var r=this.elements;return l.subVectors(t,e).normalize(),0===l.length()&&(l.z=1),u.crossVectors(n,l).normalize(),0===u.length()&&(l.x+=1e-4,u.crossVectors(n,l).normalize()),c.crossVectors(l,u),r[0]=u.x,r[4]=c.x,r[8]=l.x,r[1]=u.y,r[5]=c.y,r[9]=l.y,r[2]=u.z,r[6]=c.z,r[10]=l.z,this}),multiply:function(t,e){return void 0!==e?(g.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},multiplyMatrices:function(t,e){var n=t.elements,r=e.elements,i=this.elements,s=n[0],a=n[4],o=n[8],h=n[12],u=n[1],c=n[5],l=n[9],f=n[13],d=n[2],m=n[6],p=n[10],y=n[14],v=n[3],g=n[7],x=n[11],_=n[15],b=r[0],w=r[4],k=r[8],z=r[12],E=r[1],S=r[5],M=r[9],A=r[13],I=r[2],T=r[6],C=r[10],O=r[14],R=r[3],P=r[7],F=r[11],U=r[15];return i[0]=s*b+a*E+o*I+h*R,i[4]=s*w+a*S+o*T+h*P,i[8]=s*k+a*M+o*C+h*F,i[12]=s*z+a*A+o*O+h*U,i[1]=u*b+c*E+l*I+f*R,i[5]=u*w+c*S+l*T+f*P,i[9]=u*k+c*M+l*C+f*F,i[13]=u*z+c*A+l*O+f*U,i[2]=d*b+m*E+p*I+y*R,i[6]=d*w+m*S+p*T+y*P,i[10]=d*k+m*M+p*C+y*F,i[14]=d*z+m*A+p*O+y*U,i[3]=v*b+g*E+x*I+_*R,i[7]=v*w+g*S+x*T+_*P,i[11]=v*k+g*M+x*C+_*F,i[15]=v*z+g*A+x*O+_*U,this},multiplyToArray:function(t,e,n){var r=this.elements;return this.multiplyMatrices(t,e),n[0]=r[0],n[1]=r[1],n[2]=r[2],n[3]=r[3],n[4]=r[4],n[5]=r[5],n[6]=r[6],n[7]=r[7],n[8]=r[8],n[9]=r[9],n[10]=r[10],n[11]=r[11],n[12]=r[12],n[13]=r[13],n[14]=r[14],n[15]=r[15],this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},multiplyVector3:function(t){return g.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."),t.applyProjection(this)},multiplyVector4:function(t){return g.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(t){return g.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."),this.applyToVector3Array(t)},applyToVector3Array:function(){var t=new g.Vector3;return function(e,n,r){void 0===n&&(n=0),void 0===r&&(r=e.length);for(var i=0,s=n;i<r;i+=3,s+=3)t.x=e[s],t.y=e[s+1],t.z=e[s+2],t.applyMatrix4(this),e[s]=t.x,e[s+1]=t.y,e[s+2]=t.z;return e}}(),rotateAxis:function(t){g.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return g.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},determinant:function(){var t=this.elements,e=t[0],n=t[4],r=t[8],i=t[12],s=t[1],a=t[5],o=t[9],h=t[13],u=t[2],c=t[6],l=t[10],f=t[14];return t[3]*(+i*o*c-r*h*c-i*a*l+n*h*l+r*a*f-n*o*f)+t[7]*(+e*o*f-e*h*l+i*s*l-r*s*f+r*h*u-i*o*u)+t[11]*(+e*h*c-e*a*f-i*s*c+n*s*f+i*a*u-n*h*u)+t[15]*(-r*a*u-e*o*c+e*a*l+r*s*c-n*s*l+n*o*u)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},flattenToArrayOffset:function(t,e){var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t},getPosition:function(){var t=new g.Vector3;return function(){g.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");var e=this.elements;return t.set(e[12],e[13],e[14])}}(),setPosition:function(t){var e=this.elements;return e[12]=t.x,e[13]=t.y,e[14]=t.z,this},getInverse:function(t,e){var n=this.elements,r=t.elements,i=r[0],s=r[4],a=r[8],o=r[12],h=r[1],u=r[5],c=r[9],l=r[13],f=r[2],d=r[6],m=r[10],p=r[14],y=r[3],v=r[7],x=r[11],_=r[15];n[0]=c*p*v-l*m*v+l*d*x-u*p*x-c*d*_+u*m*_,n[4]=o*m*v-a*p*v-o*d*x+s*p*x+a*d*_-s*m*_,n[8]=a*l*v-o*c*v+o*u*x-s*l*x-a*u*_+s*c*_,n[12]=o*c*d-a*l*d-o*u*m+s*l*m+a*u*p-s*c*p,n[1]=l*m*y-c*p*y-l*f*x+h*p*x+c*f*_-h*m*_,n[5]=a*p*y-o*m*y+o*f*x-i*p*x-a*f*_+i*m*_,n[9]=o*c*y-a*l*y-o*h*x+i*l*x+a*h*_-i*c*_,n[13]=a*l*f-o*c*f+o*h*m-i*l*m-a*h*p+i*c*p,n[2]=u*p*y-l*d*y+l*f*v-h*p*v-u*f*_+h*d*_,n[6]=o*d*y-s*p*y-o*f*v+i*p*v+s*f*_-i*d*_,n[10]=s*l*y-o*u*y+o*h*v-i*l*v-s*h*_+i*u*_,n[14]=o*u*f-s*l*f-o*h*d+i*l*d+s*h*p-i*u*p,n[3]=c*d*y-u*m*y-c*f*v+h*m*v+u*f*x-h*d*x,n[7]=s*m*y-a*d*y+a*f*v-i*m*v-s*f*x+i*d*x,n[11]=a*u*y-s*c*y-a*h*v+i*c*v+s*h*x-i*u*x,n[15]=s*c*f-a*u*f+a*h*d-i*c*d-s*h*m+i*u*m;var b=i*n[0]+h*n[4]+f*n[8]+y*n[12];if(0==b){var w="THREE.Matrix4.getInverse(): can\'t invert matrix, determinant is 0";if(e)throw new Error(w);return g.warn(w),this.identity(),this}return this.multiplyScalar(1/b),this},translate:function(t){g.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(t){g.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(t){g.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(t){g.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(t,e){g.error("THREE.Matrix4: .rotateByAxis() has been removed.")},scale:function(t){var e=this.elements,n=t.x,r=t.y,i=t.z;return e[0]*=n,e[4]*=r,e[8]*=i,e[1]*=n,e[5]*=r,e[9]*=i,e[2]*=n,e[6]*=r,e[10]*=i,e[3]*=n,e[7]*=r,e[11]*=i,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,Math.max(n,r)))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),r=Math.sin(e),i=1-n,s=t.x,a=t.y,o=t.z,h=i*s,u=i*a;return this.set(h*s+n,h*a-r*o,h*o+r*a,0,h*a+r*o,u*a+n,u*o-r*s,0,h*o-r*a,u*o+r*s,i*o*o+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},compose:function(t,e,n){return this.makeRotationFromQuaternion(e),this.scale(n),this.setPosition(t),this},decompose:function(){var t=new g.Vector3,e=new g.Matrix4;return function(n,r,i){var s=this.elements,a=t.set(s[0],s[1],s[2]).length(),o=t.set(s[4],s[5],s[6]).length(),h=t.set(s[8],s[9],s[10]).length();this.determinant()<0&&(a=-a),n.x=s[12],n.y=s[13],n.z=s[14],e.elements.set(this.elements);var u=1/a,c=1/o,l=1/h;return e.elements[0]*=u,e.elements[1]*=u,e.elements[2]*=u,e.elements[4]*=c,e.elements[5]*=c,e.elements[6]*=c,e.elements[8]*=l,e.elements[9]*=l,e.elements[10]*=l,r.setFromRotationMatrix(e),i.x=a,i.y=o,i.z=h,this}}(),makeFrustum:function(t,e,n,r,i,s){var a=this.elements,o=2*i/(e-t),h=2*i/(r-n),u=(e+t)/(e-t),c=(r+n)/(r-n),l=-(s+i)/(s-i),f=-2*s*i/(s-i);return a[0]=o,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=h,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=l,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makePerspective:function(t,e,n,r){var i=n*Math.tan(g.Math.degToRad(.5*t)),s=-i,a=s*e,o=i*e;return this.makeFrustum(a,o,s,i,n,r)},makeOrthographic:function(t,e,n,r,i,s){var a=this.elements,o=e-t,h=n-r,u=s-i,c=(e+t)/o,l=(n+r)/h,f=(s+i)/u;return a[0]=2/o,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2/h,a[9]=0,a[13]=-l,a[2]=0,a[6]=0,a[10]=-2/u,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},fromArray:function(t){return this.elements.set(t),this},toArray:function(){var t=this.elements;return[t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15]]},clone:function(){return(new g.Matrix4).fromArray(this.elements)}},g.Sphere=function(t,e){this.center=void 0!==t?t:new g.Vector3,this.radius=void 0!==e?e:0},g.Sphere.prototype={constructor:g.Sphere,set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:(f=new g.Box3,function(t,e){var n=this.center;void 0!==e?n.copy(e):f.setFromPoints(t).center(n);for(var r=0,i=0,s=t.length;i<s;i++)r=Math.max(r,n.distanceToSquared(t[i]));return this.radius=Math.sqrt(r),this}),copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},clampPoint:function(t,e){var n=this.center.distanceToSquared(t),r=e||new g.Vector3;return r.copy(t),n>this.radius*this.radius&&(r.sub(this.center).normalize(),r.multiplyScalar(this.radius).add(this.center)),r},getBoundingBox:function(t){var e=t||new g.Box3;return e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius},clone:function(){return(new g.Sphere).copy(this)}},g.Frustum=function(t,e,n,r,i,s){this.planes=[void 0!==t?t:new g.Plane,void 0!==e?e:new g.Plane,void 0!==n?n:new g.Plane,void 0!==r?r:new g.Plane,void 0!==i?i:new g.Plane,void 0!==s?s:new g.Plane]},g.Frustum.prototype={constructor:g.Frustum,set:function(t,e,n,r,i,s){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(r),a[4].copy(i),a[5].copy(s),this},copy:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},setFromMatrix:function(t){var e=this.planes,n=t.elements,r=n[0],i=n[1],s=n[2],a=n[3],o=n[4],h=n[5],u=n[6],c=n[7],l=n[8],f=n[9],d=n[10],m=n[11],p=n[12],y=n[13],v=n[14],g=n[15];return e[0].setComponents(a-r,c-o,m-l,g-p).normalize(),e[1].setComponents(a+r,c+o,m+l,g+p).normalize(),e[2].setComponents(a+i,c+h,m+f,g+y).normalize(),e[3].setComponents(a-i,c-h,m-f,g-y).normalize(),e[4].setComponents(a-s,c-u,m-d,g-v).normalize(),e[5].setComponents(a+s,c+u,m+d,g+v).normalize(),this},intersectsObject:(p=new g.Sphere,function(t){var e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),p.copy(e.boundingSphere),p.applyMatrix4(t.matrixWorld),this.intersectsSphere(p)}),intersectsSphere:function(t){for(var e=this.planes,n=t.center,r=-t.radius,i=0;i<6;i++){if(e[i].distanceToPoint(n)<r)return!1}return!0},intersectsBox:(d=new g.Vector3,m=new g.Vector3,function(t){for(var e=this.planes,n=0;n<6;n++){var r=e[n];d.x=r.normal.x>0?t.min.x:t.max.x,m.x=r.normal.x>0?t.max.x:t.min.x,d.y=r.normal.y>0?t.min.y:t.max.y,m.y=r.normal.y>0?t.max.y:t.min.y,d.z=r.normal.z>0?t.min.z:t.max.z,m.z=r.normal.z>0?t.max.z:t.min.z;var i=r.distanceToPoint(d),s=r.distanceToPoint(m);if(i<0&&s<0)return!1}return!0}),containsPoint:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0},clone:function(){return(new g.Frustum).copy(this)}},g.Plane=function(t,e){this.normal=void 0!==t?t:new g.Vector3(1,0,0),this.constant=void 0!==e?e:0},g.Plane.prototype={constructor:g.Plane,set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,r){return this.normal.set(t,e,n),this.constant=r,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new g.Vector3,e=new g.Vector3;return function(n,r,i){var s=t.subVectors(i,r).cross(e.subVectors(n,r)).normalize();return this.setFromNormalAndCoplanarPoint(s,n),this}}(),copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return this.orthoPoint(t,e).sub(t).negate()},orthoPoint:function(t,e){var n=this.distanceToPoint(t);return(e||new g.Vector3).copy(this.normal).multiplyScalar(n)},isIntersectionLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},intersectLine:function(){var t=new g.Vector3;return function(e,n){var r=n||new g.Vector3,i=e.delta(t),s=this.normal.dot(i);if(0==s)return 0==this.distanceToPoint(e.start)?r.copy(e.start):void 0;var a=-(e.start.dot(this.normal)+this.constant)/s;return a<0||a>1?void 0:r.copy(i).multiplyScalar(a).add(e.start)}}(),coplanarPoint:function(t){return(t||new g.Vector3).copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new g.Vector3,e=new g.Vector3,n=new g.Matrix3;return function(r,i){var s=i||n.getNormalMatrix(r),a=t.copy(this.normal).applyMatrix3(s),o=this.coplanarPoint(e);return o.applyMatrix4(r),this.setFromNormalAndCoplanarPoint(a,o),this}}(),translate:function(t){return this.constant=this.constant-t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant==this.constant},clone:function(){return(new g.Plane).copy(this)}},g.Math={generateUUID:function(){var t,e="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),n=new Array(36),r=0;return function(){for(var i=0;i<36;i++)8==i||13==i||18==i||23==i?n[i]="-":14==i?n[i]="4":(r<=2&&(r=33554432+16777216*Math.random()|0),t=15&r,r>>=4,n[i]=e[19==i?3&t|8:t]);return n.join("")}}(),clamp:function(t,e,n){return t<e?e:t>n?n:t},clampBottom:function(t,e){return t<e?e:t},mapLinear:function(t,e,n,r,i){return r+(t-e)*(i-r)/(n-e)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(t,e){return Math.floor(this.randFloat(t,e))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:(v=Math.PI/180,function(t){return t*v}),radToDeg:(y=180/Math.PI,function(t){return t*y}),isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},nextPowerOfTwo:function(t){return t--,t|=t>>1,t|=t>>2,t|=t>>4,t|=t>>8,t|=t>>16,++t}}}).call(this,n(32)(t))},function(t,e,n){"use strict";var r=n(2),i=n(9),s=Object(r.a)(),a=s,o={DEBUG:5,LOG:4,INFO:3,WARNING:2,ERROR:1,NONE:0};function h(){this.runtimeStats={},this.level=-1,this.setLevel(o.ERROR),this._reportError=this._reportError.bind(this)}function u(){return"undefined"!=typeof window?encodeURI(a.location.href):""}function c(){}h.prototype.initialize=function(t){if(t.eventCallback&&(this.callback=t.eventCallback),this.sessionId=t.sessionId,!this.sessionId){var e=Date.now()+"";this.sessionId=parseFloat((1e4*Math.random()|0)+""+e.substring(4))}"number"==typeof t.logLevel&&this.setLevel(t.logLevel),this.environmentInfo={touch:Object(r.d)(),env:Object(i.b)(),referer:u(),version:s.LMV_VIEWER_VERSION,build_type:s.LMV_BUILD_TYPE};var n={category:"viewer_start",touch:this.environmentInfo.touch,env:this.environmentInfo.env,referer:this.environmentInfo.referer,version:this.environmentInfo.version,build_type:this.environmentInfo.build_type};this.track(n);var a=this;this.interval=setInterval((function(){a.reportRuntimeStats()}),6e4)},h.prototype.shutdown=function(){clearInterval(this.interval),this.interval=void 0},h.prototype.track=function(t){this.updateRuntimeStats(t),!Object(i.c)()&&this.sessionId&&this.callback&&(t.timestamp=Date.now(),t.sessionId=this.sessionId,this.callback(t))},h.prototype.updateRuntimeStats=function(t){if(t.hasOwnProperty("aggregate"))switch(t.aggregate){case"count":this.runtimeStats[t.name]>0?this.runtimeStats[t.name]++:this.runtimeStats[t.name]=1,this.runtimeStats._nonempty=!0;break;case"last":this.runtimeStats[t.name]=t.value,this.runtimeStats._nonempty=!0;break;default:this.warn("unknown log aggregate type")}},h.prototype.reportRuntimeStats=function(){this.runtimeStats._nonempty&&(delete this.runtimeStats._nonempty,this.runtimeStats.category="misc_stats",this.track(this.runtimeStats),this.runtimeStats={})},h.prototype.setLevel=function(t){this.level!==t&&(this.level=t,this.debug=t>=o.DEBUG?console.log:c,this.log=t>=o.LOG?console.log:c,this.info=t>=o.INFO?console.info:c,this.warn=t>=o.WARNING?console.warn:c,this.error=t>=o.ERROR?this._reportError:c)},h.prototype._reportError=function(){if(this.callback){var t=Array.prototype.slice.call(arguments).join(" ");this.callback({category:"error",message:t})}console.error.apply(console,arguments)};var l=new h;var f=n(6),d=n(13);n.d(e,"a",(function(){return k}));var m,p,y,v,g,x,_,b,w=n(14),k={},z=!1;function E(t){var e=t.split("/");if(0==e.length)return t;for(var n=[],r=0;r<e.length;++r){var i=e[r];"."!==i&&(".."===i&&n.length?n.pop():n.push(i))}return 0==n.length?"":n.join("/")}function S(t,e){return-1===e.indexOf("file://")&&(-1!==e.indexOf("://")||(!!t||void 0))}if(k.simplifyPath=E,k.OSS_PREFIX="urn:adsk.objects:os.object:",k.generateUrl=function(t,e,n){if(n=n||"",Object(r.c)()&&!S(t,n))return n;var s=(n=E(n)).indexOf("urn:"),a=n.indexOf("?");if(n=-1!=s?-1!==a?n.slice(0,s)+encodeURIComponent(n.slice(s,a))+n.slice(a):n.slice(0,s)+encodeURIComponent(n.slice(s)):encodeURI(n),!e||0!==decodeURIComponent(n).indexOf("urn:"))return S(null,n)?n:t+n;switch("items"!==e&&(n=n.substr(6)),e){case"items":return i.a.getItemApi(t,n);case"bubbles":return i.a.getManifestApi(t,n);case"thumbnails":return i.a.getThumbnailApi(t,n)}},Object(r.c)())m=n(12),p=n(12),y=n(12),v=n(12),g=n(12),x=new y.Agent({keepAlive:!0,keepAliveMsecs:100,maxSockets:10}),_=new v.Agent({keepAlive:!0,keepAliveMsecs:100,maxSockets:10}),b=new y.Agent({maxSockets:10}),k.rawGet=function(t,e,n,r,i,s){if(s=s||{},S(t,n=k.generateUrl(t,e,n))){if(s.queryParams){var a=-1===n.indexOf("?")?"?":"&";n=n+a+s.queryParams}var o=g.parse(n),h={host:o.hostname,port:o.port,method:s.method||"GET",path:o.path,headers:{},retryCount:0,agent:"https:"===o.protocol?x:_};if(h.host.endsWith(".api.autodesk.com")&&(h.path.startsWith("/derivativeservice")||h.path.startsWith("/modelderivative"))&&(h.agent=b),s.headers)for(var u in s.headers)h.headers[u]=s.headers[u];h.headers["accept-encoding"]||(h.headers["accept-encoding"]="gzip, deflate"),s.range&&(h.headers.Range="bytes="+s.range.min+"-"+s.range.max),(s.ondata||s.onprogress)&&(s.responseType="arraybuffer");var c=("https:"===o.protocol?y:v).request(h,(function(t){var e=!(t.statusCode>=200&&t.statusCode<400),a=t;e||!function(t,e){return!!("gzip"===t.headers["content-encoding"]||e.endsWith(".json.gz")||e.endsWith("FragmentList.pack")||e.endsWith("LightList.bin")||e.endsWith("CameraList.bin")||e.endsWith("CameraDefinitions.bin")||e.endsWith("LightDefinitions.bin"))}(t,o.pathname)||s.skipDecompress||(a=t.pipe(p.createGunzip())),"json"!==s.responseType&&"text"!==s.responseType&&s.responseType||a.setEncoding("utf8");var h=[],u=Buffer.allocUnsafe(65536),d=0;a.on("data",(function(t){if(s.onprogress){if(t.length+d>u.length){var e=Buffer.allocUnsafe(0|Math.ceil(1.5*u.length));u.copy(e,0,0,d),u=e}return t.copy(u,d,0,t.length),d+=t.length,void(s.onprogress(u,d)&&c.abort())}h.push(t),s.ondata&&s.ondata(t)})),a.on("end",(function(){if(t.statusCode>=200&&t.statusCode<400){if("json"===s.responseType){var e=JSON.parse(h.join(""));return void r(e)}if("text"===s.responseType||""===s.responseType){var a=h.join("");return void r(a)}var o=s.onprogress?u:Buffer.concat(h);if(!s.skipDecompress&&31===o[0]&&139===o[1]){l.warn("An LMV resource ("+n+") was double compressed, or Content-Encoding header missing");try{o=p.gunzipSync(o),d=o.length}catch(t){i(f.a.BAD_DATA,"Malformed data received when requesting file",{url:n,exception:t.toString(),stack:t.stack})}}200===c.status&&s.range&&(o=new Uint8Array(o,s.range.min,s.range.max-s.range.min)),r(o,d)}else i&&i(t.statusCode,t.statusMessage,{url:n})}))}));c.on("error",(function(t){i&&i(t.code,t.message,{url:n})})),s.postData&&c.write(s.postData),c.end()}else!function(t,e,n,r){function i(t){if("json"===r.responseType)try{return JSON.parse(t.toString("utf8"))}catch(t){n(t)}return t}0===t.indexOf("file://")&&(t=t.substr(7)),m.readFile(t,(function(s,a){s?n(0,0,{httpStatusText:s,url:t}):31===a[0]&&139===a[1]?p.gunzip(a,null,(function(s,a){s?n(0,0,{httpStatusText:s,url:t}):(a=i(a),r.ondata&&r.ondata(a),e(a))})):(a=i(a),r.ondata&&r.ondata(a),e(a))}))}(n,r,i,s)};else{var M=new(n(30));M.max=25,k.rawGet=function(t,e,n,r,i,s){M.go((function(a){k._rawGet(t,e,n,(function(){a();for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];r&&r.apply(r,e)}),(function(){a();for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];i&&i.apply(i,e)}),s)}))},k._rawGet=function(t,e,n,r,i,s){if(s=s||{},n=k.generateUrl(t,e,n),s.queryParams){var a=-1===n.indexOf("?")?"?":"&";n=n+a+s.queryParams}var o=new XMLHttpRequest;function h(t){i&&i(o.status,o.statusText,{url:n})}function u(t){if("json"===s.responseType)try{if(t instanceof Uint8Array)return Object(d.a)(t);if("string"==typeof t)return JSON.parse(t)}catch(t){}return t}function c(t){if(200===o.status||206===o.status)if(o.response&&o.response instanceof ArrayBuffer){var e;if(e=200===o.status&&s.range?new Uint8Array(o.response,s.range.min,s.range.max-s.range.min):new Uint8Array(o.response),!s.skipDecompress&&31===e[0]&&139===e[1]){z||(z=!0,l.warn("An LMV resource ("+n+") was not uncompressed by the browser. This hurts performance. Check the Content-Encoding header returned by the server and check whether you\'re getting double-compressed streams. The warning prints only once but it\'s likely the problem affects multiple resources."));try{e=w.ungzip(e)}catch(t){i(f.a.BAD_DATA,"Malformed data received when requesting file",{url:n,exception:t.toString(),stack:t.stack})}}r&&r(u(e))}else{var a=o.response;a||s.responseType&&"text"!==s.responseType||(a=o.responseText),r&&r(u(a))}else h()}try{var m=!s.hasOwnProperty("asynchronous")||s.asynchronous;if(o.open(s.method||(s.noBody?"HEAD":"GET"),n,m),s.hasOwnProperty("responseType")&&(o.responseType=s.responseType),o.withCredentials=!0,s.hasOwnProperty("withCredentials")&&(o.withCredentials=s.withCredentials),s.range&&o.setRequestHeader("Range","bytes="+s.range.min+"-"+s.range.max),s.headers)for(var p in s.headers)o.setRequestHeader(p,s.headers[p]),"authorization"===p.toLocaleLowerCase()&&(o.withCredentials=!1);m&&(o.onload=c,o.onerror=h,o.ontimeout=h,(s.ondata||s.onprogress)&&(o.overrideMimeType("text/plain; charset=x-user-defined"),s._dlProgress={streamOffset:0},o.onreadystatechange=function(){if(o.readyState>2&&200===o.status)if(s.ondata){var t=o.responseText;if(s._dlProgress.streamOffset>=t.length)return;var e=function(t,e){for(var n=t.length-e,r=new ArrayBuffer(n),i=new Uint8Array(r,0),s=0,a=e;s<n;s++,a++)i[s]=255&t.charCodeAt(a);return i}(t,s._dlProgress.streamOffset);s._dlProgress.streamOffset=t.length,s.ondata(e)}else if(s.onprogress){s.onprogress(o.responseText)&&o.abort()}})),o.send(s.postData),m||c()}catch(t){i(o.status,o.statusText,{url:n,exception:t})}}}function A(t,e){e.hasOwnProperty("responseType")||(e.responseType="arraybuffer"),e.hasOwnProperty("withCredentials")||(e.withCredentials=!!t.auth),e.headers=t.headers,e.queryParams=t.queryParams,e.endpoint=t.endpoint}k.defaultFailureCallback=function(t,e,n){403==t?this.raiseError(f.a.NETWORK_ACCESS_DENIED,"Access denied to remote resource",{url:n.url,httpStatus:t,httpStatusText:e}):404==t?this.raiseError(f.a.NETWORK_FILE_NOT_FOUND,"Remote resource not found",{url:n.url,httpStatus:t,httpStatusText:e}):t>=500&&t<600?this.raiseError(f.a.NETWORK_SERVER_ERROR,"Server error when accessing resource",{url:n.url,httpStatus:t,httpStatusText:e}):n.exception?this.raiseError(f.a.NETWORK_FAILURE,"Network failure",{url:n.url,exception:n.exception.toString(),stack:n.exception.stack}):this.raiseError(f.a.NETWORK_UNHANDLED_RESPONSE_CODE,"Unhandled response code from server",{url:n.url,httpStatus:t,httpStatusText:e,data:n})},k.getItem=function(t,e,n,r,i){if(A(t,i=i||{}),i.range&&!t.supportsRangeRequests){var s="start="+i.range.min+"&end="+i.range.max;i.queryParams?i.queryParams+="&"+s:i.queryParams=s,i.range=void 0}k.rawGet(t.endpoint,"items",e,n,r,i)},k.getManifest=function(t,e,n,r,i){(i=i||{}).hasOwnProperty("responseType")||(i.responseType="json"),A(t,i),k.rawGet(t.endpoint,"bubbles",e,n,r,i)},k.getThumbnail=function(t,e,n,r,i){A(t,i=i||{});var s=i.queryParams||"",a=[];if(-1===s.indexOf("guid=")&&a.push("guid="+encodeURIComponent(i.guid)),-1===s.indexOf("role=")){var o=i.role||"rendered";a.push("role="+o)}if(-1===s.indexOf("width=")){var h=i.size||400;a.push("width="+h)}if(-1===s.indexOf("height=")){h=i.size||400;a.push("height="+h)}-1===s.indexOf("acmsession=")&&i.acmsession&&a.push("acmsession="+i.acmsession);var u=a.join("&");i.queryParams?i.queryParams=i.queryParams+"&"+u:i.queryParams=u,k.rawGet(t.endpoint,"thumbnails",e,n,r,i)},k.getACMSession=function(t,e,n,r){var i,s={};for(var a in e)"oauth2AccessToken"===a?i=e[a]:-1!==a.indexOf("x-ads-acm")&&(s[a]=e[a]);s.application="autodesk";var o=new XMLHttpRequest;o.open("POST",t+"/oss-ext/v2/acmsessions",!0),o.setRequestHeader("Content-Type","application/json"),o.setRequestHeader("Authorization","Bearer "+i),o.responseType="json",o.onload=function(){if(200===o.status&&o.response){var t="string"==typeof o.response?JSON.parse(o.response):o.response;t&&t.acmsession?n(t.acmsession):r(o.status,"Can\'t get acm session from response.")}else r(o.status)},o.onerror=r,o.ontimeout=r,o.send(JSON.stringify(s)),delete s.application}},function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var r=n(13),i=new ArrayBuffer(8),s=new Uint8Array(i),a=new Uint16Array(i),o=new Int32Array(i),h=new Uint32Array(i),u=new Float32Array(i),c=new Float64Array(i);function l(t){this.buffer=t,this.offset=0,this.byteLength=t.length}l.prototype.seek=function(t){this.offset=t},l.prototype.getBytes=function(t){var e=new Uint8Array(this.buffer.buffer,this.offset,t);return this.offset+=t,e},l.prototype.getVarints=function(){var t,e=0,n=0;do{e|=(127&(t=this.buffer[this.offset++]))<<n,n+=7}while(128&t);return e},l.prototype.getUint8=function(){return this.buffer[this.offset++]},l.prototype.getUint16=function(){return s[0]=this.buffer[this.offset++],s[1]=this.buffer[this.offset++],a[0]},l.prototype.getInt16=function(){var t=this.getUint16();return t>32767&&(t|=4294901760),t},l.prototype.getInt32=function(){var t=this.buffer,e=s,n=this.offset;return e[0]=t[n],e[1]=t[n+1],e[2]=t[n+2],e[3]=t[n+3],this.offset+=4,o[0]},l.prototype.getUint32=function(){var t=this.buffer,e=s,n=this.offset;return e[0]=t[n],e[1]=t[n+1],e[2]=t[n+2],e[3]=t[n+3],this.offset+=4,h[0]},l.prototype.getFloat32=function(){var t=this.buffer,e=s,n=this.offset;return e[0]=t[n],e[1]=t[n+1],e[2]=t[n+2],e[3]=t[n+3],this.offset+=4,u[0]},l.prototype.getIndicesArray=function(t,e,n){for(var r=this.buffer,i=new Uint8Array(t,e,2*n),s=this.offset,a=0,o=2*n;a<o;a+=2)i[a]=r[s],i[a+1]=r[s+1],s+=4;this.offset=s},l.prototype.getVector3Array=function(t,e,n,r){var i=this.buffer,s=this.offset,a=new Uint8Array(t.buffer,t.byteOffset,t.byteLength);if(3===r&&0===n){var o=12*e;a.set(i.subarray(s,s+o)),this.offset+=o}else{r*=4;for(var h=4*n,u=0;u<e;u++){for(var c=0;c<12;c++)a[h+c]=i[s++];h+=r}this.offset=s}},l.prototype.getVector2Array=function(t,e,n,r){var i=this.buffer,s=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),a=this.offset;r*=4;for(var o=4*n,h=0;h<e;h++){for(var u=0;u<8;u++)s[o+u]=i[a++];o+=r}this.offset=a},l.prototype.getVector4=function(t,e){for(var n=this.buffer,r=s,i=this.offset,a=u,o=0;o<4;o++)r[0]=n[i],r[1]=n[i+1],r[2]=n[i+2],r[3]=n[i+3],t[e+o]=a[0],i+=4;this.offset=i},l.prototype.getFloat64=function(){for(var t=this.buffer,e=s,n=this.offset,r=0;r<8;r++)e[r]=t[n+r];return this.offset+=8,c[0]},l.prototype.getString=function(t){var e=Object(r.b)(this.buffer,this.offset,t);return this.offset+=t,e},l.prototype.reset=function(t){this.buffer=t,this.offset=0,this.byteLength=t.length}},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={UNKNOWN_FAILURE:1,BAD_DATA:2,NETWORK_FAILURE:3,NETWORK_ACCESS_DENIED:4,NETWORK_FILE_NOT_FOUND:5,NETWORK_SERVER_ERROR:6,NETWORK_UNHANDLED_RESPONSE_CODE:7,BROWSER_WEBGL_NOT_SUPPORTED:8,BAD_DATA_NO_VIEWABLE_CONTENT:9,BROWSER_WEBGL_DISABLED:10,BAD_DATA_MODEL_IS_EMPTY:11,RTC_ERROR:12,UNSUPORTED_FILE_EXTENSION:13,VIEWER_INTERNAL_ERROR:14,WEBGL_LOST_CONTEXT:15}},function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));var r,i,s,a,o,h=n(5),u=n(1);function c(t){var e=this.stream=new h.a(t),n=e.getInt32();this.type=e.getString(n),this.version=e.getInt32(),this.types=null,this.entryOffsets=[];var r=e.offset;e.seek(e.byteLength-8);var i=e.getUint32();this.typesOffset=e.getUint32(),e.seek(this.typesOffset);var s=this.readU32V();this.types=[];for(var a=0;a<s;++a)this.types.push({entryClass:this.readString(),entryType:this.readString(),version:this.readU32V()});e.seek(i);var o=this.readU32V(),u=this.entryOffsets;for(a=0;a<o;++a)u.push(e.getUint32());e.seek(r)}c.prototype.readVarint=function(){var t,e=0,n=0;do{e|=(127&(t=this.stream.getUint8()))<<n,n+=7}while(128&t);return e},c.prototype.readU32V=c.prototype.readVarint,c.prototype.readU16=function(){return this.stream.getUint16()},c.prototype.readU8=function(){return this.stream.getUint8()},c.prototype.readString=function(){return this.stream.getString(this.readU32V())},c.prototype.readVector3f=function(){var t=this.stream;return{x:t.getFloat32(),y:t.getFloat32(),z:t.getFloat32()}},c.prototype.readF32=function(){return this.stream.getFloat32()},c.prototype.readVector3d=(r={x:0,y:0,z:0},function(){var t=this.stream;return r.x=t.getFloat64(),r.y=t.getFloat64(),r.z=t.getFloat64(),r}),c.prototype.readQuaternionf=(i={x:0,y:0,z:0,w:0},function(){var t=this.stream;return i.x=t.getFloat32(),i.y=t.getFloat32(),i.z=t.getFloat32(),i.w=t.getFloat32(),i}),c.prototype.readMatrix3f=(s=new u.a,function(t){t||(t=s);var e=this.stream;t.identity();for(var n=0;n<3;++n)for(var r=0;r<3;++r)t.elements[4*n+r]=e.getFloat32();return t}),c.prototype.readTransform=(a={x:1,y:1,z:1},o=new u.a(!0),function(t,e,n,r,i,s){var h,c,l=this.stream;switch(l.getUint8()){case 4:o.identity();break;case 0:h=this.readVector3d(),o.makeTranslation(h.x,h.y,h.z);break;case 1:c=this.readQuaternionf(),h=this.readVector3d(),a.x=1,a.y=1,a.z=1,o.compose(h,c,a);break;case 2:var f=l.getFloat32();c=this.readQuaternionf(),h=this.readVector3d(),a.x=f,a.y=f,a.z=f,o.compose(h,c,a);break;case 3:this.readMatrix3f(o),h=this.readVector3d(),o.setPosition(h)}if(s&&(s[0]=o.elements[12],s[1]=o.elements[13],s[2]=o.elements[14]),r&&o.multiplyMatrices(r,o),i&&(o.elements[12]-=i.x,o.elements[13]-=i.y,o.elements[14]-=i.z),void 0===t)return(new u.a).copy(o);var d=o.elements;e&&(e[n+0]=d[0],e[n+1]=d[1],e[n+2]=d[2],e[n+3]=d[4],e[n+4]=d[5],e[n+5]=d[6],e[n+6]=d[8],e[n+7]=d[9],e[n+8]=d[10],e[n+9]=d[12],e[n+10]=d[13],e[n+11]=d[14])}),c.prototype.getEntryCounts=function(){return this.entryOffsets.length},c.prototype.seekToEntry=function(t){if(t>=this.getEntryCounts())return null;this.stream.seek(this.entryOffsets[t]);var e=this.stream.getUint32();return e>=this.types.length?null:this.types[e]},c.prototype.readPathID=function(){var t=this.stream;if(this.version<2){if(!(r=t.getUint16()))return null;if(t.getUint16(),1==r)return"";for(var e=t.getUint16(),n=2;n<r;++n)e+="/"+t.getUint16()}else{var r;if(!(r=this.readU32V()))return null;if(this.readU32V(),1==r)return"";for(e=this.readU32V(),n=2;n<r;++n)e+="/"+this.readU32V()}return e}},function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var r,i,s=n(0),a=function(t,e){this.min=void 0!==t?t:new s.a(1/0,1/0,1/0),this.max=void 0!==e?e:new s.a(-1/0,-1/0,-1/0)};a.prototype={constructor:a,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromArray:function(t,e){return this.min.x=t[e],this.min.y=t[e+1],this.min.z=t[e+2],this.max.x=t[e+3],this.max.y=t[e+4],this.max.z=t[e+5],this},copyToArray:function(t,e){t[e]=this.min.x,t[e+1]=this.min.y,t[e+2]=this.min.z,t[e+3]=this.max.x,t[e+4]=this.max.y,t[e+5]=this.max.z},setFromCenterAndSize:(i=new s.a,function(t,e){var n=i.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},empty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},center:function(t){return(t||new s.a).addVectors(this.min,this.max).multiplyScalar(.5)},size:function(t){return(t||new s.a).subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return(e||new s.a).set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},isIntersectionBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},clampPoint:function(t,e){return(e||new s.a).copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new s.a;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:(r=[new s.a,new s.a,new s.a,new s.a,new s.a,new s.a,new s.a,new s.a],function(t){return r[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),r[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),r[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),r[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),r[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),r[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),r[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),r[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.makeEmpty(),this.setFromPoints(r),this}),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}},function(t,e,n){"use strict";var r=n(2),i=Object(r.a)(),s=i;s&&s.document;function a(t){return"undefined"==typeof window?"":function(t,e){t=t.replace(/[\\[]/,"\\\\[").replace(/[\\]]/,"\\\\]");var n=new RegExp("[\\\\?&]"+t+"=([^&#]*)").exec(e);return null==n?"":decodeURIComponent(n[1].replace(/\\+/g," "))}(t,s.location.href)}i.LOCALIZATION_REL_PATH="",i.LMV_VIEWER_VERSION="7.11.0",i.LMV_BUILD_TYPE="Production",i.LMV_RESOURCE_ROOT="",i.LMV_THIRD_PARTY_COOKIE=!Object(r.c)()&&void 0,"v"===i.LMV_VIEWER_VERSION.charAt(0)&&(i.LMV_VIEWER_VERSION=i.LMV_VIEWER_VERSION.substr(1)),i.LMV_VECTOR_PDF=!1,i.LMV_RASTER_PDF=!0,n.d(e,"b",(function(){return v})),n.d(e,"c",(function(){return x})),n.d(e,"a",(function(){return _}));var o=Object(r.a)(),h={},u=null;h.ENDPOINT_API_DERIVATIVE_SERVICE_V2="derivativeV2",h.ENDPOINT_API_MODEL_DERIVATIVE_V2="modelDerivativeV2",h.ENDPOINT_API_FLUENT="fluent";var c,l={derivativeV2:{baseURL:"/derivativeservice/v2",itemURL:"/derivativeservice/v2/derivatives/:derivativeurn",manifestURL:"/derivativeservice/v2/manifest/:urn",thumbnailsURL:"/derivativeservice/v2/thumbnails/:urn"},derivativeV2_EU:{baseURL:"/derivativeservice/v2/regions/eu",itemURL:"/derivativeservice/v2/regions/eu/derivatives/:derivativeurn",manifestURL:"/derivativeservice/v2/regions/eu/manifest/:urn",thumbnailsURL:"/derivativeservice/v2/regions/eu/thumbnails/:urn"},modelDerivativeV2:{baseURL:"/modelderivative/v2/",itemURL:"/modelderivative/v2/designdata/:urn/manifest/:derivativeurn",manifestURL:"/modelderivative/v2/designdata/:urn/manifest",thumbnailsURL:"/modelderivative/v2/designdata/:urn/thumbnail"},fluent:{baseURL:"/modeldata",itemURL:"/modeldata/file/:derivativeurn",manifestURL:"/modeldata/manifest/:urn",thumbnailsURL:"/derivativeservice/v2/thumbnails/:urn",cdnURL:"/cdn",cdnWS:"/cdnws"}},f="",d=h.ENDPOINT_API_DERIVATIVE_SERVICE_V2,m=!1,p=!1,y="";function v(){return c}h.HTTP_REQUEST_HEADERS={},h.queryParams={},h.setEndpointAndApi=function(t,e){f=t,e&&(d=e)},h.getEndpointAndApi=function(){return f+l[d].baseURL},h.getApiEndpoint=function(){return f},h.getApiFlavor=function(){return d},h.getCdnUrl=function(){return u||(f?f+l[d].cdnURL:void 0)},h.getCdnWebSocketEndpoint=function(){return f+(l[d].cdnWS||"")},h.setCdnUrl=function(t){u=t},h.getCdnRedirectUrl=function(){var t=l[d].cdnRedirectURL;return t?f+t:null},h.setAcmSession=function(t){y=t},h.getAcmSession=function(){return y},h.getManifestApi=function(t,e,n){var r=t||f;return e=e||"",r=(r+=l[n=n||d].manifestURL).replace(":urn",e)},h.getItemApi=function(t,e,n){var r=n||d,i=(t||f)+l[r].itemURL;e=e||"";var s=decodeURIComponent(e);if(-1!==i.indexOf(":urn")){var a=s.split("/")[0]||"";a=(a=a.split(":"))[a.length-1]||"",i=i.replace(":urn",a)}return r===h.ENDPOINT_API_MODEL_DERIVATIVE_V2&&(e=encodeURIComponent(s)),i=i.replace(":derivativeurn",e)},h.getThumbnailApi=function(t,e,n){return((t||f)+l[n||d].thumbnailsURL).replace(":urn",e||"")},h.getUseCredentials=function(){return m},h.getDomainParam=function(){return console.warn("getDomainParam is deprecated, switch to getQueryParams instead."),this.getUseCredentials()&&!Object(r.c)()?"domain="+encodeURIComponent(o.location.origin):""},h.addQueryParam=function(t,e){this.queryParams[t]=e},h.deleteQueryParam=function(t){delete this.queryParams[t]},h.getQueryParams=function(t){var e=this.getUseCredentials()&&!Object(r.c)()?"domain="+encodeURIComponent(o.location.origin):"";a("bypassds")&&(e=e?e+"&bypassds=1":"bypassds=1");var n=[];for(var i in this.queryParams)n.push(encodeURIComponent(i)+"="+encodeURIComponent(this.queryParams[i]));return n.length&&(e?e+="&"+n.join("&"):e=n.join("&")),e&&t&&(t.queryParams?t.queryParams+="&"+e:t.queryParams=e),e},h.setUseCredentials=function(t){m=t},h.setUseCookie=function(t){p=t},h.getUseCookie=function(){return p},h.initLoadContext=function(t){for(var e in(t=t||{}).auth=this.getUseCredentials(),t.endpoint||(t.endpoint=this.getApiEndpoint()),t.api||(t.api=this.getApiFlavor()),t.headers||(t.headers={}),this.HTTP_REQUEST_HEADERS)t.headers[e]=this.HTTP_REQUEST_HEADERS[e];return t.api===this.ENDPOINT_API_FLUENT&&(t.supportsRangeRequests=!0),this.getQueryParams(t),t.otg_cdn=u||this.getCdnUrl(),t.otg_ws=this.getCdnWebSocketEndpoint(),t};var g=!1;function x(){return g}var _=h;h.initLoadContext.bind(h)},function(t,e,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var n=e.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)i(n,r)&&(t[r]=n[r])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var s={arraySet:function(t,e,n,r,i){if(e.subarray&&t.subarray)t.set(e.subarray(n,n+r),i);else for(var s=0;s<r;s++)t[i+s]=e[n+s]},flattenChunks:function(t){var e,n,r,i,s,a;for(r=0,e=0,n=t.length;e<n;e++)r+=t[e].length;for(a=new Uint8Array(r),i=0,e=0,n=t.length;e<n;e++)s=t[e],a.set(s,i),i+=s.length;return a}},a={arraySet:function(t,e,n,r,i){for(var s=0;s<r;s++)t[i+s]=e[n+s]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,s)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,a))},e.setTyped(r)},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r={deduceUVRepetition:function(t){for(var e in t.vblayout)if(0==e.indexOf("uv")&&0!=e.indexOf("uvw"))for(var n=t.vblayout[e].offset,r=t.vbstride,i=t.vb,s=t.vb.length/r,a=0,o=n;a<s;a++,o+=r){var h=i[o],u=i[o+1];if(h>2||h<0||u>2||u<0){t.vblayout[e].isPattern=!0;break}}},computeBounds3D:function(t){var e,n,r,i,s,a=1/0,o=1/0,h=1/0,u=-1/0,c=-1/0,l=-1/0,f=t.vbstride,d=t.vblayout.position.offset,m=t.vb,p=t.vb.length/f;for(e=0,n=d;e<p;e++,n+=f)a>(r=m[n])&&(a=r),o>(i=m[n+1])&&(o=i),h>(s=m[n+2])&&(h=s),u<r&&(u=r),c<i&&(c=i),l<s&&(l=s);t.boundingBox={min:{x:a,y:o,z:h},max:{x:u,y:c,z:l}};var y=.5*(a+u),v=.5*(o+c),g=.5*(h+l),x=t.boundingSphere={};x.center={x:y,y:v,z:g};var _=0;for(e=0,n=d;e<p;e++,n+=f){var b=(r=m[n])-y,w=(i=m[n+1])-v,k=(s=m[n+2])-g,z=b*b+w*w+k*k;z>_&&(_=z)}x.radius=Math.sqrt(_)},bboxUnion:function(t,e){e.min.x<t.min.x&&(t.min.x=e.min.x),e.min.y<t.min.y&&(t.min.y=e.min.y),e.min.z<t.min.z&&(t.min.z=e.min.z),e.max.x>t.max.x&&(t.max.x=e.max.x),e.max.y>t.max.y&&(t.max.y=e.max.y),e.max.z>t.max.z&&(t.max.z=e.max.z)}}},function(t,e){},function(t,e,n){"use strict";n.d(e,"b",(function(){return s})),n.d(e,"a",(function(){return a}));var r=!0,i=1048576;function s(t,e,n){if(void 0===e&&(e=0),void 0===n&&(n=t.length),r)return n>i?function(t,e,n){var r,i,s,a,o,h,u,c;for(r="",o=[],s=n,h=0,i=0;i<s;){switch((a=t[e+i++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:o.push(String.fromCharCode(a));break;case 12:case 13:u=t[e+i++],o.push(String.fromCharCode((31&a)<<6|63&u));break;case 14:u=t[e+i++],c=t[e+i++],o.push(String.fromCharCode((15&a)<<12|(63&u)<<6|(63&c)<<0))}(++h>=32768||i>=s)&&(r+=o.join(""),o.length=0,h=0)}return r}(t,e,n):function(t,e,n){var r,i,s,a,o,h;for(r="",s=n,i=0;i<s;)switch((a=t[e+i++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:r+=String.fromCharCode(a);break;case 12:case 13:o=t[e+i++],r+=String.fromCharCode((31&a)<<6|63&o);break;case 14:o=t[e+i++],h=t[e+i++],r+=String.fromCharCode((15&a)<<12|(63&o)<<6|(63&h)<<0)}return r}(t,e,n);for(var s="",a=e,o=e+n;a<o;a++)s+=String.fromCharCode(t[a]);return decodeURIComponent(escape(s))}function a(t){var e=s(t,0,t.length);return JSON.parse(e)}},function(t,e,n){"use strict";var r={};(0,n(10).assign)(r,n(22),n(25),n(20)),t.exports=r},function(t,e,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e,n){"use strict";t.exports=function(t,e,n,r){for(var i=65535&t|0,s=t>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{s=s+(i=i+e[r++]|0)|0}while(--a);i%=65521,s%=65521}return i|s<<16|0}},function(t,e,n){"use strict";var r=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var r=0;r<8;r++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();t.exports=function(t,e,n,i){var s=r,a=i+n;t^=-1;for(var o=i;o<a;o++)t=t>>>8^s[255&(t^e[o])];return-1^t}},function(t,e,n){"use strict";var r=n(10),i=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){s=!1}for(var a=new r.Buf8(256),o=0;o<256;o++)a[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;function h(t,e){if(e<65534&&(t.subarray&&s||!t.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(t,e));for(var n="",a=0;a<e;a++)n+=String.fromCharCode(t[a]);return n}a[254]=a[254]=1,e.string2buf=function(t){var e,n,i,s,a,o=t.length,h=0;for(s=0;s<o;s++)55296==(64512&(n=t.charCodeAt(s)))&&s+1<o&&56320==(64512&(i=t.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(i-56320),s++),h+=n<128?1:n<2048?2:n<65536?3:4;for(e=new r.Buf8(h),a=0,s=0;a<h;s++)55296==(64512&(n=t.charCodeAt(s)))&&s+1<o&&56320==(64512&(i=t.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(i-56320),s++),n<128?e[a++]=n:n<2048?(e[a++]=192|n>>>6,e[a++]=128|63&n):n<65536?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|63&n):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|63&n);return e},e.buf2binstring=function(t){return h(t,t.length)},e.binstring2buf=function(t){for(var e=new r.Buf8(t.length),n=0,i=e.length;n<i;n++)e[n]=t.charCodeAt(n);return e},e.buf2string=function(t,e){var n,r,i,s,o=e||t.length,u=new Array(2*o);for(r=0,n=0;n<o;)if((i=t[n++])<128)u[r++]=i;else if((s=a[i])>4)u[r++]=65533,n+=s-1;else{for(i&=2===s?31:3===s?15:7;s>1&&n<o;)i=i<<6|63&t[n++],s--;s>1?u[r++]=65533:i<65536?u[r++]=i:(i-=65536,u[r++]=55296|i>>10&1023,u[r++]=56320|1023&i)}return h(u,r)},e.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0?e:0===n?e:n+a[t[n]]>e?n:e}},function(t,e,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var r=n(23),i=n(10),s=n(18),a=n(15),o=n(19),h=Object.prototype.toString,u=0,c=-1,l=0,f=8;function d(t){if(!(this instanceof d))return new d(t);this.options=i.assign({level:c,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:l,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==u)throw new Error(a[n]);if(e.header&&r.deflateSetHeader(this.strm,e.header),e.dictionary){var m;if(m="string"==typeof e.dictionary?s.string2buf(e.dictionary):"[object ArrayBuffer]"===h.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(n=r.deflateSetDictionary(this.strm,m))!==u)throw new Error(a[n]);this._dict_set=!0}}function m(t,e){var n=new d(e);if(n.push(t,!0),n.err)throw n.msg||a[n.err];return n.result}d.prototype.push=function(t,e){var n,a,o=this.strm,c=this.options.chunkSize;if(this.ended)return!1;a=e===~~e?e:!0===e?4:0,"string"==typeof t?o.input=s.string2buf(t):"[object ArrayBuffer]"===h.call(t)?o.input=new Uint8Array(t):o.input=t,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new i.Buf8(c),o.next_out=0,o.avail_out=c),1!==(n=r.deflate(o,a))&&n!==u)return this.onEnd(n),this.ended=!0,!1;0!==o.avail_out&&(0!==o.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(s.buf2binstring(i.shrinkBuf(o.output,o.next_out))):this.onData(i.shrinkBuf(o.output,o.next_out)))}while((o.avail_in>0||0===o.avail_out)&&1!==n);return 4===a?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===u):2!==a||(this.onEnd(u),o.avail_out=0,!0)},d.prototype.onData=function(t){this.chunks.push(t)},d.prototype.onEnd=function(t){t===u&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=d,e.deflate=m,e.deflateRaw=function(t,e){return(e=e||{}).raw=!0,m(t,e)},e.gzip=function(t,e){return(e=e||{}).gzip=!0,m(t,e)}},function(t,e,n){"use strict";var r,i=n(10),s=n(24),a=n(16),o=n(17),h=n(15),u=0,c=1,l=3,f=4,d=5,m=0,p=1,y=-2,v=-3,g=-5,x=-1,_=1,b=2,w=3,k=4,z=0,E=2,S=8,M=9,A=15,I=8,T=286,C=30,O=19,R=2*T+1,P=15,F=3,U=258,V=U+F+1,L=32,B=42,D=69,N=73,j=91,H=103,q=113,Z=666,G=1,W=2,Q=3,X=4,Y=3;function K(t,e){return t.msg=h[e],e}function J(t){return(t<<1)-(t>4?9:0)}function $(t){for(var e=t.length;--e>=0;)t[e]=0}function tt(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(i.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function et(t,e){s._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,tt(t.strm)}function nt(t,e){t.pending_buf[t.pending++]=e}function rt(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function it(t,e){var n,r,i=t.max_chain_length,s=t.strstart,a=t.prev_length,o=t.nice_match,h=t.strstart>t.w_size-V?t.strstart-(t.w_size-V):0,u=t.window,c=t.w_mask,l=t.prev,f=t.strstart+U,d=u[s+a-1],m=u[s+a];t.prev_length>=t.good_match&&(i>>=2),o>t.lookahead&&(o=t.lookahead);do{if(u[(n=e)+a]===m&&u[n+a-1]===d&&u[n]===u[s]&&u[++n]===u[s+1]){s+=2,n++;do{}while(u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&s<f);if(r=U-(f-s),s=f-U,r>a){if(t.match_start=e,a=r,r>=o)break;d=u[s+a-1],m=u[s+a]}}}while((e=l[e&c])>h&&0!=--i);return a<=t.lookahead?a:t.lookahead}function st(t){var e,n,r,s,h,u,c,l,f,d,m=t.w_size;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=m+(m-V)){i.arraySet(t.window,t.window,m,m,0),t.match_start-=m,t.strstart-=m,t.block_start-=m,e=n=t.hash_size;do{r=t.head[--e],t.head[e]=r>=m?r-m:0}while(--n);e=n=m;do{r=t.prev[--e],t.prev[e]=r>=m?r-m:0}while(--n);s+=m}if(0===t.strm.avail_in)break;if(u=t.strm,c=t.window,l=t.strstart+t.lookahead,f=s,d=void 0,(d=u.avail_in)>f&&(d=f),n=0===d?0:(u.avail_in-=d,i.arraySet(c,u.input,u.next_in,d,l),1===u.state.wrap?u.adler=a(u.adler,c,d,l):2===u.state.wrap&&(u.adler=o(u.adler,c,d,l)),u.next_in+=d,u.total_in+=d,d),t.lookahead+=n,t.lookahead+t.insert>=F)for(h=t.strstart-t.insert,t.ins_h=t.window[h],t.ins_h=(t.ins_h<<t.hash_shift^t.window[h+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[h+F-1])&t.hash_mask,t.prev[h&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=h,h++,t.insert--,!(t.lookahead+t.insert<F)););}while(t.lookahead<V&&0!==t.strm.avail_in)}function at(t,e){for(var n,r;;){if(t.lookahead<V){if(st(t),t.lookahead<V&&e===u)return G;if(0===t.lookahead)break}if(n=0,t.lookahead>=F&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+F-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-V&&(t.match_length=it(t,n)),t.match_length>=F)if(r=s._tr_tally(t,t.strstart-t.match_start,t.match_length-F),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=F){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+F-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else r=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(r&&(et(t,!1),0===t.strm.avail_out))return G}return t.insert=t.strstart<F-1?t.strstart:F-1,e===f?(et(t,!0),0===t.strm.avail_out?Q:X):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?G:W}function ot(t,e){for(var n,r,i;;){if(t.lookahead<V){if(st(t),t.lookahead<V&&e===u)return G;if(0===t.lookahead)break}if(n=0,t.lookahead>=F&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+F-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=F-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-V&&(t.match_length=it(t,n),t.match_length<=5&&(t.strategy===_||t.match_length===F&&t.strstart-t.match_start>4096)&&(t.match_length=F-1)),t.prev_length>=F&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-F,r=s._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-F),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+F-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=F-1,t.strstart++,r&&(et(t,!1),0===t.strm.avail_out))return G}else if(t.match_available){if((r=s._tr_tally(t,0,t.window[t.strstart-1]))&&et(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return G}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(r=s._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<F-1?t.strstart:F-1,e===f?(et(t,!0),0===t.strm.avail_out?Q:X):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?G:W}function ht(t,e,n,r,i){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=r,this.func=i}function ut(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*R),this.dyn_dtree=new i.Buf16(2*(2*C+1)),this.bl_tree=new i.Buf16(2*(2*O+1)),$(this.dyn_ltree),$(this.dyn_dtree),$(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(P+1),this.heap=new i.Buf16(2*T+1),$(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*T+1),$(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ct(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=E,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?B:q,t.adler=2===e.wrap?0:1,e.last_flush=u,s._tr_init(e),m):K(t,y)}function lt(t){var e,n=ct(t);return n===m&&((e=t.state).window_size=2*e.w_size,$(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=F-1,e.match_available=0,e.ins_h=0),n}function ft(t,e,n,r,s,a){if(!t)return y;var o=1;if(e===x&&(e=6),r<0?(o=0,r=-r):r>15&&(o=2,r-=16),s<1||s>M||n!==S||r<8||r>15||e<0||e>9||a<0||a>k)return K(t,y);8===r&&(r=9);var h=new ut;return t.state=h,h.strm=t,h.wrap=o,h.gzhead=null,h.w_bits=r,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=s+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+F-1)/F),h.window=new i.Buf8(2*h.w_size),h.head=new i.Buf16(h.hash_size),h.prev=new i.Buf16(h.w_size),h.lit_bufsize=1<<s+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new i.Buf8(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=e,h.strategy=a,h.method=n,lt(t)}r=[new ht(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(st(t),0===t.lookahead&&e===u)return G;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var r=t.block_start+n;if((0===t.strstart||t.strstart>=r)&&(t.lookahead=t.strstart-r,t.strstart=r,et(t,!1),0===t.strm.avail_out))return G;if(t.strstart-t.block_start>=t.w_size-V&&(et(t,!1),0===t.strm.avail_out))return G}return t.insert=0,e===f?(et(t,!0),0===t.strm.avail_out?Q:X):(t.strstart>t.block_start&&(et(t,!1),t.strm.avail_out),G)})),new ht(4,4,8,4,at),new ht(4,5,16,8,at),new ht(4,6,32,32,at),new ht(4,4,16,16,ot),new ht(8,16,32,32,ot),new ht(8,16,128,128,ot),new ht(8,32,128,256,ot),new ht(32,128,258,1024,ot),new ht(32,258,258,4096,ot)],e.deflateInit=function(t,e){return ft(t,e,S,A,I,z)},e.deflateInit2=ft,e.deflateReset=lt,e.deflateResetKeep=ct,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?y:(t.state.gzhead=e,m):y},e.deflate=function(t,e){var n,i,a,h;if(!t||!t.state||e>d||e<0)return t?K(t,y):y;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||i.status===Z&&e!==f)return K(t,0===t.avail_out?g:y);if(i.strm=t,n=i.last_flush,i.last_flush=e,i.status===B)if(2===i.wrap)t.adler=0,nt(i,31),nt(i,139),nt(i,8),i.gzhead?(nt(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),nt(i,255&i.gzhead.time),nt(i,i.gzhead.time>>8&255),nt(i,i.gzhead.time>>16&255),nt(i,i.gzhead.time>>24&255),nt(i,9===i.level?2:i.strategy>=b||i.level<2?4:0),nt(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(nt(i,255&i.gzhead.extra.length),nt(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=o(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=D):(nt(i,0),nt(i,0),nt(i,0),nt(i,0),nt(i,0),nt(i,9===i.level?2:i.strategy>=b||i.level<2?4:0),nt(i,Y),i.status=q);else{var v=S+(i.w_bits-8<<4)<<8;v|=(i.strategy>=b||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(v|=L),v+=31-v%31,i.status=q,rt(i,v),0!==i.strstart&&(rt(i,t.adler>>>16),rt(i,65535&t.adler)),t.adler=1}if(i.status===D)if(i.gzhead.extra){for(a=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>a&&(t.adler=o(t.adler,i.pending_buf,i.pending-a,a)),tt(t),a=i.pending,i.pending!==i.pending_buf_size));)nt(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>a&&(t.adler=o(t.adler,i.pending_buf,i.pending-a,a)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=N)}else i.status=N;if(i.status===N)if(i.gzhead.name){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=o(t.adler,i.pending_buf,i.pending-a,a)),tt(t),a=i.pending,i.pending===i.pending_buf_size)){h=1;break}h=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,nt(i,h)}while(0!==h);i.gzhead.hcrc&&i.pending>a&&(t.adler=o(t.adler,i.pending_buf,i.pending-a,a)),0===h&&(i.gzindex=0,i.status=j)}else i.status=j;if(i.status===j)if(i.gzhead.comment){a=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>a&&(t.adler=o(t.adler,i.pending_buf,i.pending-a,a)),tt(t),a=i.pending,i.pending===i.pending_buf_size)){h=1;break}h=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,nt(i,h)}while(0!==h);i.gzhead.hcrc&&i.pending>a&&(t.adler=o(t.adler,i.pending_buf,i.pending-a,a)),0===h&&(i.status=H)}else i.status=H;if(i.status===H&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&tt(t),i.pending+2<=i.pending_buf_size&&(nt(i,255&t.adler),nt(i,t.adler>>8&255),t.adler=0,i.status=q)):i.status=q),0!==i.pending){if(tt(t),0===t.avail_out)return i.last_flush=-1,m}else if(0===t.avail_in&&J(e)<=J(n)&&e!==f)return K(t,g);if(i.status===Z&&0!==t.avail_in)return K(t,g);if(0!==t.avail_in||0!==i.lookahead||e!==u&&i.status!==Z){var x=i.strategy===b?function(t,e){for(var n;;){if(0===t.lookahead&&(st(t),0===t.lookahead)){if(e===u)return G;break}if(t.match_length=0,n=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(et(t,!1),0===t.strm.avail_out))return G}return t.insert=0,e===f?(et(t,!0),0===t.strm.avail_out?Q:X):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?G:W}(i,e):i.strategy===w?function(t,e){for(var n,r,i,a,o=t.window;;){if(t.lookahead<=U){if(st(t),t.lookahead<=U&&e===u)return G;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=F&&t.strstart>0&&(r=o[i=t.strstart-1])===o[++i]&&r===o[++i]&&r===o[++i]){a=t.strstart+U;do{}while(r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&r===o[++i]&&i<a);t.match_length=U-(a-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=F?(n=s._tr_tally(t,1,t.match_length-F),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(et(t,!1),0===t.strm.avail_out))return G}return t.insert=0,e===f?(et(t,!0),0===t.strm.avail_out?Q:X):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?G:W}(i,e):r[i.level].func(i,e);if(x!==Q&&x!==X||(i.status=Z),x===G||x===Q)return 0===t.avail_out&&(i.last_flush=-1),m;if(x===W&&(e===c?s._tr_align(i):e!==d&&(s._tr_stored_block(i,0,0,!1),e===l&&($(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),tt(t),0===t.avail_out))return i.last_flush=-1,m}return e!==f?m:i.wrap<=0?p:(2===i.wrap?(nt(i,255&t.adler),nt(i,t.adler>>8&255),nt(i,t.adler>>16&255),nt(i,t.adler>>24&255),nt(i,255&t.total_in),nt(i,t.total_in>>8&255),nt(i,t.total_in>>16&255),nt(i,t.total_in>>24&255)):(rt(i,t.adler>>>16),rt(i,65535&t.adler)),tt(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?m:p)},e.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==B&&e!==D&&e!==N&&e!==j&&e!==H&&e!==q&&e!==Z?K(t,y):(t.state=null,e===q?K(t,v):m):y},e.deflateSetDictionary=function(t,e){var n,r,s,o,h,u,c,l,f=e.length;if(!t||!t.state)return y;if(2===(o=(n=t.state).wrap)||1===o&&n.status!==B||n.lookahead)return y;for(1===o&&(t.adler=a(t.adler,e,f,0)),n.wrap=0,f>=n.w_size&&(0===o&&($(n.head),n.strstart=0,n.block_start=0,n.insert=0),l=new i.Buf8(n.w_size),i.arraySet(l,e,f-n.w_size,n.w_size,0),e=l,f=n.w_size),h=t.avail_in,u=t.next_in,c=t.input,t.avail_in=f,t.next_in=0,t.input=e,st(n);n.lookahead>=F;){r=n.strstart,s=n.lookahead-(F-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+F-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++}while(--s);n.strstart=r,n.lookahead=F-1,st(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=F-1,n.match_available=0,t.next_in=u,t.input=c,t.avail_in=h,n.wrap=o,m},e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,n){"use strict";var r=n(10),i=4,s=0,a=1,o=2;function h(t){for(var e=t.length;--e>=0;)t[e]=0}var u=0,c=1,l=2,f=29,d=256,m=d+1+f,p=30,y=19,v=2*m+1,g=15,x=16,_=7,b=256,w=16,k=17,z=18,E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],S=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],I=new Array(2*(m+2));h(I);var T=new Array(2*p);h(T);var C=new Array(512);h(C);var O=new Array(256);h(O);var R=new Array(f);h(R);var P,F,U,V=new Array(p);function L(t,e,n,r,i){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=t&&t.length}function B(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function D(t){return t<256?C[t]:C[256+(t>>>7)]}function N(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function j(t,e,n){t.bi_valid>x-n?(t.bi_buf|=e<<t.bi_valid&65535,N(t,t.bi_buf),t.bi_buf=e>>x-t.bi_valid,t.bi_valid+=n-x):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function H(t,e,n){j(t,n[2*e],n[2*e+1])}function q(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function Z(t,e,n){var r,i,s=new Array(g+1),a=0;for(r=1;r<=g;r++)s[r]=a=a+n[r-1]<<1;for(i=0;i<=e;i++){var o=t[2*i+1];0!==o&&(t[2*i]=q(s[o]++,o))}}function G(t){var e;for(e=0;e<m;e++)t.dyn_ltree[2*e]=0;for(e=0;e<p;e++)t.dyn_dtree[2*e]=0;for(e=0;e<y;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*b]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function W(t){t.bi_valid>8?N(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function Q(t,e,n,r){var i=2*e,s=2*n;return t[i]<t[s]||t[i]===t[s]&&r[e]<=r[n]}function X(t,e,n){for(var r=t.heap[n],i=n<<1;i<=t.heap_len&&(i<t.heap_len&&Q(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!Q(e,r,t.heap[i],t.depth));)t.heap[n]=t.heap[i],n=i,i<<=1;t.heap[n]=r}function Y(t,e,n){var r,i,s,a,o=0;if(0!==t.last_lit)do{r=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],i=t.pending_buf[t.l_buf+o],o++,0===r?H(t,i,e):(H(t,(s=O[i])+d+1,e),0!==(a=E[s])&&j(t,i-=R[s],a),H(t,s=D(--r),n),0!==(a=S[s])&&j(t,r-=V[s],a))}while(o<t.last_lit);H(t,b,e)}function K(t,e){var n,r,i,s=e.dyn_tree,a=e.stat_desc.static_tree,o=e.stat_desc.has_stree,h=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=v,n=0;n<h;n++)0!==s[2*n]?(t.heap[++t.heap_len]=u=n,t.depth[n]=0):s[2*n+1]=0;for(;t.heap_len<2;)s[2*(i=t.heap[++t.heap_len]=u<2?++u:0)]=1,t.depth[i]=0,t.opt_len--,o&&(t.static_len-=a[2*i+1]);for(e.max_code=u,n=t.heap_len>>1;n>=1;n--)X(t,s,n);i=h;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],X(t,s,1),r=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=r,s[2*i]=s[2*n]+s[2*r],t.depth[i]=(t.depth[n]>=t.depth[r]?t.depth[n]:t.depth[r])+1,s[2*n+1]=s[2*r+1]=i,t.heap[1]=i++,X(t,s,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,r,i,s,a,o,h=e.dyn_tree,u=e.max_code,c=e.stat_desc.static_tree,l=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,m=e.stat_desc.max_length,p=0;for(s=0;s<=g;s++)t.bl_count[s]=0;for(h[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<v;n++)(s=h[2*h[2*(r=t.heap[n])+1]+1]+1)>m&&(s=m,p++),h[2*r+1]=s,r>u||(t.bl_count[s]++,a=0,r>=d&&(a=f[r-d]),o=h[2*r],t.opt_len+=o*(s+a),l&&(t.static_len+=o*(c[2*r+1]+a)));if(0!==p){do{for(s=m-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[m]--,p-=2}while(p>0);for(s=m;0!==s;s--)for(r=t.bl_count[s];0!==r;)(i=t.heap[--n])>u||(h[2*i+1]!==s&&(t.opt_len+=(s-h[2*i+1])*h[2*i],h[2*i+1]=s),r--)}}(t,e),Z(s,u,t.bl_count)}function J(t,e,n){var r,i,s=-1,a=e[1],o=0,h=7,u=4;for(0===a&&(h=138,u=3),e[2*(n+1)+1]=65535,r=0;r<=n;r++)i=a,a=e[2*(r+1)+1],++o<h&&i===a||(o<u?t.bl_tree[2*i]+=o:0!==i?(i!==s&&t.bl_tree[2*i]++,t.bl_tree[2*w]++):o<=10?t.bl_tree[2*k]++:t.bl_tree[2*z]++,o=0,s=i,0===a?(h=138,u=3):i===a?(h=6,u=3):(h=7,u=4))}function $(t,e,n){var r,i,s=-1,a=e[1],o=0,h=7,u=4;for(0===a&&(h=138,u=3),r=0;r<=n;r++)if(i=a,a=e[2*(r+1)+1],!(++o<h&&i===a)){if(o<u)do{H(t,i,t.bl_tree)}while(0!=--o);else 0!==i?(i!==s&&(H(t,i,t.bl_tree),o--),H(t,w,t.bl_tree),j(t,o-3,2)):o<=10?(H(t,k,t.bl_tree),j(t,o-3,3)):(H(t,z,t.bl_tree),j(t,o-11,7));o=0,s=i,0===a?(h=138,u=3):i===a?(h=6,u=3):(h=7,u=4)}}h(V);var tt=!1;function et(t,e,n,i){j(t,(u<<1)+(i?1:0),3),function(t,e,n,i){W(t),i&&(N(t,n),N(t,~n)),r.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n,!0)}e._tr_init=function(t){tt||(!function(){var t,e,n,r,i,s=new Array(g+1);for(n=0,r=0;r<f-1;r++)for(R[r]=n,t=0;t<1<<E[r];t++)O[n++]=r;for(O[n-1]=r,i=0,r=0;r<16;r++)for(V[r]=i,t=0;t<1<<S[r];t++)C[i++]=r;for(i>>=7;r<p;r++)for(V[r]=i<<7,t=0;t<1<<S[r]-7;t++)C[256+i++]=r;for(e=0;e<=g;e++)s[e]=0;for(t=0;t<=143;)I[2*t+1]=8,t++,s[8]++;for(;t<=255;)I[2*t+1]=9,t++,s[9]++;for(;t<=279;)I[2*t+1]=7,t++,s[7]++;for(;t<=287;)I[2*t+1]=8,t++,s[8]++;for(Z(I,m+1,s),t=0;t<p;t++)T[2*t+1]=5,T[2*t]=q(t,5);P=new L(I,E,d+1,m,g),F=new L(T,S,0,p,g),U=new L(new Array(0),M,0,y,_)}(),tt=!0),t.l_desc=new B(t.dyn_ltree,P),t.d_desc=new B(t.dyn_dtree,F),t.bl_desc=new B(t.bl_tree,U),t.bi_buf=0,t.bi_valid=0,G(t)},e._tr_stored_block=et,e._tr_flush_block=function(t,e,n,r){var h,u,f=0;t.level>0?(t.strm.data_type===o&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return s;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return a;for(e=32;e<d;e++)if(0!==t.dyn_ltree[2*e])return a;return s}(t)),K(t,t.l_desc),K(t,t.d_desc),f=function(t){var e;for(J(t,t.dyn_ltree,t.l_desc.max_code),J(t,t.dyn_dtree,t.d_desc.max_code),K(t,t.bl_desc),e=y-1;e>=3&&0===t.bl_tree[2*A[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),h=t.opt_len+3+7>>>3,(u=t.static_len+3+7>>>3)<=h&&(h=u)):h=u=n+5,n+4<=h&&-1!==e?et(t,e,n,r):t.strategy===i||u===h?(j(t,(c<<1)+(r?1:0),3),Y(t,I,T)):(j(t,(l<<1)+(r?1:0),3),function(t,e,n,r){var i;for(j(t,e-257,5),j(t,n-1,5),j(t,r-4,4),i=0;i<r;i++)j(t,t.bl_tree[2*A[i]+1],3);$(t,t.dyn_ltree,e-1),$(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,f+1),Y(t,t.dyn_ltree,t.dyn_dtree)),G(t),r&&W(t)},e._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(O[n]+d+1)]++,t.dyn_dtree[2*D(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){j(t,c<<1,3),H(t,b,I),function(t){16===t.bi_valid?(N(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},function(t,e,n){"use strict";var r=n(26),i=n(10),s=n(18),a=n(20),o=n(15),h=n(19),u=n(29),c=Object.prototype.toString;function l(t){if(!(this instanceof l))return new l(t);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,e.windowBits);if(n!==a.Z_OK)throw new Error(o[n]);if(this.header=new u,r.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=s.string2buf(e.dictionary):"[object ArrayBuffer]"===c.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=r.inflateSetDictionary(this.strm,e.dictionary))!==a.Z_OK))throw new Error(o[n])}function f(t,e){var n=new l(e);if(n.push(t,!0),n.err)throw n.msg||o[n.err];return n.result}l.prototype.push=function(t,e){var n,o,h,u,l,f=this.strm,d=this.options.chunkSize,m=this.options.dictionary,p=!1;if(this.ended)return!1;o=e===~~e?e:!0===e?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof t?f.input=s.binstring2buf(t):"[object ArrayBuffer]"===c.call(t)?f.input=new Uint8Array(t):f.input=t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new i.Buf8(d),f.next_out=0,f.avail_out=d),(n=r.inflate(f,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&m&&(n=r.inflateSetDictionary(this.strm,m)),n===a.Z_BUF_ERROR&&!0===p&&(n=a.Z_OK,p=!1),n!==a.Z_STREAM_END&&n!==a.Z_OK)return this.onEnd(n),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&n!==a.Z_STREAM_END&&(0!==f.avail_in||o!==a.Z_FINISH&&o!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(h=s.utf8border(f.output,f.next_out),u=f.next_out-h,l=s.buf2string(f.output,h),f.next_out=u,f.avail_out=d-u,u&&i.arraySet(f.output,f.output,h,u,0),this.onData(l)):this.onData(i.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(p=!0)}while((f.avail_in>0||0===f.avail_out)&&n!==a.Z_STREAM_END);return n===a.Z_STREAM_END&&(o=a.Z_FINISH),o===a.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===a.Z_OK):o!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),f.avail_out=0,!0)},l.prototype.onData=function(t){this.chunks.push(t)},l.prototype.onEnd=function(t){t===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=l,e.inflate=f,e.inflateRaw=function(t,e){return(e=e||{}).raw=!0,f(t,e)},e.ungzip=f},function(t,e,n){"use strict";var r=n(10),i=n(16),s=n(17),a=n(27),o=n(28),h=0,u=1,c=2,l=4,f=5,d=6,m=0,p=1,y=2,v=-2,g=-3,x=-4,_=-5,b=8,w=1,k=2,z=3,E=4,S=5,M=6,A=7,I=8,T=9,C=10,O=11,R=12,P=13,F=14,U=15,V=16,L=17,B=18,D=19,N=20,j=21,H=22,q=23,Z=24,G=25,W=26,Q=27,X=28,Y=29,K=30,J=31,$=32,tt=852,et=592,nt=15;function rt(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function it(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function st(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=w,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new r.Buf32(tt),e.distcode=e.distdyn=new r.Buf32(et),e.sane=1,e.back=-1,m):v}function at(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,st(t)):v}function ot(t,e){var n,r;return t&&t.state?(r=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?v:(null!==r.window&&r.wbits!==e&&(r.window=null),r.wrap=n,r.wbits=e,at(t))):v}function ht(t,e){var n,r;return t?(r=new it,t.state=r,r.window=null,(n=ot(t,e))!==m&&(t.state=null),n):v}var ut,ct,lt=!0;function ft(t){if(lt){var e;for(ut=new r.Buf32(512),ct=new r.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(o(u,t.lens,0,288,ut,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;o(c,t.lens,0,32,ct,0,t.work,{bits:5}),lt=!1}t.lencode=ut,t.lenbits=9,t.distcode=ct,t.distbits=5}function dt(t,e,n,i){var s,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new r.Buf8(a.wsize)),i>=a.wsize?(r.arraySet(a.window,e,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((s=a.wsize-a.wnext)>i&&(s=i),r.arraySet(a.window,e,n-i,s,a.wnext),(i-=s)?(r.arraySet(a.window,e,n-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=s,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=s))),0}e.inflateReset=at,e.inflateReset2=ot,e.inflateResetKeep=st,e.inflateInit=function(t){return ht(t,nt)},e.inflateInit2=ht,e.inflate=function(t,e){var n,tt,et,nt,it,st,at,ot,ht,ut,ct,lt,mt,pt,yt,vt,gt,xt,_t,bt,wt,kt,zt,Et,St=0,Mt=new r.Buf8(4),At=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return v;(n=t.state).mode===R&&(n.mode=P),it=t.next_out,et=t.output,at=t.avail_out,nt=t.next_in,tt=t.input,st=t.avail_in,ot=n.hold,ht=n.bits,ut=st,ct=at,kt=m;t:for(;;)switch(n.mode){case w:if(0===n.wrap){n.mode=P;break}for(;ht<16;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}if(2&n.wrap&&35615===ot){n.check=0,Mt[0]=255&ot,Mt[1]=ot>>>8&255,n.check=s(n.check,Mt,2,0),ot=0,ht=0,n.mode=k;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&ot)<<8)+(ot>>8))%31){t.msg="incorrect header check",n.mode=K;break}if((15&ot)!==b){t.msg="unknown compression method",n.mode=K;break}if(ht-=4,wt=8+(15&(ot>>>=4)),0===n.wbits)n.wbits=wt;else if(wt>n.wbits){t.msg="invalid window size",n.mode=K;break}n.dmax=1<<wt,t.adler=n.check=1,n.mode=512&ot?C:R,ot=0,ht=0;break;case k:for(;ht<16;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}if(n.flags=ot,(255&n.flags)!==b){t.msg="unknown compression method",n.mode=K;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=K;break}n.head&&(n.head.text=ot>>8&1),512&n.flags&&(Mt[0]=255&ot,Mt[1]=ot>>>8&255,n.check=s(n.check,Mt,2,0)),ot=0,ht=0,n.mode=z;case z:for(;ht<32;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}n.head&&(n.head.time=ot),512&n.flags&&(Mt[0]=255&ot,Mt[1]=ot>>>8&255,Mt[2]=ot>>>16&255,Mt[3]=ot>>>24&255,n.check=s(n.check,Mt,4,0)),ot=0,ht=0,n.mode=E;case E:for(;ht<16;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}n.head&&(n.head.xflags=255&ot,n.head.os=ot>>8),512&n.flags&&(Mt[0]=255&ot,Mt[1]=ot>>>8&255,n.check=s(n.check,Mt,2,0)),ot=0,ht=0,n.mode=S;case S:if(1024&n.flags){for(;ht<16;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}n.length=ot,n.head&&(n.head.extra_len=ot),512&n.flags&&(Mt[0]=255&ot,Mt[1]=ot>>>8&255,n.check=s(n.check,Mt,2,0)),ot=0,ht=0}else n.head&&(n.head.extra=null);n.mode=M;case M:if(1024&n.flags&&((lt=n.length)>st&&(lt=st),lt&&(n.head&&(wt=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,tt,nt,lt,wt)),512&n.flags&&(n.check=s(n.check,tt,lt,nt)),st-=lt,nt+=lt,n.length-=lt),n.length))break t;n.length=0,n.mode=A;case A:if(2048&n.flags){if(0===st)break t;lt=0;do{wt=tt[nt+lt++],n.head&&wt&&n.length<65536&&(n.head.name+=String.fromCharCode(wt))}while(wt&&lt<st);if(512&n.flags&&(n.check=s(n.check,tt,lt,nt)),st-=lt,nt+=lt,wt)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=I;case I:if(4096&n.flags){if(0===st)break t;lt=0;do{wt=tt[nt+lt++],n.head&&wt&&n.length<65536&&(n.head.comment+=String.fromCharCode(wt))}while(wt&&lt<st);if(512&n.flags&&(n.check=s(n.check,tt,lt,nt)),st-=lt,nt+=lt,wt)break t}else n.head&&(n.head.comment=null);n.mode=T;case T:if(512&n.flags){for(;ht<16;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}if(ot!==(65535&n.check)){t.msg="header crc mismatch",n.mode=K;break}ot=0,ht=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=R;break;case C:for(;ht<32;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}t.adler=n.check=rt(ot),ot=0,ht=0,n.mode=O;case O:if(0===n.havedict)return t.next_out=it,t.avail_out=at,t.next_in=nt,t.avail_in=st,n.hold=ot,n.bits=ht,y;t.adler=n.check=1,n.mode=R;case R:if(e===f||e===d)break t;case P:if(n.last){ot>>>=7&ht,ht-=7&ht,n.mode=Q;break}for(;ht<3;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}switch(n.last=1&ot,ht-=1,3&(ot>>>=1)){case 0:n.mode=F;break;case 1:if(ft(n),n.mode=N,e===d){ot>>>=2,ht-=2;break t}break;case 2:n.mode=L;break;case 3:t.msg="invalid block type",n.mode=K}ot>>>=2,ht-=2;break;case F:for(ot>>>=7&ht,ht-=7&ht;ht<32;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}if((65535&ot)!=(ot>>>16^65535)){t.msg="invalid stored block lengths",n.mode=K;break}if(n.length=65535&ot,ot=0,ht=0,n.mode=U,e===d)break t;case U:n.mode=V;case V:if(lt=n.length){if(lt>st&&(lt=st),lt>at&&(lt=at),0===lt)break t;r.arraySet(et,tt,nt,lt,it),st-=lt,nt+=lt,at-=lt,it+=lt,n.length-=lt;break}n.mode=R;break;case L:for(;ht<14;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}if(n.nlen=257+(31&ot),ot>>>=5,ht-=5,n.ndist=1+(31&ot),ot>>>=5,ht-=5,n.ncode=4+(15&ot),ot>>>=4,ht-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=K;break}n.have=0,n.mode=B;case B:for(;n.have<n.ncode;){for(;ht<3;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}n.lens[At[n.have++]]=7&ot,ot>>>=3,ht-=3}for(;n.have<19;)n.lens[At[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,zt={bits:n.lenbits},kt=o(h,n.lens,0,19,n.lencode,0,n.work,zt),n.lenbits=zt.bits,kt){t.msg="invalid code lengths set",n.mode=K;break}n.have=0,n.mode=D;case D:for(;n.have<n.nlen+n.ndist;){for(;vt=(St=n.lencode[ot&(1<<n.lenbits)-1])>>>16&255,gt=65535&St,!((yt=St>>>24)<=ht);){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}if(gt<16)ot>>>=yt,ht-=yt,n.lens[n.have++]=gt;else{if(16===gt){for(Et=yt+2;ht<Et;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}if(ot>>>=yt,ht-=yt,0===n.have){t.msg="invalid bit length repeat",n.mode=K;break}wt=n.lens[n.have-1],lt=3+(3&ot),ot>>>=2,ht-=2}else if(17===gt){for(Et=yt+3;ht<Et;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}ht-=yt,wt=0,lt=3+(7&(ot>>>=yt)),ot>>>=3,ht-=3}else{for(Et=yt+7;ht<Et;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}ht-=yt,wt=0,lt=11+(127&(ot>>>=yt)),ot>>>=7,ht-=7}if(n.have+lt>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=K;break}for(;lt--;)n.lens[n.have++]=wt}}if(n.mode===K)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=K;break}if(n.lenbits=9,zt={bits:n.lenbits},kt=o(u,n.lens,0,n.nlen,n.lencode,0,n.work,zt),n.lenbits=zt.bits,kt){t.msg="invalid literal/lengths set",n.mode=K;break}if(n.distbits=6,n.distcode=n.distdyn,zt={bits:n.distbits},kt=o(c,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,zt),n.distbits=zt.bits,kt){t.msg="invalid distances set",n.mode=K;break}if(n.mode=N,e===d)break t;case N:n.mode=j;case j:if(st>=6&&at>=258){t.next_out=it,t.avail_out=at,t.next_in=nt,t.avail_in=st,n.hold=ot,n.bits=ht,a(t,ct),it=t.next_out,et=t.output,at=t.avail_out,nt=t.next_in,tt=t.input,st=t.avail_in,ot=n.hold,ht=n.bits,n.mode===R&&(n.back=-1);break}for(n.back=0;vt=(St=n.lencode[ot&(1<<n.lenbits)-1])>>>16&255,gt=65535&St,!((yt=St>>>24)<=ht);){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}if(vt&&0==(240&vt)){for(xt=yt,_t=vt,bt=gt;vt=(St=n.lencode[bt+((ot&(1<<xt+_t)-1)>>xt)])>>>16&255,gt=65535&St,!(xt+(yt=St>>>24)<=ht);){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}ot>>>=xt,ht-=xt,n.back+=xt}if(ot>>>=yt,ht-=yt,n.back+=yt,n.length=gt,0===vt){n.mode=W;break}if(32&vt){n.back=-1,n.mode=R;break}if(64&vt){t.msg="invalid literal/length code",n.mode=K;break}n.extra=15&vt,n.mode=H;case H:if(n.extra){for(Et=n.extra;ht<Et;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}n.length+=ot&(1<<n.extra)-1,ot>>>=n.extra,ht-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=q;case q:for(;vt=(St=n.distcode[ot&(1<<n.distbits)-1])>>>16&255,gt=65535&St,!((yt=St>>>24)<=ht);){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}if(0==(240&vt)){for(xt=yt,_t=vt,bt=gt;vt=(St=n.distcode[bt+((ot&(1<<xt+_t)-1)>>xt)])>>>16&255,gt=65535&St,!(xt+(yt=St>>>24)<=ht);){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}ot>>>=xt,ht-=xt,n.back+=xt}if(ot>>>=yt,ht-=yt,n.back+=yt,64&vt){t.msg="invalid distance code",n.mode=K;break}n.offset=gt,n.extra=15&vt,n.mode=Z;case Z:if(n.extra){for(Et=n.extra;ht<Et;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}n.offset+=ot&(1<<n.extra)-1,ot>>>=n.extra,ht-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=K;break}n.mode=G;case G:if(0===at)break t;if(lt=ct-at,n.offset>lt){if((lt=n.offset-lt)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=K;break}lt>n.wnext?(lt-=n.wnext,mt=n.wsize-lt):mt=n.wnext-lt,lt>n.length&&(lt=n.length),pt=n.window}else pt=et,mt=it-n.offset,lt=n.length;lt>at&&(lt=at),at-=lt,n.length-=lt;do{et[it++]=pt[mt++]}while(--lt);0===n.length&&(n.mode=j);break;case W:if(0===at)break t;et[it++]=n.length,at--,n.mode=j;break;case Q:if(n.wrap){for(;ht<32;){if(0===st)break t;st--,ot|=tt[nt++]<<ht,ht+=8}if(ct-=at,t.total_out+=ct,n.total+=ct,ct&&(t.adler=n.check=n.flags?s(n.check,et,ct,it-ct):i(n.check,et,ct,it-ct)),ct=at,(n.flags?ot:rt(ot))!==n.check){t.msg="incorrect data check",n.mode=K;break}ot=0,ht=0}n.mode=X;case X:if(n.wrap&&n.flags){for(;ht<32;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}if(ot!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=K;break}ot=0,ht=0}n.mode=Y;case Y:kt=p;break t;case K:kt=g;break t;case J:return x;case $:default:return v}return t.next_out=it,t.avail_out=at,t.next_in=nt,t.avail_in=st,n.hold=ot,n.bits=ht,(n.wsize||ct!==t.avail_out&&n.mode<K&&(n.mode<Q||e!==l))&&dt(t,t.output,t.next_out,ct-t.avail_out)?(n.mode=J,x):(ut-=t.avail_in,ct-=t.avail_out,t.total_in+=ut,t.total_out+=ct,n.total+=ct,n.wrap&&ct&&(t.adler=n.check=n.flags?s(n.check,et,ct,t.next_out-ct):i(n.check,et,ct,t.next_out-ct)),t.data_type=n.bits+(n.last?64:0)+(n.mode===R?128:0)+(n.mode===N||n.mode===U?256:0),(0===ut&&0===ct||e===l)&&kt===m&&(kt=_),kt)},e.inflateEnd=function(t){if(!t||!t.state)return v;var e=t.state;return e.window&&(e.window=null),t.state=null,m},e.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?v:(n.head=e,e.done=!1,m):v},e.inflateSetDictionary=function(t,e){var n,r=e.length;return t&&t.state?0!==(n=t.state).wrap&&n.mode!==O?v:n.mode===O&&i(1,e,r,0)!==n.check?g:dt(t,e,r,r)?(n.mode=J,x):(n.havedict=1,m):v},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,n){"use strict";t.exports=function(t,e){var n,r,i,s,a,o,h,u,c,l,f,d,m,p,y,v,g,x,_,b,w,k,z,E,S;n=t.state,r=t.next_in,E=t.input,i=r+(t.avail_in-5),s=t.next_out,S=t.output,a=s-(e-t.avail_out),o=s+(t.avail_out-257),h=n.dmax,u=n.wsize,c=n.whave,l=n.wnext,f=n.window,d=n.hold,m=n.bits,p=n.lencode,y=n.distcode,v=(1<<n.lenbits)-1,g=(1<<n.distbits)-1;t:do{m<15&&(d+=E[r++]<<m,m+=8,d+=E[r++]<<m,m+=8),x=p[d&v];e:for(;;){if(d>>>=_=x>>>24,m-=_,0===(_=x>>>16&255))S[s++]=65535&x;else{if(!(16&_)){if(0==(64&_)){x=p[(65535&x)+(d&(1<<_)-1)];continue e}if(32&_){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}b=65535&x,(_&=15)&&(m<_&&(d+=E[r++]<<m,m+=8),b+=d&(1<<_)-1,d>>>=_,m-=_),m<15&&(d+=E[r++]<<m,m+=8,d+=E[r++]<<m,m+=8),x=y[d&g];n:for(;;){if(d>>>=_=x>>>24,m-=_,!(16&(_=x>>>16&255))){if(0==(64&_)){x=y[(65535&x)+(d&(1<<_)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(w=65535&x,m<(_&=15)&&(d+=E[r++]<<m,(m+=8)<_&&(d+=E[r++]<<m,m+=8)),(w+=d&(1<<_)-1)>h){t.msg="invalid distance too far back",n.mode=30;break t}if(d>>>=_,m-=_,w>(_=s-a)){if((_=w-_)>c&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(k=0,z=f,0===l){if(k+=u-_,_<b){b-=_;do{S[s++]=f[k++]}while(--_);k=s-w,z=S}}else if(l<_){if(k+=u+l-_,(_-=l)<b){b-=_;do{S[s++]=f[k++]}while(--_);if(k=0,l<b){b-=_=l;do{S[s++]=f[k++]}while(--_);k=s-w,z=S}}}else if(k+=l-_,_<b){b-=_;do{S[s++]=f[k++]}while(--_);k=s-w,z=S}for(;b>2;)S[s++]=z[k++],S[s++]=z[k++],S[s++]=z[k++],b-=3;b&&(S[s++]=z[k++],b>1&&(S[s++]=z[k++]))}else{k=s-w;do{S[s++]=S[k++],S[s++]=S[k++],S[s++]=S[k++],b-=3}while(b>2);b&&(S[s++]=S[k++],b>1&&(S[s++]=S[k++]))}break}}break}}while(r<i&&s<o);r-=b=m>>3,d&=(1<<(m-=b<<3))-1,t.next_in=r,t.next_out=s,t.avail_in=r<i?i-r+5:5-(r-i),t.avail_out=s<o?o-s+257:257-(s-o),n.hold=d,n.bits=m}},function(t,e,n){"use strict";var r=n(10),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,n,h,u,c,l,f){var d,m,p,y,v,g,x,_,b,w=f.bits,k=0,z=0,E=0,S=0,M=0,A=0,I=0,T=0,C=0,O=0,R=null,P=0,F=new r.Buf16(16),U=new r.Buf16(16),V=null,L=0;for(k=0;k<=15;k++)F[k]=0;for(z=0;z<h;z++)F[e[n+z]]++;for(M=w,S=15;S>=1&&0===F[S];S--);if(M>S&&(M=S),0===S)return u[c++]=20971520,u[c++]=20971520,f.bits=1,0;for(E=1;E<S&&0===F[E];E++);for(M<E&&(M=E),T=1,k=1;k<=15;k++)if(T<<=1,(T-=F[k])<0)return-1;if(T>0&&(0===t||1!==S))return-1;for(U[1]=0,k=1;k<15;k++)U[k+1]=U[k]+F[k];for(z=0;z<h;z++)0!==e[n+z]&&(l[U[e[n+z]]++]=z);if(0===t?(R=V=l,g=19):1===t?(R=i,P-=257,V=s,L-=257,g=256):(R=a,V=o,g=-1),O=0,z=0,k=E,v=c,A=M,I=0,p=-1,y=(C=1<<M)-1,1===t&&C>852||2===t&&C>592)return 1;for(;;){x=k-I,l[z]<g?(_=0,b=l[z]):l[z]>g?(_=V[L+l[z]],b=R[P+l[z]]):(_=96,b=0),d=1<<k-I,E=m=1<<A;do{u[v+(O>>I)+(m-=d)]=x<<24|_<<16|b|0}while(0!==m);for(d=1<<k-1;O&d;)d>>=1;if(0!==d?(O&=d-1,O+=d):O=0,z++,0==--F[k]){if(k===S)break;k=e[n+l[z]]}if(k>M&&(O&y)!==p){for(0===I&&(I=M),v+=E,T=1<<(A=k-I);A+I<S&&!((T-=F[A+I])<=0);)A++,T<<=1;if(C+=1<<A,1===t&&C>852||2===t&&C>592)return 1;u[p=O&y]=M<<24|A<<16|v-c|0}}return 0!==O&&(u[v+O]=k-I<<24|64<<16|0),f.bits=M,0}},function(t,e,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(t,e){function n(){this.pending=0,this.max=1/0,this.listeners=[],this.waiting=[],this.error=null}function r(t){t.pending+=1;var e=!1;return function(r){if(e)throw new Error("callback called twice");if(e=!0,t.error=t.error||r,t.pending-=1,t.waiting.length>0&&t.pending<t.max)i(t,t.waiting.shift());else if(0===t.pending){var s=t.listeners;t.listeners=[],s.forEach(n)}};function n(e){e(t.error)}}function i(t,e){e(r(t))}t.exports=n,n.prototype.go=function(t){this.pending<this.max?i(this,t):this.waiting.push(t)},n.prototype.wait=function(t){0===this.pending?t(this.error):this.listeners.push(t)},n.prototype.hold=function(){return r(this)}},function(t,e){\n/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */(function(){"use strict";function t(t){throw t}var e,n=void 0,r=this;function i(t,e){var i,s=t.split("."),a=r;!(s[0]in a)&&a.execScript&&a.execScript("var "+s[0]);for(;s.length&&(i=s.shift());)s.length||e===n?a=a[i]?a[i]:a[i]={}:a[i]=e}var s,a="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array;for(new(a?Uint8Array:Array)(256),s=0;256>s;++s)for(var o=(o=s)>>>1;o;o>>>=1)0;var h=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],u=a?new Uint32Array(h):h;function c(t){var e,n,r,i,s,o,h,u,c,l=t.length,f=0,d=Number.POSITIVE_INFINITY;for(u=0;u<l;++u)t[u]>f&&(f=t[u]),t[u]<d&&(d=t[u]);for(e=1<<f,n=new(a?Uint32Array:Array)(e),r=1,i=0,s=2;r<=f;){for(u=0;u<l;++u)if(t[u]===r){for(o=0,h=i,c=0;c<r;++c)o=o<<1|1&h,h>>=1;for(c=o;c<e;c+=s)n[c]=r<<16|u;++i}++r,i<<=1,s<<=1}return[n,f,d]}var l,f=[];for(l=0;288>l;l++)switch(!0){case 143>=l:f.push([l+48,8]);break;case 255>=l:f.push([l-144+400,9]);break;case 279>=l:f.push([l-256+0,7]);break;case 287>=l:f.push([l-280+192,8]);break;default:t("invalid literal: "+l)}var d=function(){function e(e){switch(!0){case 3===e:return[257,e-3,0];case 4===e:return[258,e-4,0];case 5===e:return[259,e-5,0];case 6===e:return[260,e-6,0];case 7===e:return[261,e-7,0];case 8===e:return[262,e-8,0];case 9===e:return[263,e-9,0];case 10===e:return[264,e-10,0];case 12>=e:return[265,e-11,1];case 14>=e:return[266,e-13,1];case 16>=e:return[267,e-15,1];case 18>=e:return[268,e-17,1];case 22>=e:return[269,e-19,2];case 26>=e:return[270,e-23,2];case 30>=e:return[271,e-27,2];case 34>=e:return[272,e-31,2];case 42>=e:return[273,e-35,3];case 50>=e:return[274,e-43,3];case 58>=e:return[275,e-51,3];case 66>=e:return[276,e-59,3];case 82>=e:return[277,e-67,4];case 98>=e:return[278,e-83,4];case 114>=e:return[279,e-99,4];case 130>=e:return[280,e-115,4];case 162>=e:return[281,e-131,5];case 194>=e:return[282,e-163,5];case 226>=e:return[283,e-195,5];case 257>=e:return[284,e-227,5];case 258===e:return[285,e-258,0];default:t("invalid length: "+e)}}var n,r,i=[];for(n=3;258>=n;n++)r=e(n),i[n]=r[2]<<24|r[1]<<16|r[0];return i}();function m(e,n){switch(this.l=[],this.m=32768,this.d=this.f=this.c=this.t=0,this.input=a?new Uint8Array(e):e,this.u=!1,this.n=y,this.K=!1,!n&&(n={})||(n.index&&(this.c=n.index),n.bufferSize&&(this.m=n.bufferSize),n.bufferType&&(this.n=n.bufferType),n.resize&&(this.K=n.resize)),this.n){case p:this.a=32768,this.b=new(a?Uint8Array:Array)(32768+this.m+258);break;case y:this.a=0,this.b=new(a?Uint8Array:Array)(this.m),this.e=this.W,this.B=this.R,this.q=this.V;break;default:t(Error("invalid inflate mode"))}}a&&new Uint32Array(d);var p=0,y=1;m.prototype.r=function(){for(;!this.u;){var e=F(this,3);switch(1&e&&(this.u=!0),e>>>=1){case 0:var r=this.input,i=this.c,s=this.b,o=this.a,h=n,u=n,c=n,l=s.length,f=n;switch(this.d=this.f=0,(h=r[i++])===n&&t(Error("invalid uncompressed block header: LEN (first byte)")),u=h,(h=r[i++])===n&&t(Error("invalid uncompressed block header: LEN (second byte)")),u|=h<<8,(h=r[i++])===n&&t(Error("invalid uncompressed block header: NLEN (first byte)")),c=h,(h=r[i++])===n&&t(Error("invalid uncompressed block header: NLEN (second byte)")),u===~(c|=h<<8)&&t(Error("invalid uncompressed block header: length verify")),i+u>r.length&&t(Error("input buffer is broken")),this.n){case p:for(;o+u>s.length;){if(u-=f=l-o,a)s.set(r.subarray(i,i+f),o),o+=f,i+=f;else for(;f--;)s[o++]=r[i++];this.a=o,s=this.e(),o=this.a}break;case y:for(;o+u>s.length;)s=this.e({H:2});break;default:t(Error("invalid inflate mode"))}if(a)s.set(r.subarray(i,i+u),o),o+=u,i+=u;else for(;u--;)s[o++]=r[i++];this.c=i,this.a=o,this.b=s;break;case 1:this.q(O,P);break;case 2:V(this);break;default:t(Error("unknown BTYPE: "+e))}}return this.B()};var v,g,x=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],_=a?new Uint16Array(x):x,b=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],w=a?new Uint16Array(b):b,k=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],z=a?new Uint8Array(k):k,E=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],S=a?new Uint16Array(E):E,M=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],A=a?new Uint8Array(M):M,I=new(a?Uint8Array:Array)(288);for(v=0,g=I.length;v<g;++v)I[v]=143>=v?8:255>=v?9:279>=v?7:8;var T,C,O=c(I),R=new(a?Uint8Array:Array)(30);for(T=0,C=R.length;T<C;++T)R[T]=5;var P=c(R);function F(e,r){for(var i,s=e.f,a=e.d,o=e.input,h=e.c;a<r;)(i=o[h++])===n&&t(Error("input buffer is broken")),s|=i<<a,a+=8;return i=s&(1<<r)-1,e.f=s>>>r,e.d=a-r,e.c=h,i}function U(t,e){for(var r,i,s,a=t.f,o=t.d,h=t.input,u=t.c,c=e[0],l=e[1];o<l&&(r=h[u++])!==n;)a|=r<<o,o+=8;return s=(i=c[a&(1<<l)-1])>>>16,t.f=a>>s,t.d=o-s,t.c=u,65535&i}function V(t){function e(t,e,n){var r,i,s,a;for(a=0;a<t;)switch(r=U(this,e),r){case 16:for(s=3+F(this,2);s--;)n[a++]=i;break;case 17:for(s=3+F(this,3);s--;)n[a++]=0;i=0;break;case 18:for(s=11+F(this,7);s--;)n[a++]=0;i=0;break;default:i=n[a++]=r}return n}var n,r,i,s,o=F(t,5)+257,h=F(t,5)+1,u=F(t,4)+4,l=new(a?Uint8Array:Array)(_.length);for(s=0;s<u;++s)l[_[s]]=F(t,3);n=c(l),r=new(a?Uint8Array:Array)(o),i=new(a?Uint8Array:Array)(h),t.q(c(e.call(t,o,n,r)),c(e.call(t,h,n,i)))}function L(t){t=t||{},this.files=[],this.v=t.comment}function B(t,e){e=e||{},this.input=a&&t instanceof Array?new Uint8Array(t):t,this.c=0,this.ba=e.verify||!1,this.j=e.password}(e=m.prototype).q=function(t,e){var n=this.b,r=this.a;this.C=t;for(var i,s,a,o,h=n.length-258;256!==(i=U(this,t));)if(256>i)r>=h&&(this.a=r,n=this.e(),r=this.a),n[r++]=i;else for(o=w[s=i-257],0<z[s]&&(o+=F(this,z[s])),i=U(this,e),a=S[i],0<A[i]&&(a+=F(this,A[i])),r>=h&&(this.a=r,n=this.e(),r=this.a);o--;)n[r]=n[r++-a];for(;8<=this.d;)this.d-=8,this.c--;this.a=r},e.V=function(t,e){var n=this.b,r=this.a;this.C=t;for(var i,s,a,o,h=n.length;256!==(i=U(this,t));)if(256>i)r>=h&&(h=(n=this.e()).length),n[r++]=i;else for(o=w[s=i-257],0<z[s]&&(o+=F(this,z[s])),i=U(this,e),a=S[i],0<A[i]&&(a+=F(this,A[i])),r+o>h&&(h=(n=this.e()).length);o--;)n[r]=n[r++-a];for(;8<=this.d;)this.d-=8,this.c--;this.a=r},e.e=function(){var t,e,n=new(a?Uint8Array:Array)(this.a-32768),r=this.a-32768,i=this.b;if(a)n.set(i.subarray(32768,n.length));else for(t=0,e=n.length;t<e;++t)n[t]=i[t+32768];if(this.l.push(n),this.t+=n.length,a)i.set(i.subarray(r,r+32768));else for(t=0;32768>t;++t)i[t]=i[r+t];return this.a=32768,i},e.W=function(t){var e,n,r,i=this.input.length/this.c+1|0,s=this.input,o=this.b;return t&&("number"==typeof t.H&&(i=t.H),"number"==typeof t.P&&(i+=t.P)),2>i?n=(r=(s.length-this.c)/this.C[2]/2*258|0)<o.length?o.length+r:o.length<<1:n=o.length*i,a?(e=new Uint8Array(n)).set(o):e=o,this.b=e},e.B=function(){var t,e,n,r,i,s=0,o=this.b,h=this.l,u=new(a?Uint8Array:Array)(this.t+(this.a-32768));if(0===h.length)return a?this.b.subarray(32768,this.a):this.b.slice(32768,this.a);for(e=0,n=h.length;e<n;++e)for(r=0,i=(t=h[e]).length;r<i;++r)u[s++]=t[r];for(e=32768,n=this.a;e<n;++e)u[s++]=o[e];return this.l=[],this.buffer=u},e.R=function(){var t,e=this.a;return a?this.K?(t=new Uint8Array(e)).set(this.b.subarray(0,e)):t=this.b.subarray(0,e):(this.b.length>e&&(this.b.length=e),t=this.b),this.buffer=t},L.prototype.L=function(t){this.j=t},L.prototype.s=function(t){var e=65535&t[2]|2;return e*(1^e)>>8&255},L.prototype.k=function(t,e){t[0]=(u[255&(t[0]^e)]^t[0]>>>8)>>>0,t[1]=1+(6681*(20173*(t[1]+(255&t[0]))>>>0)>>>0)>>>0,t[2]=(u[255&(t[2]^t[1]>>>24)]^t[2]>>>8)>>>0},L.prototype.T=function(t){var e,n,r=[305419896,591751049,878082192];for(a&&(r=new Uint32Array(r)),e=0,n=t.length;e<n;++e)this.k(r,255&t[e]);return r};var D=0,N=8,j=[80,75,1,2],H=[80,75,3,4],q=[80,75,5,6];function Z(t,e){this.input=t,this.offset=e}function G(t,e){this.input=t,this.offset=e}Z.prototype.parse=function(){var e=this.input,n=this.offset;(e[n++]!==j[0]||e[n++]!==j[1]||e[n++]!==j[2]||e[n++]!==j[3])&&t(Error("invalid file header signature")),this.version=e[n++],this.ia=e[n++],this.Z=e[n++]|e[n++]<<8,this.I=e[n++]|e[n++]<<8,this.A=e[n++]|e[n++]<<8,this.time=e[n++]|e[n++]<<8,this.U=e[n++]|e[n++]<<8,this.p=(e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24)>>>0,this.z=(e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24)>>>0,this.J=(e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24)>>>0,this.h=e[n++]|e[n++]<<8,this.g=e[n++]|e[n++]<<8,this.F=e[n++]|e[n++]<<8,this.ea=e[n++]|e[n++]<<8,this.ga=e[n++]|e[n++]<<8,this.fa=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24,this.$=(e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24)>>>0,this.filename=String.fromCharCode.apply(null,a?e.subarray(n,n+=this.h):e.slice(n,n+=this.h)),this.X=a?e.subarray(n,n+=this.g):e.slice(n,n+=this.g),this.v=a?e.subarray(n,n+this.F):e.slice(n,n+this.F),this.length=n-this.offset};var W=1;function Q(e){var r,i,s,o,h=[],u={};if(!e.i){if(e.o===n){var c,l=e.input;if(!e.D)t:{var f,d=e.input;for(f=d.length-12;0<f;--f)if(d[f]===q[0]&&d[f+1]===q[1]&&d[f+2]===q[2]&&d[f+3]===q[3]){e.D=f;break t}t(Error("End of Central Directory Record not found"))}c=e.D,(l[c++]!==q[0]||l[c++]!==q[1]||l[c++]!==q[2]||l[c++]!==q[3])&&t(Error("invalid signature")),e.ha=l[c++]|l[c++]<<8,e.ja=l[c++]|l[c++]<<8,e.ka=l[c++]|l[c++]<<8,e.aa=l[c++]|l[c++]<<8,e.Q=(l[c++]|l[c++]<<8|l[c++]<<16|l[c++]<<24)>>>0,e.o=(l[c++]|l[c++]<<8|l[c++]<<16|l[c++]<<24)>>>0,e.w=l[c++]|l[c++]<<8,e.v=a?l.subarray(c,c+e.w):l.slice(c,c+e.w)}for(r=e.o,s=0,o=e.aa;s<o;++s)(i=new Z(e.input,r)).parse(),r+=i.length,h[s]=i,u[i.filename]=s;e.Q<r-e.o&&t(Error("invalid file header size")),e.i=h,e.G=u}}function X(t,e,n){return n^=t.s(e),t.k(e,n),n}G.prototype.parse=function(){var e=this.input,n=this.offset;(e[n++]!==H[0]||e[n++]!==H[1]||e[n++]!==H[2]||e[n++]!==H[3])&&t(Error("invalid local file header signature")),this.Z=e[n++]|e[n++]<<8,this.I=e[n++]|e[n++]<<8,this.A=e[n++]|e[n++]<<8,this.time=e[n++]|e[n++]<<8,this.U=e[n++]|e[n++]<<8,this.p=(e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24)>>>0,this.z=(e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24)>>>0,this.J=(e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24)>>>0,this.h=e[n++]|e[n++]<<8,this.g=e[n++]|e[n++]<<8,this.filename=String.fromCharCode.apply(null,a?e.subarray(n,n+=this.h):e.slice(n,n+=this.h)),this.X=a?e.subarray(n,n+=this.g):e.slice(n,n+=this.g),this.length=n-this.offset},(e=B.prototype).Y=function(){var t,e,n,r=[];for(this.i||Q(this),t=0,e=(n=this.i).length;t<e;++t)r[t]=n[t].filename;return r},e.r=function(e,r){var i,s;this.G||Q(this),(i=this.G[e])===n&&t(Error(e+" not found")),s=r||{};var o,h,c,l,f,d,p,y,v=this.input,g=this.i;if(g||Q(this),g[i]===n&&t(Error("wrong index")),h=g[i].$,(o=new G(this.input,h)).parse(),h+=o.length,c=o.z,0!=(o.I&W)){for(!s.password&&!this.j&&t(Error("please set password")),d=this.S(s.password||this.j),p=h,y=h+12;p<y;++p)X(this,d,v[p]);for(p=h+=12,y=h+(c-=12);p<y;++p)v[p]=X(this,d,v[p])}switch(o.A){case D:l=a?this.input.subarray(h,h+c):this.input.slice(h,h+c);break;case N:l=new m(this.input,{index:h,bufferSize:o.J}).r();break;default:t(Error("unknown compression type"))}if(this.ba){var x,_=n,b="number"==typeof _?_:_=0,w=l.length;for(x=-1,b=7&w;b--;++_)x=x>>>8^u[255&(x^l[_])];for(b=w>>3;b--;_+=8)x=(x=(x=(x=(x=(x=(x=(x=x>>>8^u[255&(x^l[_])])>>>8^u[255&(x^l[_+1])])>>>8^u[255&(x^l[_+2])])>>>8^u[255&(x^l[_+3])])>>>8^u[255&(x^l[_+4])])>>>8^u[255&(x^l[_+5])])>>>8^u[255&(x^l[_+6])])>>>8^u[255&(x^l[_+7])];f=(4294967295^x)>>>0,o.p!==f&&t(Error("wrong crc: file=0x"+o.p.toString(16)+", data=0x"+f.toString(16)))}return l},e.L=function(t){this.j=t},e.k=L.prototype.k,e.S=L.prototype.T,e.s=L.prototype.s,i("Zlib.Unzip",B),i("Zlib.Unzip.prototype.decompress",B.prototype.r),i("Zlib.Unzip.prototype.getFilenames",B.prototype.Y),i("Zlib.Unzip.prototype.setPassword",B.prototype.L)}).call(this)},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,n){"use strict";n.r(e);var r=n(11),i=n(0),s=n(8),a=n(1),o=n(4);function h(t){return(h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}for(var u="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",c=new Uint8Array(256),l=0;l<u.length;l++)c[u.charCodeAt(l)]=l;var f=function(t){var e,n,r,i,s,a=.75*t.length,o=t.length,h=0;"="===t[t.length-1]&&(a--,"="===t[t.length-2]&&a--);var u=new ArrayBuffer(a),l=new Uint8Array(u);for(e=0;e<o;e+=4)n=c[t.charCodeAt(e)],r=c[t.charCodeAt(e+1)],i=c[t.charCodeAt(e+2)],s=c[t.charCodeAt(e+3)],l[h++]=n<<2|r>>4,l[h++]=(15&r)<<4|i>>2,l[h++]=(3&i)<<6|63&s;return u};function d(t){if(this.loadedBuffers={},t instanceof Uint8Array){var e=new Int32Array(t.buffer,0,20);1179937895!==e[0]&&debug("glb header "+e[0]);var n=e[3],r=new Uint8Array(t.buffer,20,n),i=t.buffer.slice(20+n);t=function(t){var e;if(void 0!==("undefined"==typeof TextDecoder?"undefined":h(TextDecoder)))e=new TextDecoder("utf-8").decode(t);else{for(var n="",r=0;r<t.length;r++)n+=String.fromCharCode(t[r]);e=decodeURIComponent(escape(n))}return JSON.parse(e)}(r),this.loadedBuffers.binary_glTF=i}this.gltf=t,this.manifest=null,this.metadata=this.gltf.asset||{},this.metadata.gltf=this.metadata.version||1,this.materials=this.gltfMaterials={name:"GLTF Materials",version:"1.0",scene:{SceneUnit:"m"},materials:{}},this.materialToIndex={},this.materialList=[],this.geomToIndex={},this.geomList=[],this.geomsLoaded=0,this.fragments={length:0,numLoaded:0,boxes:null,transforms:null,materials:null,fragId2dbId:null,entityIndexes:null,mesh2frag:{}},this.geompacks=[],this.instances=[],this.cameras=[],this.lights=[],this.bbox=null,this.animations=null,this.pendingRequests=0,this.globalOffset={x:0,y:0,z:0},this.bbox=new s.a,this.nodeToDbId={},this.nextDbId=1,this.nextFragId=0}d.prototype.loadManifest=function(t){this.manifest={name:"LMV Manifest",toolkitversion:"LMVTK 2.6.4",manifestversion:2,adskID:{sourceSystem:"",type:"",id:"",version:""},assets:[],typesets:[]};var e=this.gltf.buffers;for(var n in e)if("binary_glTF"!==n){var r=e[n];if(0!==r.uri.indexOf("data:application/octet-stream;base64,")){var i={id:n,URI:r.uri,uri:r.uri,usize:r.byteLength,type:r.type};this.manifest.assets.push(i)}else this.loadedBuffers[n]=f(r.uri.slice("data:application/octet-stream;base64,".length)),r.uri="embed://"+n}var s=this.gltf.images;for(var a in s){var o=s[a],h={id:a,URI:o.uri,uri:o.uri,name:o.name,type:"image"};this.manifest.assets.push(h)}},d.prototype.loadRemainingSvf=function(t){t.manifest&&(this.manifest=t.manifest),this.manifest.assetMap={};for(var e=0;e<this.manifest.assets.length;e++){var n=this.manifest.assets[e];this.manifest.assetMap[n.id]=n}for(var r in this.processMeshesList(),this.processMaterialsList(),this.deriveInstanceTree(),t.loadDoneCB("svf"),this.loadedBuffers)this.loadGeometry(t,r);this.loadBuffers(t)},d.prototype.loadBuffers=function(t){for(var e=this,n=[],r=this.manifest.assets,i=0;i<r.length;i++)"image"!==r[i].type&&n.push(r[i]);var s=-1;!function r(i){if(s<n.length-1){var a=n[s+1],h={responseType:a.type||"arraybuffer"};o.a.getItem(t,t.basePath+a.URI,r,t.onFailureCallback,h)}if(i){var u=n[s];e.loadedBuffers[u.id]=i.buffer,e.loadGeometry(t,u.id)}s++}(null)};var m={5120:1,5121:1,5122:2,5123:2,5124:4,5125:4,5126:4},p={SCALAR:1,VEC2:2,VEC3:3,VEC4:4},y=new Float32Array(1),v=new Uint8Array(y.buffer);function g(t,e){return v[0]=t[e],v[1]=t[e+1],v[2]=t[e+2],v[3]=t[e+3],y[0]}d.prototype.loadGeometry=function(t,e){var n=(b=this.gltf.buffers[e]).meshes,i=this;function s(t){var e=i.gltf.accessors[t].bufferView;if(e){var n=i.gltf.bufferViews[e].buffer;if(n)return!!i.loadedBuffers[n]}return!1}for(var a=0;a<n.length;a++)for(var o=(l=this.gltf.meshes[n[a]]).primitives,h=void 0===t.packNormals||t.packNormals,u=0;u<o.length;u++){var c=o[u],l={vblayout:{},vbstride:0,packedNormals:h},f=!0;if(c.indices&&(f=f&&s(c.indices))){var d=i.gltf.accessors[c.indices];l.triangleCount=d.count/3;var y=d.byteStride,v=2,x=i.gltf.bufferViews[d.bufferView],_=d.byteOffset+x.byteOffset,b=i.loadedBuffers[x.buffer];5123===d.componentType?(N=l.indices=new Uint16Array(d.count),v=2,D=new Uint16Array(b)):5125===d.componentType?(N=l.indices=new Uint32Array(d.count),v=4,D=new Uint32Array(b)):debug("Unimplemented component type for index buffer");var w=_/v;0===y?y=1:y/=v;for(var k=0;k<d.count;k++)N[k]=D[w+k*y]}var z=0;for(var E in c.attributes){f=f&&s(c.attributes[E]);var S=i.gltf.accessors[c.attributes[E]];if(f)if("NORMAL"===E)l.vbstride+=h?1:3,l.vblayout.normal={offset:z,itemSize:h?2:3,bytesPerItem:h?2:4,normalize:h},z+=h?1:3;else{var M=E;if("POSITION"===E)M="position",l.vertexCount=S.count;else if(0===E.indexOf("TEXCOORD")){M="uv"+(parseInt(E.split("_")[1])||"")}else 0===E.indexOf("COLOR")&&(M="color");var A=m[S.componentType]*p[S.type];l.vbstride+=A/4,l.vblayout[M]={offset:z,itemSize:p[S.type],bytesPerItem:m[S.componentType],normalize:!1},z+=A/4}}if(f){var I,T=l.vb=new Float32Array(l.vertexCount*l.vbstride);for(var E in h&&(I=new Uint16Array(l.vb.buffer)),c.attributes){S=i.gltf.accessors[c.attributes[E]],x=i.gltf.bufferViews[S.bufferView],_=S.byteOffset+x.byteOffset;var C=new Uint8Array(i.loadedBuffers[x.buffer]);if("NORMAL"===E){var O=l.vblayout.normal;S.count!=l.vertexCount&&debug("Normals count does not equal vertex count");y=0!==S.byteStride?S.byteStride:B*p[S.type];var R=_;for(z=O.offset,k=0;k<l.vertexCount;k++,z+=l.vbstride){var P=g(C,R),F=g(C,R+4),U=g(C,R+8);if(I){var V=.5*(Math.atan2(F,P)/Math.PI+1),L=.5*(U+1);I[2*z]=65535*V|0,I[2*z+1]=65535*L|0}else T[z]=P,T[z+1]=F,T[z+2]=U;R+=y}}else{M=E;if("POSITION"===E)M="position",l.vertexCount=S.count;else if(0===E.indexOf("TEXCOORD")){M="uv"+(parseInt(E.split("_")[1])||"")}else 0===E.indexOf("COLOR")&&(M="color");O=l.vblayout[M];var B=m[S.componentType],D=(y=0!==S.byteStride?S.byteStride:B*p[S.type],new Uint8Array(C)),N=new Uint8Array(T.buffer,4*O.offset);for(R=_,z=0,k=0;k<l.vertexCount;k++){for(var j=0;j<O.itemSize*B;j++)N[z+j]=D[R+j];z+=l.vbstride*B,R+=y}}var H=i.gltf.buffers[x.buffer];H.refCount--,0===H.refCount&&delete i.loadedBuffers[x.buffer]}i.geomsLoaded++,r.a.computeBounds3D(l),t.loadDoneCB("mesh",{mesh:l,packId:n[a],meshIndex:u,progress:i.geomsLoaded/i.geomList.length})}}b.meshes=null},d.prototype.processMaterialsList=function(){var t=this.gltf.materials;for(var e in t){var n=this.materialList.length;this.materialToIndex[e]=n,this.gltfMaterials.materials[n]=t[e],this.materialList.push(e)}},d.prototype.processMeshesList=function(){var t=this.gltf.meshes,e=this;function n(t){var n=e.gltf.accessors[t].bufferView;if(n){var i=e.gltf.bufferViews[n].buffer;if(i){var a=e.gltf.buffers[i];a.refCount?a.refCount++:a.refCount=1,a.meshes||(a.meshes=[]),s||(a.meshes.push(r),s=!0)}}}for(var r in t)for(var i=t[r],s=!1,a=0;a<i.primitives.length;a++){var o=r+":"+a;this.geomToIndex[o]=this.geomList.length,this.geomList.push(o);var h=i.primitives[a];for(var u in h.indices&&n(h.indices),h.attributes)n(h.attributes[u])}this.numGeoms=this.geomList.length},d.prototype.countFragments=function(){var t=this.gltf.scene,e=this.gltf.scenes[t],n=this.gltf.nodes,r=0,i=this;!function t(e){var s=e.meshes;if(e.meshes)for(var a=0;a<s.length;a++)for(var o=i.gltf.meshes[s[a]].primitives,h=0;h<o.length;h++)r++;var u=e.children||e.nodes;if(u)for(var c=0;c<u.length;c++){t(n[u[c]])}}(e),this.fragments.length=r,this.fragments.boxes=new Float32Array(6*r),this.fragments.transforms=new Float32Array(12*r),this.fragments.materials=new Int32Array(r),this.fragments.entityIndexes=new Int32Array(r),this.fragments.fragId2dbId=new Int32Array(r),this.fragments.packIds=new Int32Array(r)},d.prototype.deriveInstanceTree=function(){this.countFragments();var t=this.gltf.scene,e=this.gltf.scenes[t],n=this.gltf.nodes;this.instanceTree={name:t,dbId:this.nextDbId++,children:[]},this.nodeToDbId[t]=this.instanceTree.dbId;var r=[],o=1,h=this,u=this.fragments,c=new s.a;var l=function t(e,l,f,d){d>o&&(o=d);var m=f.clone();if(l.matrix){(g=new a.a(!0)).fromArray(l.matrix),m.multiply(g)}else{var p=l.translation,y=l.rotation,v=l.scale;if(void 0!==p||void 0!==y||void 0!==v){var g,x=function(t,e,n,r){this.x=t||0,this.y=e||0,this.z=n||0,this.w=r||0},_=p?new i.a(p[0],p[1],p[2]):new i.a,b=y?new x(y[0],y[1],y[2],y[3]):new x,w=v?new i.a(v[0],v[1],v[2]):new i.a(1,1,1);(g=new a.a(!0)).compose(_,b,w),m.multiply(g)}}var k=new s.a,z=l.meshes;if(l.meshes){e.fragIds=[];for(var E=0;E<z.length;E++)for(var S=h.gltf.meshes[z[E]].primitives,M=0;M<S.length;M++){var A=z[E]+":"+M,I=h.nextFragId++;e.fragIds.push(I),u.fragId2dbId[I]=e.dbId,u.entityIndexes[I]=h.geomToIndex[A],u.mesh2frag[A]?u.mesh2frag[A].push(I):u.mesh2frag[A]=[I],u.materials[I]=h.materialToIndex[S[M].material];var T=12*I,C=m.elements,O=u.transforms;O[T]=C[0],O[T+1]=C[1],O[T+2]=C[2],O[T+3]=C[4],O[T+4]=C[5],O[T+5]=C[6],O[T+6]=C[8],O[T+7]=C[9],O[T+8]=C[10],O[T+9]=C[12],O[T+10]=C[13],O[T+11]=C[14];var R=S[M].attributes.POSITION;if(R){var P=h.gltf.accessors[R];P.min&&P.max?(c.min.x=P.min[0],c.min.y=P.min[1],c.min.z=P.min[2],c.max.x=P.max[0],c.max.y=P.max[1],c.max.z=P.max[2]):(c.min.x=-.5,c.min.y=-.5,c.min.z=-.5,c.max.x=.5,c.max.y=.5,c.max.z=.5,debug("unknown bbox for mesh, using unit box",z[E])),c.applyMatrix4(m),T=6*I,(D=u.boxes)[T]=c.min.x,D[T+1]=c.min.y,D[T+2]=c.min.z,D[T+3]=c.max.x,D[T+4]=c.max.y,D[T+5]=c.max.z,k.union(c)}}}var F=l.children||l.nodes;if(F){e.children=[];for(var U=0;U<F.length;U++){var V=n[F[U]],L={name:V.name||F[U],dbId:h.nextDbId++};h.nodeToDbId[F[U]]=L.dbId,e.children.push(L);var B=t(L,V,m,d+1);k.union(B)}}var D,N=6*e.dbId;return(D=r)[N]=k.min.x,D[N+1]=k.min.y,D[N+2]=k.min.z,D[N+3]=k.max.x,D[N+4]=k.max.y,D[N+5]=k.max.z,k}(this.instanceTree,e,new a.a(!0),1);h.bbox.union(l),this.instanceBoxes=new Float32Array(r.length),this.instanceBoxes.set(r),this.objectCount=this.nextDbId,this.maxTreeDepth=o};var x=n(2);function _(t,e){var n,r;this.bytes_per_node=e?32:36,t instanceof ArrayBuffer?(n=t.byteLength/this.bytes_per_node,r=t,this.nodeCount=n):(n=0|t,r=new ArrayBuffer(this.bytes_per_node*n),this.nodeCount=0),this.nodeCapacity=n,this.nodesRaw=r,this.is_lean_node=e,this.node_stride=this.bytes_per_node/4,this.node_stride_short=this.bytes_per_node/2,this.nodesF=new Float32Array(this.nodesRaw),this.nodesI=new Int32Array(this.nodesRaw),this.nodesS=new Uint16Array(this.nodesRaw)}_.prototype.setLeftChild=function(t,e){this.nodesI[t*this.node_stride+6]=e},_.prototype.getLeftChild=function(t){return this.nodesI[t*this.node_stride+6]},_.prototype.setPrimStart=function(t,e){this.is_lean_node?this.nodesI[t*this.node_stride+6]=e:this.nodesI[t*this.node_stride+8]=e},_.prototype.getPrimStart=function(t){return this.is_lean_node?this.nodesI[t*this.node_stride+6]:this.nodesI[t*this.node_stride+8]},_.prototype.setPrimCount=function(t,e){this.nodesS[t*this.node_stride_short+14]=e},_.prototype.getPrimCount=function(t){return this.nodesS[t*this.node_stride_short+14]},_.prototype.setFlags=function(t,e,n,r){this.nodesS[t*this.node_stride_short+15]=r<<3|n<<2|3&e},_.prototype.getFlags=function(t){return this.nodesS[t*this.node_stride_short+15]},_.prototype.setBox0=function(t,e){var n=t*this.node_stride,r=this.nodesF;r[n]=e[0],r[n+1]=e[1],r[n+2]=e[2],r[n+3]=e[3],r[n+4]=e[4],r[n+5]=e[5]},_.prototype.getBoxThree=function(t,e){var n=t*this.node_stride,r=this.nodesF;e.min.x=r[n],e.min.y=r[n+1],e.min.z=r[n+2],e.max.x=r[n+3],e.max.y=r[n+4],e.max.z=r[n+5]},_.prototype.getBoxArray=function(t,e,n){var r=t*this.node_stride,i=this.nodesF;e[0+(n=n||0)]=i[r],e[1+n]=i[r+1],e[2+n]=i[r+2],e[3+n]=i[r+3],e[4+n]=i[r+4],e[5+n]=i[r+5]},_.prototype.setBoxThree=function(t,e){var n=t*this.node_stride,r=this.nodesF;r[n]=e.min.x,r[n+1]=e.min.y,r[n+2]=e.min.z,r[n+3]=e.max.x,r[n+4]=e.max.y,r[n+5]=e.max.z},_.prototype.makeEmpty=function(t){var e=t*this.node_stride,n=this.nodesI;n[e+6]=-1,n[e+7]=0,this.is_lean_node||(n[e+8]=-1)},_.prototype.realloc=function(t){if(this.nodeCount+t>this.nodeCapacity){var e=0|3*this.nodeCapacity/2;e<this.nodeCount+t&&(e=this.nodeCount+t);var n=new ArrayBuffer(e*this.bytes_per_node),r=new Int32Array(n);r.set(this.nodesI),this.nodeCapacity=e,this.nodesRaw=n,this.nodesF=new Float32Array(n),this.nodesI=r,this.nodesS=new Uint16Array(n)}},_.prototype.nextNodes=function(t){this.realloc(t);var e=this.nodeCount;this.nodeCount+=t;for(var n=0;n<t;n++)this.makeEmpty(e+n);return e},_.prototype.getRawData=function(){return this.nodesRaw.slice(0,this.nodeCount*this.bytes_per_node)};var b=3,w=1e-5,k=1e-5,z=15,E=16,S=function(){function t(t,e,n){t[0]>e[n]&&(t[0]=e[n]),t[3]<e[n]&&(t[3]=e[n]),t[1]>e[n+1]&&(t[1]=e[n+1]),t[4]<e[n+1]&&(t[4]=e[n+1]),t[2]>e[n+2]&&(t[2]=e[n+2]),t[5]<e[n+2]&&(t[5]=e[n+2])}function e(t,e,n){t[0]>e[n]&&(t[0]=e[n]),t[1]>e[n+1]&&(t[1]=e[n+1]),t[2]>e[n+2]&&(t[2]=e[n+2]),t[3]<e[n+3]&&(t[3]=e[n+3]),t[4]<e[n+4]&&(t[4]=e[n+4]),t[5]<e[n+5]&&(t[5]=e[n+5])}function n(t,e){t[0]>e[0]&&(t[0]=e[0]),t[1]>e[1]&&(t[1]=e[1]),t[2]>e[2]&&(t[2]=e[2]),t[3]<e[3]&&(t[3]=e[3]),t[4]<e[4]&&(t[4]=e[4]),t[5]<e[5]&&(t[5]=e[5])}function r(t,e,n,r){for(var i=0;i<3;i++)t[e+i]=n[r+3+i]-n[r+i]}function i(t,e){t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5]}var s=1/0;function a(t){t[0]=s,t[1]=s,t[2]=s,t[3]=-s,t[4]=-s,t[5]=-s}function o(t){var e=t[3]-t[0],n=t[4]-t[1],r=t[5]-t[2];return e<0||n<0||r<0?0:2*(e*n+n*r+r*e)}function h(){this.vb_left=new Float32Array(6),this.vb_right=new Float32Array(6),this.cb_left=new Float32Array(6),this.cb_right=new Float32Array(6),this.num_left=0,this.best_split=-1,this.best_cost=-1,this.num_bins=-1}function u(){this.box_bbox=new Float32Array(6),this.box_centroid=new Float32Array(6),this.num_prims=0}function c(){this.BL=new Float32Array(6),this.CL=new Float32Array(6),this.NL=0,this.AL=0}h.prototype.reset=function(){this.num_left=0,this.best_split=-1,this.best_cost=-1,this.num_bins=-1},u.prototype.reset=function(){this.num_prims=0,a(this.box_bbox),a(this.box_centroid)},c.prototype.reset=function(){this.NL=0,this.AL=0,a(this.BL),a(this.CL)};var l,f=[];for(l=0;l<E;l++)f.push(new u);var d=[];for(l=0;l<E-1;l++)d.push(new c);var m=new Float32Array(6),p=new Float32Array(6);function y(r,s,a,h,u,c,l){if(c[h]<r.scene_epsilon)l.best_cost=1/0;else{var y,v,g=E;for(g>a-s+1&&(g=a-s+1),y=0;y<g;y++)f[y].reset();for(y=0;y<g-1;y++)d[y].reset();for(l.num_bins=g,function(n,r,i,s,a,o,h){for(var u=n.centroids,c=n.primitives,l=n.finfo.boxes,d=n.finfo.boxStride,m=h*(1-k)/o[s],p=a[s],y=n.sort_prims,v=r;v<=i;v++){var g=0|c[v],x=0|m*(u[3*g+s]-p);x<0?x=0:x>=h&&(x=h-1),y[v]=x,f[x].num_prims++,e(f[x].box_bbox,l,g*d),t(f[x].box_centroid,u,3*g)}}(r,s,a,h,u,c,g),i(d[0].BL,f[0].box_bbox),i(d[0].CL,f[0].box_centroid),d[0].AL=o(d[0].BL),d[0].NL=f[0].num_prims,y=1;y<g-1;y++){v=f[y];var x=d[y];i(x.BL,d[y-1].BL),n(x.BL,v.box_bbox),x.AL=o(x.BL),i(x.CL,d[y-1].CL),n(x.CL,v.box_centroid),x.NL=d[y-1].NL+v.num_prims}i(m,f[y=g-1].box_bbox),i(p,f[y].box_centroid);var _=o(m),b=f[y].num_prims,w=y,z=_*b+d[y-1].AL*d[y-1].NL;for(i(l.vb_right,m),i(l.cb_right,f[y].box_centroid),i(l.vb_left,d[y-1].BL),i(l.cb_left,d[y-1].CL),l.num_left=d[y-1].NL,y-=1;y>=1;y--){v=f[y],n(m,v.box_bbox),n(p,v.box_centroid);var S=(_=o(m))*(b+=v.num_prims)+d[y-1].AL*d[y-1].NL;S<=z&&(z=S,w=y,i(l.vb_right,m),i(l.cb_right,p),i(l.vb_left,d[y-1].BL),i(l.cb_left,d[y-1].CL),l.num_left=d[y-1].NL)}l.best_split=w,l.best_cost=z}}var v=new Float32Array(3);return{bvh_subdivide:function(e,n,i,s,o,u,c,l){r(v,0,u,0);var f=e.nodes,d=c?e.frags_per_leaf_node_transparent:e.frags_per_leaf_node,m=c?e.frags_per_inner_node_transparent:e.frags_per_inner_node,p=e.max_polys_per_node,g=0;v[1]>v[0]&&(g=1),v[2]>v[g]&&(g=2),f.setBox0(n,o);var x=0,_=0,b=s-i+1;if(e.finfo.hasPolygonCounts&&e.frags_per_inner_node)for(var w=b<=e.frags_per_inner_node?s:i+e.frags_per_inner_node-1,k=i;k<=w&&(_++,!((x+=e.finfo.getPolygonCount(e.primitives[k]))>p));k++);if(b<=d&&x<p||1===b||l>z||v[g]<e.scene_epsilon)return f.setLeftChild(n,-1),f.setPrimStart(n,i),f.setPrimCount(n,s-i+1),void f.setFlags(n,0,0,c?1:0);m&&(g=function(e,n,i,s,o,h,u,c){var l=e.primitives,f=e.centroids,d=o-s+1;d>e.frags_per_inner_node&&(d=e.frags_per_inner_node),d>c&&(d=c),n.setPrimStart(i,s),n.setPrimCount(i,d),s+=d,a(h);for(var m=s;m<=o;m++)t(h,f,3*l[m]);r(u,0,h,0);var p=0;return u[1]>u[0]&&(p=1),u[2]>u[p]&&(p=2),p}(e,f,n,i,s,u,v,_),i+=f.getPrimCount(n));var E=new h;if(y(e,i,s,g,u,v,E),E.num_bins<0)f.setPrimCount(n,f.getPrimCount(n)+s-i+1);else{!function(t,e,n,r,i,s,a){var o,h,u=t.primitives,c=t.sort_prims,l=0,f=0|e,d=0|a.best_split;for(o=e;o<=n;o++){var m=0|u[o];c[o]<d?u[f++]=m:c[l++]=m}for(h=0;h<l;h++)u[f+h]=c[h]}(e,i,s,0,0,0,E);var S=f.nextNodes(2),M=.5*(E.vb_left[3+g]+E.vb_left[g]),A=.5*(E.vb_right[3+g]+E.vb_right[g]);f.setFlags(n,g,M<A?0:1,c?1:0),f.setLeftChild(n,S),e.recursion_stack.push([e,S+1,i+E.num_left,s,E.vb_right,E.cb_right,c,l+1]),e.recursion_stack.push([e,S,i,i+E.num_left-1,E.vb_left,E.cb_left,c,l+1])}},compute_boxes:function(n){var i=n.boxv_o,s=n.boxc_o,o=n.boxv_t,h=n.boxc_t;a(i),a(s),a(o),a(h);for(var u,c,l,f,d=n.centroids,m=n.finfo.boxes,p=n.finfo.boxStride,y=0,g=n.prim_count;y<g;y++){var x=n.primitives[y];l=m,f=p*x,(u=d)[c=3*x]=.5*(l[f]+l[f+3]),u[c+1]=.5*(l[f+1]+l[f+4]),u[c+2]=.5*(l[f+2]+l[f+5]),y>=n.first_transparent?(t(h,d,3*x),e(o,m,p*x)):(t(s,d,3*x),e(i,m,p*x))}r(v,0,n.boxv_o,0);var _=Math.max(v[0],v[1],v[2]);n.scene_epsilon=w*_},box_area:function(t,e){var n=t[e+3]-t[e],r=t[e+4]-t[e+1],i=t[e+5]-t[e+2];return n<0||r<0||i<0?0:2*(n*r+r*i+i*n)}}}();function M(t,e){this.boxes=t.boxes,this.polygonCounts=t.polygonCounts,this.hasPolygonCounts=!!this.polygonCounts,this.materials=t.materials,this.materialDefs=e,this.count=t.length,this.boxStride=6,this.wantSort=!0}function A(t,e,n){this.finfo=n||new M(t,e),this.prim_count=this.finfo.getCount(),this.frags_per_leaf_node=-1,this.frags_per_inner_node=-1,this.nodes=null,this.work_buf=new ArrayBuffer(4*this.prim_count),this.sort_prims=new Int32Array(this.work_buf),this.primitives=new Int32Array(this.prim_count),this.centroids=new Float32Array(b*this.prim_count),this.boxv_o=new Float32Array(6),this.boxc_o=new Float32Array(6),this.boxv_t=new Float32Array(6),this.boxc_t=new Float32Array(6),this.recursion_stack=[]}M.prototype.getCount=function(){return this.count},M.prototype.isTransparent=function(t){return!(!this.materialDefs||!this.materialDefs[this.materials[t]])&&this.materialDefs[this.materials[t]].transparent},M.prototype.getPolygonCount=function(t){return this.polygonCounts[t]},A.prototype.sortPrimitives=function(t){var e,n,r=new Float32Array(this.work_buf),i=this.primitives,s=0,a=t;for(e=0,n=this.prim_count;e<n;e++){i[e]=e;var o=this.finfo.isTransparent(e);o&&s++,a?(r[e]=S.box_area(this.finfo.boxes,this.finfo.boxStride*e),o&&(r[e]=-r[e])):r[e]=o?-1:1}if(a)Array.prototype.sort.call(this.primitives,(function(t,e){return r[e]-r[t]}));else if(s&&s<this.prim_count){var h=new Int32Array(s),u=0,c=0;for(e=0,n=this.prim_count;e<n;e++)r[e]>=0?i[u++]=i[e]:h[c++]=i[e];i.set(h,this.prim_count-s)}this.first_transparent=this.prim_count-s},A.prototype.build=function(t){var e=t&&!!t.useSlimNodes,n=this;function r(e,r){t.hasOwnProperty(e)?n[e]=t[e]:n[e]=r}if(e)r("frags_per_leaf_node",1),r("frags_per_inner_node",0),r("frags_per_leaf_node_transparent",1),r("frags_per_inner_node_transparent",0),r("max_polys_per_node",1/0);else{var i=t.isWeakDevice?.5:1;r("frags_per_leaf_node",0|256*i),r("frags_per_inner_node",0|this.frags_per_leaf_node),r("frags_per_leaf_node_transparent",this.frags_per_leaf_node),r("frags_per_inner_node_transparent",0),r("max_polys_per_node",0|2e4*i)}if(this.nodes&&this.nodes.is_lean_node==e)this.nodes.nodeCount=0;else{for(var s=this.prim_count/this.frags_per_leaf_node,a=1;a<s;)a*=2;this.nodes=new _(a,!!t&&t.useSlimNodes)}this.sortPrimitives(this.finfo.wantSort),S.compute_boxes(this);var o,h=this.nodes.nextNodes(2);for(S.bvh_subdivide(this,h,0,this.first_transparent-1,this.boxv_o,this.boxc_o,!1,0);this.recursion_stack.length;)o=this.recursion_stack.pop(),S.bvh_subdivide(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7]);for(S.bvh_subdivide(this,h+1,this.first_transparent,this.prim_count-1,this.boxv_t,this.boxc_t,!0,0);this.recursion_stack.length;)o=this.recursion_stack.pop(),S.bvh_subdivide(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7])};var I=n(5),T=n(7),C={MESH_VISIBLE:1,MESH_HIGHLIGHTED:2,MESH_HIDE:4,MESH_ISLINE:8,MESH_MOVED:16,MESH_RENDERFLAG:32,MESH_NOTLOADED:64,MESH_ISPOINT:128,MESH_ISWIDELINE:256,MESH_TRAVERSED:512,MESH_DRAWN:1024},O=(Object(x.b)(),null),R=100;function P(){this.length=0,this.numLoaded=0,this.boxes=null,this.transforms=null,this.materials=null,this.packIds=null,this.entityIndexes=null,this.fragId2dbId=null,this.topoIndexes=null,this.visibilityFlags=null}function F(t,e){var n=e.geomDataIndexes.length,r=t.stream,i=0,s={},a=e.mesh2frag={};e.polygonCounts=e.geomDataIndexes;for(var o=0;o<n;o++){var h=e.geomDataIndexes[o];if(s[h]){var u=s[h];e.polygonCounts[o]=e.polygonCounts[u],e.packIds[o]=e.packIds[u],e.entityIndexes[o]=e.entityIndexes[u],i+=e.polygonCounts[o]}else{if(!t.seekToEntry(h))return;r.getUint8(),r.seek(r.offset+24),e.polygonCounts[o]=r.getUint16(),e.packIds[o]=parseInt(t.readString()),e.entityIndexes[o]=t.readU32V(),i+=e.polygonCounts[o],s[h]=o}var c=e.packIds[o]+":"+e.entityIndexes[o],l=a[c];void 0===l?a[c]=o:Array.isArray(l)?l.push(o):a[c]=[l,o]}return e.geomDataIndexes=null,s=null,i}function U(t,e,n,r,o,h,u,c){var l=function(t,e){var n=[];if(!e)return n;for(var r=t.getEntryCounts(),i=t.stream,s=0;s<r;s++){var a=t.seekToEntry(s);if(!a)return;if(a.version>5)return;a.version>4&&t.readU8(),t.readU32V(),a.version>2?t.readU32V():(t.readString(),t.readU32V()),t.readTransform(s,null,12*s);for(var o=0;o<6;o++)i.getFloat32();if(a.version>1){var h=t.readU32V();e.indexOf(h)>=0&&n.push(s)}}return n}(t,h),f=l.length?l.length:t.getEntryCounts(),d=t.stream;O&&f>O&&(f=O),e.totalLength=t.getEntryCounts(),e.length=f,e.numLoaded=0;var m,p,y=e.boxes=o?new Float64Array(6*f):new Float32Array(6*f),v=e.transforms=o?new Float64Array(12*f):new Float32Array(12*f),g=e.materials=new Int32Array(f),x=e.packIds=new Int32Array(f),_=e.entityIndexes=new Int32Array(f),b=e.geomDataIndexes=new Int32Array(f),w=e.fragId2dbId=new Int32Array(f),k=e.visibilityFlags=new Uint16Array(f),z=[0,0,0];r&&(m=new s.a,p=new a.a(!0).fromArray(r.elements));var E=!n&&u,S=v,M=12,A=9;function I(t){if(r){var e=6*t;m.setFromArray(y,e),m.applyMatrix4(p),m.copyToArray(y,e)}}function T(t){for(var e=6*t,n=0;n<6;n++)y[e++]=d.getFloat32()}function P(t,e){for(var n=6*t,r=0;r<6;r++)y[n++]=d.getFloat32()+e[r%3]}E&&(o||(y=new Float64Array(6*f),S=new Float64Array(3*f),M=3,A=0));for(var F=0,U=e.length;F<U;F++){var V=l.length?t.seekToEntry(l[F]):t.seekToEntry(F);if(!V)return;if(V.version>5)return;var L=!0;if(V.version>4)L=0!=(1&t.readU8());if(k[F]=L?C.MESH_VISIBLE:0,g[F]=t.readU32V(),V.version>2?b[F]=t.readU32V():(x[F]=parseInt(t.readString()),_[F]=t.readU32V()),t.readTransform(F,v,12*F,r,n,z),E&&S!==v&&S.set(z,F*M+A),V.version>3?P(F,z):T(F),I(F),n){var B=6*F;y[B++]-=n.x,y[B++]-=n.y,y[B++]-=n.z,y[B++]-=n.x,y[B++]-=n.y,y[B++]-=n.z}V.version>1&&(w[F]=t.readU32V())}if(E){for(var D=-1,N=-1,j=-1,H=y.length,q=0;q<H;q+=6)D=Math.max(D,y[q+3]-y[q]),N=Math.max(N,y[q+4]-y[q+1]),j=Math.max(j,y[q+5]-y[q+2]);var Z=u.size();if(Z.x>D*R||Z.y>N*R||Z.z>j*R){var G=0,W=0,Q=0;for(q=0;q<H;q+=3)G+=y[q],W+=y[q+1],Q+=y[q+2];n=new i.a(3*G/H,3*W/H,3*Q/H)}else n=c;var X=e.boxes;for(q=0;q<H;q+=3)X[q]=y[q]-n.x,X[q+1]=y[q+1]-n.y,X[q+2]=y[q+2]-n.z;if(r&&S!==v){var Y=new i.a;for(F=0;F<U;++F){var K=F*M+A;Y.fromArray(S,K).applyMatrix4(p).toArray(S,K)}}for(F=0;F<U;++F){var J=12*F+9,$=F*M+A;v[J]=S[$]-n.x,v[J+1]=S[$+1]-n.y,v[J+2]=S[$+2]-n.z}}return e.finishLoading=!0,n}function V(t,e,n,r){var i=t.seekToEntry(e);if(!i)return null;if(i.version>2)return null;i.version>1&&t.readU8();return{definition:t.stream.getUint32(),transform:t.readTransform(void 0,void 0,void 0,n,r),instanceNodePath:t.readPathID()}}var L={NT_Inner:0,NT_Geometry:1,NT_Camera:2,NT_Light:3};function B(t){return(B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function D(t){switch(t){case"meter":case"meters":case"m":return 1;case"feet and inches":case"foot":case"feet":case"ft":return.3048;case"inch":case"inches":case"in":return.0254;case"centimeter":case"centimeters":case"cm":return.01;case"millimeter":case"millimeters":case"mm":return.001;default:return 1}}function N(t,e){var n=t.globalOffset;if(n.x||n.y||n.z){if(e){var r=new a.a(!0);r.copy(e),(e=r).elements[12]-=n.x,e.elements[13]-=n.y,e.elements[14]-=n.z}else(e=new a.a(!0)).makeTranslation(-n.x,-n.y,-n.z);t.placementWithOffset=e}else t.placementWithOffset=e}function j(t,e){if(t.metadata){var n=t.metadata["world bounding box"],r=new i.a(n.minXYZ[0],n.minXYZ[1],n.minXYZ[2]),o=new i.a(n.maxXYZ[0],n.maxXYZ[1],n.maxXYZ[2]);t.bbox=new s.a(r,o);var h=function(t,e){if(t.placementTransform=e.placementTransform,e.applyScaling){var n="m";t.metadata["distance unit"]&&(n=t.metadata["distance unit"].value),t.scalingUnit=n,"object"===B(e.applyScaling)?(e.applyScaling.from&&(n=e.applyScaling.from),e.applyScaling.to&&(t.scalingUnit=e.applyScaling.to)):t.scalingUnit=e.applyScaling;var r=D(n)/D(t.scalingUnit);if(1!=r){var i=new a.a(!0),s=new a.a(!0);s.elements[0]=r,s.elements[5]=r,s.elements[10]=r,e.placementTransform&&i.copy(e.placementTransform),t.placementTransform=e.placementTransform=i.multiply(s)}}var o=t.metadata["custom values"];if(o&&o.refPointTransform){t.refPointTransform=new a.a(!0);var h=t.refPointTransform.elements,u=o.refPointTransform;h[0]=u[0],h[1]=u[1],h[2]=u[2],h[4]=u[3],h[5]=u[4],h[6]=u[5],h[8]=u[6],h[9]=u[7],h[10]=u[8],h[12]=u[9],h[13]=u[10],h[14]=u[11]}else{var c=t.metadata.georeference,l=c&&c.refPointLMV,f=0;if(o&&o.hasOwnProperty("angleToTrueNorth")&&(f=Math.PI/180*o.angleToTrueNorth),l||f){var d=new a.a(!0),m=d.elements;m[0]=m[5]=Math.cos(f),m[1]=-Math.sin(f),m[4]=Math.sin(f);var p=new a.a(!0);m=p.elements,l&&(m[12]=-l[0],m[13]=-l[1],m[14]=-l[2]),t.refPointTransform=d.multiply(p)}}if(e.applyRefPoint&&t.refPointTransform){var y=new a.a(!0);e.placementTransform&&y.copy(e.placementTransform),y.multiply(t.refPointTransform),t.placementTransform=e.placementTransform=y}else!e.applyRefPoint&&e.placementTransform&&(t.placementTransform=new a.a(!0).copy(e.placementTransform));return t.placementTransform&&function(t){for(var e=t.elements,n=0;n<4;n++)for(var r=0;r<4;r++)if(n===r){if(1!==e[4*n+r])return!1}else if(0!==e[4*n+r])return!1;return!0}(t.placementTransform)&&(t.placementTransform=null),t.placementTransform}(t,e);h&&!t.bbox.empty()&&t.bbox.applyMatrix4(h),e.globalOffset?t.globalOffset=e.globalOffset:t.globalOffset=t.bbox.center(),N(t,h),t.bbox.empty()||(t.bbox.min.sub(t.globalOffset),t.bbox.max.sub(t.globalOffset)),t.metadata.hasOwnProperty("double sided geometry")&&t.metadata["double sided geometry"].value&&(t.doubleSided=!0)}}function H(t,e){t[0]-=e.x,t[1]-=e.y,t[2]-=e.z}function q(t,e){var n=e.definition,r=t.seekToEntry(n);if(!r)return null;if(r.version>2)return null;var i=t.stream,s={isPerspective:!i.getUint8(),position:t.readVector3f(),target:t.readVector3f(),up:t.readVector3f(),aspect:i.getFloat32(),fov:i.getFloat32()*(180/Math.PI)};return r.version<2&&(i.getFloat32(),i.getFloat32()),s.orthoScale=i.getFloat32(),s}function Z(t,e){var n=t.seekToEntry(e);if(!n)return null;if(n.version>1)return null;var r=t.stream;return{position:t.readVector3f(),dir:t.readVector3f(),r:r.getFloat32(),g:r.getFloat32(),b:r.getFloat32(),intensity:r.getFloat32(),spotAngle:r.getFloat32(),size:r.getFloat32(),type:r.getUint8()}}var G=n(31).Zlib;function W(t){this.unzip=new G.Unzip(t),this.manifest=null,this.materials=null,this.metadata=null,this.fragments=null,this.geompacks=[],this.instances=[],this.cameras=[],this.lights=[],this.propertydb={attrs:[],avs:[],ids:[],values:[],offsets:[]},this.bbox=null,this.animations=null,this.pendingRequests=0,this.globalOffset={x:0,y:0,z:0},this.topologyPath=null}W.prototype.loadAsyncResource=function(t,e,n,r){if(n)r(n);else{var i=this;this.pendingRequests++,o.a.getItem(t,t.basePath+e,(function(e){i.pendingRequests--,r(e),0==i.pendingRequests&&i.postLoad(t)}),t.onFailureCallback)}},W.prototype.loadManifest=function(t){var e=this.unzip.decompress("manifest.json");if(!e)return!1;var n=new I.a(e);this.manifest=JSON.parse(n.getString(e.byteLength))},W.prototype.applyLargeBoxOffset=function(t){!t||t.x===this.globalOffset.x&&t.y===this.globalOffset.y&&t.z===this.globalOffset.z||(this.bbox.empty()||this.bbox.translate({x:this.globalOffset.x-t.x,y:this.globalOffset.y-t.y,z:this.globalOffset.z-t.z}),this.verylargebbox=!0,this.globalOffset.copy(t),N(this,this.placementTransform))},W.prototype.parseFragmentList=function(t,e,n,r){var i=this;this.loadAsyncResource(e,n,r,(function(t){var n=new T.a(t),r=U(n,i.fragments=new P,e.globalOffset,e.placementTransform,e.fragmentTransformsDouble,void 0,i.bbox,i.globalOffset);n=null,i.applyLargeBoxOffset(r)}))},W.prototype.parseGeometryMetadata=function(t,e,n,r){var i=this;this.loadAsyncResource(e,n,r,(function(t){var e=new T.a(t);i.geomMetadata={},function(t,e){var n=t.getEntryCounts(),r=t.stream;e.length=n;for(var i,s=e.fragTypes=new Uint8Array(n),a=e.primCounts=new Uint16Array(n),o=e.packIds=new Int32Array(n),h=e.entityIndexes=new Int32Array(n),u=0,c=n;u<c;u++){var l=t.seekToEntry(u);if(!l)return;if(s[u]=r.getUint8(),r.seek(r.offset+24),a[u]=r.getUint16(),o[u]=parseInt(t.readString()),h[u]=t.readU32V(),l.version>2){var f=r.getInt32();if(-1!=f&&void 0===i){i=e.topoIndexes=new Int32Array(n);for(var d=0;d<u;d++)i[d]=-1}null!=i&&(i[u]=f)}}}(e,i.geomMetadata),i.numGeoms=i.geomMetadata.primCounts.length}))},W.prototype.parseInstanceTree=function(t,e,n,r){var i=this;this.loadAsyncResource(t,e,n,(function(t){var e=new T.a(t);i.instanceTransforms=function(t,e){for(var n=[],r=[],i=[],s=[],a=0,o=t.stream;o.offset<o.byteLength-8-1;){if(t.readTransform(a,n,12*a,void 0,void 0,void 0),e<5)o.getUint8()&&o.getUint32();var h=o.getUint8();if(e>=5)o.getUint8();if(e>=3&&(r[a]=o.getVarints()),a)switch(h){case L.NT_Inner:break;case L.NT_Geometry:var u;if(e<2){if(1===(u=o.getUint16()))i[a]=o.getUint32();else if(u>0){for(var c=[],l=0;l<u;l++)c.push(o.getUint32());i[a]=c}}else if(1===(u=o.getVarints()))i[a]=o.getVarints();else if(u>0){for(c=[],l=0;l<u;l++)c.push(o.getVarints());i[a]=c}break;case L.NT_Camera:case L.NT_Light:o.getUint8()&&o.getUint32();break;default:debug("Unrecognized instance tree node type.")}var f=0;h===L.NT_Inner&&(f=e<2?o.getUint16():o.getVarints()),s[a]=f,a++}var d=new Uint32Array(r.length);d.set(r);var m=new Float32Array(n.length);m.set(n);var p=new Uint32Array(s.length);return p.set(s),{dbIds:d,fragIds:i,transforms:m,childCounts:p}}(e,r)}))},W.prototype.loadRemainingSvf=function(t){var e=this,n=this.unzip;this.manifest=t.manifest;var r=this.manifest,i=r.assets,s=n.decompress("metadata.json"),a=new I.a(s);s.byteLength>3&&0!==s[3]&&(this.metadata=JSON.parse(a.getString(s.byteLength)).metadata,j(this,t)),this.packFileTotalSize=0,this.primitiveCount=0;for(var o=r.typesets,h={},u=0;u<o.length;u++){var c=o[u];h[c.id]=c.types}for(u=0;u<i.length;u++){var l=i[u];if(!Object(x.b)()||"Set.bin"!==l.id){var f=l.type;0==f.indexOf("Autodesk.CloudPlatform.")&&(f=f.substr(23));var d=l.URI,m=l.typeset?h[l.typeset]:null,p=l.usize||0,y=Math.round(p/1048576*1e5)/1e5|0;if(0!=d.indexOf("embed:/"))if("PackFile"==f)"Autodesk.CloudPlatform.Geometry"==(m?m[0].class:null)&&(this.packFileTotalSize+=p,this.geompacks.push({id:l.id,uri:d,usize:p}));else"PropertyAttributes"==f?this.propertydb.attrs.push({path:d}):"PropertyAVs"==f?this.propertydb.avs.push({path:d}):"PropertyIDs"==f?this.propertydb.ids.push({path:d}):"PropertyOffsets"==f?this.propertydb.offsets.push({path:d}):"PropertyValues"==f&&this.propertydb.values.push({path:d});var v=l.URI,g=null;if(0==v.indexOf("embed:/")&&(v=v.substr(7),g=n.decompress(v)),"ProteinMaterials"==f)-1==v.indexOf("Protein")?this.loadAsyncResource(t,v,g,(function(t){var n=new I.a(t),r=t.byteLength;e.materials=0<r?JSON.parse(n.getString(r)):null})):this.loadAsyncResource(t,v,g,(function(t){var n=new I.a(t),r=t.byteLength;if(0<r)try{e.proteinMaterials=JSON.parse(n.getString(r))}catch(n){for(var i="",s=0;s<t.length;s++)i+=String.fromCharCode(t[s]);try{e.proteinMaterials=JSON.parse(i)}catch(t){console.error("Failed to parse Protein materials file either as UTF8 or ANSI")}}else e.proteinMaterials=null}));else if("StandardMaterials"==f)this.loadAsyncResource(t,v,g,(function(t){var n=new I.a(t),r=t.byteLength;if(0<r){var i=n.getString(r);e.stdSurfMats=JSON.parse(i)}else e.stdSurfMats=null}));else if("FragmentList"==f)this.parseFragmentList(l,t,v,g);else if("GeometryMetadataList"==f)this.parseGeometryMetadata(l,t,v,g);else if("PackFile"==f)-1!=v.indexOf("CameraDefinitions.bin")?this.loadAsyncResource(t,v,g,(function(t){e.camDefPack=new T.a(t)})):-1!=v.indexOf("CameraList.bin")?this.loadAsyncResource(t,v,g,(function(t){e.camInstPack=new T.a(t)})):-1!=v.indexOf("LightDefinitions.bin")?this.loadAsyncResource(t,v,g,(function(t){e.lightDefPack=new T.a(t)})):-1!=v.indexOf("LightList.bin")&&this.loadAsyncResource(t,v,g,(function(t){e.lightInstPack=new T.a(t)}));else if("Animations"==f)this.loadAsyncResource(t,v,g,(function(t){var n=new I.a(t),r=t.byteLength;e.animations=0<r?JSON.parse(n.getString(r)):null}));else if("Topology"==f)e.topologyPath=t.basePath+v,e.topologySizeMB=y;else if(t.loadInstanceTree&&("InstanceTree"==f||"InstanceTreeTree"==f)){var _=m?m[0].version:1;this.parseInstanceTree(t,v,g,_)}}}0==this.pendingRequests&&this.postLoad(t),delete this.unzip},W.prototype.addTransparencyFlagsToMaterials=function(t){for(var e in t){var n=t[e],r=n.userassets,i=n.materials[r[0]];n.transparent=i.transparent}},W.prototype.postLoadOfCam=function(t){if(this.camDefPack&&this.camInstPack){for(var e=0,n=this.camInstPack.getEntryCounts();e<n;e++){var r=V(this.camInstPack,e,this.placementTransform,this.globalOffset),s=q(this.camDefPack,r);r.transform&&(r.transform.transformPoint(s.position),r.transform.transformPoint(s.target),r.transform.transformDirection(s.up));var a=this.bbox;if(a&&!a.containsPoint(s.target)){var o=(new i.a).copy(a.center()).distanceTo(s.position),h=(new i.a).copy(s.target).sub(s.position).normalize().multiplyScalar(o);s.target=(new i.a).copy(s.position).add(h)}this.cameras.push(s)}delete this.camDefPack,delete this.camInstPack}},W.prototype.postLoadOfLight=function(t){if(this.lightDefPack&&this.lightInstPack){for(var e=0,n=this.lightInstPack.getEntryCounts();e<n;e++){var r=V(this.lightInstPack,e,this.placementTransform,this.globalOffset);this.lights.push(Z(this.lightDefPack,r.definition))}delete this.lightInstPack,delete this.lightDefPack}},W.prototype.postLoadOfFragments=function(t){var e=this.fragments;if(this.geomMetadata){e.polygonCounts=e.geomDataIndexes;var n=this.geomMetadata;null!=n.topoIndexes&&(e.topoIndexes=new Int32Array(e.length));for(var r=0,i=e.length;r<i;r++){var s=e.geomDataIndexes[r];e.entityIndexes[r]=n.entityIndexes[s],e.packIds[r]=n.packIds[s],e.polygonCounts[r]=n.primCounts[s],this.primitiveCount+=n.primCounts[s],null!=n.topoIndexes&&(e.topoIndexes[r]=n.topoIndexes[s])}e.geomDataIndexes=null,this.geomMetadata=null}this.calculateMesh2Frag(e)},W.prototype.calculateMesh2Frag=function(t){for(var e=t.mesh2frag={},n=t.packIds,r=t.entityIndexes,i=0,s=t.length;i<s;i++){var a=n[i]+":"+r[i],o=e[a];void 0===o?e[a]=i:Array.isArray(o)?o.push(i):e[a]=[o,i]}},W.prototype.postLoadOfBBox=function(t){if(!this.bbox||t.placementTransform){for(var e=[1/0,1/0,1/0,-1/0,-1/0,-1/0],n=this.fragments,r=n.boxes,i=0,s=n.length;i<s;i++){var a,o=6*i;for(a=0;a<3;a++)r[o+a]<e[a]&&(e[a]=r[o+a]);for(a=3;a<6;a++)r[o+a]>e[a]&&(e[a]=r[o+a])}this.bbox={min:{x:e[0],y:e[1],z:e[2]},max:{x:e[3],y:e[4],z:e[5]}}}},W.prototype.postLoadOfObjectIds=function(t){var e=t.objectIds;if(null!=e){for(var n=[],r=[],i=0;i<e.length;++i)for(var s=0;s<this.fragments.length;++s)this.fragments.fragId2dbId[s]==e[i]&&(n.push(this.fragments.packIds[s]),r.push(s));var a=1,o=n.length;for(i=1;i<o;){for(;i<o&&n[i]==n[i-1];)++i;if(o==i)break;n[a++]=n[i++]}n.splice(a-1,o-a);var h=[];for(i=0;i<this.geompacks.length;++i)for(s=0;s<n.length;++s)parseInt(this.geompacks[i].id)==n[s]&&h.push(this.geompacks[i]);this.geompacks=h;var u=function(t,e){t.length=e.length,t.numLoaded=0;for(var n=t.length,r=[1/0,1/0,1/0,-1/0,-1/0,-1/0],i=new Float32Array(6*n),s=new Float32Array(12*n),a=new Int32Array(n),o=new Int32Array(n),h=new Int32Array(n),u=new Uint16Array(n),c={},l=0;l<e.length;++l){for(var f=e[l],d=6*f,m=6*l,p=0;p<6;++p)i[m++]=t.boxes[d++];d=12*f,m=12*l;for(p=0;p<12;++p)s[m++]=t.transforms[d++];a[l]=t.materials[f],o[l]=t.packIds[f],h[l]=t.entityIndexes[f],u[l]=t.visibilityFlags[f];var y=t.packIds[f]+":"+t.entityIndexes[f],v=c[y];null==v?c[y]=l:Array.isArray(v)?v.push(l):c[y]=[v,l];var g=6*l;for(p=0;p<3;++p)i[g+p]<r[p]&&(r[p]=i[g+p]);for(p=3;p<6;++p)i[g+p]>r[p]&&(r[p]=i[g+p])}return t.boxes=i,t.transforms=s,t.materials=a,t.packIds=o,t.entityIndexes=h,t.mesh2frag=c,t.visibilityFlags=u,r}(this.fragments,r);this.bbox={min:{x:u[0],y:u[1],z:u[2]},max:{x:u[3],y:u[4],z:u[5]}}}},W.prototype.postLoadComplete=function(t){if(t.loadDoneCB("svf"),this.fragments.polygonCounts){var e=performance.now(),n=this.materials?this.materials.materials:null;n&&this.addTransparencyFlagsToMaterials(n),this.bvh=new A(this.fragments,n),this.bvh.build(t.bvhOptions);var r=performance.now();t.worker.debug("BVH build time (worker thread):"+(r-e)),t.loadDoneCB("bvh")}t.loadDoneCB("done")},W.prototype.postLoad=function(t){!function(t){if(t.animations){var e=t.animations.animations;if(e)for(var n=t.globalOffset,r=(new a.a).makeTranslation(n.x,n.y,n.z),i=(new a.a).makeTranslation(-n.x,-n.y,-n.z),s=new a.a,o=new a.a,h=0;h<e.length;h++){var u=e[h];if(u.hierarchy)for(var c=0;c<u.hierarchy.length;c++){var l=u.hierarchy[c].keys;if(l)for(var f=0;f<l.length;f++){var d=l[f].pos;if(d){var m=n,p=l[f].rot;p&&(s.makeRotationFromQuaternion({x:p[0],y:p[1],z:p[2],w:p[3]}),o.multiplyMatrices(r,s).multiply(i),m={x:o.elements[12],y:o.elements[13],z:o.elements[14]}),H(d,m)}var y=l[f].target;y&&H(y,n);var v=l[f].points;if(v)for(var g=0;g<v.length;g++)H(v[g],n)}}}}}(this),this.postLoadOfCam(t),this.postLoadOfLight(t),this.postLoadOfFragments(t),this.postLoadOfBBox(t),this.postLoadOfObjectIds(t),this.postLoadComplete(t)};var Q=n(14);function X(t,e){this.offset=0,this.byteLength=e,this.range=0,this.compressedBuffer=t,this.compressedByteLength=t.length,this.compressedOffset=0,this.decompressEnd=!1,this.resetCount=0,this.convBuf=new ArrayBuffer(8),this.convUint8=new Uint8Array(this.convBuf),this.convUint16=new Uint16Array(this.convBuf),this.convInt32=new Int32Array(this.convBuf),this.convUint32=new Uint32Array(this.convBuf),this.convFloat32=new Float32Array(this.convBuf),this.convFloat64=new Float64Array(this.convBuf),this.COMPRESSED_chunk_SIZE=524288,this.DECOMPRESSED_chunk_SIZE=262144,this.chunks=[],this.chunksByteLengthMax=0,this.chunksByteLengthMin=0,this.chunkPointer=null,this.chunkOffset=0,this.tempchunk={startIdx:0,endIdx:0,buffer:null},this.inflate=this.getInflate(),this.prepare(0,1024)}X.prototype.getInflate=function(){if(!this.inflate){this.inflate=new Q.Inflate({level:3,chunkSize:this.DECOMPRESSED_chunk_SIZE});var t=this;this.inflate.onData=function(e){t.chunksByteLengthMax+=e.byteLength,t.chunksByteLengthMax<t.offset&&(e=null,t.chunksByteLengthMin=t.chunksByteLengthMax),t.chunks.push(e)},this.inflate.onEnd=function(){if(t.decompressEnd=!0,t.inflate=null,t.chunksByteLengthMax!=t.byteLength)throw"Decompress error, unexpected size."}}return this.inflate},X.prototype.prepare=function(t,e,n){if(this.chunksByteLengthMin>t&&(this.reset(),this.offset=t,this.range=e),!n){for(var r=Math.floor(t/this.DECOMPRESSED_chunk_SIZE),i=Math.floor(this.chunksByteLengthMin/this.DECOMPRESSED_chunk_SIZE),s=this.chunks.length<r?this.chunks.length:r,a=i;a<s;a++)this.chunks[a]=null;this.chunksByteLengthMin=s*this.DECOMPRESSED_chunk_SIZE}var o=t+(e=e||1);o=o>this.byteLength?this.byteLength:o;for(var h=!1;o>this.chunksByteLengthMax;){var u=this.COMPRESSED_chunk_SIZE;this.compressedOffset+u>=this.compressedByteLength&&(u=this.compressedByteLength-this.compressedOffset,h=!0);var c=new Uint8Array(this.compressedBuffer.buffer,this.compressedOffset,u);if(this.getInflate().push(c,h),this.compressedOffset+=u,h)break}},X.prototype.ensurechunkData=function(t){t=t||1;var e=this.chunks.length,n=Math.floor(this.offset/this.DECOMPRESSED_chunk_SIZE),r=Math.floor((this.offset+t-1)/this.DECOMPRESSED_chunk_SIZE);if(r>=e){var i=(r-e+1)*this.DECOMPRESSED_chunk_SIZE;this.prepare(this.DECOMPRESSED_chunk_SIZE*e,i,!0)}if(n<r){if(this.tempchunk.startIdx>n||this.tempchunk.endIdx<r){var s=(r-n+1)*this.DECOMPRESSED_chunk_SIZE;this.tempchunk.buffer=new Uint8Array(s);for(var a=0,o=n;o<=r;o++)this.tempchunk.buffer.set(this.chunks[o],a),a+=this.DECOMPRESSED_chunk_SIZE;this.tempchunk.startIdx=n,this.tempchunk.endIdx=r}this.chunkPointer=this.tempchunk.buffer}else this.chunkPointer=this.chunks[n];this.chunkOffset=this.offset-n*this.DECOMPRESSED_chunk_SIZE,this.offset+=t},X.prototype.seek=function(t,e,n){this.offset=t,this.range=e,this.prepare(t,e,n)},X.prototype.getBytes=function(t){return this.ensurechunkData(t),new Uint8Array(this.chunkPointer.buffer,this.chunkOffset,t)},X.prototype.getVarints=function(){var t,e=0,n=0;do{this.ensurechunkData(),e|=(127&(t=this.chunkPointer[this.chunkOffset]))<<n,n+=7}while(128&t);return e},X.prototype.getUint8=function(){return this.ensurechunkData(),this.chunkPointer[this.chunkOffset]},X.prototype.getUint16=function(){return this.ensurechunkData(),this.convUint8[0]=this.chunkPointer[this.chunkOffset],this.ensurechunkData(),this.convUint8[1]=this.chunkPointer[this.chunkOffset],this.convUint16[0]},X.prototype.getInt16=function(){var t=this.getUint16();return t>32767&&(t|=4294901760),t},X.prototype.getInt32=function(){var t=this.convUint8;return this.ensurechunkData(),t[0]=this.chunkPointer[this.chunkOffset],this.ensurechunkData(),t[1]=this.chunkPointer[this.chunkOffset],this.ensurechunkData(),t[2]=this.chunkPointer[this.chunkOffset],this.ensurechunkData(),t[3]=this.chunkPointer[this.chunkOffset],this.convInt32[0]},X.prototype.getUint32=function(){var t=this.convUint8;return this.ensurechunkData(),t[0]=this.chunkPointer[this.chunkOffset],this.ensurechunkData(),t[1]=this.chunkPointer[this.chunkOffset],this.ensurechunkData(),t[2]=this.chunkPointer[this.chunkOffset],this.ensurechunkData(),t[3]=this.chunkPointer[this.chunkOffset],this.convUint32[0]},X.prototype.getFloat32=function(){var t=this.convUint8;return this.ensurechunkData(),t[0]=this.chunkPointer[this.chunkOffset],this.ensurechunkData(),t[1]=this.chunkPointer[this.chunkOffset],this.ensurechunkData(),t[2]=this.chunkPointer[this.chunkOffset],this.ensurechunkData(),t[3]=this.chunkPointer[this.chunkOffset],this.convFloat32[0]},X.prototype.getFloat64=function(){for(var t=this.convUint8,e=0;e<8;e++)this.ensurechunkData(),t[e]=this.chunkPointer[this.chunkOffset];return this.convFloat64[0]},X.prototype.getString=function(t){var e="";this.ensurechunkData(t);for(var n,r=this.chunkPointer,i=this.chunkOffset,s=this.chunkOffset+t;i<s;i++)e+=String.fromCharCode(r[i]);try{n=decodeURIComponent(escape(e))}catch(t){n=e,debug("Failed to decode string "+n)}return n},X.prototype.reset=function(t){this.resetCount++,debug("InputStream Less Reset: "+this.resetCount),t&&(this.compressedBuffer=t,this.compressedByteLength=t.length),this.offset=0,this.chunks=[],this.chunksByteLengthMax=0,this.chunksByteLengthMin=0,this.compressedOffset=0,this.decompressEnd=!1,this.chunkPointer=null,this.chunkOffset=0,this.inflate=null,this.tempchunk.startIdx=0,this.tempchunk.endIdx=0,this.tempchunk.buffer=null};var Y=n(14);function K(t,e){var n,r=!1;if(31==t[0]&&139==t[1])if(e){r=!0;var i=(n=new X(t,e)).getInt32();this.type=n.getString(i),this.version=n.getInt32();var s=Math.floor(.9*n.byteLength);n.seek(s,n.byteLength-s)}else{t=Y.ungzip(t);i=(n=new I.a(t)).getInt32();this.type=n.getString(i),this.version=n.getInt32()}else n=new I.a(t);this.stream=n,this.types=null,this.entryOffsets=[],n.seek(n.byteLength-8,8,r);var a=n.getUint32();this.typesOffset=n.getUint32(),n.seek(this.typesOffset,1,r);var o=this.readU32V();this.types=[];for(var h=0;h<o;++h)this.types.push({entryClass:this.readString(),entryType:this.readString(),version:this.readU32V()});n.seek(a,1,r);var u=this.readU32V(),c=this.entryOffsets;for(h=0;h<u;++h)c.push(n.getUint32());n.seek(0)}K.prototype=Object.create(T.a.prototype);var J=Object(x.b)()?6291456:33554432;function $(t){W.call(this,t),this.memoryOptimizedMode=!1,this.pendingGeometryMetadataLoad={}}$.prototype=Object.create(W.prototype),$.prototype.constructor=$,$.prototype.loadAsyncResource=function(t,e,n,r,i){if(n)r(n);else{var s=this;this.pendingRequests++,o.a.getItem(t,t.basePath+e,(function(e){s.pendingRequests--,r(e),0==s.pendingRequests&&s.postLoad(t)}),t.onFailureCallback,{skipDecompress:i})}},$.prototype.parseFragmentList=function(t,e,n,r){this.memoryOptimizedMode=e.perfOpt.forceMemoryOptimizedMode||t.size>J,debug("PackageML: memory optimized mode: "+this.memoryOptimizedMode);var i=this;if(this.loadAsyncResource(e,n,r,(function(n){var r=new K(n,t.usize),s=U(r,i.fragments=new P,e.globalOffset,e.placementTransform,e.fragmentTransformsDouble,e.objectIds,i.bbox,i.globalOffset);r=null,i.applyLargeBoxOffset(s),i.memoryOptimizedMode&&i.pendingGeometryMetadataLoad.path&&i.loadAsyncResource(e,i.pendingGeometryMetadataLoad.path,i.pendingGeometryMetadataLoad.contents,(function(t){var e=new K(t,i.pendingGeometryMetadataLoad.usize);debug("PackageML: read geometry metadata into fragment directly."),i.primitiveCount=F(e,i.fragments),i.numGeoms=e.getEntryCounts(),e=null,i.pendingGeometryMetadataLoad.contents=null}),i.memoryOptimizedMode)}),i.memoryOptimizedMode),!this.memoryOptimizedMode&&this.pendingGeometryMetadataLoad.path){n=this.pendingGeometryMetadataLoad.path,r=this.pendingGeometryMetadataLoad.contents;this.pendingGeometryMetadataLoad={},debug("PackageML: read geometry metadata as usual."),W.prototype.parseGeometryMetadata.call(this,null,e,n,r)}},$.prototype.parseGeometryMetadata=function(t,e,n,r){var i=t.usize;if(this.fragments){var s=this;this.loadAsyncResource(e,n,r,(function(t){var e=new K(t,i);s.primitiveCount=F(e,s.fragments),s.numGeoms=e.getEntryCounts(),e=null}),s.memoryOptimizedMode)}else this.pendingGeometryMetadataLoad.path=n,this.pendingGeometryMetadataLoad.contents=r,this.pendingGeometryMetadataLoad.usize=i},$.prototype.postLoadOfFragments=function(t){this.memoryOptimizedMode?this.fragments.mesh2frag||this.calculateMesh2Frag(this.fragments):W.prototype.postLoadOfFragments.call(this,t)},$.prototype.postLoadOfObjectIds=function(t){if(this.memoryOptimizedMode){if(t.objectIds&&t.objectIds.length>0){var e=this.geompacks.length,n=this.fragments,r=0,i=new Int8Array(e);for(r=0;r<n.packIds.length;r++)i[n.packIds[r]]=15;var s=0;for(r=0;r<i.length;r++)15===i[r]&&(this.geompacks[s]=this.geompacks[r],s++);s<e&&this.geompacks.splice(s,e-s)}}else W.prototype.postLoadOfObjectIds.call(this,t)},$.prototype.postLoadComplete=function(t){if(this.memoryOptimizedMode){if(this.fragments.polygonCounts){var e=performance.now(),n=this.materials?this.materials.materials:null;n&&this.addTransparencyFlagsToMaterials(n),this.bvh=new A(this.fragments,n),this.bvh.build(t.bvhOptions);var r=performance.now();t.worker.debug("BVH build time (worker thread):"+(r-e))}t.loadDoneCB("svf"),t.loadDoneCB("done")}else W.prototype.postLoadComplete.call(this,t)};var tt=n(6);function et(t,e){try{e()}catch(e){t.worker.raiseError(tt.a.BAD_DATA,"Unhandled exception while loading SVF",{url:t.url,exception:e.toString(),stack:e.stack}),t.worker.postMessage(null)}}function nt(t){var e=t.worker;et(t,(function(){var n=t.svf;t.loadDoneCB=function(r,i){if("svf"==r){var s,a,o=n.fragments,h=[o.transforms.buffer,o.packIds.buffer,o.entityIndexes.buffer,o.fragId2dbId.buffer,o.visibilityFlags.buffer];n.bvh?(a={nodes:n.bvh.nodes.getRawData(),primitives:n.bvh.primitives,useLeanNodes:32==n.bvh.nodes.bytes_per_node},h.push(a.nodes),h.push(a.primitives.buffer),h.push(o.boxes.buffer),h.push(o.polygonCounts.buffer),h.push(o.materials.buffer),s={svf:n,bvh:a,progress:1}):s={svf:n,progress:.8},e.postMessage(s,h)}else if("bvh"==r)a={nodes:n.bvh.nodes.getRawData(),primitives:n.bvh.primitives,useLeanNodes:32==n.bvh.nodes.bytes_per_node},e.postMessage({bvh:a,basePath:n.basePath,progress:1},[a.nodes,a.primitives.buffer]);else if("mesh"==r){var u=[];i.mesh&&u.push(i.mesh.vb.buffer),e.postMessage(i,u)}else"done"==r?e.postMessage({progress:1}):(e.raiseError(tt.a.BAD_DATA,"Failure while loading SVF",{url:t.url}),e.postMessage(null))},n.loadRemainingSvf(t)}))}function rt(t){var e=t.worker;e.postMessage({progress:.01});var n="svf",r=t.url.toLocaleLowerCase();r.lastIndexOf(".gltf")===r.length-5&&(n="gltf"),r.lastIndexOf(".glb")===r.length-4&&(n="glb");var i={responseType:"gltf"===n?"json":"arraybuffer"};o.a.getItem(t,t.url,(function(r){e.postMessage({progress:.5}),et(t,(function(){var i,s={max_pf_files:t.max_pf_files};i="gltf"===n||"glb"===n?new d(r):t.perfOpt&&t.perfOpt.memoryOptimizedSvfLoading?new $(new Uint8Array(r)):new W(new Uint8Array(r),s),t.svf=i,i.loadManifest(t),t.interceptManifest?e.postMessage({manifest:i.manifest}):(t.manifest=i.manifest,nt(t))}))}),t.onFailureCallback,i),"svf"===n&&o.a.getItem(t,t.basePath+"0.pf",(function(){}),(function(){}),i)}function it(t){var e=t.worker;function n(t){e.postMessage({"fetch-topology":{error:t,topology:null}})}o.a.getItem(t,t.path,(function(t){e.postMessage({"status-topology":{}});var r=null;try{var i=new I.a(t),s=t.byteLength;0<s&&(r=JSON.parse(i.getString(s))),r?e.postMessage({"fetch-topology":{error:null,topology:r}}):n("topology-no-content")}catch(t){n(t)}}),n)}function st(t){t.register("LOAD_SVF",{doOperation:rt}),t.register("LOAD_SVF_CONTD",{doOperation:nt}),t.register("FETCH_TOPOLOGY",{doOperation:it})}n.d(e,"register",(function(){return st}))},function(t,e,n){"use strict";n.r(e);var r=n(7),i=n(2),s=n(11),a=new Float32Array(3),o=1/Math.PI,h=Math.atan2;Object(i.c)()||(h=function(t,e){var n=Math.abs(e),r=Math.abs(t),i=Math.min(n,r)/Math.max(n,r),s=i*i,a=((-.0464964749*s+.15931422)*s-.327622764)*s*i+i;return r>n&&(a=1.57079637-a),e<0&&(a=3.14159274-a),t<0&&(a=-a),a});var u=function(t,e,n,r,i){var s={x:e[t*r],y:e[t*r+1],z:e[t*r+2]},a={x:s.x-e[t*i],y:s.y-e[t*i+1],z:s.z-e[t*i+2]},o=n[r].next==i?n[r].prev:n[r].next;return{pos:s,next:a,prev:o<0?{x:a.x,y:a.y,z:a.z}:{x:e[t*o]-s.x,y:e[t*o+1]-s.y,z:e[t*o+2]-s.z}}},c=function(t,e,n,r,i){if("OCTM"!=t.getString(4))return null;if(5!=t.getInt32())return null;var u=t.getString(3);t.getUint8();var c={stream:null,vertices:null,indices:null,normals:null,colors:null,uvs:[],attrs:[]};c.vertexCount=t.getInt32(),c.triangleCount=t.getInt32(),c.texMapCount=t.getInt32(),c.attribMapCount=t.getInt32(),c.flags=t.getInt32(),c.comment=t.getString(t.getInt32());var l=i;c.vbstride=3,1&c.flags&&(c.vbstride+=l?1:3),c.vbstride+=2*(c.texMapCount||0),c.vbstride+=3*(c.attribMapCount||0),c.vblayout={};var f=0;if(c.vblayout.position={offset:f,itemSize:3},f+=3,1&c.flags&&(c.vblayout.normal={offset:f,itemSize:l?2:3,bytesPerItem:l?2:4,normalize:l},f+=l?1:3),c.texMapCount)for(var d=0;d<c.texMapCount;d++){var m="uv";d&&(m+=(d+1).toString()),c.vblayout[m]={offset:f,itemSize:2},f+=2}return"RAW"==u?(function(t,e,n,r,i){var s=function(){return t.getString(t.getInt32())},u=t.getString(4);if("INDX"!=u)return null;var c=e.vertexCount,l=e.triangleCount,f=e.vbstride,d=c*f,m=d+(3*l*2+3)/4|0;if(e.sharedBufferBytes=4*m,!i){var p,y,v,g,x;if(n||(n=new ArrayBuffer(4*m),r=0),p=e.vb=new Float32Array(n,r,d),e.indices=new Uint16Array(n,r+4*d,3*l),t.getIndicesArray(p.buffer,r+4*d,3*l),"VERT"!=(u=t.getString(4)))return null;if(e.vblayout.normal&&2===e.vblayout.normal.itemSize&&(y=new Uint16Array(p.buffer,p.byteOffset,p.byteLength/2)),t.getVector3Array(p,c,e.vblayout.position.offset,f),1&e.flags){if("NORM"!=(u=t.getString(4)))return null;if(y)for(a.length<3*c&&(a=new Float32Array(3*c)),t.getVector3Array(a,c,0,3),v=0,x=e.vblayout.normal.offset;v<c;v++,x+=f){var _=.5*(h(a[3*v+1],a[3*v])*o+1),b=.5*(a[3*v+2]+1);y[2*x]=65535*_|0,y[2*x+1]=65535*b|0}else t.getVector3Array(p,c,e.vblayout.normal.offset,f)}for(g=0;g<e.texMapCount;g++){if("TEXC"!=(u=t.getString(4)))return null;var w={name:s(),file:s()};e.uvs.push(w);var k="uv";g&&(k+=(g+1).toString()),t.getVector2Array(p,c,e.vblayout[k].offset,f)}var z=f-3*(e.attribMapCount||0);for(g=0;g<e.attribMapCount;g++){if("ATTR"!=(u=t.getString(4)))return null;var E,S={name:s()};if(-1!=S.name.indexOf("Color"))E="color";else{if(-1==S.name.indexOf("UVW")){e.attrs.push(S),t.getBytes(16*c);continue}E="uvw"}e.vblayout[E]={offset:z,itemSize:3};var M=[0,0,0,0];for(v=0,x=z;v<c;v++,x+=f)t.getVector4(M,0),p[x]=M[0],p[x+1]=M[1],p[x+2]=M[2];z+=3}}}(t,c,e,n,r),r||(s.a.deduceUVRepetition(c),s.a.computeBounds3D(c)),c):"MG2"==u?(debug("readOpenCTM_MG2(stream, mesh, dstBuffer, startOffset, estimateSizeOnly) not supported"),r||(s.a.deduceUVRepetition(c),s.a.computeBounds3D(c)),c):null},l=function(t,e,n,r){if(n)return null;var i,a,o={vertices:null,indices:null,colors:null,normals:null,uvs:[],attrs:[],lineWidth:1};r?(e.version>1?(o.vertexCount=t.readU16(),i=t.readU16(),a=t.readU16(),e.version>2&&(o.lineWidth=t.readF32())):(o.vertexCount=t.readU32V(),i=t.readU32V(),a=t.readU32V()),o.isLines=!0):(o.vertexCount=t.readU16(),i=t.readU16(),o.pointSize=t.readF32(),o.isPoints=!0);var h=0!=t.stream.getUint8();o.vbstride=3,h&&(o.vbstride+=3),o.vblayout={};var c=0;o.vblayout.position={offset:c,itemSize:3},c+=3,h&&(o.vblayout.color={offset:c,itemSize:3}),o.vb=new Float32Array(o.vertexCount*o.vbstride);var l,f,d=o.vb,m=o.vbstride,p=t.stream;if(p.getVector3Array(d,o.vertexCount,o.vblayout.position.offset,m),h)for(l=0,c=o.vblayout.color.offset,f=o.vertexCount;l<f;l++,c+=m)d[c]=p.getFloat32(),d[c+1]=p.getFloat32(),d[c+2]=p.getFloat32(),p.getFloat32();var y=function(t){return t.buffer.slice(t.byteOffset,t.byteOffset+t.length)};if(r){var v,g;e.version>1?(v=new Uint16Array(y(p.getBytes(2*i))),g=new Uint16Array(y(p.getBytes(2*a)))):(v=new Int32Array(y(p.getBytes(4*i))),g=new Int32Array(y(p.getBytes(4*a))));var x=g[a-1]-a+1;o.indices=new Uint16Array(2*x);for(var _=0,b=0;b+1<a;b++)for(var w=g[b];w+1<g[b+1];w++)o.indices[_++]=v[w],o.indices[_++]=v[w+1]}else o.indices=new Uint16Array(y(p.getBytes(2*i)));return 1!=o.lineWidth&&function(t,e,n,r,i){i=t.vbstride,t.vblayout.prev={offset:i,itemSize:3},i+=3,t.vblayout.next={offset:i,itemSize:3},i+=3,t.vblayout.side={offset:i,itemSize:1},t.vbstride+=7;var s,a,o,h,c,l=0,f=new Array(t.vertexCount);for(s=0;s<t.vertexCount;++s)f[s]={prev:-1,next:-1,prev_seg:-1};for(a=0;a<r;++a)o=2*a,h=t.indices[o],c=t.indices[o+1],f[h].next=c,f[h].prev>=0&&++l,f[c].prev=h,f[c].prev_seg=a,f[c].next>=0&&++l;var d=2*r,m=new Array(d),p=new Uint16Array(6*(r+l)),y=0;for(a=0;a<r;++a)o=2*a,h=t.indices[o],c=t.indices[o+1],m[o]=u(e,n,f,h,c),m[o+1]=u(e,n,f,c,h),h=o,c=o+1,p[y++]=2*h+1,p[y++]=2*c,p[y++]=2*h,p[y++]=2*c,p[y++]=2*c+1,p[y++]=2*h,f[h=t.indices[o]].prev>=0&&(c=2*f[h].prev_seg+1,h=o,p[y++]=2*c,p[y++]=2*h,p[y++]=2*c+1,p[y++]=2*h+1,p[y++]=2*h,p[y++]=2*c);t.indices=p;var v=2*d;t.vb=new Float32Array(v*t.vbstride),i=t.vblayout.position.offset;for(var g=0;g<d;++g)for(var x=0;x<2;++x)t.vb[i]=m[g].pos.x,t.vb[i+1]=m[g].pos.y,t.vb[i+2]=m[g].pos.z,i+=e,t.vb[i]=m[g].prev.x,t.vb[i+1]=m[g].prev.y,t.vb[i+2]=m[g].prev.z,i+=3,t.vb[i]=m[g].next.x,t.vb[i+1]=m[g].next.y,t.vb[i+2]=m[g].next.z,i+=3,t.vb[i]=x?-1:1,i+=1;t.vertexCount=v,t.isWideLines=!0}(o,m,d,x,c),s.a.computeBounds3D(o),o},f=function(t,e,n){return l(t,e,n,!0)},d=function(t,e,n){return l(t,e,n,!1)};function m(t,e,n){var r=t.seekToEntry(e);return r?"Autodesk.CloudPlatform.OpenCTM"==r.entryType?c(t.stream,n.dstBuffer,n.startOffset,n.estimateSizeOnly,n.packNormals):"Autodesk.CloudPlatform.Lines"==r.entryType?f(t,r,n.estimateSizeOnly):"Autodesk.CloudPlatform.Points"==r.entryType?d(t,r,n.estimateSizeOnly):null:null}var p,y,v,g,x,_,b,w,k,z=n(6),E=n(4),S=n(0);function M(t){return t.vb?t.vb.length/t.vbstride:t.attributes.positions?t.attributes.positions.count:0}function A(t,e,n){var r=t.attributes;p||(p=new S.a,y=new S.a,new S.a),n&&(v||(v=new THREE.Matrix3),v.getNormalMatrix(n));var i,s=t.vb||r.position.array,a=t.vb||r.normal&&r.normal.array,o=t.vb?t.vbstride:3;if(t.vblayout){if(!t.vblayout.position)return;i=t.vblayout.position.offset}else{if(!r.position)return;i=r.position.itemOffset||0}var h=0,u=t.vblayout?t.vblayout.normal:r.normal||null;u?h=u.offset||u.itemOffset||0:a=null,!u||3===u.itemSize&&4===u.bytesPerItem||(a=null);for(var c=t.vb?t.vb.length/t.vbstride:s.length,l=i,f=h,d=0;d<c;d++,l+=o,f+=o)p.set(s[l],s[l+1],s[l+2]),n&&p.applyMatrix4(n),a&&(y.set(a[f],a[f+1],a[f+2]),n&&y.applyMatrix3(v)),e(p,a?y:null,null,d)}function I(t,e){var n,r,i,s=t.attributes;g||(g=new S.a,x=new S.a,_=new S.a,b=new S.a,w=new S.a,k=new S.a);var a,o=t.vb||s.position.array,h=t.vb||s.normal&&s.normal.array,u=t.vb?t.vbstride:3;if(t.vblayout){if(!t.vblayout.position)return;a=t.vblayout.position.offset}else{if(!s.position)return;a=s.position.itemOffset||0}var c=0,l=t.vblayout?t.vblayout.normal:s.normal||null;l?c=l.offset||l.itemOffset||0:h=null,!l||3===l.itemSize&&4===l.bytesPerItem||(h=null);var f=t.ib||t.indices||(s.index?s.index.array:null);if(f){var d=t.offsets;d&&0!==d.length||(d=[{start:0,count:f.length,index:0}]);for(var m=0,p=d.length;m<p;++m)for(var y=d[m].start,v=d[m].count,z=d[m].index,E=y,M=y+v;E<M;E+=3){var A=(n=z+f[E])*u+a,I=(r=z+f[E+1])*u+a,T=(i=z+f[E+2])*u+a;if(g.x=o[A],g.y=o[A+1],g.z=o[A+2],x.x=o[I],x.y=o[I+1],x.z=o[I+2],_.x=o[T],_.y=o[T+1],_.z=o[T+2],h){var C=n*u+c,O=r*u+c,R=i*u+c;b.x=h[C],b.y=h[C+1],b.z=h[C+2],w.x=h[O],w.y=h[O+1],w.z=h[O+2],k.x=h[R],k.y=h[R+1],k.z=h[R+2],e(g,x,_,n,r,i,b,w,k,E/3)}else e(g,x,_,n,r,i,null,null,null,E/3)}}else{var P=t.vb?t.vb.length/t.vbstride:o.length/3;for(E=0;E<P;E++){A=(n=3*E)*u+a,I=(r=3*E+1)*u+a,T=(i=3*E+2)*u+a;if(g.x=o[A],g.y=o[A+1],g.z=o[A+2],x.x=o[I],x.y=o[I+1],x.z=o[I+2],_.x=o[T],_.y=o[T+1],_.z=o[T+2],h){C=n*u+c,O=r*u+c,R=i*u+c;b.x=h[C],b.y=h[C+1],b.z=h[C+2],w.x=h[O],w.y=h[O+1],w.z=h[O+2],k.x=h[R],k.y=h[R+1],k.z=h[R+2],e(g,x,_,n,r,i,b,w,k,E)}else e(g,x,_,n,r,i,null,null,null,E)}}}var T=n(8);function C(t,e){var n=[],r={},i=1;if(t.boundingBox||e){var s=(new T.a).copy(t.boundingBox||e).size();i=Math.max(s.x,Math.max(s.y,s.z))}var a=65536/i;return A(t,(function(t,e,i,s){var o=function(t,e){var n=0|t.x*a,i=0|t.y*a,s=0|t.z*a,o=r[n];o||(r[n]=o={});var h=o[i];h||(o[i]=h={});var u=h[s];return void 0===u&&(h[s]=u=e),u}(t,s);n[s]=o})),n}function O(t,e,n,r){if(!t.isLines&&!t.iblines){var i=C(t,n),s=function(t,e){var n=new Float32Array(3*M(t));return A(t,(function(t,e,r,i){n[3*i]=t.x,n[3*i+1]=t.y,n[3*i+2]=t.z}),e),n}(t,e),a={},o=[],h=new S.a,u=new S.a,c=new S.a,l=new S.a,f=new S.a;for(var d in I(t,(function(t,e,n,r,i,s){v(r,i,s),v(i,s,r),v(s,r,i)})),a)for(var m in a[d])o.push(parseInt(d)),o.push(parseInt(m));o.length>1&&(t.iblines=new Uint16Array(o.length),t.iblines.set(o))}function p(t,e){e.x=s[3*t],e.y=s[3*t+1],e.z=s[3*t+2]}function y(t,e,n,r){p(t,h),p(e,u),p(n,c),u.sub(h),c.sub(h),u.cross(c),r.copy(u).normalize()}function v(t,e,n){var s=i[t],h=i[e],u=i[n];if(s!==h&&s!==u&&h!==u){var c=!1;if(s>h){var d=s;s=h,h=d,c=!0}var m=a[s];if(m){var p=m[h];if(void 0===p)m[h]=c?-n-1:n;else{if(r)o.push(t),o.push(e);else{y(t,e,n,l),p<0?y(h,s,i[-p-1],f):y(s,h,i[p],f);var v=l.dot(f);Math.abs(v)<.25&&(o.push(t),o.push(e))}delete m[h]}}else a[s]={},a[s][h]=n}}}function R(t){var e=t.worker;var n={skipAssetCallback:t.skipAssetCallback};E.a.getItem(t,t.url,(function(n){e.postMessage({url:t.url,workerId:t.workerId,progress:.5}),function(t,e){try{e()}catch(e){t.raiseError(z.a.BAD_DATA,"Unhandled exception while reading pack file",{url:t.url,exception:e.toString(),stack:e.stack})}}(t,(function(){var i,s,a=new r.a(n),o=!1,h={estimateSizeOnly:!0,packNormals:void 0===t.packNormals||t.packNormals},u=a.getEntryCounts(),c=t.inMemory||[],l=0,f=function(t){var e=c[t>>5];return!(e&&e&1<<(31&t))};for(i=0;i<u;i++)f(i)&&(l+=(s=m(a,i,h))&&s.sharedBufferBytes||0);var d=l?new ArrayBuffer(l):null,p=0,y={packId:t.packId,workerId:t.workerId,progress:1,meshes:[],sharedBuffer:d},v=d?[d]:[];for(h={dstBuffer:d,startOffset:0,estimateSizeOnly:!1,packNormals:void 0===t.packNormals||t.packNormals},i=0;i<u;i++)h.startOffset=p,f(i)&&((s=m(a,i,h))?(p+=s.sharedBufferBytes||0,y.meshes[i]=s,t.createWireframe&&(O(s),s.iblines&&v.push(s.iblines.buffer))):(o||(e.raiseError(z.a.BAD_DATA,"Unable to load geometry",{url:t.url}),o=!0),e.postMessage(y)));e.postMessage(y,v)}))}),t.onFailureCallback,n)}function P(t){t.register("LOAD_GEOMETRY",{doOperation:R})}n.d(e,"register",(function(){return P}))},function(t,e,n){"use strict";n.r(e);var r=n(4),i=n(9);function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._workers={}}var e,n,a;return e=t,(n=[{key:"dispatch",value:function(t){if(t.hasOwnProperty("operation")){t.endpoint&&i.a.setEndpointAndApi(t.endpoint,t.api);var e=this._workers[t.operation];if(e){if(t.basePath="",t.url){var n=t.url.lastIndexOf("/");-1!=n&&(t.basePath=t.url.substr(0,n+1))}t.raiseError=function(){t.worker.raiseError.apply(t.worker,arguments)},t.onFailureCallback=r.a.defaultFailureCallback.bind(t),e.doOperation(t)}}}},{key:"register",value:function(t,e){this._workers[t]=e}},{key:"unregister",value:function(t){delete this._workers[t]}}])&&s(e.prototype,n),a&&s(e,a),t}());n(33).register(a),n(34).register(a),n(36).register(a),self.addEventListener("message",(function(t){var e=t.data;e.worker=self,a.dispatch(e)}),!1),self.raiseError=function(t,e,n){self.postMessage({error:{code:t,msg:e,args:n}})},self.debug=function(t){self.postMessage({debug:1,message:t})}},function(t,e,n){"use strict";n.r(e);var r=n(3),i=[[1,5,4,7,3,2,6],[0,3,2,1,5,4,6],[0,3,2,6,5,4,6],[0,4,7,3,2,1,6],[0,3,2,1,-1,-1,4],[0,3,2,6,5,1,6],[0,4,7,6,2,1,6],[0,3,7,6,2,1,6],[0,3,7,6,5,1,6],[0,1,5,4,7,3,6],[0,1,5,4,-1,-1,4],[0,1,2,6,5,4,6],[0,4,7,3,-1,-1,4],[-1,-1,-1,-1,-1,-1,0],[1,2,6,5,-1,-1,4],[0,4,7,6,2,3,6],[2,3,7,6,-1,-1,4],[1,2,3,7,6,5,6],[0,1,5,6,7,3,6],[0,1,5,6,7,4,6],[0,1,2,6,7,4,6],[0,4,5,6,7,3,6],[4,5,6,7,-1,-1,4],[1,2,6,7,4,5,6],[0,4,5,6,2,3,6],[2,3,7,4,5,6,6],[1,2,3,7,4,5,6]];function s(){this.frustum=new r.Frustum,this.viewProj=new r.Matrix4,this.viewDir=[0,0,1],this.ar=1,this.viewport=new r.Vector3(1,1,1),this.areaConv=1,this.areaCullThreshold=1,this.eye=new r.Vector3,this.perspective=!1}var a,o;function h(t,e,n){return n.x=1&e?t.max.x:t.min.x,n.y=2&e?t.max.y:t.min.y,n.z=4&e?t.max.z:t.min.z,n}s.OUTSIDE=0,s.INTERSECTS=1,s.CONTAINS=2,s.CONTAINMENT_UNKNOWN=-1,s.prototype.reset=function(t,e){this.viewProj.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this.perspective=t.isPerspective,this.frustum.setFromMatrix(this.viewProj);var n=t.matrixWorldInverse.elements;this.ar=t.aspect,this.viewDir[0]=-n[2],this.viewDir[1]=-n[6],this.viewDir[2]=-n[10],this.eye.x=t.position.x,this.eye.y=t.position.y,this.eye.z=t.position.z,this.areaConv=t.clientWidth*t.clientHeight/4,this.cutPlanes=e},s.prototype.projectedArea=function(){var t=[new r.Vector3,new r.Vector3,new r.Vector3,new r.Vector3,new r.Vector3,new r.Vector3,new r.Vector3,new r.Vector3],e=new r.Box2;function n(t,e){var n=t.x,r=t.y,i=t.z,s=e.elements,a=s[3]*n+s[7]*r+s[11]*i+s[15];a<0&&(a=-a);var o=1/a;t.x=(s[0]*n+s[4]*r+s[8]*i+s[12])*o,t.y=(s[1]*n+s[5]*r+s[9]*i+s[13])*o}return function(r){if(r.empty())return 0;var i=this.viewProj;t[0].set(r.min.x,r.min.y,r.min.z),t[1].set(r.min.x,r.min.y,r.max.z),t[2].set(r.min.x,r.max.y,r.min.z),t[3].set(r.min.x,r.max.y,r.max.z),t[4].set(r.max.x,r.min.y,r.min.z),t[5].set(r.max.x,r.min.y,r.max.z),t[6].set(r.max.x,r.max.y,r.min.z),t[7].set(r.max.x,r.max.y,r.max.z);for(var s=0;s<8;s++)n(t[s],i);return e.makeEmpty(),e.setFromPoints(t),e.min.x<-1&&(e.min.x=-1),e.min.x>1&&(e.min.x=1),e.min.y<-1&&(e.min.y=-1),e.min.y>1&&(e.min.y=1),e.max.x>1&&(e.max.x=1),e.max.x<-1&&(e.max.x=-1),e.max.y>1&&(e.max.y=1),e.max.y<-1&&(e.max.y=-1),(e.max.x-e.min.x)*(e.max.y-e.min.y)}}(),s.prototype.projectedBoxArea=function(){for(var t,e=[],n=[],s=0;s<10;s++)e.push(new r.Vector3),n.push(new r.Vector3);function a(t,e){var n=t.x,r=t.y,i=t.z,s=e.elements,a=s[3]*n+s[7]*r+s[11]*i+s[15];a<0&&(a=-a);var o=1/a;t.x=(s[0]*n+s[4]*r+s[8]*i+s[12])*o,t.y=(s[1]*n+s[5]*r+s[9]*i+s[13])*o}return function(r,s){if(r.empty())return 0;var o,h=this.viewProj;if(this.perspective?(o=this.eye.x>=r.min.x?this.eye.x>r.max.x?2:1:0,this.eye.y>=r.min.y&&(o+=this.eye.y>r.max.y?6:3),this.eye.z>=r.min.z&&(o+=this.eye.z>r.max.z?18:9)):(o=this.viewDir[0]<=0?this.viewDir[0]<0?2:1:0,this.viewDir[1]<=0&&(o+=this.viewDir[1]<0?6:3),this.viewDir[2]<=0&&(o+=this.viewDir[2]<0?18:9)),13===o)return 4;var u,c=i[o][6];for(u=0;u<c;u++){var l=i[o][u];e[u].set((l+1)%4<2?r.min.x:r.max.x,l%4<2?r.min.y:r.max.y,l<4?r.min.z:r.max.z),a(e[u],h)}var f=0;if(s)for(f=(e[c-1].x-e[0].x)*(e[c-1].y+e[0].y),u=0;u<c-1;u++)f+=(e[u].x-e[u+1].x)*(e[u].y+e[u+1].y);else{var d=function(e,r){var i,s,a,o,h,u,c,l,f=e,d=n,m=function(t){switch(c){case 0:return t.x>=-1;case 1:return t.x<=1;case 2:return t.y>=-1;case 3:return t.y<=1}},p=function(t){d[l].x=t.x,d[l++].y=t.y},y=function(){var t,e;switch(c){case 0:t=-1,e=s.y+(a.y-s.y)*(t-s.x)/(a.x-s.x);break;case 1:t=1,e=s.y+(a.y-s.y)*(t-s.x)/(a.x-s.x);break;case 2:e=-1,t=s.x+(a.x-s.x)*(e-s.y)/(a.y-s.y);break;case 3:e=1,t=s.x+(a.x-s.x)*(e-s.y)/(a.y-s.y)}d[l].x=t,d[l++].y=e};for(c=0;c<4&&r>2;c++){for(l=0,o=m(s=f[r-1]),u=0;u<r;u++)h=m(a=f[u]),o?h?p(a):y():h&&(y(),p(a)),s=a,o=h;r=l,i=f,f=d,d=i}return t=r,f}(e,c);if(t>=3)for(f=(d[t-1].x-d[0].x)*(d[t-1].y+d[0].y),u=0;u<t-1;u++)f+=(d[u].x-d[u+1].x)*(d[u].y+d[u+1].y)}return Math.abs(.5*f)}}(),s.prototype.estimateDepth=function(t){var e=this.viewProj.elements,n=(t.min.x+t.max.x)/2,r=(t.min.y+t.max.y)/2,i=(t.min.z+t.max.z)/2,s=1/(e[3]*n+e[7]*r+e[11]*i+e[15]);return(e[2]*n+e[6]*r+e[10]*i+e[14])*s},s.prototype.intersectsBox=(a=new r.Vector3,o=new r.Vector3,function(t){for(var e=this.frustum.planes,n=0,r=0;r<6;r++){var i=e[r];a.x=i.normal.x>0?t.min.x:t.max.x,o.x=i.normal.x>0?t.max.x:t.min.x,a.y=i.normal.y>0?t.min.y:t.max.y,o.y=i.normal.y>0?t.max.y:t.min.y,a.z=i.normal.z>0?t.min.z:t.max.z,o.z=i.normal.z>0?t.max.z:t.min.z;var h=i.distanceToPoint(a),u=i.distanceToPoint(o);if(h<0&&u<0)return s.OUTSIDE;h>0&&u>0&&n++}return 6==n?s.CONTAINS:s.INTERSECTS});var u,c=function(t,e){u||(u=new r.Vector3);for(var n=0;n<8;n++){var i=h(t,n,u);if(a=e,!((s=i).x*a.x+s.y*a.y+s.z*a.z+a.w>1e-6))return!1}var s,a;return!0};s.prototype.boxOutsideCutPlanes=function(t){if(!this.cutPlanes)return!1;for(var e=0;e<this.cutPlanes.length;e++){var n=this.cutPlanes[e];if(c(t,n))return!0}return!1},n.d(e,"register",(function(){return p}));var l=6;function f(){var t,e,n,i,a,o,h,u,c,f=new r.Box3,d=1,m=new s,p=new r.Frustum,y=!0,v=0;function g(){return function(){var r,i;v=n;var a=new Int32Array(n),p=new Int32Array(e);for(r=0;r<n;r++)a[r]=r;c=0;var y,g,x,_,b=d/m.areaConv;for(r=0;r<n;r++)o[r]=0;for(r=0;r<e;r++){u[r]=0,g=f,x=void 0,_=void 0,x=r*l,_=t.boxes,g.min.x=_[x],g.min.y=_[x+1],g.min.z=_[x+2],g.max.x=_[x+3],g.max.y=_[x+4],g.max.z=_[x+5];var w=m.intersectsBox(f);w!==s.OUTSIDE&&(y=m.projectedBoxArea(f,w===s.CONTAINS))>b&&(o[t.packIds[r]]+=y,p[c++]=r)}for(Array.prototype.sort.call(a,(function(t,e){return o[e]-o[t]})),r=0;r<n&&o[a[r]]>0;r++)h[a[r]]=r;for(v=r,i=p.subarray(0,c),r=0;r<c;r++)u[i[r]]=h[t.packIds[i[r]]];return Array.prototype.sort.call(i,(function(t,e){return u[t]-u[e]})),{fragOrder:p,packOrder:a,pfVisible:v}}()}this.setFragments=function(r){t=r,e=r.packIds.length,i=1/0,a=-1/0;for(var s=0;s<e;s++){var l=t.packIds[s];i=Math.min(i,l),a=Math.max(a,l)}if((n=a+1)<0)return{error:"Empty fragment list"};o=new Float32Array(n),h=new Int32Array(n),u=new Float32Array(e),c=e,y=!0},this.calculateStep=function(){return y?(y=!1,g()):{}},this.setFrustum=function(t,e){return m.reset(t),y=y||!function(t,e){var n;for(n=0;n<6;n++){var r=t.planes[n],i=e.planes[n];if(r.constant!==i.constant)return!1;if(!r.normal.equals(i.normal))return!1}return!0}(p,m.frustum),p.copy(m.frustum),"number"==typeof e&&d!=e&&(d=e,y=!0),!0}}function d(t,e){t.lmv_timer=0;var n=t.lmv_calculator.calculateStep();if(n){var r=n.fragOrder?n.packOrder?[n.fragOrder.buffer,n.packOrder.buffer]:[n.fragOrder.buffer]:n.packOrder?[n.packOrder.buffer]:void 0;n.id=e,t.postMessage(n,r)}else t.lmv_timer=setTimeout(d,1,t,e)}function m(t){var e=t.worker,n=e.lmv_calculator;n||(e.lmv_calculator=n=new f),function(t){t.lmv_timer&&(clearTimeout(t.lmv_timer),t.lmv_timer=0)}(e),t.fragments&&function(t,e){e&&t.postMessage(e)}(e,n.setFragments(t.fragments)),t.camera&&(n.setFrustum(t.camera,t.pixelCullingThreshold),e.lmv_timer=setTimeout(d,1,e,t.id))}function p(t){t.register("CALCULATE_LOAD_ORDER",{doOperation:m})}}]);\n//# sourceMappingURL=70153eeae26430ab216c.worker.js.map',n.p+"70153eeae26430ab216c.worker.js")}},368:function(t,e,n){"use strict";var i={};(0,n(12).assign)(i,n(369),n(372),n(101)),t.exports=i},369:function(t,e,n){"use strict";var i=n(370),r=n(12),s=n(99),a=n(80),o=n(100),h=Object.prototype.toString,u=0,l=-1,c=0,f=8;function d(t){if(!(this instanceof d))return new d(t);this.options=r.assign({level:l,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:c,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var n=i.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==u)throw new Error(a[n]);if(e.header&&i.deflateSetHeader(this.strm,e.header),e.dictionary){var m;if(m="string"==typeof e.dictionary?s.string2buf(e.dictionary):"[object ArrayBuffer]"===h.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(n=i.deflateSetDictionary(this.strm,m))!==u)throw new Error(a[n]);this._dict_set=!0}}function m(t,e){var n=new d(e);if(n.push(t,!0),n.err)throw n.msg||a[n.err];return n.result}d.prototype.push=function(t,e){var n,a,o=this.strm,l=this.options.chunkSize;if(this.ended)return!1;a=e===~~e?e:!0===e?4:0,"string"==typeof t?o.input=s.string2buf(t):"[object ArrayBuffer]"===h.call(t)?o.input=new Uint8Array(t):o.input=t,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new r.Buf8(l),o.next_out=0,o.avail_out=l),1!==(n=i.deflate(o,a))&&n!==u)return this.onEnd(n),this.ended=!0,!1;0!==o.avail_out&&(0!==o.avail_in||4!==a&&2!==a)||("string"===this.options.to?this.onData(s.buf2binstring(r.shrinkBuf(o.output,o.next_out))):this.onData(r.shrinkBuf(o.output,o.next_out)))}while((o.avail_in>0||0===o.avail_out)&&1!==n);return 4===a?(n=i.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===u):2!==a||(this.onEnd(u),o.avail_out=0,!0)},d.prototype.onData=function(t){this.chunks.push(t)},d.prototype.onEnd=function(t){t===u&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=d,e.deflate=m,e.deflateRaw=function(t,e){return(e=e||{}).raw=!0,m(t,e)},e.gzip=function(t,e){return(e=e||{}).gzip=!0,m(t,e)}},370:function(t,e,n){"use strict";var i,r=n(12),s=n(371),a=n(97),o=n(98),h=n(80),u=0,l=1,c=3,f=4,d=5,m=0,p=1,g=-2,y=-3,v=-5,_=-1,b=1,x=2,w=3,k=4,z=0,E=2,S=8,M=9,A=15,I=8,O=286,T=30,C=19,P=2*O+1,R=15,L=3,F=258,D=F+L+1,B=32,U=42,V=69,N=73,j=91,H=103,G=113,q=666,Z=1,W=2,K=3,X=4,Q=3;function Y(t,e){return t.msg=h[e],e}function J(t){return(t<<1)-(t>4?9:0)}function $(t){for(var e=t.length;--e>=0;)t[e]=0}function tt(t){var e=t.state,n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(r.arraySet(t.output,e.pending_buf,e.pending_out,n,t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))}function et(t,e){s._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,tt(t.strm)}function nt(t,e){t.pending_buf[t.pending++]=e}function it(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function rt(t,e){var n,i,r=t.max_chain_length,s=t.strstart,a=t.prev_length,o=t.nice_match,h=t.strstart>t.w_size-D?t.strstart-(t.w_size-D):0,u=t.window,l=t.w_mask,c=t.prev,f=t.strstart+F,d=u[s+a-1],m=u[s+a];t.prev_length>=t.good_match&&(r>>=2),o>t.lookahead&&(o=t.lookahead);do{if(u[(n=e)+a]===m&&u[n+a-1]===d&&u[n]===u[s]&&u[++n]===u[s+1]){s+=2,n++;do{}while(u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&u[++s]===u[++n]&&s<f);if(i=F-(f-s),s=f-F,i>a){if(t.match_start=e,a=i,i>=o)break;d=u[s+a-1],m=u[s+a]}}}while((e=c[e&l])>h&&0!=--r);return a<=t.lookahead?a:t.lookahead}function st(t){var e,n,i,s,h,u,l,c,f,d,m=t.w_size;do{if(s=t.window_size-t.lookahead-t.strstart,t.strstart>=m+(m-D)){r.arraySet(t.window,t.window,m,m,0),t.match_start-=m,t.strstart-=m,t.block_start-=m,e=n=t.hash_size;do{i=t.head[--e],t.head[e]=i>=m?i-m:0}while(--n);e=n=m;do{i=t.prev[--e],t.prev[e]=i>=m?i-m:0}while(--n);s+=m}if(0===t.strm.avail_in)break;if(u=t.strm,l=t.window,c=t.strstart+t.lookahead,f=s,d=void 0,(d=u.avail_in)>f&&(d=f),n=0===d?0:(u.avail_in-=d,r.arraySet(l,u.input,u.next_in,d,c),1===u.state.wrap?u.adler=a(u.adler,l,d,c):2===u.state.wrap&&(u.adler=o(u.adler,l,d,c)),u.next_in+=d,u.total_in+=d,d),t.lookahead+=n,t.lookahead+t.insert>=L)for(h=t.strstart-t.insert,t.ins_h=t.window[h],t.ins_h=(t.ins_h<<t.hash_shift^t.window[h+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[h+L-1])&t.hash_mask,t.prev[h&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=h,h++,t.insert--,!(t.lookahead+t.insert<L)););}while(t.lookahead<D&&0!==t.strm.avail_in)}function at(t,e){for(var n,i;;){if(t.lookahead<D){if(st(t),t.lookahead<D&&e===u)return Z;if(0===t.lookahead)break}if(n=0,t.lookahead>=L&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+L-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-D&&(t.match_length=rt(t,n)),t.match_length>=L)if(i=s._tr_tally(t,t.strstart-t.match_start,t.match_length-L),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=L){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+L-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else i=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&(et(t,!1),0===t.strm.avail_out))return Z}return t.insert=t.strstart<L-1?t.strstart:L-1,e===f?(et(t,!0),0===t.strm.avail_out?K:X):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?Z:W}function ot(t,e){for(var n,i,r;;){if(t.lookahead<D){if(st(t),t.lookahead<D&&e===u)return Z;if(0===t.lookahead)break}if(n=0,t.lookahead>=L&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+L-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=L-1,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-D&&(t.match_length=rt(t,n),t.match_length<=5&&(t.strategy===b||t.match_length===L&&t.strstart-t.match_start>4096)&&(t.match_length=L-1)),t.prev_length>=L&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-L,i=s._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-L),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+L-1])&t.hash_mask,n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=L-1,t.strstart++,i&&(et(t,!1),0===t.strm.avail_out))return Z}else if(t.match_available){if((i=s._tr_tally(t,0,t.window[t.strstart-1]))&&et(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return Z}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=s._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<L-1?t.strstart:L-1,e===f?(et(t,!0),0===t.strm.avail_out?K:X):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?Z:W}function ht(t,e,n,i,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=r}function ut(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=S,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new r.Buf16(2*P),this.dyn_dtree=new r.Buf16(2*(2*T+1)),this.bl_tree=new r.Buf16(2*(2*C+1)),$(this.dyn_ltree),$(this.dyn_dtree),$(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new r.Buf16(R+1),this.heap=new r.Buf16(2*O+1),$(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new r.Buf16(2*O+1),$(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function lt(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=E,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?U:G,t.adler=2===e.wrap?0:1,e.last_flush=u,s._tr_init(e),m):Y(t,g)}function ct(t){var e,n=lt(t);return n===m&&((e=t.state).window_size=2*e.w_size,$(e.head),e.max_lazy_match=i[e.level].max_lazy,e.good_match=i[e.level].good_length,e.nice_match=i[e.level].nice_length,e.max_chain_length=i[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=L-1,e.match_available=0,e.ins_h=0),n}function ft(t,e,n,i,s,a){if(!t)return g;var o=1;if(e===_&&(e=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),s<1||s>M||n!==S||i<8||i>15||e<0||e>9||a<0||a>k)return Y(t,g);8===i&&(i=9);var h=new ut;return t.state=h,h.strm=t,h.wrap=o,h.gzhead=null,h.w_bits=i,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=s+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+L-1)/L),h.window=new r.Buf8(2*h.w_size),h.head=new r.Buf16(h.hash_size),h.prev=new r.Buf16(h.w_size),h.lit_bufsize=1<<s+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new r.Buf8(h.pending_buf_size),h.d_buf=1*h.lit_bufsize,h.l_buf=3*h.lit_bufsize,h.level=e,h.strategy=a,h.method=n,ct(t)}i=[new ht(0,0,0,0,(function(t,e){var n=65535;for(n>t.pending_buf_size-5&&(n=t.pending_buf_size-5);;){if(t.lookahead<=1){if(st(t),0===t.lookahead&&e===u)return Z;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var i=t.block_start+n;if((0===t.strstart||t.strstart>=i)&&(t.lookahead=t.strstart-i,t.strstart=i,et(t,!1),0===t.strm.avail_out))return Z;if(t.strstart-t.block_start>=t.w_size-D&&(et(t,!1),0===t.strm.avail_out))return Z}return t.insert=0,e===f?(et(t,!0),0===t.strm.avail_out?K:X):(t.strstart>t.block_start&&(et(t,!1),t.strm.avail_out),Z)})),new ht(4,4,8,4,at),new ht(4,5,16,8,at),new ht(4,6,32,32,at),new ht(4,4,16,16,ot),new ht(8,16,32,32,ot),new ht(8,16,128,128,ot),new ht(8,32,128,256,ot),new ht(32,128,258,1024,ot),new ht(32,258,258,4096,ot)],e.deflateInit=function(t,e){return ft(t,e,S,A,I,z)},e.deflateInit2=ft,e.deflateReset=ct,e.deflateResetKeep=lt,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?g:(t.state.gzhead=e,m):g},e.deflate=function(t,e){var n,r,a,h;if(!t||!t.state||e>d||e<0)return t?Y(t,g):g;if(r=t.state,!t.output||!t.input&&0!==t.avail_in||r.status===q&&e!==f)return Y(t,0===t.avail_out?v:g);if(r.strm=t,n=r.last_flush,r.last_flush=e,r.status===U)if(2===r.wrap)t.adler=0,nt(r,31),nt(r,139),nt(r,8),r.gzhead?(nt(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),nt(r,255&r.gzhead.time),nt(r,r.gzhead.time>>8&255),nt(r,r.gzhead.time>>16&255),nt(r,r.gzhead.time>>24&255),nt(r,9===r.level?2:r.strategy>=x||r.level<2?4:0),nt(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(nt(r,255&r.gzhead.extra.length),nt(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(t.adler=o(t.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=V):(nt(r,0),nt(r,0),nt(r,0),nt(r,0),nt(r,0),nt(r,9===r.level?2:r.strategy>=x||r.level<2?4:0),nt(r,Q),r.status=G);else{var y=S+(r.w_bits-8<<4)<<8;y|=(r.strategy>=x||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(y|=B),y+=31-y%31,r.status=G,it(r,y),0!==r.strstart&&(it(r,t.adler>>>16),it(r,65535&t.adler)),t.adler=1}if(r.status===V)if(r.gzhead.extra){for(a=r.pending;r.gzindex<(65535&r.gzhead.extra.length)&&(r.pending!==r.pending_buf_size||(r.gzhead.hcrc&&r.pending>a&&(t.adler=o(t.adler,r.pending_buf,r.pending-a,a)),tt(t),a=r.pending,r.pending!==r.pending_buf_size));)nt(r,255&r.gzhead.extra[r.gzindex]),r.gzindex++;r.gzhead.hcrc&&r.pending>a&&(t.adler=o(t.adler,r.pending_buf,r.pending-a,a)),r.gzindex===r.gzhead.extra.length&&(r.gzindex=0,r.status=N)}else r.status=N;if(r.status===N)if(r.gzhead.name){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=o(t.adler,r.pending_buf,r.pending-a,a)),tt(t),a=r.pending,r.pending===r.pending_buf_size)){h=1;break}h=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,nt(r,h)}while(0!==h);r.gzhead.hcrc&&r.pending>a&&(t.adler=o(t.adler,r.pending_buf,r.pending-a,a)),0===h&&(r.gzindex=0,r.status=j)}else r.status=j;if(r.status===j)if(r.gzhead.comment){a=r.pending;do{if(r.pending===r.pending_buf_size&&(r.gzhead.hcrc&&r.pending>a&&(t.adler=o(t.adler,r.pending_buf,r.pending-a,a)),tt(t),a=r.pending,r.pending===r.pending_buf_size)){h=1;break}h=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,nt(r,h)}while(0!==h);r.gzhead.hcrc&&r.pending>a&&(t.adler=o(t.adler,r.pending_buf,r.pending-a,a)),0===h&&(r.status=H)}else r.status=H;if(r.status===H&&(r.gzhead.hcrc?(r.pending+2>r.pending_buf_size&&tt(t),r.pending+2<=r.pending_buf_size&&(nt(r,255&t.adler),nt(r,t.adler>>8&255),t.adler=0,r.status=G)):r.status=G),0!==r.pending){if(tt(t),0===t.avail_out)return r.last_flush=-1,m}else if(0===t.avail_in&&J(e)<=J(n)&&e!==f)return Y(t,v);if(r.status===q&&0!==t.avail_in)return Y(t,v);if(0!==t.avail_in||0!==r.lookahead||e!==u&&r.status!==q){var _=r.strategy===x?function(t,e){for(var n;;){if(0===t.lookahead&&(st(t),0===t.lookahead)){if(e===u)return Z;break}if(t.match_length=0,n=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&(et(t,!1),0===t.strm.avail_out))return Z}return t.insert=0,e===f?(et(t,!0),0===t.strm.avail_out?K:X):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?Z:W}(r,e):r.strategy===w?function(t,e){for(var n,i,r,a,o=t.window;;){if(t.lookahead<=F){if(st(t),t.lookahead<=F&&e===u)return Z;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=L&&t.strstart>0&&(i=o[r=t.strstart-1])===o[++r]&&i===o[++r]&&i===o[++r]){a=t.strstart+F;do{}while(i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&i===o[++r]&&r<a);t.match_length=F-(a-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=L?(n=s._tr_tally(t,1,t.match_length-L),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=s._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&(et(t,!1),0===t.strm.avail_out))return Z}return t.insert=0,e===f?(et(t,!0),0===t.strm.avail_out?K:X):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?Z:W}(r,e):i[r.level].func(r,e);if(_!==K&&_!==X||(r.status=q),_===Z||_===K)return 0===t.avail_out&&(r.last_flush=-1),m;if(_===W&&(e===l?s._tr_align(r):e!==d&&(s._tr_stored_block(r,0,0,!1),e===c&&($(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),tt(t),0===t.avail_out))return r.last_flush=-1,m}return e!==f?m:r.wrap<=0?p:(2===r.wrap?(nt(r,255&t.adler),nt(r,t.adler>>8&255),nt(r,t.adler>>16&255),nt(r,t.adler>>24&255),nt(r,255&t.total_in),nt(r,t.total_in>>8&255),nt(r,t.total_in>>16&255),nt(r,t.total_in>>24&255)):(it(r,t.adler>>>16),it(r,65535&t.adler)),tt(t),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?m:p)},e.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==U&&e!==V&&e!==N&&e!==j&&e!==H&&e!==G&&e!==q?Y(t,g):(t.state=null,e===G?Y(t,y):m):g},e.deflateSetDictionary=function(t,e){var n,i,s,o,h,u,l,c,f=e.length;if(!t||!t.state)return g;if(2===(o=(n=t.state).wrap)||1===o&&n.status!==U||n.lookahead)return g;for(1===o&&(t.adler=a(t.adler,e,f,0)),n.wrap=0,f>=n.w_size&&(0===o&&($(n.head),n.strstart=0,n.block_start=0,n.insert=0),c=new r.Buf8(n.w_size),r.arraySet(c,e,f-n.w_size,n.w_size,0),e=c,f=n.w_size),h=t.avail_in,u=t.next_in,l=t.input,t.avail_in=f,t.next_in=0,t.input=e,st(n);n.lookahead>=L;){i=n.strstart,s=n.lookahead-(L-1);do{n.ins_h=(n.ins_h<<n.hash_shift^n.window[i+L-1])&n.hash_mask,n.prev[i&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=i,i++}while(--s);n.strstart=i,n.lookahead=L-1,st(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=L-1,n.match_available=0,t.next_in=u,t.input=l,t.avail_in=h,n.wrap=o,m},e.deflateInfo="pako deflate (from Nodeca project)"},371:function(t,e,n){"use strict";var i=n(12),r=4,s=0,a=1,o=2;function h(t){for(var e=t.length;--e>=0;)t[e]=0}var u=0,l=1,c=2,f=29,d=256,m=d+1+f,p=30,g=19,y=2*m+1,v=15,_=16,b=7,x=256,w=16,k=17,z=18,E=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],S=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],M=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],A=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],I=new Array(2*(m+2));h(I);var O=new Array(2*p);h(O);var T=new Array(512);h(T);var C=new Array(256);h(C);var P=new Array(f);h(P);var R,L,F,D=new Array(p);function B(t,e,n,i,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=t&&t.length}function U(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function V(t){return t<256?T[t]:T[256+(t>>>7)]}function N(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function j(t,e,n){t.bi_valid>_-n?(t.bi_buf|=e<<t.bi_valid&65535,N(t,t.bi_buf),t.bi_buf=e>>_-t.bi_valid,t.bi_valid+=n-_):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)}function H(t,e,n){j(t,n[2*e],n[2*e+1])}function G(t,e){var n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1}function q(t,e,n){var i,r,s=new Array(v+1),a=0;for(i=1;i<=v;i++)s[i]=a=a+n[i-1]<<1;for(r=0;r<=e;r++){var o=t[2*r+1];0!==o&&(t[2*r]=G(s[o]++,o))}}function Z(t){var e;for(e=0;e<m;e++)t.dyn_ltree[2*e]=0;for(e=0;e<p;e++)t.dyn_dtree[2*e]=0;for(e=0;e<g;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*x]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function W(t){t.bi_valid>8?N(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function K(t,e,n,i){var r=2*e,s=2*n;return t[r]<t[s]||t[r]===t[s]&&i[e]<=i[n]}function X(t,e,n){for(var i=t.heap[n],r=n<<1;r<=t.heap_len&&(r<t.heap_len&&K(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!K(e,i,t.heap[r],t.depth));)t.heap[n]=t.heap[r],n=r,r<<=1;t.heap[n]=i}function Q(t,e,n){var i,r,s,a,o=0;if(0!==t.last_lit)do{i=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],r=t.pending_buf[t.l_buf+o],o++,0===i?H(t,r,e):(H(t,(s=C[r])+d+1,e),0!==(a=E[s])&&j(t,r-=P[s],a),H(t,s=V(--i),n),0!==(a=S[s])&&j(t,i-=D[s],a))}while(o<t.last_lit);H(t,x,e)}function Y(t,e){var n,i,r,s=e.dyn_tree,a=e.stat_desc.static_tree,o=e.stat_desc.has_stree,h=e.stat_desc.elems,u=-1;for(t.heap_len=0,t.heap_max=y,n=0;n<h;n++)0!==s[2*n]?(t.heap[++t.heap_len]=u=n,t.depth[n]=0):s[2*n+1]=0;for(;t.heap_len<2;)s[2*(r=t.heap[++t.heap_len]=u<2?++u:0)]=1,t.depth[r]=0,t.opt_len--,o&&(t.static_len-=a[2*r+1]);for(e.max_code=u,n=t.heap_len>>1;n>=1;n--)X(t,s,n);r=h;do{n=t.heap[1],t.heap[1]=t.heap[t.heap_len--],X(t,s,1),i=t.heap[1],t.heap[--t.heap_max]=n,t.heap[--t.heap_max]=i,s[2*r]=s[2*n]+s[2*i],t.depth[r]=(t.depth[n]>=t.depth[i]?t.depth[n]:t.depth[i])+1,s[2*n+1]=s[2*i+1]=r,t.heap[1]=r++,X(t,s,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var n,i,r,s,a,o,h=e.dyn_tree,u=e.max_code,l=e.stat_desc.static_tree,c=e.stat_desc.has_stree,f=e.stat_desc.extra_bits,d=e.stat_desc.extra_base,m=e.stat_desc.max_length,p=0;for(s=0;s<=v;s++)t.bl_count[s]=0;for(h[2*t.heap[t.heap_max]+1]=0,n=t.heap_max+1;n<y;n++)(s=h[2*h[2*(i=t.heap[n])+1]+1]+1)>m&&(s=m,p++),h[2*i+1]=s,i>u||(t.bl_count[s]++,a=0,i>=d&&(a=f[i-d]),o=h[2*i],t.opt_len+=o*(s+a),c&&(t.static_len+=o*(l[2*i+1]+a)));if(0!==p){do{for(s=m-1;0===t.bl_count[s];)s--;t.bl_count[s]--,t.bl_count[s+1]+=2,t.bl_count[m]--,p-=2}while(p>0);for(s=m;0!==s;s--)for(i=t.bl_count[s];0!==i;)(r=t.heap[--n])>u||(h[2*r+1]!==s&&(t.opt_len+=(s-h[2*r+1])*h[2*r],h[2*r+1]=s),i--)}}(t,e),q(s,u,t.bl_count)}function J(t,e,n){var i,r,s=-1,a=e[1],o=0,h=7,u=4;for(0===a&&(h=138,u=3),e[2*(n+1)+1]=65535,i=0;i<=n;i++)r=a,a=e[2*(i+1)+1],++o<h&&r===a||(o<u?t.bl_tree[2*r]+=o:0!==r?(r!==s&&t.bl_tree[2*r]++,t.bl_tree[2*w]++):o<=10?t.bl_tree[2*k]++:t.bl_tree[2*z]++,o=0,s=r,0===a?(h=138,u=3):r===a?(h=6,u=3):(h=7,u=4))}function $(t,e,n){var i,r,s=-1,a=e[1],o=0,h=7,u=4;for(0===a&&(h=138,u=3),i=0;i<=n;i++)if(r=a,a=e[2*(i+1)+1],!(++o<h&&r===a)){if(o<u)do{H(t,r,t.bl_tree)}while(0!=--o);else 0!==r?(r!==s&&(H(t,r,t.bl_tree),o--),H(t,w,t.bl_tree),j(t,o-3,2)):o<=10?(H(t,k,t.bl_tree),j(t,o-3,3)):(H(t,z,t.bl_tree),j(t,o-11,7));o=0,s=r,0===a?(h=138,u=3):r===a?(h=6,u=3):(h=7,u=4)}}h(D);var tt=!1;function et(t,e,n,r){j(t,(u<<1)+(r?1:0),3),function(t,e,n,r){W(t),r&&(N(t,n),N(t,~n)),i.arraySet(t.pending_buf,t.window,e,n,t.pending),t.pending+=n}(t,e,n,!0)}e._tr_init=function(t){tt||(!function(){var t,e,n,i,r,s=new Array(v+1);for(n=0,i=0;i<f-1;i++)for(P[i]=n,t=0;t<1<<E[i];t++)C[n++]=i;for(C[n-1]=i,r=0,i=0;i<16;i++)for(D[i]=r,t=0;t<1<<S[i];t++)T[r++]=i;for(r>>=7;i<p;i++)for(D[i]=r<<7,t=0;t<1<<S[i]-7;t++)T[256+r++]=i;for(e=0;e<=v;e++)s[e]=0;for(t=0;t<=143;)I[2*t+1]=8,t++,s[8]++;for(;t<=255;)I[2*t+1]=9,t++,s[9]++;for(;t<=279;)I[2*t+1]=7,t++,s[7]++;for(;t<=287;)I[2*t+1]=8,t++,s[8]++;for(q(I,m+1,s),t=0;t<p;t++)O[2*t+1]=5,O[2*t]=G(t,5);R=new B(I,E,d+1,m,v),L=new B(O,S,0,p,v),F=new B(new Array(0),M,0,g,b)}(),tt=!0),t.l_desc=new U(t.dyn_ltree,R),t.d_desc=new U(t.dyn_dtree,L),t.bl_desc=new U(t.bl_tree,F),t.bi_buf=0,t.bi_valid=0,Z(t)},e._tr_stored_block=et,e._tr_flush_block=function(t,e,n,i){var h,u,f=0;t.level>0?(t.strm.data_type===o&&(t.strm.data_type=function(t){var e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return s;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return a;for(e=32;e<d;e++)if(0!==t.dyn_ltree[2*e])return a;return s}(t)),Y(t,t.l_desc),Y(t,t.d_desc),f=function(t){var e;for(J(t,t.dyn_ltree,t.l_desc.max_code),J(t,t.dyn_dtree,t.d_desc.max_code),Y(t,t.bl_desc),e=g-1;e>=3&&0===t.bl_tree[2*A[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),h=t.opt_len+3+7>>>3,(u=t.static_len+3+7>>>3)<=h&&(h=u)):h=u=n+5,n+4<=h&&-1!==e?et(t,e,n,i):t.strategy===r||u===h?(j(t,(l<<1)+(i?1:0),3),Q(t,I,O)):(j(t,(c<<1)+(i?1:0),3),function(t,e,n,i){var r;for(j(t,e-257,5),j(t,n-1,5),j(t,i-4,4),r=0;r<i;r++)j(t,t.bl_tree[2*A[r]+1],3);$(t,t.dyn_ltree,e-1),$(t,t.dyn_dtree,n-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,f+1),Q(t,t.dyn_ltree,t.dyn_dtree)),Z(t),i&&W(t)},e._tr_tally=function(t,e,n){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&n,t.last_lit++,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(C[n]+d+1)]++,t.dyn_dtree[2*V(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){j(t,l<<1,3),H(t,x,I),function(t){16===t.bi_valid?(N(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},372:function(t,e,n){"use strict";var i=n(373),r=n(12),s=n(99),a=n(101),o=n(80),h=n(100),u=n(376),l=Object.prototype.toString;function c(t){if(!(this instanceof c))return new c(t);this.options=r.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var n=i.inflateInit2(this.strm,e.windowBits);if(n!==a.Z_OK)throw new Error(o[n]);if(this.header=new u,i.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=s.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=i.inflateSetDictionary(this.strm,e.dictionary))!==a.Z_OK))throw new Error(o[n])}function f(t,e){var n=new c(e);if(n.push(t,!0),n.err)throw n.msg||o[n.err];return n.result}c.prototype.push=function(t,e){var n,o,h,u,c,f=this.strm,d=this.options.chunkSize,m=this.options.dictionary,p=!1;if(this.ended)return!1;o=e===~~e?e:!0===e?a.Z_FINISH:a.Z_NO_FLUSH,"string"==typeof t?f.input=s.binstring2buf(t):"[object ArrayBuffer]"===l.call(t)?f.input=new Uint8Array(t):f.input=t,f.next_in=0,f.avail_in=f.input.length;do{if(0===f.avail_out&&(f.output=new r.Buf8(d),f.next_out=0,f.avail_out=d),(n=i.inflate(f,a.Z_NO_FLUSH))===a.Z_NEED_DICT&&m&&(n=i.inflateSetDictionary(this.strm,m)),n===a.Z_BUF_ERROR&&!0===p&&(n=a.Z_OK,p=!1),n!==a.Z_STREAM_END&&n!==a.Z_OK)return this.onEnd(n),this.ended=!0,!1;f.next_out&&(0!==f.avail_out&&n!==a.Z_STREAM_END&&(0!==f.avail_in||o!==a.Z_FINISH&&o!==a.Z_SYNC_FLUSH)||("string"===this.options.to?(h=s.utf8border(f.output,f.next_out),u=f.next_out-h,c=s.buf2string(f.output,h),f.next_out=u,f.avail_out=d-u,u&&r.arraySet(f.output,f.output,h,u,0),this.onData(c)):this.onData(r.shrinkBuf(f.output,f.next_out)))),0===f.avail_in&&0===f.avail_out&&(p=!0)}while((f.avail_in>0||0===f.avail_out)&&n!==a.Z_STREAM_END);return n===a.Z_STREAM_END&&(o=a.Z_FINISH),o===a.Z_FINISH?(n=i.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===a.Z_OK):o!==a.Z_SYNC_FLUSH||(this.onEnd(a.Z_OK),f.avail_out=0,!0)},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){t===a.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=c,e.inflate=f,e.inflateRaw=function(t,e){return(e=e||{}).raw=!0,f(t,e)},e.ungzip=f},373:function(t,e,n){"use strict";var i=n(12),r=n(97),s=n(98),a=n(374),o=n(375),h=0,u=1,l=2,c=4,f=5,d=6,m=0,p=1,g=2,y=-2,v=-3,_=-4,b=-5,x=8,w=1,k=2,z=3,E=4,S=5,M=6,A=7,I=8,O=9,T=10,C=11,P=12,R=13,L=14,F=15,D=16,B=17,U=18,V=19,N=20,j=21,H=22,G=23,q=24,Z=25,W=26,K=27,X=28,Q=29,Y=30,J=31,$=32,tt=852,et=592,nt=15;function it(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function rt(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new i.Buf16(320),this.work=new i.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function st(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=w,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new i.Buf32(tt),e.distcode=e.distdyn=new i.Buf32(et),e.sane=1,e.back=-1,m):y}function at(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,st(t)):y}function ot(t,e){var n,i;return t&&t.state?(i=t.state,e<0?(n=0,e=-e):(n=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?y:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,at(t))):y}function ht(t,e){var n,i;return t?(i=new rt,t.state=i,i.window=null,(n=ot(t,e))!==m&&(t.state=null),n):y}var ut,lt,ct=!0;function ft(t){if(ct){var e;for(ut=new i.Buf32(512),lt=new i.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(o(u,t.lens,0,288,ut,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;o(l,t.lens,0,32,lt,0,t.work,{bits:5}),ct=!1}t.lencode=ut,t.lenbits=9,t.distcode=lt,t.distbits=5}function dt(t,e,n,r){var s,a=t.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new i.Buf8(a.wsize)),r>=a.wsize?(i.arraySet(a.window,e,n-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):((s=a.wsize-a.wnext)>r&&(s=r),i.arraySet(a.window,e,n-r,s,a.wnext),(r-=s)?(i.arraySet(a.window,e,n-r,r,0),a.wnext=r,a.whave=a.wsize):(a.wnext+=s,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=s))),0}e.inflateReset=at,e.inflateReset2=ot,e.inflateResetKeep=st,e.inflateInit=function(t){return ht(t,nt)},e.inflateInit2=ht,e.inflate=function(t,e){var n,tt,et,nt,rt,st,at,ot,ht,ut,lt,ct,mt,pt,gt,yt,vt,_t,bt,xt,wt,kt,zt,Et,St=0,Mt=new i.Buf8(4),At=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return y;(n=t.state).mode===P&&(n.mode=R),rt=t.next_out,et=t.output,at=t.avail_out,nt=t.next_in,tt=t.input,st=t.avail_in,ot=n.hold,ht=n.bits,ut=st,lt=at,kt=m;t:for(;;)switch(n.mode){case w:if(0===n.wrap){n.mode=R;break}for(;ht<16;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}if(2&n.wrap&&35615===ot){n.check=0,Mt[0]=255&ot,Mt[1]=ot>>>8&255,n.check=s(n.check,Mt,2,0),ot=0,ht=0,n.mode=k;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&ot)<<8)+(ot>>8))%31){t.msg="incorrect header check",n.mode=Y;break}if((15&ot)!==x){t.msg="unknown compression method",n.mode=Y;break}if(ht-=4,wt=8+(15&(ot>>>=4)),0===n.wbits)n.wbits=wt;else if(wt>n.wbits){t.msg="invalid window size",n.mode=Y;break}n.dmax=1<<wt,t.adler=n.check=1,n.mode=512&ot?T:P,ot=0,ht=0;break;case k:for(;ht<16;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}if(n.flags=ot,(255&n.flags)!==x){t.msg="unknown compression method",n.mode=Y;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=Y;break}n.head&&(n.head.text=ot>>8&1),512&n.flags&&(Mt[0]=255&ot,Mt[1]=ot>>>8&255,n.check=s(n.check,Mt,2,0)),ot=0,ht=0,n.mode=z;case z:for(;ht<32;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}n.head&&(n.head.time=ot),512&n.flags&&(Mt[0]=255&ot,Mt[1]=ot>>>8&255,Mt[2]=ot>>>16&255,Mt[3]=ot>>>24&255,n.check=s(n.check,Mt,4,0)),ot=0,ht=0,n.mode=E;case E:for(;ht<16;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}n.head&&(n.head.xflags=255&ot,n.head.os=ot>>8),512&n.flags&&(Mt[0]=255&ot,Mt[1]=ot>>>8&255,n.check=s(n.check,Mt,2,0)),ot=0,ht=0,n.mode=S;case S:if(1024&n.flags){for(;ht<16;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}n.length=ot,n.head&&(n.head.extra_len=ot),512&n.flags&&(Mt[0]=255&ot,Mt[1]=ot>>>8&255,n.check=s(n.check,Mt,2,0)),ot=0,ht=0}else n.head&&(n.head.extra=null);n.mode=M;case M:if(1024&n.flags&&((ct=n.length)>st&&(ct=st),ct&&(n.head&&(wt=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),i.arraySet(n.head.extra,tt,nt,ct,wt)),512&n.flags&&(n.check=s(n.check,tt,ct,nt)),st-=ct,nt+=ct,n.length-=ct),n.length))break t;n.length=0,n.mode=A;case A:if(2048&n.flags){if(0===st)break t;ct=0;do{wt=tt[nt+ct++],n.head&&wt&&n.length<65536&&(n.head.name+=String.fromCharCode(wt))}while(wt&&ct<st);if(512&n.flags&&(n.check=s(n.check,tt,ct,nt)),st-=ct,nt+=ct,wt)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=I;case I:if(4096&n.flags){if(0===st)break t;ct=0;do{wt=tt[nt+ct++],n.head&&wt&&n.length<65536&&(n.head.comment+=String.fromCharCode(wt))}while(wt&&ct<st);if(512&n.flags&&(n.check=s(n.check,tt,ct,nt)),st-=ct,nt+=ct,wt)break t}else n.head&&(n.head.comment=null);n.mode=O;case O:if(512&n.flags){for(;ht<16;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}if(ot!==(65535&n.check)){t.msg="header crc mismatch",n.mode=Y;break}ot=0,ht=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=P;break;case T:for(;ht<32;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}t.adler=n.check=it(ot),ot=0,ht=0,n.mode=C;case C:if(0===n.havedict)return t.next_out=rt,t.avail_out=at,t.next_in=nt,t.avail_in=st,n.hold=ot,n.bits=ht,g;t.adler=n.check=1,n.mode=P;case P:if(e===f||e===d)break t;case R:if(n.last){ot>>>=7&ht,ht-=7&ht,n.mode=K;break}for(;ht<3;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}switch(n.last=1&ot,ht-=1,3&(ot>>>=1)){case 0:n.mode=L;break;case 1:if(ft(n),n.mode=N,e===d){ot>>>=2,ht-=2;break t}break;case 2:n.mode=B;break;case 3:t.msg="invalid block type",n.mode=Y}ot>>>=2,ht-=2;break;case L:for(ot>>>=7&ht,ht-=7&ht;ht<32;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}if((65535&ot)!=(ot>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Y;break}if(n.length=65535&ot,ot=0,ht=0,n.mode=F,e===d)break t;case F:n.mode=D;case D:if(ct=n.length){if(ct>st&&(ct=st),ct>at&&(ct=at),0===ct)break t;i.arraySet(et,tt,nt,ct,rt),st-=ct,nt+=ct,at-=ct,rt+=ct,n.length-=ct;break}n.mode=P;break;case B:for(;ht<14;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}if(n.nlen=257+(31&ot),ot>>>=5,ht-=5,n.ndist=1+(31&ot),ot>>>=5,ht-=5,n.ncode=4+(15&ot),ot>>>=4,ht-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Y;break}n.have=0,n.mode=U;case U:for(;n.have<n.ncode;){for(;ht<3;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}n.lens[At[n.have++]]=7&ot,ot>>>=3,ht-=3}for(;n.have<19;)n.lens[At[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,zt={bits:n.lenbits},kt=o(h,n.lens,0,19,n.lencode,0,n.work,zt),n.lenbits=zt.bits,kt){t.msg="invalid code lengths set",n.mode=Y;break}n.have=0,n.mode=V;case V:for(;n.have<n.nlen+n.ndist;){for(;yt=(St=n.lencode[ot&(1<<n.lenbits)-1])>>>16&255,vt=65535&St,!((gt=St>>>24)<=ht);){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}if(vt<16)ot>>>=gt,ht-=gt,n.lens[n.have++]=vt;else{if(16===vt){for(Et=gt+2;ht<Et;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}if(ot>>>=gt,ht-=gt,0===n.have){t.msg="invalid bit length repeat",n.mode=Y;break}wt=n.lens[n.have-1],ct=3+(3&ot),ot>>>=2,ht-=2}else if(17===vt){for(Et=gt+3;ht<Et;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}ht-=gt,wt=0,ct=3+(7&(ot>>>=gt)),ot>>>=3,ht-=3}else{for(Et=gt+7;ht<Et;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}ht-=gt,wt=0,ct=11+(127&(ot>>>=gt)),ot>>>=7,ht-=7}if(n.have+ct>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Y;break}for(;ct--;)n.lens[n.have++]=wt}}if(n.mode===Y)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=Y;break}if(n.lenbits=9,zt={bits:n.lenbits},kt=o(u,n.lens,0,n.nlen,n.lencode,0,n.work,zt),n.lenbits=zt.bits,kt){t.msg="invalid literal/lengths set",n.mode=Y;break}if(n.distbits=6,n.distcode=n.distdyn,zt={bits:n.distbits},kt=o(l,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,zt),n.distbits=zt.bits,kt){t.msg="invalid distances set",n.mode=Y;break}if(n.mode=N,e===d)break t;case N:n.mode=j;case j:if(st>=6&&at>=258){t.next_out=rt,t.avail_out=at,t.next_in=nt,t.avail_in=st,n.hold=ot,n.bits=ht,a(t,lt),rt=t.next_out,et=t.output,at=t.avail_out,nt=t.next_in,tt=t.input,st=t.avail_in,ot=n.hold,ht=n.bits,n.mode===P&&(n.back=-1);break}for(n.back=0;yt=(St=n.lencode[ot&(1<<n.lenbits)-1])>>>16&255,vt=65535&St,!((gt=St>>>24)<=ht);){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}if(yt&&0==(240&yt)){for(_t=gt,bt=yt,xt=vt;yt=(St=n.lencode[xt+((ot&(1<<_t+bt)-1)>>_t)])>>>16&255,vt=65535&St,!(_t+(gt=St>>>24)<=ht);){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}ot>>>=_t,ht-=_t,n.back+=_t}if(ot>>>=gt,ht-=gt,n.back+=gt,n.length=vt,0===yt){n.mode=W;break}if(32&yt){n.back=-1,n.mode=P;break}if(64&yt){t.msg="invalid literal/length code",n.mode=Y;break}n.extra=15&yt,n.mode=H;case H:if(n.extra){for(Et=n.extra;ht<Et;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}n.length+=ot&(1<<n.extra)-1,ot>>>=n.extra,ht-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=G;case G:for(;yt=(St=n.distcode[ot&(1<<n.distbits)-1])>>>16&255,vt=65535&St,!((gt=St>>>24)<=ht);){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}if(0==(240&yt)){for(_t=gt,bt=yt,xt=vt;yt=(St=n.distcode[xt+((ot&(1<<_t+bt)-1)>>_t)])>>>16&255,vt=65535&St,!(_t+(gt=St>>>24)<=ht);){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}ot>>>=_t,ht-=_t,n.back+=_t}if(ot>>>=gt,ht-=gt,n.back+=gt,64&yt){t.msg="invalid distance code",n.mode=Y;break}n.offset=vt,n.extra=15&yt,n.mode=q;case q:if(n.extra){for(Et=n.extra;ht<Et;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}n.offset+=ot&(1<<n.extra)-1,ot>>>=n.extra,ht-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Y;break}n.mode=Z;case Z:if(0===at)break t;if(ct=lt-at,n.offset>ct){if((ct=n.offset-ct)>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Y;break}ct>n.wnext?(ct-=n.wnext,mt=n.wsize-ct):mt=n.wnext-ct,ct>n.length&&(ct=n.length),pt=n.window}else pt=et,mt=rt-n.offset,ct=n.length;ct>at&&(ct=at),at-=ct,n.length-=ct;do{et[rt++]=pt[mt++]}while(--ct);0===n.length&&(n.mode=j);break;case W:if(0===at)break t;et[rt++]=n.length,at--,n.mode=j;break;case K:if(n.wrap){for(;ht<32;){if(0===st)break t;st--,ot|=tt[nt++]<<ht,ht+=8}if(lt-=at,t.total_out+=lt,n.total+=lt,lt&&(t.adler=n.check=n.flags?s(n.check,et,lt,rt-lt):r(n.check,et,lt,rt-lt)),lt=at,(n.flags?ot:it(ot))!==n.check){t.msg="incorrect data check",n.mode=Y;break}ot=0,ht=0}n.mode=X;case X:if(n.wrap&&n.flags){for(;ht<32;){if(0===st)break t;st--,ot+=tt[nt++]<<ht,ht+=8}if(ot!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=Y;break}ot=0,ht=0}n.mode=Q;case Q:kt=p;break t;case Y:kt=v;break t;case J:return _;case $:default:return y}return t.next_out=rt,t.avail_out=at,t.next_in=nt,t.avail_in=st,n.hold=ot,n.bits=ht,(n.wsize||lt!==t.avail_out&&n.mode<Y&&(n.mode<K||e!==c))&&dt(t,t.output,t.next_out,lt-t.avail_out)?(n.mode=J,_):(ut-=t.avail_in,lt-=t.avail_out,t.total_in+=ut,t.total_out+=lt,n.total+=lt,n.wrap&&lt&&(t.adler=n.check=n.flags?s(n.check,et,lt,t.next_out-lt):r(n.check,et,lt,t.next_out-lt)),t.data_type=n.bits+(n.last?64:0)+(n.mode===P?128:0)+(n.mode===N||n.mode===F?256:0),(0===ut&&0===lt||e===c)&&kt===m&&(kt=b),kt)},e.inflateEnd=function(t){if(!t||!t.state)return y;var e=t.state;return e.window&&(e.window=null),t.state=null,m},e.inflateGetHeader=function(t,e){var n;return t&&t.state?0==(2&(n=t.state).wrap)?y:(n.head=e,e.done=!1,m):y},e.inflateSetDictionary=function(t,e){var n,i=e.length;return t&&t.state?0!==(n=t.state).wrap&&n.mode!==C?y:n.mode===C&&r(1,e,i,0)!==n.check?v:dt(t,e,i,i)?(n.mode=J,_):(n.havedict=1,m):y},e.inflateInfo="pako inflate (from Nodeca project)"},374:function(t,e,n){"use strict";t.exports=function(t,e){var n,i,r,s,a,o,h,u,l,c,f,d,m,p,g,y,v,_,b,x,w,k,z,E,S;n=t.state,i=t.next_in,E=t.input,r=i+(t.avail_in-5),s=t.next_out,S=t.output,a=s-(e-t.avail_out),o=s+(t.avail_out-257),h=n.dmax,u=n.wsize,l=n.whave,c=n.wnext,f=n.window,d=n.hold,m=n.bits,p=n.lencode,g=n.distcode,y=(1<<n.lenbits)-1,v=(1<<n.distbits)-1;t:do{m<15&&(d+=E[i++]<<m,m+=8,d+=E[i++]<<m,m+=8),_=p[d&y];e:for(;;){if(d>>>=b=_>>>24,m-=b,0===(b=_>>>16&255))S[s++]=65535&_;else{if(!(16&b)){if(0==(64&b)){_=p[(65535&_)+(d&(1<<b)-1)];continue e}if(32&b){n.mode=12;break t}t.msg="invalid literal/length code",n.mode=30;break t}x=65535&_,(b&=15)&&(m<b&&(d+=E[i++]<<m,m+=8),x+=d&(1<<b)-1,d>>>=b,m-=b),m<15&&(d+=E[i++]<<m,m+=8,d+=E[i++]<<m,m+=8),_=g[d&v];n:for(;;){if(d>>>=b=_>>>24,m-=b,!(16&(b=_>>>16&255))){if(0==(64&b)){_=g[(65535&_)+(d&(1<<b)-1)];continue n}t.msg="invalid distance code",n.mode=30;break t}if(w=65535&_,m<(b&=15)&&(d+=E[i++]<<m,(m+=8)<b&&(d+=E[i++]<<m,m+=8)),(w+=d&(1<<b)-1)>h){t.msg="invalid distance too far back",n.mode=30;break t}if(d>>>=b,m-=b,w>(b=s-a)){if((b=w-b)>l&&n.sane){t.msg="invalid distance too far back",n.mode=30;break t}if(k=0,z=f,0===c){if(k+=u-b,b<x){x-=b;do{S[s++]=f[k++]}while(--b);k=s-w,z=S}}else if(c<b){if(k+=u+c-b,(b-=c)<x){x-=b;do{S[s++]=f[k++]}while(--b);if(k=0,c<x){x-=b=c;do{S[s++]=f[k++]}while(--b);k=s-w,z=S}}}else if(k+=c-b,b<x){x-=b;do{S[s++]=f[k++]}while(--b);k=s-w,z=S}for(;x>2;)S[s++]=z[k++],S[s++]=z[k++],S[s++]=z[k++],x-=3;x&&(S[s++]=z[k++],x>1&&(S[s++]=z[k++]))}else{k=s-w;do{S[s++]=S[k++],S[s++]=S[k++],S[s++]=S[k++],x-=3}while(x>2);x&&(S[s++]=S[k++],x>1&&(S[s++]=S[k++]))}break}}break}}while(i<r&&s<o);i-=x=m>>3,d&=(1<<(m-=x<<3))-1,t.next_in=i,t.next_out=s,t.avail_in=i<r?r-i+5:5-(i-r),t.avail_out=s<o?o-s+257:257-(s-o),n.hold=d,n.bits=m}},375:function(t,e,n){"use strict";var i=n(12),r=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],a=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,n,h,u,l,c,f){var d,m,p,g,y,v,_,b,x,w=f.bits,k=0,z=0,E=0,S=0,M=0,A=0,I=0,O=0,T=0,C=0,P=null,R=0,L=new i.Buf16(16),F=new i.Buf16(16),D=null,B=0;for(k=0;k<=15;k++)L[k]=0;for(z=0;z<h;z++)L[e[n+z]]++;for(M=w,S=15;S>=1&&0===L[S];S--);if(M>S&&(M=S),0===S)return u[l++]=20971520,u[l++]=20971520,f.bits=1,0;for(E=1;E<S&&0===L[E];E++);for(M<E&&(M=E),O=1,k=1;k<=15;k++)if(O<<=1,(O-=L[k])<0)return-1;if(O>0&&(0===t||1!==S))return-1;for(F[1]=0,k=1;k<15;k++)F[k+1]=F[k]+L[k];for(z=0;z<h;z++)0!==e[n+z]&&(c[F[e[n+z]]++]=z);if(0===t?(P=D=c,v=19):1===t?(P=r,R-=257,D=s,B-=257,v=256):(P=a,D=o,v=-1),C=0,z=0,k=E,y=l,A=M,I=0,p=-1,g=(T=1<<M)-1,1===t&&T>852||2===t&&T>592)return 1;for(;;){_=k-I,c[z]<v?(b=0,x=c[z]):c[z]>v?(b=D[B+c[z]],x=P[R+c[z]]):(b=96,x=0),d=1<<k-I,E=m=1<<A;do{u[y+(C>>I)+(m-=d)]=_<<24|b<<16|x|0}while(0!==m);for(d=1<<k-1;C&d;)d>>=1;if(0!==d?(C&=d-1,C+=d):C=0,z++,0==--L[k]){if(k===S)break;k=e[n+c[z]]}if(k>M&&(C&g)!==p){for(0===I&&(I=M),y+=E,O=1<<(A=k-I);A+I<S&&!((O-=L[A+I])<=0);)A++,O<<=1;if(T+=1<<A,1===t&&T>852||2===t&&T>592)return 1;u[p=C&g]=M<<24|A<<16|y-l|0}}return 0!==C&&(u[y+C]=k-I<<24|64<<16|0),f.bits=M,0}},376:function(t,e,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},377:function(t,e,n){var i=n(378);"string"==typeof i&&(i=[[t.i,i,""]]);var r={hmr:!0,transform:void 0,insertInto:void 0};n(4)(i,r);i.locals&&(t.exports=i.locals)},378:function(t,e,n){(t.exports=n(3)(!1)).push([t.i,".memory-limited-progressbar-loading{height:4px;background:linear-gradient(to right, #337ab7, #83aff7) !important;width:240px;border-radius:2px}\n",""])},4:function(t,e,n){var i,r,s={},a=(i=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===r&&(r=i.apply(this,arguments)),r}),o=function(t,e){return e?e.querySelector(t):document.querySelector(t)},h=function(t){var e={};return function(t,n){if("function"==typeof t)return t();if(void 0===e[t]){var i=o.call(this,t,n);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}}(),u=null,l=0,c=[],f=n(5);function d(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=s[i.id];if(r){r.refs++;for(var a=0;a<r.parts.length;a++)r.parts[a](i.parts[a]);for(;a<i.parts.length;a++)r.parts.push(_(i.parts[a],e))}else{var o=[];for(a=0;a<i.parts.length;a++)o.push(_(i.parts[a],e));s[i.id]={id:i.id,refs:1,parts:o}}}}function m(t,e){for(var n=[],i={},r=0;r<t.length;r++){var s=t[r],a=e.base?s[0]+e.base:s[0],o={css:s[1],media:s[2],sourceMap:s[3]};i[a]?i[a].parts.push(o):n.push(i[a]={id:a,parts:[o]})}return n}function p(t,e){var n=h(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var i=c[c.length-1];if("top"===t.insertAt)i?i.nextSibling?n.insertBefore(e,i.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),c.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var r=h(t.insertAt.before,n);n.insertBefore(e,r)}}function g(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=c.indexOf(t);e>=0&&c.splice(e,1)}function y(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var i=function(){0;return n.nc}();i&&(t.attrs.nonce=i)}return v(e,t.attrs),p(t,e),e}function v(t,e){Object.keys(e).forEach((function(n){t.setAttribute(n,e[n])}))}function _(t,e){var n,i,r,s;if(e.transform&&t.css){if(!(s="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=s}if(e.singleton){var a=l++;n=u||(u=y(e)),i=w.bind(null,n,a,!1),r=w.bind(null,n,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",v(e,t.attrs),p(t,e),e}(e),i=z.bind(null,n,e),r=function(){g(n),n.href&&URL.revokeObjectURL(n.href)}):(n=y(e),i=k.bind(null,n),r=function(){g(n)});return i(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;i(t=e)}else r()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=a()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=m(t,e);return d(n,e),function(t){for(var i=[],r=0;r<n.length;r++){var a=n[r];(o=s[a.id]).refs--,i.push(o)}t&&d(m(t,e),e);for(r=0;r<i.length;r++){var o;if(0===(o=i[r]).refs){for(var h=0;h<o.parts.length;h++)o.parts[h]();delete s[o.id]}}}};var b,x=(b=[],function(t,e){return b[t]=e,b.filter(Boolean).join("\n")});function w(t,e,n,i){var r=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=x(e,r);else{var s=document.createTextNode(r),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(s,a[e]):t.appendChild(s)}}function k(t,e){var n=e.css,i=e.media;if(i&&t.setAttribute("media",i),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}function z(t,e,n){var i=n.css,r=n.sourceMap,s=void 0===e.convertToAbsoluteUrls&&r;(e.convertToAbsoluteUrls||s)&&(i=f(i)),r&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */");var a=new Blob([i],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(a),o&&URL.revokeObjectURL(o)}},5:function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,i=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(t,e){var r,s=e.trim().replace(/^"(.*)"$/,(function(t,e){return e})).replace(/^'(.*)'$/,(function(t,e){return e}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(s)?t:(r=0===s.indexOf("//")?s:0===s.indexOf("/")?n+s:i+s.replace(/^\.\//,""),"url("+JSON.stringify(r)+")")}))}},543:function(t,e,n){"use strict";n.r(e);var i=n(249),r=n.n(i),s=n(250),a=n.n(s),o={uniforms:{color:{type:"v3",value:new THREE.Vector3(0,0,0)},opacity:{type:"f",value:1}},rawShader:!0,vertexShader:r.a,fragmentShader:a.a},h=Autodesk.Viewing.Private,u=(new THREE.Color).setRGB(1,1,1);function l(){var t,e,n,i,r=[[],[]],s=null,a=null,l=null,c=null,f=null;function d(){s&&(s.dispose(),s=null),a=null}function m(t,e,n,i){return t[e++]=n[i],t[e++]=n[i+1],t[e++]=n[i+2],t[e++]=n[i+3],t[e++]=n[i+1],t[e++]=n[i+2],t[e++]=n[i],t[e++]=n[i+4],t[e++]=n[i+2],t[e++]=n[i+3],t[e++]=n[i+4],t[e++]=n[i+2],t[e++]=n[i],t[e++]=n[i+1],t[e++]=n[i+5],t[e++]=n[i+3],t[e++]=n[i+1],t[e++]=n[i+5],t[e++]=n[i],t[e++]=n[i+4],t[e++]=n[i+5],t[e++]=n[i+3],t[e++]=n[i+4],t[e++]=n[i+5],e}function p(t,e,n){return t[e++]=n,t[e++]=n+1,t[e++]=n+5,t[e++]=n,t[e++]=n+5,t[e++]=n+4,t[e++]=n,t[e++]=n+2,t[e++]=n+3,t[e++]=n,t[e++]=n+3,t[e++]=n+1,t[e++]=n,t[e++]=n+4,t[e++]=n+6,t[e++]=n,t[e++]=n+6,t[e++]=n+2,t[e++]=n+7,t[e++]=n+6,t[e++]=n+4,t[e++]=n+7,t[e++]=n+4,t[e++]=n+5,t[e++]=n+7,t[e++]=n+5,t[e++]=n+1,t[e++]=n+7,t[e++]=n+1,t[e++]=n+3,t[e++]=n+7,t[e++]=n+3,t[e++]=n+2,t[e++]=n+7,t[e++]=n+2,t[e++]=n+6,e}function g(t,e,n,i){var r=new Float32Array(24*i),s=new Uint16Array(36*i),a=0,o=0,h=0;for(i+=n;n<i;++n,h+=8)o=p(s,o,h),a=m(r,a,t,6*e[n]);var u=new THREE.BufferGeometry;return u.addAttribute("position",new THREE.BufferAttribute(r,3)),u.addAttribute("index",new THREE.BufferAttribute(s,1)),u.streamingDraw=!0,u.streamingIndex=!0,u}function y(t,e,n,i){for(var r=new Float32Array(3*i),s=new Float32Array(3*i),a=0,o=i+n;n<o;++n){var h=6*e[n];s[a]=t[h+3]-t[h],r[a++]=t[h++],s[a]=t[h+3]-t[h],r[a++]=t[h++],s[a]=t[h+3]-t[h],r[a++]=t[h++]}var u=new THREE.BufferGeometry;u.addAttribute("position",new THREE.BufferAttribute(l,3)),u.addAttribute("index",new THREE.BufferAttribute(c,1));var f=new THREE.BufferAttribute(r,3);f.divisor=1;var d=new THREE.BufferAttribute(s,3);return d.divisor=1,u.addAttribute("instOffset",f),u.addAttribute("instScaling",d),u.numInstances=i,u.streamingDraw=!0,u.streamingIndex=!0,u}this.settings=i,this.initialize=function(n,r){n?(t=n,e=r,i=r.settings):h.logger.error("You need a gl context use occlusion culling. Things will go downhill from here.",av.errorCodeString(av.ErrorCodes.BROWSER_WEBGL_NOT_SUPPORTED))},this.onResize=function(){d()};var v=[[0,1,1],[1,0,1],[1,1,0],[1,1,1]],_=[1,1,1,0];this.occlusionTest=function(d,b,x,w,k){if(!x||x.length<=0||x.length>4)return Promise.reject({error:"fragIds invalid. Must be a nonempty array of fragment id arrays with length <= 4"});var z=[0,0,0,0],E=0;w=w&&t.supportsInstancedArrays()?1:0,(!r[w]||r[w].length<x.length)&&function(t,e){for(var n=!!e,i=r[e].length;i<t;++i){var s=h.createShaderMaterial(o);s.useInstancing=n,s.depthWrite=!1,s.uniforms.color.value.set(v[i][0],v[i][1],v[i][2]),s.uniforms.opacity.value=_[i],s.defaultAttributeValues.instRotate=[1,0,0,0],s.blending=THREE.CustomBlending,s.blendDst=THREE.SrcColorFactor,s.blendSrc=THREE.ZeroFactor,s.blendEquation=THREE.AddEquation,s.transparent=!0,r[e][i]=s}}(x.length,w),w&&!l&&(l=new Float32Array(24),p(c=new Uint16Array(36),0,0),m(l,0,[0,0,0,1,1,1],0)),f||(f=new THREE.Scene),f.frustumCulled=!1;var S,M=w?32768:4096;for(S=0;S<x.length;++S){var A=x[S];if(A&&A.length>0){z[S]=b,++E;for(var I,O=r[w][S],T=A.length,C=0;C<T;C+=I){I=Math.min(M,T-C);var P=w?y(d,A,C,I):g(d,A,C,I),R=new THREE.Mesh(P,O);R.frustumCulled=!1,f.add(R)}}}switch(s||((s=new THREE.WebGLRenderTarget(i.deviceWidth,i.deviceHeight,{minFilter:THREE.NearestFilter,magFilter:THREE.NearestFilter,format:THREE.RGBAFormat,stencilBuffer:!1})).generateMipmaps=!1,s.shareDepthFrom=e.getColorTarget()),t.setClearColor(u,1),t.setRenderTarget(s),t.clear(!0,!1,!1),t.render(f,n,s,!1,null),t.clearBlend(),f.children.forEach((function(t){t.geometry.dispose()})),f.remove.apply(f,f.children),a||(a=new Uint8Array(4*i.deviceWidth*i.deviceHeight)),t.readRenderTargetPixels(s,0,0,i.deviceWidth,i.deviceHeight,a),x.length){case 1:for(S=a.length;E>0&&(S-=4)>=0;)a[S]||(z[0]-=1,E-=!z[0]);return Promise.resolve([z[0]<=0]);case 2:for(S=a.length;E>0&&(S-=4)>=0;)a[S]||(z[0]-=1,E-=!z[0]),a[S+1]||(z[1]-=1,E-=!z[1]);return Promise.resolve([z[0]<=0,z[1]<=0]);case 3:for(S=a.length;E>0&&(S-=4)>=0;)a[S]||(z[0]-=1,E-=!z[0]),a[S+1]||(z[1]-=1,E-=!z[1]),a[S+2]||(z[2]-=1,E-=!z[2]);return Promise.resolve([z[0]<=0,z[1]<=0,z[2]<=0]);case 4:for(S=a.length;E>0&&(S-=4)>=0;)a[S]||(z[0]-=1,E-=!z[0]),a[S+1]||(z[1]-=1,E-=!z[1]),a[S+2]||(z[2]-=1,E-=!z[2]),a[S+3]||(z[3]-=1,E-=!z[3]);return Promise.resolve([z[0]<=0,z[1]<=0,z[2]<=0,z[3]<=0])}},this.dtor=function(){t&&t.setRenderTarget(null),d()},this.setCamera=function(t){n=t}}var c=2,f=new THREE.Box3,d=Autodesk.Viewing.Private,m=d.MeshFlags.MESH_RENDERFLAG,p=[m,32768,16384,8192];function g(t,e,n,i){d.RenderBatch.call(this,t,e,n,i),this.visibleStats=0}g.prototype=Object.create(d.RenderBatch.prototype),g.prototype.constructor=g,g.prototype.resetVisStatus=function(){this.visibleStats=0},g.prototype.forEach=function(t,e,n){var i=this.getIndices(),r=this.frags,s=!this.sortByShaderDone,a=e;e===m&&(a=this._rflag,++r._renderCount);for(var o=this.start,h=this.lastItem;o<h;o++){var u=i?i[o]:o,l=r.getVizmesh(u,this.renderImportance,!0);if(!s||l&&l.material&&l.material.program&&!l.geometry_proxy||(s=!1),!r.isFlagSet(u,d.MeshFlags.MESH_TRAVERSED)||e!=m){if(!n&&a&&r.isFlagSet(u,a)&&(l.geometry||(l.geometry=this._requireGeometry(u),u<this.drawOrderRender&&(this.drawOrderRender=u),!l.geometry&&l.geometry_proxy&&(l.geometry=l.geometry_proxy)),l.geometry)){var c=e==m&&r.isFlagSet(u,d.MeshFlags.MESH_DRAWN);if(e==m){if(!(null==this.drawOrderRender||u<this.drawOrderRender))continue;r.setFlagFragment(u,d.MeshFlags.MESH_DRAWN,!0)}if(!c){var f=r.getMaterial(u);f&&r._pagingProxy.onGeomTraversed(l.geometry,f.transparent)}}!(n||l&&l.geometry)||a&&!r.isFlagSet(u,a)||t(l,u)}}s&&this.sortByShader()},g.prototype.applyVisibility=function(){var t,e,n,i,r,s,a,o,h;function u(u,l){if(u||!t.useThreeMesh)if(h||function(t,e,n,i){var r=!1;n.getWorldBounds(i,f);var s=e.intersectsBox(f);if(t&&s===d.FrustumIntersector.OUTSIDE)r=!0;else if(n._pagingProxy.pixelCullingEnable()){var a=e.projectedBoxArea(f,s===d.FrustumIntersector.CONTAINS);(a*=e.areaConv)<n._pagingProxy.pixelCullingThreshold()&&(r=!0)}return r}(a,n,t,l)){u?u.visible=!1:THREE.warn("Unexpected null mesh"),e[l]=e[l]&~r;var c=t.geomids[l],m=t.geoms.getGeometry(c);t._pagingProxy.onGeomCulled(m)}else{var p=function(t,e,n,i,r,s){var a,o=e[n]&~s;switch(t){case d.RenderFlags.RENDER_HIDDEN:a=!(o&d.MeshFlags.MESH_VISIBLE);break;case d.RenderFlags.RENDER_HIGHLIGHTED:a=o&d.MeshFlags.MESH_HIGHLIGHTED;break;default:a=1==(o&(d.MeshFlags.MESH_VISIBLE|d.MeshFlags.MESH_HIGHLIGHTED|d.MeshFlags.MESH_HIDE))}if(i){var h=o&(d.MeshFlags.MESH_ISLINE|d.MeshFlags.MESH_ISWIDELINE);a=a&&!h}if(r){var u=o&d.MeshFlags.MESH_ISPOINT;a=a&&!u}return e[n]=o|(a?s:0),a}(i,e,l,t.linesHidden,t.pointsHidden,r);u&&(u.visible=!!p),o=o&&!p}else s&&s(l)}function l(e){var n=t.fragments.packIds[e];t._pagingProxy.addGeomPackMissingLastFrame(n)}return function(s,c){o=!0,h=!1,n=c,r=p[i=s]||p[0],t=this.frags;var f=i===d.RenderFlags.RENDER_HIDDEN?this.getBoundingBoxHidden():this.getBoundingBox(),m=n.intersectsBox(f);if(m===d.FrustumIntersector.OUTSIDE&&(h=!0),a=m!==d.FrustumIntersector.CONTAINS,t._pagingProxy.pixelCullingEnable()){var g=this.renderImportance;0==g&&(g=n.projectedBoxArea(f,!a)),(g*=n.areaConv)<t._pagingProxy.pixelCullingThreshold()&&(h=!0)}return e=this.frags.vizflags,this.forEach(u,null,l),o}}(),g.prototype._requireGeometry=function(t){var e=this.frags,n=null,i=e.geomids[t];if(i>=0&&(n=e.geoms.getGeometry(i)),null==n){var r=e.fragments.packIds?e.fragments.packIds[t]:t;e._pagingProxy.loadPackFile(r)}return n};var y=2,v=1048576,_=Autodesk.Viewing,b=_.Private,x=function(t,e){var n=t.getSettingsPanel();if(n){var i=n.getControl(n.groundShadowChkBoxId).checkElement,r=i.parentElement.parentElement.parentElement;r.style.display=e,(r=(i=n.getControl(n.groundReflectionChkBoxId).checkElement).parentElement.parentElement.parentElement).style.display=e}},w=function(t,e){var n=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},i=t;this.options={},n(this.options,e),this.options.debug={maxPageOutSize:195,pixelCullingEnable:this.options.onDemandLoading,pixelCullingThreshold:b.PIXEL_CULLING_THRESHOLD,occlusionThreshold:1,occlusionTestThreshold:1,startOcclusionTestingPackCount:8,testPackfileCount:4,useOcclusionInstancing:!0,automaticRefresh:!0,boxProxyMaxCount:0,boxProxyMinScreen:.4},n(this.options.debug,e.debug),this.reachLimit=!1,this.geomidsmap={},this.geomTravCount=[],this.loadedPacks={},this.loadedPackfileCount=0,this.memoryOverhead=0,this.loadingPacks={},this.loadingPacksSize=0,this.queuedPacks=[],this.packQueuedMap={},this.queuedPacksSize=0,this.occludedPacks=[],this.occlusionCulledCount=0,this.packsPagedOut=0,this.traversedCounter=0,this.transparentCounter=0,this.resetCount=0,this.invalidateCount=-1,this.moving=0,this.geompacks=i.svf.geompacks,this.geommap=i.geommap,this.totalGeomSize=this.options.totalGeomSize,this.overheadSize=this.options.overheadSize,this.minMemoryLimit=Math.min(Math.max(.1*this.totalGeomSize,10),50)+this.overheadSize,this.lastPageOut=-1,this.pageOutResetCounter=-1;var r,s,a,o,h,u=!1,c=0,f=0,d=0,m=[],p=-1,w=[],k=!0,z=null,E=0,S=!0,M=!1,A=new l;A.initialize(i.viewer3DImpl.glrenderer(),i.viewer3DImpl.renderer());var I=function(t){this.resetCanPageOut(!!t.debug.unloadPackFiles,0!=t.delay,!1)}.bind(this);i.viewer3DImpl&&i.viewer3DImpl.api.addEventListener(_.LOAD_MISSING_GEOMETRY,I),this.dtor=function(){this.removeHooks(),A&&A.dtor(),A=void 0,i.viewer3DImpl&&i.viewer3DImpl.api.removeEventListener(_.LOAD_MISSING_GEOMETRY,I)},this.pixelCullingEnable=function(){return this.options.debug.pixelCullingEnable},this.pixelCullingThreshold=function(){return this.options.debug.pixelCullingThreshold},this.getMemoryLimit=function(){return Math.max(this.minMemoryLimit,this.options.limit)},this.getMemoryInfo=function(){return{limit:this.options.limit,effectiveLimit:this.getMemoryLimit(),loaded:this.preparedPackFilesSize()}},this.getLoadedMeshes=function(t){var e=this.loadedPacks[t];return e&&e.inMemory},this.loadPackFile=function(){return!0},this.doLoadPackFile=function(t){return!!this.loadingPacks[t]||!0!==this.occludedPacks[t]&&(this.queuedPacks.length>0||this.occlusionTesting>=1?!!this.addGeomPackMissingLastFrame(t)&&(this.loadGeometryMissingLastFrame(),!0):i.loadGeometryPack(t,this.getLoadedMeshes(t)))},this.unloadPackFile=function(t,e,n){var r=i.model.getFragmentList(),s=this.loadedPacks[t];return!!(r&&s&&r.geoms)&&(function(t,e,n,r,s,a){var o,h,u=0,l=0,c=[],f=a.inMemory,d=!1,m=0,p=e.geoms;if(!n&&a.travsed>=a.currentCount)return 0;function g(a){if(f[a>>5]&1<<(31&a)){var h=e.fragments.mesh2frag[t+":"+a];Array.isArray(h)&&(h=h[0]);var g=p.geoms[e.getGeometryId(h)];if(g&&g.packId==t){var y=g.vb.buffer===g.ib.buffer?g.vb.buffer.byteLength>g.vb.byteLength+g.ib.byteLength:g.vb.buffer.byteLength>g.vb.byteLength||g.ib.buffer.byteLength>g.ib.byteLength;(n||g.traversed!=r&&g.transparent!=s)&&(o=p.removeGeometry(g.svfid,i.viewer3DImpl.glrenderer()))>0?(l+=o,f[g.meshIndex>>5]&=~(1<<(31&g.meshIndex)),d=d||y):(++m,y&&(u+=g.vb.byteLength,u+=g.ib.byteLength+3&-4,c.push(g)))}else console.error("Mismapped or missing geometry %d:%d",t,a)}}for(h=0;h<a.totalCount;++h)g(h);if(a.currentCount=m,a.culled=0,0==l)return 0;if(l/=v,0==c.length||!d)return l;var y=new ArrayBuffer(u),_=0;function b(t,e,n){var i=null;if(e){var r=n-1;_=_+r&~r;var s=e.length;(i=new t(y,_,s)).set(e),_+=s*n}return i}c.forEach((function(t){t.vb=b(Float32Array,t.vb,4),t.ib=b(Uint16Array,t.ib,2)}))}(t,r,e,this.traversedCounter,this.transparentCounter,s),0==s.currentCount&&(delete this.loadedPacks[t],--this.loadedPackfileCount,n&&++this.packsPagedOut),!0)};var O=function(){if(this.resetCount!=this.pageOutResetCounter)return!1;i.viewer3DImpl.invalidate(!1,!0)}.bind(this);this.onPackFileLoaded=function(t,e,n){var i=this.geommap[t];if(M=!1,this.loadingPacks.hasOwnProperty(t)&&(delete this.loadingPacks[t],this.loadingPacksSize-=i.geomSize+i.usize),e){var r=this.loadedPacks[t];if(!r){var s=e.meshes.length;r=this.loadedPacks[t]={totalCount:s,travsed:0,culled:0,resetCounter:this.resetCount,geomSize:0,inMemory:new Array((s+31)/32|0)},++this.loadedPackfileCount,this.options.debug.occlusionTestThreshold>0&&0==this.occlusionTesting&&this.loadedPackfileCount>=this.options.debug.startOcclusionTestingPackCount&&(this.occlusionTesting=1)}r.geomSize+=n,r.currentCount=r.totalCount,r.inMemory.fill(-1),this.totalGeomSize+=r.geomSize-i.geomSize,this.packQueuedMap[t]&&(this.queuedPacksSize+=r.geomSize-i.geomSize),i.geomSize=r.geomSize,O()}this.loadedGeometrySize()>this.getMemoryLimit()&&b.logger.warn("More pack files being loaded than the max count: "+this.loadedGeometrySize())},this.checkLoadFinished=function(){if(!M){var t=i.pack_workers;if(t)for(var e=0;e<t.length;e++)if(0!=t[e].queued)return;(0!=this.geomPacksMissingLastFrame().length||c<m.length)&&(this.loadedGeometrySize()<this.getMemoryLimit()||S)||(M=!0,i.onGeomLoadDone())}},this.doOnDemandLoadFinished=function(){this.loadGeometryMissingLastFrame(),this.checkLoadFinished()},this.onPackFileLoading=function(t){if(!this.loadingPacks.hasOwnProperty(t)){this.loadingPacks[t]=!0;var e=this.geommap[t];this.loadingPacksSize+=e.geomSize+e.usize}},this.onProcessReceivedMesh=function(t,e){var n=t.svfid;e>1&&null==this.geomidsmap[n]&&(this.geomidsmap[n]=this.geomTravCount.length,this.geomTravCount.push(0))},this.loadedGeometrySize=function(){return i.model.getGeometryList().geomMemory/v+this.overheadSize},this.preparedPackFilesSize=function(){return this.loadingPacksSize+this.loadedGeometrySize()},this.cancelPending=function(){this.loadingPacksSize>1/v&&(i.cancelGeometryPackLoading(),this.loadingPacks={},this.loadingPacksSize=0),this.queuedPacks.length=0,this.queuedPacksSize=0,this.packQueuedMap={},this.occlusionTesting=this.options.debug.occlusionTestThreshold>0&&this.loadedPackfileCount>=this.options.debug.startOcclusionTestingPackCount?1:0,this.occludedPacks.length=0},this.resetIterator=function(t){this.lastCamera=t,A.setCamera(t),++this.resetCount},this.reset=function(){var t=this.loadedPacks;for(var e in t)t[e].travsed=0,t[e].culled=0;this.geomTravCount.fill(0),this.resetCount>this.invalidateCount&&(this.cancelPending(),this.resetCanPageOut(!1,!0,!0))},this.geomPacksMissingLastFrame=function(){return this.queuedPacks},this.addGeomPackMissingLastFrame=function(t){if(this.loadedGeometrySize()>=this.getMemoryLimit()&&(this.reachLimit=!0),!this.packQueuedMap[t]){var e=this.geommap[t];e&&(this.queuedPacks.push(t),this.queuedPacksSize+=e.geomSize,this.packQueuedMap[t]=!0)}return!0},this.loadGeometryMissingLastFrame=function(){var t,e=this.queuedPacks;for(t=0;t<e.length;++t){var n=e[t];if(this.occlusionTesting>=1&&void 0===this.occludedPacks[n])break;if(!this.geommap[n].loading&&!this.occludedPacks[n]&&!i.loadGeometryPack(n,this.getLoadedMeshes(n)))break}0!=t||M||O();var r=this;e.splice(0,t).forEach((function(t){r.queuedPacksSize-=r.geommap[t].geomSize,delete r.packQueuedMap[t]}))},this.needResumeNextFrame=function(){return u};var T=function(t,e){var n=t>=w.length?1e10:w[t];return(e>=w.length?1e10:w[e])-n}.bind(this.loadedPacks);this.markVisibleGeoms=function(){var t,e=i.viewer3DImpl,n=i.model,r=n.getData().instanceTree;if(r&&(t=function(t,e,n){var i=n.getFragmentList()._renderCount;if(i===s)return a;s=i;var r=t.getIdTarget();return r?(a&&o==r.width&&h==r.height||(a=new Uint8Array(4*r.width*r.height),o=r.width,h=r.height),e.readRenderTargetPixels(r,0,0,r.width,r.height,a),a):(a=void 0,null)}(e.renderer(),e.glrenderer(),n))){var u,l,c=++this.traversedCounter,f={},d=t.length,m=this.loadedPacks;for(l in m)m[l].travsed=0;for(var p=0;p<d;p+=4)(u=(u=t[p]|t[p+1]<<8|t[p+2]<<16)<<8>>8)>0&&(f[u]=1+(0|f[u]));var g=n.getFragmentList(),y=0|this.options.debug.occlusionThreshold;for(l in f)f[u=Number(l)]>=y&&r.enumNodeFragments(u,(function(t){var e=g.getGeometry(t);if(e){var n=m[e.packId];n&&e.traversed!=c&&++n.travsed,e.traversed=c}}))}},this.pageOut=function(t,e){u=!1;var n=0;if(!S||!i.isValid())return n;if(t&&this.options.debug.occlusionTestThreshold>0&&this.loadedPackfileCount>=this.options.debug.startOcclusionTestingPackCount&&(this.occlusionTesting=y),this.occlusionTest(),!t)return n;this.pageOutResetCounter=this.resetCount;var r=this.loadedGeometrySize();if(S=!0,r&&(this.reachLimit||r>this.getMemoryLimit())){this.markVisibleGeoms();var s=this.loadedPacks,a=Object.keys(s),o=!1;a.sort(T);var h=r-Math.min(r,this.options.debug.maxPageOutSize);return a.every(function(t){return s[t].resetCounter<this.resetCount?this.unloadPackFile(t,!1,!0):o=!0,this.loadedGeometrySize()>h}.bind(this)),e&&this.loadedGeometrySize()==r&&s[a[0]].resetCounter<this.resetCount&&(this.unloadPackFile(a[0],!1,!0),b.logger.log("A force page out occur.")),this.loadedGeometrySize()==r?(n=0,this.reachLimit=!0):(this.reachLimit=!1,this.loadGeometryMissingLastFrame(),u=!0),this.lastPageOut=r-this.loadedGeometrySize(),b.logger.log("[On Demand Loading] Unload pack files size: "+this.lastPageOut),window&&window.gc&&window.gc(),0==this.lastPageOut&&(S=o,this.checkLoadFinished()),n}return u=u||this.queuedPacks.length>0,this.loadFragsFromLoadOrder(),n},this.occlusionTest=function(t){var e=null,n=!1,r=null,s=null,a=0,o=0,h=3;function u(e){r=null;for(var n=0;n<s.length;++n)t.occludedPacks[s[n]]=!e[n],e[n]||(b.logger.debug("[On Demand Loading] Occluded Geometry Pack file: "+s[n]),++t.occlusionCulledCount);t.doOnDemandLoadFinished(),l()}function l(){a||r||M||(r=null,!n&&(s=function(e){var n=null;o=0;var i=t.queuedPacks,r=t.occludedPacks;e=Math.min(4,e||4);for(var s=i.length,a=0;a<s&&e>0;++a){var h=i[a];void 0===r[h]?((n=n||[]).push(h),--e):r[h]||++o}return n}(t.options.debug.testPackfileCount))&&(a=setTimeout((function(){a=0;var n=function(t){var n=e.fragments.packIds;if(!n)return null;var i=[];return t.forEach((function(t){for(var e=[],r=n.lastIndexOf(t);r>=0;)n[r]==t?e.push(r--):--r>0&&(r=n.lastIndexOf(t,r));i.push(e)})),i}(s);(r=A.occlusionTest(e.boxes,t.options.debug.occlusionTestThreshold,n,t.options.debug.useOcclusionInstancing,s)).then(u,(function(){u([!0,!0,!0,!0])}))}),o*h)))}return function(){r||this.occlusionTesting<y||(n=this.moving-- >0,(e=i.model.getFragmentList())&&!n&&l())}}(this),this.loadFragsFromLoadOrder=function(){for(var t=i.model.getFragmentList();c<m.length;){for(var e=m[c],n=e.length;f<n;){var r=e[f];if(!t.getGeometry(r)){var s=t.fragments.packIds?t.fragments.packIds[r]:r,a=this.queuedPacks.length;if(!this.doLoadPackFile(s)&&a==this.queuedPacks.length)return}++f}++c,f=0}},this.pfOrder=function(){return r},this.getNumVisiblePFs=function(){return r?p:-1},this.onLoadOrderCalculated=function(t){if(t.error)z=null;else if(t.fragOrder&&t.packOrder&&(z=t),t.id==d&&z){this.lastPageOut=-1,S=!0,M=!1,m.length=0,m.push(z.fragOrder),r=z.packOrder,p=z.pfVisible;var e,n=r.length;for(w.length=this.geompacks.length,w.fill(1e10),e=0;e<n;++e)w[r[e]]=e;var s,a=i.model.getFragmentList(),o=this.overheadSize,h=this.getMemoryLimit();for(s=0;s<m.length&&o<h;++s){var u=m[s];n=u.length;var l=[];l.length=w.length,l.fill(0);var g=this.geompacks;for(e=0;e<n&&o<h;++e){var y=u[e],v=a.fragments.packIds?a.fragments.packIds[y]:y,_=g[v];if(_){var b=a.getGeometry(y)?_.geomSize:_.totalGeomSize;b>l[v]&&(o+=b-l[v],l[v]=b)}}}var x=this.loadedPacks;for(var k in x)x.hasOwnProperty(k)&&(l[k]||this.unloadPackFile(k,!0));++this.traversedCounter,++this.transparentCounter,this.reachLimit=this.loadedGeometrySize()>=this.getMemoryLimit(),this.cancelPending(),c=0,f=0,this.loadFragsFromLoadOrder(),i.viewer3DImpl.invalidate(!0),this.invalidateCount=this.resetCount+1}},this.resetCanPageOut=function(t,e,n){E&&(clearTimeout(E),E=0);var r=this;function s(){if(E=0,k||!n||r.options.debug.automaticRefresh){r.occlusionCulledCount=0,r.packsPagedOut=0;var e,s=r.lastCamera,a=r.loadedPacks;if(t)for(e in a)a.hasOwnProperty(e)&&r.unloadPackFile(e,!0);i.calculateLoadOrder(++d,s,r.options.debug.pixelCullingEnable?r.options.debug.pixelCullingThreshold:-1),k=!1}}e?E=setTimeout(s,100):s()},this.onGeomTraversed=function(t,e){var n=t.packId,i=t.svfid;t.traversed=this.traversedCounter,e&&(t.transparent=this.transparentCounter);var r=!0,s=this.geomidsmap[i];null!=s&&(this.geomTravCount[s]+=2,this.geomTravCount[s]|=1,r=t.instanceCount==this.geomTravCount[s]>>1);var a=this.loadedPacks[n];a&&r&&a.travsed++},this.onGeomCulled=function(t){if(t){var e=t.packId,n=t.svfid,i=this.geomidsmap[n],r=!i;null!=i&&(1&this.geomTravCount[i]?this.onGeomTraversed(t):(this.geomTravCount[i]+=2,r=t.instanceCount==this.geomTravCount[i]>>1));var s=this.loadedPacks[e];s&&r&&s.culled++}},this.removeHooks=function(){var t=i.viewer3DImpl,e=t.rolloverObjectViewport;t.rolloverObjectViewport=function(){};var n=t.renderer(),r=n.renderScenePart,s=g;n.renderScenePart=function(t,e,n,i,a){if(i&&t instanceof b.RenderBatch&&t.sortObjects&&(i=!1),r.call(this,t,e,n,i,a),t instanceof s)for(var o,h=t.start,u=t.lastItem,l=t.frags.vizflags,c=t.getIndices();h<u;)l[o=c?c[h]:h]&b.MeshFlags.MESH_DRAWN&&(l[o]=(l[o]|b.MeshFlags.MESH_TRAVERSED)&~b.MeshFlags.MESH_DRAWN),++h},t.matman().toggleDepthWriteTransparent(!1),t.toggleGroundShadow(!1),t.toggleGroundReflection(!1);var a=!1,o=function e(){a=!0,t.api.removeEventListener(_.TOOLBAR_CREATED_EVENT,e),x(t.api,"none")};t.api.addEventListener(_.TOOLBAR_CREATED_EVENT,o);return t.api.addEventListener(_.VIEWER_RESIZE_EVENT,(function(t){A.onResize()})),function(){t.api.removeEventListener(_.TOOLBAR_CREATED_EVENT,o),t.api.removeEventListener(_.VIEWER_RESIZE_EVENT,o),t.rolloverObjectViewport=e,t.matman().toggleDepthWriteTransparent(!0),t.toggleGroundShadow(t.api.prefs.groundShadow),t.toggleGroundReflection(t.api.prefs.groundReflection),a&&x(t.api,"")}}()},k=n(79),z=Autodesk.Viewing,E=z.Private;var S=Autodesk.Viewing,M=S.Private,A=[1,1,2,4];function I(t){var e=this;S.Model.call(this,t),this.RenderBatch=g;var n=this.initialize,i=this.resetIterator,r=this.nextBatch,s=this.dtor,a=A[M.RenderFlags.RENDER_NORMAL],o=M.MeshFlags.MESH_RENDERFLAG,h=0,u=function t(){h=requestAnimationFrame(t),e.frameUpdatePaging()};this.initialize=function(t){n.call(this);var e=this.getFragmentList();e._pagingProxy=this.loader.pagingProxy,e._renderCount=0;for(var i=this.getIterator().getGeomScenes(),r=0;r<i.length;++r)i[r].calculateBounds();h=requestAnimationFrame(u)},this.dtor=function(t){h&&(cancelAnimationFrame(h),h=0),s.call(this,t)},this.resetIterator=function(t,e,n,r){r=r||M.ResetFlags.RESET_NORMAL;var s=this.loader.pagingProxy,h=this.getFragmentList();o=p[n]||M.MeshFlags.MESH_RENDERFLAG,s.resetIterator(t,r);var u=i.call(this,t,e,n);return a=A[n]||A[M.RenderFlags.RENDER_NORMAL],r!=M.ResetFlags.RESET_NORMAL&&(++h._renderCount,r>=M.ResetFlags.RESET_REDRAW&&(h.setFlagGlobal(M.MeshFlags.MESH_TRAVERSED,!1),this.resetVisStatus()),r>=M.ResetFlags.RESET_RELOAD&&(h._pagingProxy.moving=2,this._pageOutStatus=c,s.reset())),u},this.nextBatch=function(){var t=r.call(this);return t&&(t._rflag=o),t},this.applyVisibility=function(t,e,n){if(t.visibleStats&a)return!(t.visibleStats&a<<16);var i=t.applyVisibility(e,n);return t.visibleStats|=a,i||(t.visibleStats|=a<<16),i||this.is2d()||(t.sortObjects&&!this.getFragmentList().useThreeMesh?t.sortByDepth(n):t.sortDone||t.sortByMaterial()),i}}I.prototype=Object.create(S.Model.prototype),I.prototype.constructor=I,I.prototype.resetVisStatus=function(){for(var t=this.getIterator().getGeomScenes(),e=0;e<t.length;++e){var n=t[e];n&&n.resetVisStatus()}},I.prototype.frameUpdatePaging=function(){var t=this.loader.pagingProxy,e=this.getIterator().done();return this._pageOutStatus=t.pageOut(e,!1),e&&1==this._pageOutStatus&&(this._pageOutStatus=t.pageOut(!0,!0)),this._pageOutStatus};var O=n(251);function T(t){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function C(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function P(t,e){return!e||"object"!==T(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function R(t){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function L(t,e){return(L=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var F=Autodesk.Viewing.Private;var D=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),P(this,R(e).apply(this,arguments))}var n,i,r;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&L(t,e)}(e,t),n=e,r=[{key:"buildInstanceTree",value:function(t,n){var i=function(t){for(var e={},n=0,i=t.length;n<i;n++){var r=t[n];Array.isArray(r)||(r=[r]);for(var s=0;s<r.length;s++){var a=r[s],o=e[a];void 0===o?e[a]=n:Array.isArray(o)?o.push(n):e[a]=[o,n]}}return e}(t),r=Object.keys(i),s=r.length,a=new F.InstanceTreeStorage(s+1,t.length),o=[],h=[0];a.setNode(-1<<30,0,"root",0,r,o);for(var u=0;u<s;++u){var l=r[u],c=i[l];Array.isArray(c)||(h[0]=c,c=h),a.setNode(l,-1<<30,"node:"+l,6,o,c)}r=void 0,i=void 0,a.flatten();var f=new e(a=new F.InstanceTreeAccess(a,-1<<30),s+1,2);return f.setFragmentList(n),f}}],(i=null)&&C(n.prototype,i),r&&C(n,r),e}(F.InstanceTree),B=Autodesk.Viewing,U=B.Private,V=B.isNodeJS()?10:B.isMobileDevice()?2:6,N={type:O.FRAGMENTS_LOADED_EVENT,model:null,data:null,getFragIds:function(){if(this.fragIds)return this.fragIds;var t=this.model;if(!t||!this.data||!this.data.meshes)return null;var e=this.fragIds=[],n=this.data.packId,i=0,r=t.getData().fragments,s=this.data.meshes.length;for(i=0;i<s;++i){var a=n+":"+i++,o=r.mesh2frag[a];if(void 0===o)return;Array.isArray(o)?o.forEach((function(t){e.push(t)})):e.push(o)}return e}},j=U.SvfLoader;var H=function(t,e){j.call(this,t,e);var n=function(t,e){var n=Object.assign({},e&&e.memory);n.debug=Object.assign({},n.debug),i=0|parseInt(n.limit),(n.debug&&n.debug.force||!1)&&i<=0&&(n.force=!1,E.logger.warn("config.memory.limit value is invalid: ("+n.limit+")"));var i,r=z.getParameterByName("viewermemory");if((i=parseInt(r))>0){var s=(i|=0)>0&&"f"===r.charAt(r.length-1).toLowerCase();n={limit:i,debug:{force:s}},s?E.logger.info("Forcing memory limit to URL param: ("+i+" MegaBytes)."):E.logger.info("Setting memory limit to URL param: ("+i+" MegaBytes).")}else 0===i?n={limit:0}:""!==r&&E.logger.warn("Invalid viewermemory URL param value: ("+r+")");var a=function(t){for(var e=0;e<t.length;++e){var n=t[e].getFragmentList();if(n&&n._pagingProxy)return!0}};return(a(t.modelQueue().getModels())||a(t.modelQueue().getHiddenModels()))&&(n.limit=0,n.debug.force=!1),n}(t,e),i=this.memoryOpts={debug:{}};if(!B.isNodeJS()&&(i.limit=B.isAndroidDevice()?195:B.isIOSDevice()?150:B.isFirefox()?0:B.isMac()&&B.isChrome()?0:B.isSafari()?2048:1024,i.onDemandLoading=!0,n)){i.debug=Object.assign({},n.debug);var r=n.hasOwnProperty("limit")?n.limit:i.limit;(0|r)>0?i.limit=0|r:0==r?(i.onDemandLoading=!1,i.debug.force=!1):U.logger.warn("Memory limit, "+r+", is invalid - ignored")}};(H.prototype=Object.create(j.prototype)).dtor=function(){this.svfLoadOrderWorker&&(this.svfLoadOrderWorker.terminate(),this.svfLoadOrderWorker=null,U.logger.debug("SVF loader dtor: on load order worker.")),this.pagingProxy&&(this.pagingProxy.dtor(),this.pagingProxy=null),j.prototype.dtor.call(this)},H.prototype.initWorkerScript=k.initWorkerScriptML,H.prototype.createWorkerWithIntercept=function(){var t=this,e=Object(k.createWorkerWithInterceptML)();return e.doOperation=function(n){if("LOAD_SVF"===n.operation){var i=t.memoryOpts.onDemandLoading||!!t.memoryOpts.debug.memoryOptimizedSvfLoading;i&&(n.perfOpt={memoryOptimizedSvfLoading:i,forceMemoryOptimizedMode:!!t.memoryOpts.debug.forceMemoryOptimizedModeOnSvfLoading})}e.postMessage(n)},e},H.prototype.startWorkers=function(){this.pagingProxy?(U.logger.debug("[On Demand Loading]: Enabled."),this.loadedPacksCount=0):j.prototype.startWorkers.call(this)},H.prototype.createModel=function(t){var e=this.model=this.pagingProxy?new I(t):new B.Model(t);return e.loader=this,e.initialize(this.pagingProxy),e},H.prototype.loadFile=function(t,e,n,i){var r=!B.isNodeJS()&&e.forceDisableOnDemandLoading;if(e.bubbleNode){var s=e.bubbleNode.findParentGeom2Dor3D().extensions();s&&s.indexOf("Autodesk.Fusion360.Animation")>=0&&(r=!0)}return r&&(this.memoryOpts.limit=0,this.memoryOpts.onDemandLoading=!1,this.memoryOpts.debug.force=!1,U.logger.log("Animation file disables on-demand-loading...")),j.prototype.loadFile.call(this,t,e,n,i)},H.prototype.cancelGeometryPackLoading=function(){if(this.pack_workers&&this.isValid()){for(var t=0;t<this.pack_workers.length;t++){if(this.svf){var e=this.geommap[this.pack_workers[t].packId];e&&(e.loading=!1)}this.pack_workers[t].queued=0,this.pack_workers[t].clearAllEventListenerWithIntercept(),this.pack_workers[t].terminate()}this.pack_workers=null}},H.prototype.loadGeometryPack=function(t,e){var n=this.pagingProxy;if(!n)return j.prototype.loadGeometryPack.call(this,t,e),!0;if(!this.svf||!this.isValid())return!0;var i,r=this.geommap[t];if(!r||r.loading)return!0;this.t0||(this.t0=(new Date).getTime());var s=this;function a(t,e){t.queued=0,s.geommap[e].loading=!1,n.doOnDemandLoadFinished()}var o=function(t){if(t.data&&t.data.meshes){for(var e=t.data.meshes,i={packId:t.data.packId,meshIndex:0,mesh:null},r=0,o=0;o<e.length;o++){var h=e[o];h&&(i.meshIndex=o,i.mesh=h,s.processReceivedMesh(i),i.geometry&&(r+=i.geometry.byteSize+U.GEOMETRY_OVERHEAD,i.geometry=null))}n.onPackFileLoaded(t.data.packId,t.data,r/1048576),u=s,l=t.data,N.model=u.model,N.data=l,u.viewer3DImpl.api.dispatchEvent(N),t.data.progress>=1&&(s.loadedPacksCount++,s.viewer3DImpl.signalProgress(100*s.loadedPacksCount/s.svf.geompacks.length,B.ProgressState.LOADING,s.model),a(s.pack_workers[t.data.workerId],t.data.packId))}else t.data&&t.data.progress?(s.pack_workers[t.data.workerId].queued-=1,s.viewer3DImpl.signalProgress(100*s.loadedPacksCount/s.svf.geompacks.length)):t.data&&t.data.debug?U.logger.debug(t.data.message):t.data&&t.data.error?(n.onPackFileLoaded(t.target.packId,null,0),a(t.target,t.target.packId),++s.failedToLoadPacksCount,s.failedToLoadSomeGeometryPacks={code:t.data.error.code,msg:t.data.error.msg}):(n.onPackFileLoaded(t.target.packId,null,0),a(t.target,t.target.packId));var u,l};if(!this.pack_workers){this.pack_workers=[];var h=V;for(i=0;i<h;i++){var u=this.createWorkerWithIntercept();u.addEventListenerWithIntercept(o),u.queued=0,this.pack_workers.push(u)}}var l,c,f=0,d=this.pack_workers[0].queued;for(i=1;i<this.pack_workers.length;i++)this.pack_workers[i].queued<d&&(f=i,d=this.pack_workers[i].queued);if(d>1||n.preparedPackFilesSize()>=n.getMemoryLimit())return this.pagingProxy.addGeomPackMissingLastFrame(t)||this.viewer3DImpl.invalidate(!1,!0),!1;var m=r.uri;(l=this.pack_workers[f]).queued+=2,l.packId=t,c=f,n.onPackFileLoading(t),r.loading=!0,this.svf.partPacksLoadDone=!1,U.logger.debug("[On Demand Loading] Loading Geometry Pack file: "+t);var p={operation:"LOAD_GEOMETRY",url:U.pathToURL(this.svf.basePath+m),packId:t,workerId:c,packNormals:this.options.packNormals,createWireframe:this.options.createWireframe||this.model.getMetadata("renderEnvironmentDisplayEdges","value",!1),skipAssetCallback:!0,queryParams:this.queryParams,inMemory:e};return l.doOperation(B.initLoadContext(p)),!0},H.prototype.processReceivedMesh=function(t){if(this.pagingProxy){var e=t.packId+":"+t.meshIndex,n=this.svf.fragments,i=n.mesh2frag[e];j.prototype.processReceivedMesh.call(this,t),n.mesh2frag[e]=i,t.geometry.meshIndex=t.meshIndex,this.pagingProxy.onProcessReceivedMesh(t.geometry,Array.isArray(i)?i.length:1)}else j.prototype.processReceivedMesh.call(this,t)},H.prototype.onModelRootLoadDone=function(t){var e=this.memoryOpts,n=this.geommap={},i=(224*Object.keys(t.fragments.mesh2frag).length+134*t.fragments.length)/1048576,r=0;t.geompacks.forEach((function(t){t.hasOwnProperty("geomSize")||(t.geomSize=.7*t.usize),t.usize/=1048576,t.geomSize/=1048576,r+=t.geomSize,n[parseInt(t.id)]=t}));var s=B.isMobileDevice()?Math.min(r,U.GPU_MEMORY_LIMIT/1048576):0;r+=i,e.totalGeomSize=r,e.overheadSize=i,e.onDemandLoading&&(r+s<e.limit&&!e.debug.force?e.onDemandLoading=!1:this.pagingProxy=new w(this,e)),void 0===this.options.skipPropertyDb&&(this.options.skipPropertyDb=this.pagingProxy&&B.isMobileDevice()),j.prototype.onModelRootLoadDone.call(this,t),this.options.skipPropertyDb&&(this.svf.instanceTree=D.buildInstanceTree(this.svf.fragments.fragId2dbId,this.model.getFragmentList()));var a=this;this.pagingProxy&&t.fragments.boxes&&t.fragments.packIds&&(this.svfLoadOrderWorker=Object(k.createWorkerML)(),this.svfLoadOrderWorker.addEventListener("message",(function(t){a.isValid()&&a.pagingProxy&&a.pagingProxy.onLoadOrderCalculated(t.data)}),!1),this.svfLoadOrderWorker.doOperation({operation:"CALCULATE_LOAD_ORDER",fragments:{boxes:t.fragments.boxes,packIds:t.fragments.packIds}}),this.model.setUUID(t.urn))},H.prototype.calculateLoadOrder=function(t,e,n){if(!this.svfLoadOrderWorker)return!1;var i={operation:"CALCULATE_LOAD_ORDER",id:t,camera:{projectionMatrix:{elements:e.projectionMatrix.elements},matrixWorldInverse:{elements:e.matrixWorldInverse.elements},aspect:e.aspect,position:{x:e.position.x,y:e.position.y,z:e.position.z},clientWidth:e.clientWidth,clientHeight:e.clientHeight},pixelCullingThreshold:n};return this.svfLoadOrderWorker.doOperation(i),!0},H.prototype.onGeomLoadDone=function(){if(this.pagingProxy){if(!this.svf.loadDone)if(B.isMobileDevice()){var t=this.pagingProxy.getMemoryInfo();if(t&&t.effectiveLimit<=t.limit&&t.limit-t.loaded>50){var e=function(t){this.viewer3DImpl.api.removeEventListener(B.TEXTURES_LOADED_EVENT,e);var n=0;this.viewer3DImpl.matman().enumTextures(this.model,(function(t){t&&(n+=U.TextureLoader.calculateTextureSize(t))})),n/=1048576,this.pagingProxy.options.limit-=n}.bind(this);this.viewer3DImpl.api.addEventListener(B.TEXTURES_LOADED_EVENT,e),U.TextureLoader.loadModelTextures(this.model,this.viewer3DImpl)}}else U.TextureLoader.loadModelTextures(this.model,this.viewer3DImpl);var n=this.svf.loadDone;this.svf.loadDone=!0;var i=Date.now(),r="[On Demand Loading] On demand requested geometries load time: "+(i-this.t0);U.logger.log(r);var s={category:"on_demand_geom_load_stats",is_f2d:!1,has_prism:this.viewer3DImpl.matman().hasPrism,load_time:i-this.t0,geometry_size:this.model.getGeometryList().geomMemory,meshes_count:this.model.getGeometryList().geoms.length,fragments_count:this.model.getFragmentList().getCount(),load_pack_count:this.loadedPacksCount,urn:this.svfUrn};U.logger.track(s),this.t0=null,this.loadedPacksCount=0,this.svf.partPacksLoadDone=!0,n?this.viewer3DImpl.signalProgress(100,B.ProgressState.LOADING,this.model):this.viewer3DImpl.onLoadComplete(this.model);var a=this.model.getGeometryList();a&&a.printStats()}else j.prototype.onGeomLoadDone.call(this)};var G=n(368);function q(t,e){this.offset=0,this.byteLength=e,this.range=0,this.compressedBuffer=t,this.compressedByteLength=t.length,this.compressedOffset=0,this.decompressEnd=!1,this.resetCount=0,this.convBuf=new ArrayBuffer(8),this.convUint8=new Uint8Array(this.convBuf),this.convUint16=new Uint16Array(this.convBuf),this.convInt32=new Int32Array(this.convBuf),this.convUint32=new Uint32Array(this.convBuf),this.convFloat32=new Float32Array(this.convBuf),this.convFloat64=new Float64Array(this.convBuf),this.COMPRESSED_chunk_SIZE=524288,this.DECOMPRESSED_chunk_SIZE=262144,this.chunks=[],this.chunksByteLengthMax=0,this.chunksByteLengthMin=0,this.chunkPointer=null,this.chunkOffset=0,this.tempchunk={startIdx:0,endIdx:0,buffer:null},this.inflate=this.getInflate(),this.prepare(0,1024)}q.prototype.getInflate=function(){if(!this.inflate){this.inflate=new G.Inflate({level:3,chunkSize:this.DECOMPRESSED_chunk_SIZE});var t=this;this.inflate.onData=function(e){t.chunksByteLengthMax+=e.byteLength,t.chunksByteLengthMax<t.offset&&(e=null,t.chunksByteLengthMin=t.chunksByteLengthMax),t.chunks.push(e)},this.inflate.onEnd=function(){if(t.decompressEnd=!0,t.inflate=null,t.chunksByteLengthMax!=t.byteLength)throw"Decompress error, unexpected size."}}return this.inflate},q.prototype.prepare=function(t,e,n){if(this.chunksByteLengthMin>t&&(this.reset(),this.offset=t,this.range=e),!n){for(var i=Math.floor(t/this.DECOMPRESSED_chunk_SIZE),r=Math.floor(this.chunksByteLengthMin/this.DECOMPRESSED_chunk_SIZE),s=this.chunks.length<i?this.chunks.length:i,a=r;a<s;a++)this.chunks[a]=null;this.chunksByteLengthMin=s*this.DECOMPRESSED_chunk_SIZE}var o=t+(e=e||1);o=o>this.byteLength?this.byteLength:o;for(var h=!1;o>this.chunksByteLengthMax;){var u=this.COMPRESSED_chunk_SIZE;this.compressedOffset+u>=this.compressedByteLength&&(u=this.compressedByteLength-this.compressedOffset,h=!0);var l=new Uint8Array(this.compressedBuffer.buffer,this.compressedOffset,u);if(this.getInflate().push(l,h),this.compressedOffset+=u,h)break}},q.prototype.ensurechunkData=function(t){t=t||1;var e=this.chunks.length,n=Math.floor(this.offset/this.DECOMPRESSED_chunk_SIZE),i=Math.floor((this.offset+t-1)/this.DECOMPRESSED_chunk_SIZE);if(i>=e){var r=(i-e+1)*this.DECOMPRESSED_chunk_SIZE;this.prepare(this.DECOMPRESSED_chunk_SIZE*e,r,!0)}if(n<i){if(this.tempchunk.startIdx>n||this.tempchunk.endIdx<i){var s=(i-n+1)*this.DECOMPRESSED_chunk_SIZE;this.tempchunk.buffer=new Uint8Array(s);for(var a=0,o=n;o<=i;o++)this.tempchunk.buffer.set(this.chunks[o],a),a+=this.DECOMPRESSED_chunk_SIZE;this.tempchunk.startIdx=n,this.tempchunk.endIdx=i}this.chunkPointer=this.tempchunk.buffer}else this.chunkPointer=this.chunks[n];this.chunkOffset=this.offset-n*this.DECOMPRESSED_chunk_SIZE,this.offset+=t},q.prototype.seek=function(t,e,n){this.offset=t,this.range=e,this.prepare(t,e,n)},q.prototype.getBytes=function(t){return this.ensurechunkData(t),new Uint8Array(this.chunkPointer.buffer,this.chunkOffset,t)},q.prototype.getVarints=function(){var t,e=0,n=0;do{this.ensurechunkData(),e|=(127&(t=this.chunkPointer[this.chunkOffset]))<<n,n+=7}while(128&t);return e},q.prototype.getUint8=function(){return this.ensurechunkData(),this.chunkPointer[this.chunkOffset]},q.prototype.getUint16=function(){return this.ensurechunkData(),this.convUint8[0]=this.chunkPointer[this.chunkOffset],this.ensurechunkData(),this.convUint8[1]=this.chunkPointer[this.chunkOffset],this.convUint16[0]},q.prototype.getInt16=function(){var t=this.getUint16();return t>32767&&(t|=4294901760),t},q.prototype.getInt32=function(){var t=this.convUint8;return this.ensurechunkData(),t[0]=this.chunkPointer[this.chunkOffset],this.ensurechunkData(),t[1]=this.chunkPointer[this.chunkOffset],this.ensurechunkData(),t[2]=this.chunkPointer[this.chunkOffset],this.ensurechunkData(),t[3]=this.chunkPointer[this.chunkOffset],this.convInt32[0]},q.prototype.getUint32=function(){var t=this.convUint8;return this.ensurechunkData(),t[0]=this.chunkPointer[this.chunkOffset],this.ensurechunkData(),t[1]=this.chunkPointer[this.chunkOffset],this.ensurechunkData(),t[2]=this.chunkPointer[this.chunkOffset],this.ensurechunkData(),t[3]=this.chunkPointer[this.chunkOffset],this.convUint32[0]},q.prototype.getFloat32=function(){var t=this.convUint8;return this.ensurechunkData(),t[0]=this.chunkPointer[this.chunkOffset],this.ensurechunkData(),t[1]=this.chunkPointer[this.chunkOffset],this.ensurechunkData(),t[2]=this.chunkPointer[this.chunkOffset],this.ensurechunkData(),t[3]=this.chunkPointer[this.chunkOffset],this.convFloat32[0]},q.prototype.getFloat64=function(){for(var t=this.convUint8,e=0;e<8;e++)this.ensurechunkData(),t[e]=this.chunkPointer[this.chunkOffset];return this.convFloat64[0]},q.prototype.getString=function(t){var e="";this.ensurechunkData(t);for(var n,i=this.chunkPointer,r=this.chunkOffset,s=this.chunkOffset+t;r<s;r++)e+=String.fromCharCode(i[r]);try{n=decodeURIComponent(escape(e))}catch(t){n=e,debug("Failed to decode string "+n)}return n},q.prototype.reset=function(t){this.resetCount++,debug("InputStream Less Reset: "+this.resetCount),t&&(this.compressedBuffer=t,this.compressedByteLength=t.length),this.offset=0,this.chunks=[],this.chunksByteLengthMax=0,this.chunksByteLengthMin=0,this.compressedOffset=0,this.decompressEnd=!1,this.chunkPointer=null,this.chunkOffset=0,this.inflate=null,this.tempchunk.startIdx=0,this.tempchunk.endIdx=0,this.tempchunk.buffer=null};n(377);n.d(e,"MemoryLimitedExtension",(function(){return K})),n.d(e,"SvfLoaderML",(function(){return H})),n.d(e,"SvfPagingProxy",(function(){return w})),n.d(e,"InputStreamML",(function(){return q}));var Z=Autodesk.Viewing,W=Autodesk.Viewing.Private;function K(t,e){Z.Extension.call(this,t,e),this.name="memory-limited",this._registerOriginal=!1}K.prototype=Object.create(Z.Extension.prototype),K.prototype.constructor=K,K.prototype.load=function(){var t=this;return this.updateProgressBarStyle=function(e){e.model&&e.model.loader&&e.model.loader.pagingProxy&&t.viewer.progressbar&&t.viewer.progressbar.setStyle("memory-limited-progressbar-loading")},this._registerOriginal=Z.FileLoaderManager.unregisterFileLoader("svf"),Z.FileLoaderManager.registerFileLoader("memsvf",["svf"],H),this._registerOriginal&&Z.FileLoaderManager.registerFileLoader("svf",["gltf","glb"],W.SvfLoader),this.viewer.addEventListener(Z.MODEL_ROOT_LOADED_EVENT,this.updateProgressBarStyle),!0},K.prototype.unload=function(){return Z.FileLoaderManager.unregisterFileLoader("memsvf"),Z.FileLoaderManager.unregisterFileLoader("svf"),this._registerOriginal&&Z.FileLoaderManager.registerFileLoader("svf",["svf","gltf","glb"],W.SvfLoader),this._registerOriginal=!1,this.viewer.removeEventListener(Z.MODEL_ROOT_LOADED_EVENT,this.updateProgressBarStyle),this.viewer.progressbar&&this.viewer.progressbar.removeStyle("memory-limited-progressbar-loading"),!0},K.prototype.activate=function(){return!1},K.prototype.deactivate=function(){return!1},K.prototype.isActive=function(){return!1},K.prototype.getMemoryInfo=function(){var t,e=this.viewer.impl.modelQueue(),n={limit:0,effectiveLimit:0,loaded:0};function i(e){for(var i=0;i<e.length;++i){var r=e[i];r.loader&&r.loader.pagingProxy&&(t=r.loader.pagingProxy.getMemoryInfo(),n.limit+=t.limit,n.effectiveLimit+=t.effectiveLimit,n.loaded+=t.loaded)}}return i(e.getModels()),i(e.getHiddenModels()),t?n:null};var X=AutodeskNamespace("Autodesk.Viewing.Extension.MemoryLimited");X.MemoryLimitedExtension=K,X.SvfLoaderML=H,X.SvfPagingProxy=w,X.InputStreamML=q,Z.theExtensionManager.registerExtension("Autodesk.MemoryLimited",K)},79:function(t,e,n){var i=n(367);function r(){var t=new i;return t.doOperation=t.postMessage,t}t.exports={createWorkerML:r,initWorkerScriptML:function(t){t()},createWorkerWithInterceptML:function(){var t=r();t.checkEvent=function(t){return!(!t.data||!t.data.assetRequest)};var e=[];return t.addEventListenerWithIntercept=function(n){var i=function(e){t.checkEvent(e)||n(e)};return e||(e=[]),e.push({arg:n,callback:i}),t.addEventListener("message",i,!1),i},t.removeEventListenerWithIntercept=function(n){var i=function(t){if(!e)return null;for(var n=0;n<e.length;++n)if(e[n].arg===t){var i=e[n].callback;return e.splice(n,1),0===e.length&&(e=null),i}return null}(n);i&&t.removeEventListener("message",i,!1)},t.clearAllEventListenerWithIntercept=function(){if(e)for(var n=e.concat(),i=0;i<n.length;++i)t.removeEventListenerWithIntercept(n[i].arg)},t}}},80:function(t,e,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},97:function(t,e,n){"use strict";t.exports=function(t,e,n,i){for(var r=65535&t|0,s=t>>>16&65535|0,a=0;0!==n;){n-=a=n>2e3?2e3:n;do{s=s+(r=r+e[i++]|0)|0}while(--a);r%=65521,s%=65521}return r|s<<16|0}},98:function(t,e,n){"use strict";var i=function(){for(var t,e=[],n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e}();t.exports=function(t,e,n,r){var s=i,a=r+n;t^=-1;for(var o=r;o<a;o++)t=t>>>8^s[255&(t^e[o])];return-1^t}},99:function(t,e,n){"use strict";var i=n(12),r=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(t){r=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){s=!1}for(var a=new i.Buf8(256),o=0;o<256;o++)a[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;function h(t,e){if(e<65534&&(t.subarray&&s||!t.subarray&&r))return String.fromCharCode.apply(null,i.shrinkBuf(t,e));for(var n="",a=0;a<e;a++)n+=String.fromCharCode(t[a]);return n}a[254]=a[254]=1,e.string2buf=function(t){var e,n,r,s,a,o=t.length,h=0;for(s=0;s<o;s++)55296==(64512&(n=t.charCodeAt(s)))&&s+1<o&&56320==(64512&(r=t.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(r-56320),s++),h+=n<128?1:n<2048?2:n<65536?3:4;for(e=new i.Buf8(h),a=0,s=0;a<h;s++)55296==(64512&(n=t.charCodeAt(s)))&&s+1<o&&56320==(64512&(r=t.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(r-56320),s++),n<128?e[a++]=n:n<2048?(e[a++]=192|n>>>6,e[a++]=128|63&n):n<65536?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|63&n):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|63&n);return e},e.buf2binstring=function(t){return h(t,t.length)},e.binstring2buf=function(t){for(var e=new i.Buf8(t.length),n=0,r=e.length;n<r;n++)e[n]=t.charCodeAt(n);return e},e.buf2string=function(t,e){var n,i,r,s,o=e||t.length,u=new Array(2*o);for(i=0,n=0;n<o;)if((r=t[n++])<128)u[i++]=r;else if((s=a[r])>4)u[i++]=65533,n+=s-1;else{for(r&=2===s?31:3===s?15:7;s>1&&n<o;)r=r<<6|63&t[n++],s--;s>1?u[i++]=65533:r<65536?u[i++]=r:(r-=65536,u[i++]=55296|r>>10&1023,u[i++]=56320|1023&r)}return h(u,i)},e.utf8border=function(t,e){var n;for((e=e||t.length)>t.length&&(e=t.length),n=e-1;n>=0&&128==(192&t[n]);)n--;return n<0?e:0===n?e:n+a[t[n]]>e?n:e}}});
//# sourceMappingURL=MemoryLimited.min.js.map